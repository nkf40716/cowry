From blp at nicira.com  Thu Jan  1 11:07:14 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 1 Jan 2015 11:07:14 -0800
Subject: [ovs-discuss] ovs-ofctl dump-tables and dump-flows
	inconsistency?
In-Reply-To: <CABFtFwkSJQhd8Y3S+JWAyC7NavsbUHNKFUPc8wtEsQo4WED7Lg@mail.gmail.com>
References: <CABFtFwnp+-euAxe38QYnriWJdzsPCDnj5gXkWBg1FDMAE1u48A@mail.gmail.com>
 <20141229181455.GA6459@nicira.com>
 <CABFtFwkSJQhd8Y3S+JWAyC7NavsbUHNKFUPc8wtEsQo4WED7Lg@mail.gmail.com>
Message-ID: <20150101190714.GC19105@nicira.com>

You're right, there's a bug here.  I sent out what I believe to be a fix
(against master):
        http://openvswitch.org/pipermail/dev/2015-January/049994.html

On Mon, Dec 29, 2014 at 02:16:24PM -0800, Ashok Chippa wrote:
> 2.3.0
> 
> On Mon, Dec 29, 2014 at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
> 
> > On Fri, Dec 26, 2014 at 09:34:27PM -0800, Ashok Chippa wrote:
> > > root at ashok-vb:/home/achippa/firewall# ovs-ofctl dump-tables br-int
> > > OFPST_TABLE reply (xid=0x2): 254 tables
> > >   0: classifier: wild=0x3fffff, max=1000000, active=11
> > >                lookup=1170, matched=819
> > > ...
> > > ...
> > >
> > > The above output shows 11 active flows in table 0... However:
> > >
> > > root at ashok-vb:/home/achippa/firewall# ovs-ofctl dump-flows br-int
> > > NXST_FLOW reply (xid=0x4):
> > >  cookie=0x0, duration=2997.087s, table=0, n_packets=0, n_bytes=0,
> > > idle_age=2997, priority=0 actions=CONTROLLER:65535
> > > root at ashok-vb:/home/achippa/firewall#
> > >
> > > Shows only 1 flow instead of all 11 flows!!! (My packets are hitting
> > flows
> > > that I am not able to dump)...
> > >
> > > What's wrong here? Is the code assuming that the flow with
> > > actions=CONTROLLER is the last flow? Appreciate your help.
> >
> > What version of OVS are you using?
> >

From blp at nicira.com  Thu Jan  1 11:24:00 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 1 Jan 2015 11:24:00 -0800
Subject: [ovs-discuss] OVSDB initialization issues
In-Reply-To: <CAGuFQhCaFn5BdVSVmp3EQrScOVEYFBP3DwFzBazi9YH_3X3pWA@mail.gmail.com>
References: <CAGuFQhBzLDcpfmDzTALhX5ct+=OHLpYnxqKsrkOL4phxEoJOAw@mail.gmail.com>
 <CAGuFQhCaFn5BdVSVmp3EQrScOVEYFBP3DwFzBazi9YH_3X3pWA@mail.gmail.com>
Message-ID: <20150101192400.GD19105@nicira.com>

Your commands show starting ovsdb-server twice: once with the options
I'd expect, and then later without any useful options.  Why did you do
that?

Can you figure out why ovs-vsctl reports a memory error?

On Thu, Jan 01, 2015 at 12:23:14AM +0530, Shankari Vaidyalingam wrote:
> Hi Ben,
> 
> 
> Thanks for the response.
> I had executed the below commands to create the OVSDB server and to start
> the same. Can you please let me know whether I have missed any command. I
> thought "ovsdb-server" command starts the ovsdb-server. Pls correct me if
> my understanding is wrong and let me know whether there are any specific
> commands for starting it. But after executing the "'ovsdb-server"' command
> also the issue was still there.(logs below)
> 
> controller at controller-Latitude-E5440:~$ mkdir -p /usr/local/etc/openvswitch
> controller at controller-Latitude-E5440:~$ sudo ovsdb-tool create
> /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> ovsdb-tool: I/O error: create: /usr/local/etc/openvswitch/conf.db failed
> (File exists)
> controller at controller-Latitude-E5440:~$ sudo rm -rvf
> /usr/local/etc/openvswitch/conf.db
> removed ‘/usr/local/etc/openvswitch/conf.db’
> controller at controller-Latitude-E5440:~$ sudo ovsdb-tool create
> /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~$ sudo ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options
> --private-key=db:Open_vSwitch,SSL,private_key
> --certificate=db:Open_vSwitch,SSL,certificate
> --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --pidfile --detach
> controller at controller-Latitude-E5440:~$ sudo ovs-vsctl --no-wait init
> *** Error in `ovs-vsctl': munmap_chunk(): invalid pointer:
> 0x0000000000de1b0a ***
> 
> controller at controller-Latitude-E5440:~$ sudo ovsdb-server& >>>  Started
> OVSDB-server with this command
> [1] 23618
> controller at controller-Latitude-E5440:~$
> 2014-12-31T08:29:48Z|00001|ovsdb_server|INFO|ovsdb-server (Open vSwitch)
> 2.3.1
> 
> controller at controller-Latitude-E5440:~$
> 2014-12-31T08:29:58Z|00002|memory|INFO|2460 kB peak resident set size after
> 10.0 seconds
> 
> controller at controller-Latitude-E5440:~$ ps -eaf | grep ovsdb-server
> root     14228 18126  0 12:24 pts/1    00:00:00 sudo ovsdb-server
> root     14229 14228  0 12:24 pts/1    00:00:00 ovsdb-server  >>>> Here it
> shows ovsdb-server is running
> control+ 14281 14230  0 12:25 pts/4    00:00:00 grep --color=auto
> ovsdb-server
> 
> 
> Regards
> Shankari
> 
> On Wed, Dec 31, 2014 at 8:13 PM, Shankari Vaidyalingam <
> shankari.v.2014 at gmail.com> wrote:
> 
> > Hi
> >
> > I'm facing the below error while trying to initialize the database after
> > starting, with ovs-vsctl.
> > Please find the logs below:
> >
> > OVS version - 2.3.0
> >
> > controller at controller-Latitude-E5440:~$ sudo ovs-vsctl --no-wait init
> > [sudo] password for controller:
> > ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> > connection failed (Connection refused)
> > controller at controller-Latitude-E5440:~$ ps -eaf | grep ovsdb-server
> > root     14228 18126  0 12:24 pts/1    00:00:00 sudo ovsdb-server
> > root     14229 14228  0 12:24 pts/1    00:00:00 ovsdb-server
> > control+ 14281 14230  0 12:25 pts/4    00:00:00 grep --color=auto
> > ovsdb-server
> > controller at controller-Latitude-E5440:~$ ovs-vswitch --version
> > No command 'ovs-vswitch' found, did you mean:
> >  Command 'ovs-vswitchd' from package 'openvswitch-switch' (main)
> > ovs-vswitch: command not found
> > controller at controller-Latitude-E5440:~$ ovs-vswitchd --version
> > ovs-vswitchd (Open vSwitch) 2.3.0
> > Compiled Dec 31 2014 12:16:37
> > OpenFlow versions 0x1:0x1
> > controller at controller-Latitude-E5440:~$
> >
> > Before the above steps I executed the below commands:
> >
> >
> > controller at controller-Latitude-E5440:~$ sudo /sbin/modprobe openvswitch
> > controller at controller-Latitude-E5440:~$ /sbin/lsmod | grep openvswitch
> > openvswitch            75931  0
> > gre                    13796  1 openvswitch
> > vxlan                  37619  1 openvswitch
> > libcrc32c              12644  1 openvswitch
> > controller at controller-Latitude-E5440:~$ mkdir -p
> > /usr/local/etc/openvswitch
> > controller at controller-Latitude-E5440:~$ sudo ovsdb-tool create
> > /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> > ovsdb-tool: I/O error: create: /usr/local/etc/openvswitch/conf.db failed
> > (File exists)
> > controller at controller-Latitude-E5440:~$ sudo rm -rvf
> > /usr/local/etc/openvswitch/conf.db
> > removed ‘/usr/local/etc/openvswitch/conf.db’
> > controller at controller-Latitude-E5440:~$ sudo ovsdb-tool create
> > /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> > controller at controller-Latitude-E5440:~$ sudo ovsdb-server
> > --remote=punix:/usr/local/var/run/openvswitch/db.sock
> > --remote=db:Open_vSwitch,Open_vSwitch,manager_options
> > --private-key=db:Open_vSwitch,SSL,private_key
> > --certificate=db:Open_vSwitch,SSL,certificate
> > --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --pidfile --detach
> > controller at controller-Latitude-E5440:~$ sudo ovs-vsctl --no-wait init
> > *** Error in `ovs-vsctl': munmap_chunk(): invalid pointer:
> > 0x0000000000de1b0a ***
> > controller at controller-Latitude-E5440:~$ cd ..
> > controller at controller-Latitude-E5440:~$ sudo ovs-vsctl --no-wait init
> > ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> > connection failed (Connection refused)
> > controller at controller-Latitude-E5440:~$ sudo ovsdb-server&
> > [1] 23618
> > controller at controller-Latitude-E5440:~$
> > 2014-12-31T08:29:48Z|00001|ovsdb_server|INFO|ovsdb-server (Open vSwitch)
> > 2.3.1
> >
> > controller at controller-Latitude-E5440:~$
> > 2014-12-31T08:29:58Z|00002|memory|INFO|2460 kB peak resident set size after
> > 10.0 seconds
> >
> >
> > Please let me know how to resolve this issue
> >
> > Regards
> > Shankari.V
> >

> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss


From a.n.chippa at gmail.com  Thu Jan  1 22:22:29 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Thu, 1 Jan 2015 22:22:29 -0800
Subject: [ovs-discuss] ovs-ofctl dump-tables and dump-flows
	inconsistency?
In-Reply-To: <20150101190714.GC19105@nicira.com>
References: <CABFtFwnp+-euAxe38QYnriWJdzsPCDnj5gXkWBg1FDMAE1u48A@mail.gmail.com>
 <20141229181455.GA6459@nicira.com>
 <CABFtFwkSJQhd8Y3S+JWAyC7NavsbUHNKFUPc8wtEsQo4WED7Lg@mail.gmail.com>
 <20150101190714.GC19105@nicira.com>
Message-ID: <CABFtFwnLzF-SYjzokspwJGT2P4TSSS87qhM8v8qmT_=BQGvyWw@mail.gmail.com>

Thank you for fixing it. How can I get the fix? Appreciate it.



On Thu, Jan 1, 2015 at 11:07 AM, Ben Pfaff <blp at nicira.com> wrote:

> You're right, there's a bug here.  I sent out what I believe to be a fix
> (against master):
>         http://openvswitch.org/pipermail/dev/2015-January/049994.html
>
> On Mon, Dec 29, 2014 at 02:16:24PM -0800, Ashok Chippa wrote:
> > 2.3.0
> >
> > On Mon, Dec 29, 2014 at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
> >
> > > On Fri, Dec 26, 2014 at 09:34:27PM -0800, Ashok Chippa wrote:
> > > > root at ashok-vb:/home/achippa/firewall# ovs-ofctl dump-tables br-int
> > > > OFPST_TABLE reply (xid=0x2): 254 tables
> > > >   0: classifier: wild=0x3fffff, max=1000000, active=11
> > > >                lookup=1170, matched=819
> > > > ...
> > > > ...
> > > >
> > > > The above output shows 11 active flows in table 0... However:
> > > >
> > > > root at ashok-vb:/home/achippa/firewall# ovs-ofctl dump-flows br-int
> > > > NXST_FLOW reply (xid=0x4):
> > > >  cookie=0x0, duration=2997.087s, table=0, n_packets=0, n_bytes=0,
> > > > idle_age=2997, priority=0 actions=CONTROLLER:65535
> > > > root at ashok-vb:/home/achippa/firewall#
> > > >
> > > > Shows only 1 flow instead of all 11 flows!!! (My packets are hitting
> > > flows
> > > > that I am not able to dump)...
> > > >
> > > > What's wrong here? Is the code assuming that the flow with
> > > > actions=CONTROLLER is the last flow? Appreciate your help.
> > >
> > > What version of OVS are you using?
> > >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150101/22f2cedd/attachment.html>

From kevin.traynor at intel.com  Fri Jan  2 05:41:35 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Fri, 2 Jan 2015 13:41:35 +0000
Subject: [ovs-discuss] Intel DPDK testpmd application issues
In-Reply-To: <OF7EFDDDEC.9343E5B2-ON65257DB6.0042E329-65257DB6.00435085@tcs.com>
References: <BC0FEEC7D7650749874CEC11314A88F730661ECB@IRSMSX104.ger.corp.intel.com>, 
 <OF6BFBE5C1.27EFB109-ON65257DB3.003BB1EC-65257DB3.003FEB88@tcs.com>
 <OF7EFDDDEC.9343E5B2-ON65257DB6.0042E329-65257DB6.00435085@tcs.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F7306656A0@IRSMSX104.ger.corp.intel.com>

Hi Hiteshi,

DPDK only detected 1 core, so makes sense that it would reject a coremask of 0xf. I've only tested with QEMU but VirtualBox may only be letting 1 core be emulated - in that case you could try without the --nb-cores flag. However, it would probably affect the performance you will see.

You might find more information on the DPDK mailing list regarding DPDK and VirtualBox, or if not that would probably be the best place to ask as someone may have hit this already and it's not OVS specific.

Thanks,
Kevin.

From: Hiteshi Kalra [mailto:hiteshi.kalra at tcs.com]
Sent: Monday, December 22, 2014 12:15 PM
To: Traynor, Kevin
Cc: discuss at openvswitch.org
Subject: RE: [ovs-discuss] Intel DPDK testpmd application issues

Thanks kevin for helping us.

but i have got following error in changing value of C, even we can not give any value of C other than 1:

root at saloni-VirtualBox:/usr/src/dpdk-1.7.1/x86_64-native-linuxapp-gcc/build/app/test-pmd#<mailto:root at saloni-VirtualBox:/usr/src/dpdk-1.7.1/x86_64-native-linuxapp-gcc/build/app/test-pmd#> ./testpmd -c 0xf -n4 -- -i --portmask=0x1 --nb-cores=2
EAL: Detected lcore 0 as core 0 on socket 0
EAL: Support maximum 64 logical core(s) by configuration.
EAL: Detected 1 lcore(s)
EAL: lcore 1 unavailable
EAL: invalid coremask

Usage: ./testpmd -c COREMASK -n NUM [-m NB] [-r NUM] [-b <domain:bus:devid.func>][--proc-type primary|secondary|auto]

EAL options:
  -c COREMASK  : A hexadecimal bitmask of cores to run on
  -n NUM       : Number of memory channels
  -v           : Display version information on startup
  -d LIB.so    : add driver (can be used multiple times)
  -m MB        : memory to allocate (see also --socket-mem)
  -r NUM       : force number of memory ranks (don't detect)
  --xen-dom0 : support application running on Xen Domain0 without hugetlbfs
  --syslog     : set syslog facility
  --socket-mem : memory to allocate on specific
                 sockets (use comma separated values)
  --huge-dir   : directory where hugetlbfs is mounted
  --proc-type  : type of this process
  --file-prefix: prefix for hugepage filenames

Thanks
Hiteshi

-----"Traynor, Kevin" <kevin.traynor at intel.com<mailto:kevin.traynor at intel.com>> wrote: -----
To: Hiteshi Kalra <hiteshi.kalra at tcs.com<mailto:hiteshi.kalra at tcs.com>>, "discuss at openvswitch.org<mailto:discuss at openvswitch.org>" <discuss at openvswitch.org<mailto:discuss at openvswitch.org>>
From: "Traynor, Kevin" <kevin.traynor at intel.com<mailto:kevin.traynor at intel.com>>
Date: 12/19/2014 11:06PM
Subject: RE: [ovs-discuss] Intel DPDK testpmd application issues
The core mask is set for 1 core with -c 0x1, but --nb-cores=2 means that the app is to use 2 fwding cores. Try changing to -c 0xf

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Hiteshi Kalra
Sent: Friday, December 19, 2014 11:38 AM
To: discuss at openvswitch.org<mailto:discuss at openvswitch.org>
Subject: [ovs-discuss] Intel DPDK testpmd application issues

Hi Team,

We are running OVS with Intel DPDK Sample applications.
We have successfully run helloworld application as specified in Intel getting started guide.pdf

But We are getting some issues in running testpmd application as speified in (http://www.intel.in/content/dam/www/public/us/en/documents/guides/intel-dpdk-testpmd-application-user-guide.pdf).

We have used following command for it :

sudo ./testpmd -c 0x1 -n 4 -- -i --portmask=0x1 --nb-cores=2

EAL: Requesting 1238 pages of size 2MB from socket 0
EAL: TSC frequency is ~3178599 KHz
EAL: WARNING: cpu flags constant_tsc=yes nonstop_tsc=no -> using unreliable clock cycles !
EAL: Master core 0 is ready (tid=888ca800)
EAL: PCI device 0000:00:03.0 on NUMA socket -1
EAL:   probe driver: 8086:100e rte_em_pmd
EAL:   PCI memory mapped at 0x7fde88874000
PANIC in main():
Empty set of forwarding logical cores - check the core mask supplied in the command parameters
5: [./testpmd() [0x4240a5]]
4: [/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7fde879fb76d]]
3: [./testpmd(main+0x4f2) [0x423df2]]
2: [./testpmd(__rte_panic+0xc1) [0x42379a]]
1: [./testpmd(rte_dump_stack+0x23) [0x486393]]


Can anyone please help me in resloving error?

Thanks
Hiteshi

=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain
confidential or privileged information. If you are
not the intended recipient, any dissemination, use,
review, distribution, printing or copying of the
information contained in this e-mail message
and/or attachments to it are strictly prohibited. If
you have received this communication in error,
please notify us by reply e-mail or telephone and
immediately and permanently delete the message
and any attachments. Thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150102/464b812c/attachment.html>

From davidjoshuaevans at gmail.com  Fri Jan  2 08:56:09 2015
From: davidjoshuaevans at gmail.com (David Evans)
Date: Fri, 02 Jan 2015 10:56:09 -0600
Subject: [ovs-discuss] Mirror through GRE on DPDK ports not forwarding.
In-Reply-To: <CALnjE+qum04cALoVASrcJ-gDJDnR5cJfZrSfExom2pgfVb-xxw@mail.gmail.com>
References: <D0B5F130.2182E%davidjoshuaevans@gmail.com>
 <CALnjE+qum04cALoVASrcJ-gDJDnR5cJfZrSfExom2pgfVb-xxw@mail.gmail.com>
Message-ID: <D0CC273D.21B7B%davidjoshuaevans@gmail.com>

Hi Pravin,
Thanks for getting back to me.

./ovs-appctl dpctl/dump-flows

recirc_id(0),in_port(2),eth(src=00:00:00:00:00:00,dst=00:00:00:00:00:00),et
h_type(0/0xffff), packets:3, bytes:1151, used:9.084s, actions:drop
recirc_id(0),in_port(3),eth(src=00:18:82:56:0e:b3,dst=28:6e:d4:f1:47:7b),et
h_type(0x0800),ipv4(src=10.180.23.20/2.0.0.0,tos=0/0x3,frag=no),
packets:2, bytes:581, used:9.084s,
actions:1,tnl_push(tnl_port(5),header(size=38,type=3,eth(dst=90:e2:ba:38:ad
:3c,src=00:e0:ed:1f:e4:e9,dl_type=0x0800),ipv4(src=172.168.1.1,dst=172.168.
1.3,proto=47,tos=0,ttl=64,frag=0x40),gre((flags=0x0,proto=0x6558))),out_por
t(2))
recirc_id(0),in_port(3),eth(src=00:18:82:56:0e:b3,dst=28:6e:d4:f1:47:7b),et
h_type(0x0800),ipv4(src=200.49.182.82/4.0.0.0,tos=0/0x3,frag=no),
packets:0, bytes:0, used:never,
actions:1,tnl_push(tnl_port(5),header(size=38,type=3,eth(dst=90:e2:ba:38:ad
:3c,src=00:e0:ed:1f:e4:e9,dl_type=0x0800),ipv4(src=172.168.1.1,dst=172.168.
1.3,proto=47,tos=0,ttl=64,frag=0x40),gre((flags=0x0,proto=0x6558))),out_por
t(2))


I¹m not sure how to interpret the above. :(

Warmest Regards & Thanks,
Dave.


On 12/29/14, 12:58 PM, "Pravin Shelar" <pshelar at nicira.com> wrote:

>On Tue, Dec 16, 2014 at 12:24 PM, David Evans
><davidjoshuaevans at gmail.com> wrote:
>> Hi All,
>>
>> I¹m setting up a GRE tunnel on an ovs bridge. (trunk ovs and dpdk 1.7.1)
>> I have two bridges with one DPDK interface each.
>> Traffic generator -> DPDK0 -> B0(bridge) -> GRE0 (172.168.1.4)
>> B1 (172.168.1.1) -> DPDK1 -> host 172.168.1.3 (GRE termination)
>>
>> When I set up GRE as below and push packets in DPDK0 , arp requests for
>>who
>> is 172.168.1.3 come out DPDK1 and I see them on the remote host OK So
>>far.
>> And I can see replies coming back to DPDK1 from the remote host.
>>
>> But the original packets to be mirrored don¹t make it through the
>>tunnel.
>>
>> Some setup features follow: (routes, gre port setup, etc)
>>
>> ./ovs-vsctl add-port b0 gre0 -- set Interface gre0 type=gre
>> options:remote_ip=172.168.1.3 options:local_ip=172.168.1.4 -- --id=@p
>>get
>> port gre0 -- --id=@m create mirror name=m0 select-all=true
>>output-port=@p --
>> set bridge b0 mirrors=@m
>>
>
>It should work.  Can you post datapath flows while you are trying to
>mirror traffic?
>`ovs-appctl  dpctl/dump-flows`
>
>
>> ifcoonfig b1 172.168.1.1 netmask 255.255.255.0
>>
>> [root at localhost utilities]# route -n
>> Kernel IP routing table
>> Destination     Gateway         Genmask         Flags Metric Ref    Use
>> Iface
>> 0.0.0.0         10.218.160.1    0.0.0.0         UG    1024   0        0
>> ens2f1
>> 10.218.160.0    0.0.0.0         255.255.240.0   U     0      0        0
>> ens2f1
>> 172.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0
>>b1
>>
>> [root at localhost utilities]# ./ovs-appctl ovs/route/show
>> Route Table:
>> Cached: 10.218.169.14/32 dev ens2f1
>> Cached: 127.0.0.1/32 dev lo
>> Cached: 172.168.1.1/32 dev b1
>> Cached: 192.168.122.1/32 dev virbr0
>> Cached: 172.168.1.0/24 dev b1
>> Cached: 10.218.160.0/20 dev ens2f1
>> Cached: 127.0.0.0/8 dev lo
>> Cached: 0.0.0.0/0 dev ens2f1 GW 10.218.160.1
>>
>> afbc043c-ec1a-4050-a1c0-8f0b669f93e6
>>     Bridge "b0"
>>         Port "dpdk0"
>>             Interface "dpdk0"
>>                 type: dpdk
>>         Port "gre0"
>>             Interface "gre0"
>>                 type: gre
>>                 options: {local_ip="172.168.1.4",
>>remote_ip="172.168.1.3"}
>>         Port "b0"
>>             Interface "b0"
>>                 type: internal
>>     Bridge "b1"
>>         Port "dpdk1"
>>             Interface "dpdk1"
>>                 type: dpdk
>>         Port "b1"
>>             Interface "b1"
>>                 type: internal
>>
>> [root at localhost utilities]# ./ovs-ofctl show b0
>> OFPT_FEATURES_REPLY (xid=0x2): dpid:000000e0ed1fe4e8
>> n_tables:254, n_buffers:256
>> capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
>> actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src
>> mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
>>  1(dpdk0): addr:00:e0:ed:1f:e4:e8
>>      config:     0
>>      state:      0
>>      current:    10GB-FD
>>      supported:  100MB-FD 1GB-FD 10GB-FD FIBER AUTO_PAUSE
>>      speed: 10000 Mbps now, 10000 Mbps max
>>  2(gre0): addr:8e:f5:f5:95:ac:25
>>      config:     0
>>      state:      0
>>      speed: 0 Mbps now, 0 Mbps max
>>  LOCAL(b0): addr:00:e0:ed:1f:e4:e8
>>      config:     PORT_DOWN
>>      state:      LINK_DOWN
>>      current:    10MB-FD COPPER
>>      speed: 10 Mbps now, 0 Mbps max
>> OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0
>> [root at localhost utilities]# ./ovs-ofctl show b1
>> OFPT_FEATURES_REPLY (xid=0x2): dpid:000000e0ed1fe4e9
>> n_tables:254, n_buffers:256
>> capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
>> actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src
>> mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
>>  1(dpdk1): addr:00:e0:ed:1f:e4:e9
>>      config:     0
>>      state:      0
>>      current:    10GB-FD
>>      supported:  100MB-FD 1GB-FD 10GB-FD FIBER AUTO_PAUSE
>>      speed: 10000 Mbps now, 10000 Mbps max
>>  LOCAL(b1): addr:00:e0:ed:1f:e4:e9
>>      config:     0
>>      state:      0
>>      current:    10MB-FD COPPER
>>      speed: 10 Mbps now, 0 Mbps max
>> OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0
>>
>>
>> _______________________________________________
>> discuss mailing list
>> discuss at openvswitch.org
>> http://openvswitch.org/mailman/listinfo/discuss
>>



From shankari.v.2014 at gmail.com  Fri Jan  2 10:46:08 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Sat, 3 Jan 2015 00:16:08 +0530
Subject: [ovs-discuss] Query on LLDP support added as a patch
Message-ID: <CAGuFQhBsPdWOfp5tkPsEUSx5TnFoHDjuFp8e8duS528hWswmDg@mail.gmail.com>

Hi

I happened to read a mail thread in the OVS discussion list that the basic
LLDP support has been added to the OVS code as a part of the
support to the Auto-Attach feature. (mail dtd
openvswitch.org/pipermail/dev/2014-October/046652.html)
But I'm not able to find the files in the patchset in the OVS codebase
Pls let me know in which release of OVS this patch is planned to be merged?

Regards
Shankari.V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150103/ea646740/attachment.html>

From blp at nicira.com  Fri Jan  2 11:09:52 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 2 Jan 2015 11:09:52 -0800
Subject: [ovs-discuss] Query on LLDP support added as a patch
In-Reply-To: <CAGuFQhBsPdWOfp5tkPsEUSx5TnFoHDjuFp8e8duS528hWswmDg@mail.gmail.com>
References: <CAGuFQhBsPdWOfp5tkPsEUSx5TnFoHDjuFp8e8duS528hWswmDg@mail.gmail.com>
Message-ID: <20150102190952.GC29205@nicira.com>

On Sat, Jan 03, 2015 at 12:16:08AM +0530, Shankari Vaidyalingam wrote:
> I happened to read a mail thread in the OVS discussion list that the basic
> LLDP support has been added to the OVS code as a part of the
> support to the Auto-Attach feature. (mail dtd
> openvswitch.org/pipermail/dev/2014-October/046652.html)
> But I'm not able to find the files in the patchset in the OVS codebase
> Pls let me know in which release of OVS this patch is planned to be merged?

It will likely be in OVS 2.4.

From alexw at nicira.com  Fri Jan  2 18:40:56 2015
From: alexw at nicira.com (Alex Wang)
Date: Fri, 2 Jan 2015 18:40:56 -0800
Subject: [ovs-discuss] Failure building ovs on Freebsd 9.3
Message-ID: <CAArS4XUtuETQ3GwUCsQmMGwgRLUqXZu45D0MfhU6M6sNkD2ewA@mail.gmail.com>

Hey Yamamoto,

Having trouble building ovs on my freebsd 9.3 release (VM).

I installed 'gmake, automake, python27, py27-xml, openssl', and the
clang version is: 3.4.1 (I had same issue with gcc as well).

When I execute `./boot.sh ; ./configure; gmake -j32` on ovs master,
I failed with

*/usr/include/netinet/ip6.h:82: error: field 'ip6_src' has incomplete type*

*/usr/include/netinet/ip6.h:83: error: field 'ip6_dst' has incomplete type*
Seems to me, there is something wrong with the POSIX macro tests
which caused the /usr/include/netinet6/in6.h not included.

Have you encountered similar issue?~  Is there any special
configuration (not included in INSTALL.NetBSD) for make and make
check ovs?


Thanks,
Alex Wang,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150102/fc9bfbac/attachment.html>

From tobias.brunner at vshn.ch  Mon Jan  5 02:10:02 2015
From: tobias.brunner at vshn.ch (Tobias Brunner)
Date: Mon, 05 Jan 2015 11:10:02 +0100
Subject: [ovs-discuss] SPF openvswitch mailing-list
In-Reply-To: <20141231202924.GH28035@nicira.com>
References: <1984160.UC5D9oriXV@waiotapu> <20141231202924.GH28035@nicira.com>
Message-ID: <7895567.Ymi56lvF77@waiotapu>

Hi,

> Justin, do you have any idea about this?  I wonder whether it explains
> any of the weirdness that some have seen around list subscription
> behavior.

Just add an AAAA (2600:3c00::f03c:91ff:fe6e:bdf7) record to 
archives.nicira.com and the SPF record should be correct.

Cheers,
Tobias

-- 
VSHN AG
Tobias Brunner
Linux and Network Engineer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: This is a digitally signed message part.
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/64dd3bc2/attachment.sig>

From tobias.brunner at vshn.ch  Mon Jan  5 02:19:36 2015
From: tobias.brunner at vshn.ch (Tobias Brunner)
Date: Mon, 05 Jan 2015 11:19:36 +0100
Subject: [ovs-discuss] IPv6 dadfailed
In-Reply-To: <2391029.WkG2ybOBvo@waiotapu>
References: <2391029.WkG2ybOBvo@waiotapu>
Message-ID: <5640882.HgKeoxWuHX@waiotapu>

Hi all,

> I'm trying to get IPv6 traffic to flow over the Open vSwitch, but it always
> fails at assigning an IPv6 address (this is a VM, connected to Open
> vSwitch):
> 
> 2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qlen 1000
>     inet6 fe80::5054:ff:fed6:46a3/64 scope link tentative dadfailed
>        valid_lft forever preferred_lft forever
> 
> When disabling dad, IPv6 communication works:
> 
> sysctl -w net.ipv6.conf.eth0.accept_dad=0
> 
> 2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qlen 1000
>     inet6 fe80::5054:ff:fed6:46a3/64 scope link
>        valid_lft forever preferred_lft forever
> 
> ping6 google.ch
> PING google.ch(mil01s19-in-x1f.1e100.net) 56 data bytes
> 64 bytes from mil01s19-in-x1f.1e100.net: icmp_seq=1 ttl=58 time=6.22 ms
> 64 bytes from mil01s19-in-x1f.1e100.net: icmp_seq=2 ttl=58 time=5.16 ms
> 
> The VM and the host are both running Ubuntu Server 14.04.1 LTS. Open vSwitch
> is at version 2.0.2. On the host only libvirt and kvm is used, nothing
> more...
> 
> Any ideas why dad does not work or how I can debug this thing?

I just wanted to ask if someone has some helping hints to debug this issue?

Cheers,
Tobias

-- 
VSHN AG
Tobias Brunner
Linux and Network Engineer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: This is a digitally signed message part.
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/8d5cea5c/attachment.sig>

From sharmila.radhakrishnan at intel.com  Mon Jan  5 02:41:41 2015
From: sharmila.radhakrishnan at intel.com (Radhakrishnan, Sharmila)
Date: Mon, 5 Jan 2015 10:41:41 +0000
Subject: [ovs-discuss] Error adding port to ovs-dpdk build
Message-ID: <1BA01C3192A665469272B2597052DDFF56E58057@BGSMSX104.gar.corp.intel.com>

Hi,
I have installed OVS with DPDK from github. I tried adding the port. Iam getting cannot allocate memory error for the port.


OVS version:

[cid:image005.png at 01D02901.ED7B20C0]

Kernel Version:
[cid:image006.png at 01D02901.ED7B20C0]

Command used to add the port:

[cid:image002.png at 01D028FF.894A8C00]

[cid:image001.png at 01D028FB.8380E7F0]

Hugepages setting:


[cid:image003.png at 01D028FF.894A8C00]

The /var/log/messages had the following log:
[cid:image004.png at 01D028FF.F90043A0]

What is that Iam missing?

Thanks,
Sharmila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 10890 bytes
Desc: image001.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 5086 bytes
Desc: image002.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 16158 bytes
Desc: image003.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 8419 bytes
Desc: image004.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 4026 bytes
Desc: image005.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 6199 bytes
Desc: image006.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/c176f9ff/attachment-0011.png>

From scott.lowe at scottlowe.org  Mon Jan  5 07:38:37 2015
From: scott.lowe at scottlowe.org (Scott Lowe)
Date: Mon, 5 Jan 2015 08:38:37 -0700
Subject: [ovs-discuss] error when starting the vm in virt-manger gui.
In-Reply-To: <CAGnqNB=HaU-nOCbw1veA1d92WMom2GU7kcbLRfe+4PqLJjPY9w@mail.gmail.com>
References: <CAGnqNB=HaU-nOCbw1veA1d92WMom2GU7kcbLRfe+4PqLJjPY9w@mail.gmail.com>
Message-ID: <E2D73660-53A8-4343-919E-DB1DB434624A@scottlowe.org>

jayakeerthi k <jayakeerthik82 at gmail.com> wrote:

> hi all, i installed openvswitch and qemu-kvm . in ovs i created the bridge
> and while starting the vm i am specifying the bridge i created as a shared
> device but when i try to run the vm . i getting the error as fallows
> 
>  Error starting domain: Unable to add bridge nbr port vnet0: Operation not
>  supported


JK, can you share any details regarding the configuration of the guest VM?
In particular, seeing the libvirt domain XML (which you can get by running
"virsh dumpxml <guest VM name>") would be helpful. It sounds to me like
perhaps the guest's networking is misconfigured.

-- 
Scott


From shettyg at nicira.com  Mon Jan  5 08:31:51 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Mon, 5 Jan 2015 08:31:51 -0800
Subject: [ovs-discuss] IPv6 dadfailed
In-Reply-To: <2391029.WkG2ybOBvo@waiotapu>
References: <2391029.WkG2ybOBvo@waiotapu>
Message-ID: <CAHbON5ryJYHCM0iZ+OmWv_cbj94RT8taZRvTr6P7tQt2yaR=gQ@mail.gmail.com>

On Fri, Dec 12, 2014 at 5:08 AM, Tobias Brunner <tobias.brunner at vshn.ch> wrote:
> Hi list
>
> I'm trying to get IPv6 traffic to flow over the Open vSwitch, but it always
> fails at assigning an IPv6 address (this is a VM, connected to Open vSwitch):
>
> 2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qlen 1000
>     inet6 fe80::5054:ff:fed6:46a3/64 scope link tentative dadfailed
>        valid_lft forever preferred_lft forever
>
> When disabling dad, IPv6 communication works:
>
> sysctl -w net.ipv6.conf.eth0.accept_dad=0
>
> 2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qlen 1000
>     inet6 fe80::5054:ff:fed6:46a3/64 scope link
>        valid_lft forever preferred_lft forever
>
> ping6 google.ch
> PING google.ch(mil01s19-in-x1f.1e100.net) 56 data bytes
> 64 bytes from mil01s19-in-x1f.1e100.net: icmp_seq=1 ttl=58 time=6.22 ms
> 64 bytes from mil01s19-in-x1f.1e100.net: icmp_seq=2 ttl=58 time=5.16 ms
>
> The VM and the host are both running Ubuntu Server 14.04.1 LTS. Open vSwitch
> is at version 2.0.2. On the host only libvirt and kvm is used, nothing more...
>
> Any ideas why dad does not work or how I can debug this thing?
I don't use IPv6, so I don't know the specifics, but here are some
details on how you can debug it.

* Assuming you have just one VM, on your hypervisor, a 'ovs-vsctl
show' will show you the name of the virtual interface name (vif). So
the first thing to do is put a tcpump on that interface to see if any
traffic is coming through. (If there are many VMs, you will have to
look at libvirt's xml file to get hints on vif name.)

* Assuming, you see some traffic on vif, next thing to do is, run
'ovs-dpctl -m dump-flows'. This will show all the flows in the kernel.
If it is a lot of flows, it may be a better idea, to limit OVS use to
just that one VM, so that you know that all the flows being shown is
just that VM. If there is no bug, you may see that there is some flow
which shows as 'drop'. Then you know that there is some problem there.

* If there is a bug, it is also likely that there is some log message
in '/var/log/openvswitch/ovs-vswitchd.log' which shows an entry for
every packet loss.





>
> Cheers,
> Tobias
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss

From kevin.traynor at intel.com  Mon Jan  5 10:23:15 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Mon, 5 Jan 2015 18:23:15 +0000
Subject: [ovs-discuss] Error adding port to ovs-dpdk build
In-Reply-To: <1BA01C3192A665469272B2597052DDFF56E58057@BGSMSX104.gar.corp.intel.com>
References: <1BA01C3192A665469272B2597052DDFF56E58057@BGSMSX104.gar.corp.intel.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F730666CFB@IRSMSX104.ger.corp.intel.com>

Hi Sharmila,

Can you show the command line you run ovs-vswitchd with and the EAL screen prints regarding "Setting up memory...". Also the command you used to add the bridge. I'm assuming you are using DPDK 1.7.1?

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Radhakrishnan, Sharmila
Sent: Monday, January 5, 2015 10:42 AM
To: bugs at openvswitch.org
Subject: [ovs-discuss] Error adding port to ovs-dpdk build

Hi,
I have installed OVS with DPDK from github. I tried adding the port. Iam getting cannot allocate memory error for the port.


OVS version:

[cid:image005.png at 01D028F5.67ECB8D0]

Kernel Version:
[cid:image006.png at 01D028F5.67ECB8D0]

Command used to add the port:

[cid:image007.png at 01D028F5.67ECB8D0]

[cid:image008.png at 01D028F5.67ECB8D0]

Hugepages setting:


[cid:image009.png at 01D028F5.67ECB8D0]

The /var/log/messages had the following log:
[cid:image010.png at 01D028F5.67ECB8D0]

What is that Iam missing?

Thanks,
Sharmila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 4026 bytes
Desc: image005.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 6199 bytes
Desc: image006.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 5086 bytes
Desc: image007.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 10890 bytes
Desc: image008.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image009.png
Type: image/png
Size: 16158 bytes
Desc: image009.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image010.png
Type: image/png
Size: 8419 bytes
Desc: image010.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/0285970f/attachment-0011.png>

From lists at mitaka-g.net  Mon Jan  5 12:51:32 2015
From: lists at mitaka-g.net (Dimitar Ianakiev)
Date: Mon, 05 Jan 2015 22:51:32 +0200
Subject: [ovs-discuss] QinQ support
Message-ID: <54AAF954.5040902@mitaka-g.net>

Hello,

We are using openvswitch for some time and we are trying to implement
"private vlans" for our customers. Each customer should have vlan(s)
between his/her virtual instances. The problem with 802.1q vlans is that
we are expecting more than 4094 clients per openvswitch instance and the
vlan limit is 4096. We are considering QinQ(802.1ad).

My question is if ovs supports QinQ and how this can be achieved ?
Please propose other approach if this is not a good solution to the problem.

Regards
Dimitar Ianakiev

From yuliangl at usc.edu  Mon Jan  5 15:15:46 2015
From: yuliangl at usc.edu (Yuliang Li)
Date: Mon, 5 Jan 2015 15:15:46 -0800
Subject: [ovs-discuss] Packet counter
Message-ID: <CAHHgZAP8mwQEP2jQ86XJtJKwQts0vF21e_Jdkt_io=ygESwFtg@mail.gmail.com>

Hi all,

I compare the counter of OVS and the number of packets seen by tcpdump.
They do not match, counter of OVS is larger. Could anyone help me
understand this?

Thanks,
Yuliang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/3b2403b9/attachment.html>

From shankari.v.2014 at gmail.com  Mon Jan  5 16:11:07 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Tue, 6 Jan 2015 05:41:07 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
	without DPDK
Message-ID: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>

Hi,

I tried executing the steps for initializing the OVSDB-server and the OVS
given in the below link:

networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/

I'm using Ubuntu Trusty tahr, OVS version 2.3.1

I was able to get the OVS working for the build which I compiled without
DPDK.
But with DPDK_BUILD configured in the Makefile the build produced "Database
connection refused" error and the OVS was not getting started because of
this error. Kindly help me in resolving this issue.

Enclosed the logs separately for "without DPDK" build and for "With DPDK"
build

Regards,
Shankari.V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/f1efa01a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: with_dpdk_given_in_build
Type: application/octet-stream
Size: 85146 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/f1efa01a/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: without_DPDK_in_build
Type: application/octet-stream
Size: 19163 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/f1efa01a/attachment-0003.obj>

From thomasfherbert at gmail.com  Mon Jan  5 16:30:26 2015
From: thomasfherbert at gmail.com (Thomas F Herbert)
Date: Mon, 05 Jan 2015 19:30:26 -0500
Subject: [ovs-discuss] QinQ support
In-Reply-To: <54AAF954.5040902@mitaka-g.net>
References: <54AAF954.5040902@mitaka-g.net>
Message-ID: <54AB2CA2.8060700@gmail.com>

Dimitar,

Open vSwitch does not currently support 802.1ad. I have submitted a 
patch for 802.1ad and I am in the process of submitting a new version. 
However, 802.1ad will not solve the namespace problem. Perhaps you are 
thinking of 802.1ah?

--Tom

On 1/5/15 3:51 PM, Dimitar Ianakiev wrote:
> Hello,
>
> We are using openvswitch for some time and we are trying to implement
> "private vlans" for our customers. Each customer should have vlan(s)
> between his/her virtual instances. The problem with 802.1q vlans is that
> we are expecting more than 4094 clients per openvswitch instance and the
> vlan limit is 4096. We are considering QinQ(802.1ad).
>
> My question is if ovs supports QinQ and how this can be achieved ?
> Please propose other approach if this is not a good solution to the problem.
>
> Regards
> Dimitar Ianakiev
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss


-- 
Thomas F. Herbert


From jesse at nicira.com  Mon Jan  5 18:00:13 2015
From: jesse at nicira.com (Jesse Gross)
Date: Mon, 5 Jan 2015 21:00:13 -0500
Subject: [ovs-discuss] Packet counter
In-Reply-To: <CAHHgZAP8mwQEP2jQ86XJtJKwQts0vF21e_Jdkt_io=ygESwFtg@mail.gmail.com>
References: <CAHHgZAP8mwQEP2jQ86XJtJKwQts0vF21e_Jdkt_io=ygESwFtg@mail.gmail.com>
Message-ID: <CAEP_g=8W_5A2zqy8p72YT-FvCQXywZBh7ncK2ejTbAYCXXrjHw@mail.gmail.com>

On Mon, Jan 5, 2015 at 6:15 PM, Yuliang Li <yuliangl at usc.edu> wrote:
> Hi all,
>
> I compare the counter of OVS and the number of packets seen by tcpdump. They
> do not match, counter of OVS is larger. Could anyone help me understand
> this?

What is the setup and what numbers do you see?

From scott.lowe at scottlowe.org  Mon Jan  5 21:18:06 2015
From: scott.lowe at scottlowe.org (Scott Lowe)
Date: Mon, 5 Jan 2015 22:18:06 -0700
Subject: [ovs-discuss] error when starting the vm in virt-manger gui.
In-Reply-To: <CAGnqNBmMfo8x+qzQ7M0SYzEqJa8213UCY=XtM8H0FQYPbcZx8A@mail.gmail.com>
References: <CAGnqNB=HaU-nOCbw1veA1d92WMom2GU7kcbLRfe+4PqLJjPY9w@mail.gmail.com>
 <E2D73660-53A8-4343-919E-DB1DB434624A@scottlowe.org>
 <CAGnqNBmMfo8x+qzQ7M0SYzEqJa8213UCY=XtM8H0FQYPbcZx8A@mail.gmail.com>
Message-ID: <D35004F5-E75D-415B-B6F0-C6E958FB9042@scottlowe.org>

Please see my responses inline, prefixed by [SL].


jayakeerthi k <jayakeerthik82 at gmail.com> wrote:

> <interface type='direct'>
>   <mac address='52:54:00:31:b7:e2'/>
>   <source dev='nbrp1' mode='vepa'/>
>   <model type='virtio'/>
>   <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
> </interface>


[SL] If I'm reading this correctly, your guest VM isn't configured for Open
vSwitch. It looks like it is configured for some sort of direct hardware
access. I'd recommend reviewing the libvirt or virt-manager documentation on
how to configure a guest VM to use OVS. (I don't use the virt-manager GUI,
so I can't really offer any guidance there.)

Good luck!

-- 
Scott


From sharmila.radhakrishnan at intel.com  Mon Jan  5 21:18:45 2015
From: sharmila.radhakrishnan at intel.com (Radhakrishnan, Sharmila)
Date: Tue, 6 Jan 2015 05:18:45 +0000
Subject: [ovs-discuss] Error adding port to ovs-dpdk build
In-Reply-To: <BC0FEEC7D7650749874CEC11314A88F730666CFB@IRSMSX104.ger.corp.intel.com>
References: <1BA01C3192A665469272B2597052DDFF56E58057@BGSMSX104.gar.corp.intel.com>
 <BC0FEEC7D7650749874CEC11314A88F730666CFB@IRSMSX104.ger.corp.intel.com>
Message-ID: <1BA01C3192A665469272B2597052DDFF56E58642@BGSMSX104.gar.corp.intel.com>

Hi Kevin,
Yes, Iam using dpdk 1.7.1.

Vswitchd:
./vswitchd/ovs-vswitchd --dpdk -c 0x1 -n 4 --socket-mem 20,0 -- unix:$DB_SOCK --pidfile --detach

Command used to add bridge:
./ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev


Thanks,
Sharmila
From: Traynor, Kevin
Sent: Monday, January 5, 2015 11:53 PM
To: Radhakrishnan, Sharmila; bugs at openvswitch.org
Subject: RE: Error adding port to ovs-dpdk build

Hi Sharmila,

Can you show the command line you run ovs-vswitchd with and the EAL screen prints regarding "Setting up memory...". Also the command you used to add the bridge. I'm assuming you are using DPDK 1.7.1?

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Radhakrishnan, Sharmila
Sent: Monday, January 5, 2015 10:42 AM
To: bugs at openvswitch.org<mailto:bugs at openvswitch.org>
Subject: [ovs-discuss] Error adding port to ovs-dpdk build

Hi,
I have installed OVS with DPDK from github. I tried adding the port. Iam getting cannot allocate memory error for the port.


OVS version:

[cid:image001.png at 01D0299D.E6F9F6D0]

Kernel Version:
[cid:image002.png at 01D0299D.E6F9F6D0]

Command used to add the port:

[cid:image003.png at 01D0299D.E6F9F6D0]

[cid:image004.png at 01D0299D.E6F9F6D0]

Hugepages setting:


[cid:image005.png at 01D0299D.E6F9F6D0]

The /var/log/messages had the following log:
[cid:image006.png at 01D0299D.E6F9F6D0]

What is that Iam missing?

Thanks,
Sharmila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 4026 bytes
Desc: image001.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 6199 bytes
Desc: image002.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 5086 bytes
Desc: image003.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 10890 bytes
Desc: image004.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 16158 bytes
Desc: image005.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 8419 bytes
Desc: image006.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/b95aed03/attachment-0011.png>

From a.n.chippa at gmail.com  Mon Jan  5 23:24:26 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Mon, 5 Jan 2015 23:24:26 -0800
Subject: [ovs-discuss] Resending request for a new API between controller
	and switch
Message-ID: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>

Hi,

Could someone please let me know if my request can be accomodated...

I have asked a few times for this before, but I'll ask again:

Basically, I need a new ofp_type support... something like
OFPT_GET_FLOWID_REQUEST and OFPT_GET_FLOWID_RESPONSE.

Looking for an API, that given certain match parameters in an ofp_type
OFPT_GET_FLOWID_REQUEST message, returns a FLOWID (or cookie)... in the
OFPT_GET_FLOWID_RESPONSE message.

Basically take that part of the "ovs-ofctl add-flow <bridge-name>
<flow>"... code that determines the flow_id and use it to implement the
above API. In this API the flow comes from the OFPT_GET_FLOWID_REQUEST
instead of the "ovs-ofctl add-flow..." CLI...

Please someone let me know if this can be added.. or if I should add it...
If later, could someone kindly guide me to where supoprt for "ovs-ofctl
add-flow..." resides...

Thanks,
Ashok
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150105/33e1110d/attachment.html>

From lojakab at cisco.com  Tue Jan  6 02:56:06 2015
From: lojakab at cisco.com (Lori Jakab)
Date: Tue, 06 Jan 2015 12:56:06 +0200
Subject: [ovs-discuss] Status of LISP control plane and LISP GPE support
In-Reply-To: <CABMOVYBJ9TGGUmM=eGzfF0YwA+B+n_A408O_LrBbdW=ExkEgvQ@mail.gmail.com>
References: <CABMOVYBJ9TGGUmM=eGzfF0YwA+B+n_A408O_LrBbdW=ExkEgvQ@mail.gmail.com>
Message-ID: <54ABBF46.3090206@cisco.com>

On 12/25/2014 10:33 AM, xu cai wrote:
> hi Expert,
> may i know the roadmap of LISP control plane and LISP GPE support ? 
> thanks in advance.

We had a discussion on IRC about potentially using the liblisp library
from the LISPmob project for LISP control plane support in OVS, but
there is no ongoing work in that direction right now.

However, you can use the OpenDaylight controller's LISP Flow Mapping
project as a LISP control plane for now.  A tutorial for that can be
found here:

https://jenkins.opendaylight.org/docs/job/docs-helium-stable-deploy/ws/manuals/developers-guide/target/docbkx/webhelp/bk-developers-guide/content/_developer_tutorial.html

There is no roadmap that I know of for LISP GPE either, although that's
something that we would like to see as well.

-Lori

From 601358880 at qq.com  Tue Jan  6 05:49:06 2015
From: 601358880 at qq.com (=?gb18030?B?WWFuZyBZYW5uYW4=?=)
Date: Tue, 6 Jan 2015 21:49:06 +0800
Subject: [ovs-discuss] =?gb18030?b?IG9mcGFjdF9wdXRfo6ooICkgd2hhdCdzIGl0?=
	=?gb18030?q?=3F?=
Message-ID: <tencent_68E20F116F9AD4291C2E0746@qq.com>

hi
〒_〒, help! I wanna know what  ofpact_put_＊is,  such as ofpact_put_SET_VLAN_VID（）.  is it a method or ？why there is not a definition for it ?  I search it in the all of code, and did not understand it.  

context  is as follows:
after decoding ofp_action and getting a "code", use ofpact_put_＊（out） according to the "code",  like 
ofpact_put_SET_VLAN_VID（out） ->vlan_vid=.....
 regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/fd8237c6/attachment.html>

From blp at nicira.com  Tue Jan  6 08:40:19 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 08:40:19 -0800
Subject: [ovs-discuss]
 =?utf-8?b?b2ZwYWN0X3B1dF/vvIooICkgd2hhdCdzIGl0Pw==?=
In-Reply-To: <tencent_68E20F116F9AD4291C2E0746@qq.com>
References: <tencent_68E20F116F9AD4291C2E0746@qq.com>
Message-ID: <20150106164019.GA478@nicira.com>

On Tue, Jan 06, 2015 at 09:49:06PM +0800, Yang Yannan wrote:
> 〒_〒, help! I wanna know what  ofpact_put_＊is,  such as ofpact_put_SET_VLAN_VID（）.  is it a method or ？why there is not a definition for it ?  I search it in the all of code, and did not understand it.  
> 
> context  is as follows:
> after decoding ofp_action and getting a "code", use ofpact_put_＊（out） according to the "code",  like 
> ofpact_put_SET_VLAN_VID（out） ->vlan_vid=.....

See the comment in ofp-actions.h:

/* For each OFPACT_<ENUM> with a corresponding struct <STRUCT>, this defines
 * the following commonly useful functions:
 *
 *   struct <STRUCT> *ofpact_put_<ENUM>(struct ofpbuf *ofpacts);
 *
 *     Appends a new 'ofpact', of length OFPACT_<ENUM>_RAW_SIZE, to 'ofpacts',
 *     initializes it with ofpact_init_<ENUM>(), and returns it.  Also sets
 *     'ofpacts->l2' to the returned action.
 *
 *     After using this function to add a variable-length action, add the
 *     elements of the flexible array (e.g. with ofpbuf_put()), then use
 *     ofpact_update_len() to update the length embedded into the action.
 *     (Keep in mind the need to refresh the structure from 'ofpacts->frame'
 *     after adding data to 'ofpacts'.)
 *
 *   struct <STRUCT> *ofpact_get_<ENUM>(const struct ofpact *ofpact);
 *
 *     Returns 'ofpact' cast to "struct <STRUCT> *".  'ofpact->type' must be
 *     OFPACT_<ENUM>.
 *
 * as well as the following more rarely useful definitions:
 *
 *   void ofpact_init_<ENUM>(struct <STRUCT> *ofpact);
 *
 *     Initializes the parts of 'ofpact' that identify it as having type
 *     OFPACT_<ENUM> and length OFPACT_<ENUM>_RAW_SIZE and zeros the rest.
 *
 *   <ENUM>_RAW_SIZE
 *
 *     The size of the action structure.  For a fixed-length action, this is
 *     sizeof(struct <STRUCT>).  For a variable-length action, this is the
 *     offset to the variable-length part.
 *
 *   <ENUM>_SIZE
 *
 *     An integer constant, the value of OFPACT_<ENUM>_RAW_SIZE rounded up to a
 *     multiple of OFPACT_ALIGNTO.
 */

From blp at nicira.com  Tue Jan  6 08:46:02 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 08:46:02 -0800
Subject: [ovs-discuss] Procedures to compile OVS code
In-Reply-To: <CAHWErLcL1kgvtBRWTYgx7OvgY9UbFAymn0bs8jCGuuJ8gCaHYQ@mail.gmail.com>
References: <CAHWErLcL1kgvtBRWTYgx7OvgY9UbFAymn0bs8jCGuuJ8gCaHYQ@mail.gmail.com>
Message-ID: <20150106164602.GC478@nicira.com>

[dropping discuss-request, which is not a mailing list]

On Tue, Jan 06, 2015 at 04:23:58PM +0530, tech_kals Kals wrote:
>  1) could you please let me know how can i compile OVS code ? I would like
> to add few debugs to understand the code flow. Can someone help me ?

Read INSTALL.md.

> 2) Is there any way to enable debugs on OVS code ?

You might want to turn up the log level, with "-v" or "ovs-appctl
vlog/set".

From blp at nicira.com  Tue Jan  6 08:52:36 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 08:52:36 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
Message-ID: <20150106165236.GE478@nicira.com>

On Mon, Jan 05, 2015 at 11:24:26PM -0800, Ashok Chippa wrote:
> Could someone please let me know if my request can be accomodated...
> 
> I have asked a few times for this before, but I'll ask again:
> 
> Basically, I need a new ofp_type support... something like
> OFPT_GET_FLOWID_REQUEST and OFPT_GET_FLOWID_RESPONSE.
> 
> Looking for an API, that given certain match parameters in an ofp_type
> OFPT_GET_FLOWID_REQUEST message, returns a FLOWID (or cookie)... in the
> OFPT_GET_FLOWID_RESPONSE message.
> 
> Basically take that part of the "ovs-ofctl add-flow <bridge-name>
> <flow>"... code that determines the flow_id and use it to implement the
> above API. In this API the flow comes from the OFPT_GET_FLOWID_REQUEST
> instead of the "ovs-ofctl add-flow..." CLI...
> 
> Please someone let me know if this can be added.. or if I should add it...
> If later, could someone kindly guide me to where supoprt for "ovs-ofctl
> add-flow..." resides...

I've seen your request each time, and still don't understand what you
need or why you need it.  It doesn't make any sense.  OVS doesn't have
anything called a "flow_id", and so your description that the new request
would generate a flow_id from a flow cannot be implemented.

From blp at nicira.com  Tue Jan  6 08:57:39 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 08:57:39 -0800
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
Message-ID: <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>

Here's an excerpt from your "with DPDK" log. It looks like you typoed
a command and therefore ovsdb-server didn't start.

controller at controller-Latitude-E5440:~openvswitch-2.3.1$
controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
ovsdb-server /usr/local/etc/openvswitch/conf.db
--remote=punix:/usr/local/var/run/openvswitch/db.sock
--remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
--detach --log-file
bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
such file or directory

On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
<shankari.v.2014 at gmail.com> wrote:
> Hi,
>
> I tried executing the steps for initializing the OVSDB-server and the OVS
> given in the below link:
>
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
>
> I'm using Ubuntu Trusty tahr, OVS version 2.3.1
>
> I was able to get the OVS working for the build which I compiled without
> DPDK.
> But with DPDK_BUILD configured in the Makefile the build produced "Database
> connection refused" error and the OVS was not getting started because of
> this error. Kindly help me in resolving this issue.
>
> Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> build
>
> Regards,
> Shankari.V
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>



-- 
"I don't normally do acked-by's.  I think it's my way of avoiding
getting blamed when it all blows up."               Andrew Morton

From themadengin33r at gmail.com  Tue Jan  6 01:04:33 2015
From: themadengin33r at gmail.com (mad Engineer)
Date: Tue, 6 Jan 2015 14:34:33 +0530
Subject: [ovs-discuss] intel dpdk acceleration
Message-ID: <CAN8oO4A07gNK1Or3H=71QkWMscf1tipVws3TwbveE6-C5sHJxw@mail.gmail.com>

Can ovs benefit from intel dpdk acceleration?Which version to use to
get the benefit of this.

Thanks

From jpettit at nicira.com  Tue Jan  6 10:13:28 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Tue, 6 Jan 2015 10:13:28 -0800
Subject: [ovs-discuss] intel dpdk acceleration
In-Reply-To: <CAN8oO4A07gNK1Or3H=71QkWMscf1tipVws3TwbveE6-C5sHJxw@mail.gmail.com>
References: <CAN8oO4A07gNK1Or3H=71QkWMscf1tipVws3TwbveE6-C5sHJxw@mail.gmail.com>
Message-ID: <7D1EE26E-1773-4557-826A-66959EF1B1AD@nicira.com>


> On Jan 6, 2015, at 1:04 AM, mad Engineer <themadengin33r at gmail.com> wrote:
> 
> Can ovs benefit from intel dpdk acceleration?Which version to use to
> get the benefit of this.

There is support, but it's currently only in the master branch and not part of a shipping release.  There's a file called INSTALL.DPDK.md there that describes how to run it.

--Justin



From chaitanya.tanwar at gmail.com  Tue Jan  6 10:28:36 2015
From: chaitanya.tanwar at gmail.com (chaitanya tanwar)
Date: Tue, 6 Jan 2015 23:58:36 +0530
Subject: [ovs-discuss] Proxy server In switch
Message-ID: <CAEm0QqA8W+V5V7sHfXhS64-x0UDm6vKP2Sz1hgXpERbdffwgMw@mail.gmail.com>

Hi Openvswitch Comminity,

I want to set up a proxy server on openvswitch? Is there a well defined way
for that which opevswitch provide?
If not please guide me how to go about it.


Thanks and Regards.
Chaitanya Tanwar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/72115a9a/attachment.html>

From kevin.traynor at intel.com  Tue Jan  6 10:38:00 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Tue, 6 Jan 2015 18:38:00 +0000
Subject: [ovs-discuss] Error adding port to ovs-dpdk build
In-Reply-To: <1BA01C3192A665469272B2597052DDFF56E58642@BGSMSX104.gar.corp.intel.com>
References: <1BA01C3192A665469272B2597052DDFF56E58057@BGSMSX104.gar.corp.intel.com>
 <BC0FEEC7D7650749874CEC11314A88F730666CFB@IRSMSX104.ger.corp.intel.com>
 <1BA01C3192A665469272B2597052DDFF56E58642@BGSMSX104.gar.corp.intel.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F730667B21@IRSMSX104.ger.corp.intel.com>

Hi Sharmila,

I would typically have 1 GB on socket 0, can you try this and if not working post the EAL logs.

--socket-mem 1024,0

Thanks,
Kevin.

From: Radhakrishnan, Sharmila
Sent: Tuesday, January 6, 2015 5:19 AM
To: Traynor, Kevin; bugs at openvswitch.org
Subject: RE: Error adding port to ovs-dpdk build

Hi Kevin,
Yes, Iam using dpdk 1.7.1.

Vswitchd:
./vswitchd/ovs-vswitchd --dpdk -c 0x1 -n 4 --socket-mem 20,0 -- unix:$DB_SOCK --pidfile --detach

Command used to add bridge:
./ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev


Thanks,
Sharmila
From: Traynor, Kevin
Sent: Monday, January 5, 2015 11:53 PM
To: Radhakrishnan, Sharmila; bugs at openvswitch.org<mailto:bugs at openvswitch.org>
Subject: RE: Error adding port to ovs-dpdk build

Hi Sharmila,

Can you show the command line you run ovs-vswitchd with and the EAL screen prints regarding "Setting up memory...". Also the command you used to add the bridge. I'm assuming you are using DPDK 1.7.1?

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Radhakrishnan, Sharmila
Sent: Monday, January 5, 2015 10:42 AM
To: bugs at openvswitch.org<mailto:bugs at openvswitch.org>
Subject: [ovs-discuss] Error adding port to ovs-dpdk build

Hi,
I have installed OVS with DPDK from github. I tried adding the port. Iam getting cannot allocate memory error for the port.


OVS version:

[cid:image001.png at 01D029DC.CA4926C0]

Kernel Version:
[cid:image002.png at 01D029DC.CA4926C0]

Command used to add the port:

[cid:image003.png at 01D029DC.CA4926C0]

[cid:image004.png at 01D029DC.CA4926C0]

Hugepages setting:


[cid:image005.png at 01D029DC.CA4926C0]

The /var/log/messages had the following log:
[cid:image006.png at 01D029DC.CA4926C0]

What is that Iam missing?

Thanks,
Sharmila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 4026 bytes
Desc: image001.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 6199 bytes
Desc: image002.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 5086 bytes
Desc: image003.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 10890 bytes
Desc: image004.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 16158 bytes
Desc: image005.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 8419 bytes
Desc: image006.png
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/d1630d1e/attachment-0011.png>

From shankari.v.2014 at gmail.com  Tue Jan  6 10:46:13 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Wed, 7 Jan 2015 00:16:13 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
Message-ID: <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>

Hi

The excerpt below was due to a wrong copy paste of the commands at the
command prompt which gave the error message: "No such file or directory".

The error which I had mentioned in my previous message was:

controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-tool
create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-server
/usr/local/etc/openvswitch/conf.db
--remote=punix:/usr/local/var/run/openvswitch/db.sock
--remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
--log-file
2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file
/usr/local/var/log/openvswitch/ovsdb-server.log



controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovs-vsctl
--no-wait init

 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection
failed (Connection refused)

Regards
Shankari.V

On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com> wrote:

> Here's an excerpt from your "with DPDK" log. It looks like you typoed
> a command and therefore ovsdb-server didn't start.
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
> --detach --log-file
> bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
> such file or directory
>
> On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
> <shankari.v.2014 at gmail.com> wrote:
> > Hi,
> >
> > I tried executing the steps for initializing the OVSDB-server and the OVS
> > given in the below link:
> >
> >
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
> >
> > I'm using Ubuntu Trusty tahr, OVS version 2.3.1
> >
> > I was able to get the OVS working for the build which I compiled without
> > DPDK.
> > But with DPDK_BUILD configured in the Makefile the build produced
> "Database
> > connection refused" error and the OVS was not getting started because of
> > this error. Kindly help me in resolving this issue.
> >
> > Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> > build
> >
> > Regards,
> > Shankari.V
> >
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> >
>
>
>
> --
> "I don't normally do acked-by's.  I think it's my way of avoiding
> getting blamed when it all blows up."               Andrew Morton
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/2046c239/attachment.html>

From shankari.v.2014 at gmail.com  Tue Jan  6 10:56:17 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Wed, 7 Jan 2015 00:26:17 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
Message-ID: <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>

Also to add to the below mail which I'd sent pls find below the output of
starting OVS with the debugs enabled:

controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:

2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering BACKOFF
2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
nodes, 8 buckets)
 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock:
connection failed (Connection refused)
2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
connecting...
2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering CONNECTING
2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
connection attempt failed (Connection refused)
2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
waiting 2.15e+06 seconds before reconnect
2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering BACKOFF
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection
failed (Connection refused)
 DBG: Trying to
reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
ps -Af | grep ovsdb-server
root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring
pid 963
(healthy)

root       963   962  0 Jan03 ?        00:00:00 ovsdb-server
/etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info
--remote=punix:/var/run/openvswitch/db.sock
--private-key=db:Open_vSwitch,SSL,private_key
--certificate=db:Open_vSwitch,SSL,certificate
--bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir
--log-file=/var/log/openvswitch/ovsdb-server.log
--pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto
ovsdb-server


Regards
Shankari.V

On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <
shankari.v.2014 at gmail.com> wrote:

> Hi
>
> The excerpt below was due to a wrong copy paste of the commands at the
> command prompt which gave the error message: "No such file or directory".
>
> The error which I had mentioned in my previous message was:
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-tool
> create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
> --log-file
> 2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file
> /usr/local/var/log/openvswitch/ovsdb-server.log
>
>
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovs-vsctl
> --no-wait init
>
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>
> Regards
> Shankari.V
>
> On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com> wrote:
>
>> Here's an excerpt from your "with DPDK" log. It looks like you typoed
>> a command and therefore ovsdb-server didn't start.
>>
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
>> ovsdb-server /usr/local/etc/openvswitch/conf.db
>> --remote=punix:/usr/local/var/run/openvswitch/db.sock
>> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
>> --detach --log-file
>> bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
>> such file or directory
>>
>> On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
>> <shankari.v.2014 at gmail.com> wrote:
>> > Hi,
>> >
>> > I tried executing the steps for initializing the OVSDB-server and the
>> OVS
>> > given in the below link:
>> >
>> >
>> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
>> >
>> > I'm using Ubuntu Trusty tahr, OVS version 2.3.1
>> >
>> > I was able to get the OVS working for the build which I compiled without
>> > DPDK.
>> > But with DPDK_BUILD configured in the Makefile the build produced
>> "Database
>> > connection refused" error and the OVS was not getting started because of
>> > this error. Kindly help me in resolving this issue.
>> >
>> > Enclosed the logs separately for "without DPDK" build and for "With
>> DPDK"
>> > build
>> >
>> > Regards,
>> > Shankari.V
>> >
>> > _______________________________________________
>> > discuss mailing list
>> > discuss at openvswitch.org
>> > http://openvswitch.org/mailman/listinfo/discuss
>> >
>>
>>
>>
>> --
>> "I don't normally do acked-by's.  I think it's my way of avoiding
>> getting blamed when it all blows up."               Andrew Morton
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/73df1b7a/attachment-0001.html>

From benoitne at gmail.com  Tue Jan  6 10:56:53 2015
From: benoitne at gmail.com (Ben)
Date: Tue, 06 Jan 2015 19:56:53 +0100
Subject: [ovs-discuss] Vlan & OVS basic concepts
In-Reply-To: <6047309.98caJuJXKu@t520.home>
References: <549A94FA.7060805@gmail.com> <3188267.6epc1LhtVY@t520.home>
 <E23D776E-0F9B-48E2-9E54-9D01C1AD28E0@gmail.com>
 <6047309.98caJuJXKu@t520.home>
Message-ID: <54AC2FF5.10201@gmail.com>

Just for information, the problem is SOLVED.

The issue is that I tried to put an IP Address on the TAP and test like 
that which is not working.
After booting a VM machine with a TAP interface (where I put an IP 
Address) it is working !

I just figured out a strange behaviour :

If I set two tap devices on 2 VM (tap50 & tap60) and set tap50 tag=50 
and tap60 tag=60 on ovs I noticed that it is working well.
Each VM IP can ping each other on the same vlan, but if I erase one IP 
address on one vm and add a default gw to route all the traffic on the 
second tap interface I noticed that the other vm is still responding to 
the ping even if I am requestiing an ip address into the other vlan.

I check ip forwarding and ajust the rp_ & arp filter on my linux kernel 
and iptables forward to deny everything but is keeps respond to my ping.
I guess OVS is forwarding it properly to the VM but to the wrong tap 
interface.

Is there a way to harden the linux or change this behaviour?
The reason is that I am going to use my VM for routing (vlan) purpose 
and I need to deny everything by default.

Many thanks

On 29/12/2014 16:36, Flavio Leitner wrote:
> On Saturday, December 27, 2014 11:19:05 AM Ben wrote:
>> Hi Flavio,
>>
>> Many thanks for your quick reply.
>>
>>> -I can ping the tap0 and vswitch-trust interfaces from my linux box, but
>>> my main issue is that if I don't put an IP address on my vswitch-trust
>>> interface then I am unable to access to my tap0 IP address.
>> This indicates your Linux is forwarding packets between vswitch-trust and
>> tap0 and it's not using the bridge for that.
>>
>> I think this is the main issue where all others my questions are related as well.
>> How can I test and be sure that it is my Linux which is forwarding and not my bridge?
>> Is it a conflit between my kernel & ovs? I tried to unactivate linux ipv4 forwarding but it is the same story..
> One easy way is simply remove the tap device from the bridge.
> Another is to drop all flows and insert one that just drop everything.
>
> fbl

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/75b205b9/attachment.html>

From a.n.chippa at gmail.com  Tue Jan  6 11:01:08 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Tue, 6 Jan 2015 11:01:08 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <20150106165236.GE478@nicira.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
Message-ID: <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>

Perhaps once you understand, it will make sense? :)

Call it whatever flow_id or cookie or xyz? Let me call it "flow index" for
the sake of this discussion. The ovs datapath has some sort of a flow index
to look into the flow table when a packet arrives, right? Now, how does the
ovs datapath arrive at this flow index (upon a packet arrival)? It takes
certain match parameters (from the packet header and perhaps some
metadata)  and hashes them, right?

I am requesting for an API, where these match parameters are provided in
the API message (I think I called it of ofp_type OFPT_GET_FLOWID_REQUEST -
let me call it OFPT_GET_FLOW_INDEX_REQ), and used to compute the hash (as
done with fields from packet header+metadata)...

Why is this API needed? Let's consider this use case:

1. I have a Firewall app running on top of openvswitch.
2. A north-bound user of this Firewall configures policies and rules into
the Firewall.
3. Consider a rule from a north-bound user coming down to the Firewall.
4. The Firewall needs to save this rule somewhere in its database... Agree?
Two options to do this: 1. It takes a bunch of parameters (e.g. 5 tuple)
from the user rule and hashes and computes an index into its
policy-rule-database where it can save the rule. 2. Alternatively, it asks
the ovs datapath (using the new API I am asking for) to get a flow index.
It then uses this flow index to save the rule (from the north-bound) user
into its policy-rule-database.
5. Now let's say a packet arrives (into openvswitch datapath). What does
the datapath do? It hashes on certain packet fields and computes a flow
index and checks the corresponding entry in the flow table... right? Let's
say this is a new flow. What does the datapath do? Let's say it sends the
packet (along with the flow index) to the controller (in my case the
Firewall).
6. So now the Firewall gets the packet and has to decide whether to permit
or deny this flow... With me so far?
7. How does the Firewall do that? It has to look into its
policy-rule-database and locate a matching rule...
8. How does the Firewall locate the matching rule? One option is to hash on
fields from the packet to compute an index (see step 4 above). The second
option (where the API I am requesting comes in handy) is to use the ovs
datapath flow index itself (see step 4, option (2)). With the second
option, the Firewall can locate the matching rule simply by using the flow
index that comes to it along with the packet.

I hope this is clear now. Please please let me know if it is not clear...
or if I misunderstood how the ovs datapath works...

Thanks,
Ashok

On Tue, Jan 6, 2015 at 8:52 AM, Ben Pfaff <blp at nicira.com> wrote:

> On Mon, Jan 05, 2015 at 11:24:26PM -0800, Ashok Chippa wrote:
> > Could someone please let me know if my request can be accomodated...
> >
> > I have asked a few times for this before, but I'll ask again:
> >
> > Basically, I need a new ofp_type support... something like
> > OFPT_GET_FLOWID_REQUEST and OFPT_GET_FLOWID_RESPONSE.
> >
> > Looking for an API, that given certain match parameters in an ofp_type
> > OFPT_GET_FLOWID_REQUEST message, returns a FLOWID (or cookie)... in the
> > OFPT_GET_FLOWID_RESPONSE message.
> >
> > Basically take that part of the "ovs-ofctl add-flow <bridge-name>
> > <flow>"... code that determines the flow_id and use it to implement the
> > above API. In this API the flow comes from the OFPT_GET_FLOWID_REQUEST
> > instead of the "ovs-ofctl add-flow..." CLI...
> >
> > Please someone let me know if this can be added.. or if I should add
> it...
> > If later, could someone kindly guide me to where supoprt for "ovs-ofctl
> > add-flow..." resides...
>
> I've seen your request each time, and still don't understand what you
> need or why you need it.  It doesn't make any sense.  OVS doesn't have
> anything called a "flow_id", and so your description that the new request
> would generate a flow_id from a flow cannot be implemented.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/5bc2cf18/attachment.html>

From fbl at sysclose.org  Tue Jan  6 11:53:19 2015
From: fbl at sysclose.org (Flavio Leitner)
Date: Tue, 06 Jan 2015 17:53:19 -0200
Subject: [ovs-discuss] Vlan & OVS basic concepts
In-Reply-To: <54AC2FF5.10201@gmail.com>
References: <549A94FA.7060805@gmail.com> <6047309.98caJuJXKu@t520.home>
 <54AC2FF5.10201@gmail.com>
Message-ID: <3580540.2WXNdGVq5B@t520.home>

On Tuesday, January 06, 2015 07:56:53 PM Ben wrote:
> Just for information, the problem is SOLVED.
> 
> The issue is that I tried to put an IP Address on the TAP and test like 
> that which is not working.
> After booting a VM machine with a TAP interface (where I put an IP 
> Address) it is working !
> 
> I just figured out a strange behaviour :
> 
> If I set two tap devices on 2 VM (tap50 & tap60) and set tap50 tag=50 
> and tap60 tag=60 on ovs I noticed that it is working well.
> Each VM IP can ping each other on the same vlan, but if I erase one IP 
> address on one vm and add a default gw to route all the traffic on the 
> second tap interface I noticed that the other vm is still responding to 
> the ping even if I am requestiing an ip address into the other vlan.
> 
> I check ip forwarding and ajust the rp_ & arp filter on my linux kernel 
> and iptables forward to deny everything but is keeps respond to my ping.
> I guess OVS is forwarding it properly to the VM but to the wrong tap 
> interface.
> 
> Is there a way to harden the linux or change this behaviour?
> The reason is that I am going to use my VM for routing (vlan) purpose 
> and I need to deny everything by default.

Sorry, but it is still not clear to me how you are connecting
the interfaces and where you are adding addresses.

fbl


From lists at mitaka-g.net  Tue Jan  6 12:01:08 2015
From: lists at mitaka-g.net (Dimitar Ianakiev)
Date: Tue, 06 Jan 2015 22:01:08 +0200
Subject: [ovs-discuss] QinQ support
In-Reply-To: <54AB2CA2.8060700@gmail.com>
References: <54AAF954.5040902@mitaka-g.net> <54AB2CA2.8060700@gmail.com>
Message-ID: <54AC3F04.6030808@mitaka-g.net>

Hello,

Thanks for the reply. I will look at 802.1ah. Currently our architecture
does not involve physical hardware as we do not have control over it. We
were planning on using the provided private network from the data centre
and separating the traffic of our clients inside this vlan. We just need
to host more than 4094 vlans in such network. Does the openvswitch
support 802.1ah?

Regards
Dimitar

On 06/01/15 02:30, Thomas F Herbert wrote:
> Dimitar,
>
> Open vSwitch does not currently support 802.1ad. I have submitted a
> patch for 802.1ad and I am in the process of submitting a new version.
> However, 802.1ad will not solve the namespace problem. Perhaps you are
> thinking of 802.1ah?
>
> --Tom
>
> On 1/5/15 3:51 PM, Dimitar Ianakiev wrote:
>> Hello,
>>
>> We are using openvswitch for some time and we are trying to implement
>> "private vlans" for our customers. Each customer should have vlan(s)
>> between his/her virtual instances. The problem with 802.1q vlans is that
>> we are expecting more than 4094 clients per openvswitch instance and the
>> vlan limit is 4096. We are considering QinQ(802.1ad).
>>
>> My question is if ovs supports QinQ and how this can be achieved ?
>> Please propose other approach if this is not a good solution to the
>> problem.
>>
>> Regards
>> Dimitar Ianakiev
>> _______________________________________________
>> discuss mailing list
>> discuss at openvswitch.org
>> http://openvswitch.org/mailman/listinfo/discuss
>
>


From blp at nicira.com  Tue Jan  6 13:21:53 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 13:21:53 -0800
Subject: [ovs-discuss] Vlan & OVS basic concepts
In-Reply-To: <54AC2FF5.10201@gmail.com>
References: <549A94FA.7060805@gmail.com> <3188267.6epc1LhtVY@t520.home>
 <E23D776E-0F9B-48E2-9E54-9D01C1AD28E0@gmail.com>
 <6047309.98caJuJXKu@t520.home> <54AC2FF5.10201@gmail.com>
Message-ID: <20150106212153.GB19347@nicira.com>

On Tue, Jan 06, 2015 at 07:56:53PM +0100, Ben wrote:
> I just figured out a strange behaviour :
> 
> If I set two tap devices on 2 VM (tap50 & tap60) and set tap50
> tag=50 and tap60 tag=60 on ovs I noticed that it is working well.
> Each VM IP can ping each other on the same vlan, but if I erase one
> IP address on one vm and add a default gw to route all the traffic
> on the second tap interface I noticed that the other vm is still
> responding to the ping even if I am requestiing an ip address into
> the other vlan.
> 
> I check ip forwarding and ajust the rp_ & arp filter on my linux
> kernel and iptables forward to deny everything but is keeps respond
> to my ping.
> I guess OVS is forwarding it properly to the VM but to the wrong tap
> interface.

Maybe this FAQ is relevant.  I can't tell for sure.

### Q: I configured one IP address on VLAN 0 and another on VLAN 9, like
   this:

       ovs-vsctl add-br br0
       ovs-vsctl add-port br0 eth0
       ifconfig br0 192.168.0.5
       ovs-vsctl add-port br0 vlan9 tag=9 -- set interface vlan9 type=internal
       ifconfig vlan9 192.168.0.9

   but other hosts that are only on VLAN 0 can reach the IP address
   configured on VLAN 9.  What's going on?

A: RFC 1122 section 3.3.4.2 "Multihoming Requirements" describes two
   approaches to IP address handling in Internet hosts:

   - In the "Strong ES Model", where an ES is a host ("End
     System"), an IP address is primarily associated with a
     particular interface.  The host discards packets that arrive
     on interface A if they are destined for an IP address that is
     configured on interface B.  The host never sends packets from
     interface A using a source address configured on interface B.

   - In the "Weak ES Model", an IP address is primarily associated
     with a host.  The host accepts packets that arrive on any
     interface if they are destined for any of the host's IP
     addresses, even if the address is configured on some
     interface other than the one on which it arrived.  The host
     does not restrict itself to sending packets from an IP
     address associated with the originating interface.

   Linux uses the weak ES model.  That means that when packets
   destined to the VLAN 9 IP address arrive on eth0 and are bridged to
   br0, the kernel IP stack accepts them there for the VLAN 9 IP
   address, even though they were not received on vlan9, the network
   device for vlan9.

   To simulate the strong ES model on Linux, one may add iptables rule
   to filter packets based on source and destination address and
   adjust ARP configuration with sysctls.

   BSD uses the strong ES model.

From blp at nicira.com  Tue Jan  6 13:43:53 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 13:43:53 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
 <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
Message-ID: <20150106214353.GC19347@nicira.com>

On Tue, Jan 06, 2015 at 11:01:08AM -0800, Ashok Chippa wrote:
> Perhaps once you understand, it will make sense? :)
> 
> Call it whatever flow_id or cookie or xyz? Let me call it "flow index" for
> the sake of this discussion. The ovs datapath has some sort of a flow index
> to look into the flow table when a packet arrives, right? Now, how does the
> ovs datapath arrive at this flow index (upon a packet arrival)? It takes
> certain match parameters (from the packet header and perhaps some
> metadata)  and hashes them, right?

I don't think you understand how the OVS datapath works.

From a.n.chippa at gmail.com  Tue Jan  6 14:01:51 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Tue, 6 Jan 2015 14:01:51 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <20150106214353.GC19347@nicira.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
 <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
 <20150106214353.GC19347@nicira.com>
Message-ID: <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>

Okay. How does the OVS datapath know this is a new flow? i.e. there is no
matching flow entry? Doesn't it derive some sort of an index (into the flow
table) from packet header fields? What am I missing? :)

If this is explained in details somewhere, I would appreciate the pointer.

Thanks,
ashok

On Tue, Jan 6, 2015 at 1:43 PM, Ben Pfaff <blp at nicira.com> wrote:

> On Tue, Jan 06, 2015 at 11:01:08AM -0800, Ashok Chippa wrote:
> > Perhaps once you understand, it will make sense? :)
> >
> > Call it whatever flow_id or cookie or xyz? Let me call it "flow index"
> for
> > the sake of this discussion. The ovs datapath has some sort of a flow
> index
> > to look into the flow table when a packet arrives, right? Now, how does
> the
> > ovs datapath arrive at this flow index (upon a packet arrival)? It takes
> > certain match parameters (from the packet header and perhaps some
> > metadata)  and hashes them, right?
>
> I don't think you understand how the OVS datapath works.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/6830849a/attachment.html>

From khadka.py at gmail.com  Tue Jan  6 14:16:12 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Tue, 6 Jan 2015 17:16:12 -0500
Subject: [ovs-discuss] CHECK_OVERLAP and identical flows
Message-ID: <CAGVJBz1S+tXqCLggfiTRpmuLkd5Xkp1JoV+qHU6n8XzHw6uiyQ@mail.gmail.com>

Hi, during an add-flow request with CHECK_OVERLAP set, if an identical flow
exists in the table, what should be the expected behavior?

Should we reject it and send an error with OFPFMFC_OVERLAP code back to the
controller?

The current OVS code transforms add to modify if there is an existing
identical flow even if CHECK_OVERLAP is set.

I guess the primary question is: are identical flows not overlapping flows?
I thought the OpenFlow standard was sort of ambiguous when it defined
overlapping flows:
"Two flow entries overlap if a single packet may match both, and both
entries have the same priority"

I saw some old discussion on this.

https://mailman.stanford.edu/pipermail/openflow-spec/2009-December/000812.html

At that point, it seems like, the inclination was towards interpreting
identical flows as overlapping flows. Not sure, if this has been resolved.


Thank you,
Anup
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/cd85ad5f/attachment-0001.html>

From a.n.chippa at gmail.com  Tue Jan  6 14:38:53 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Tue, 6 Jan 2015 14:38:53 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
 <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
 <20150106214353.GC19347@nicira.com>
 <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>
Message-ID: <CABFtFwm8KdS=Kh5fBW7_PuZKjvNJ2kP+3NEBCVrQ39PfgYgZow@mail.gmail.com>

Hi Ben,

So, I am reading how OVS datapath works... don't see the details but read
the following (which I had read before as well):

- A flow may be identified by any combination of ... (tunnel id, ipv6 nd
target, ipv4/6 src addr, ip4/6 dst addr, ... etc.)
- The first packet of the flow is sent to the controller....

Q1: How does the OVS datapath know that the packet is the first packet?
Doesn't it identify the flow by some combination of the above packet
fields? What is thisidentification? Isn't it a flow index that is derived
by hashing some combination of the above fields? I guess you call it a
cookie? Okay, lets call it a cookie.

Q2: When the first packet is sent to the controller, isn't the cookie also
sent?        All I am requesting is an API that: given any combination of
(tunnel id, ipv6 nd target. ipv4/6 source address, ...) in an API message,
returns the cookie... this will be used in the control path (even before
the first packet hits the datapath)...

Just in case I did not speak clearly, my request has nothing to do with
modifying the OVS datapath...

Thanks

On Tue, Jan 6, 2015 at 2:01 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Okay. How does the OVS datapath know this is a new flow? i.e. there is no
> matching flow entry? Doesn't it derive some sort of an index (into the flow
> table) from packet header fields? What am I missing? :)
>
> If this is explained in details somewhere, I would appreciate the pointer.
>
> Thanks,
> ashok
>
> On Tue, Jan 6, 2015 at 1:43 PM, Ben Pfaff <blp at nicira.com> wrote:
>
>> On Tue, Jan 06, 2015 at 11:01:08AM -0800, Ashok Chippa wrote:
>> > Perhaps once you understand, it will make sense? :)
>> >
>> > Call it whatever flow_id or cookie or xyz? Let me call it "flow index"
>> for
>> > the sake of this discussion. The ovs datapath has some sort of a flow
>> index
>> > to look into the flow table when a packet arrives, right? Now, how does
>> the
>> > ovs datapath arrive at this flow index (upon a packet arrival)? It takes
>> > certain match parameters (from the packet header and perhaps some
>> > metadata)  and hashes them, right?
>>
>> I don't think you understand how the OVS datapath works.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/091ff7d4/attachment.html>

From blp at nicira.com  Tue Jan  6 15:01:29 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 15:01:29 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
 <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
 <20150106214353.GC19347@nicira.com>
 <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>
Message-ID: <20150106230129.GD19347@nicira.com>

The OVS datapath extracts the packet headers then looks for a match in
its flow table.  What part of that is the "flow index"?

On Tue, Jan 06, 2015 at 02:01:51PM -0800, Ashok Chippa wrote:
> Okay. How does the OVS datapath know this is a new flow? i.e. there is no
> matching flow entry? Doesn't it derive some sort of an index (into the flow
> table) from packet header fields? What am I missing? :)
> 
> If this is explained in details somewhere, I would appreciate the pointer.
> 
> Thanks,
> ashok
> 
> On Tue, Jan 6, 2015 at 1:43 PM, Ben Pfaff <blp at nicira.com> wrote:
> 
> > On Tue, Jan 06, 2015 at 11:01:08AM -0800, Ashok Chippa wrote:
> > > Perhaps once you understand, it will make sense? :)
> > >
> > > Call it whatever flow_id or cookie or xyz? Let me call it "flow index"
> > for
> > > the sake of this discussion. The ovs datapath has some sort of a flow
> > index
> > > to look into the flow table when a packet arrives, right? Now, how does
> > the
> > > ovs datapath arrive at this flow index (upon a packet arrival)? It takes
> > > certain match parameters (from the packet header and perhaps some
> > > metadata)  and hashes them, right?
> >
> > I don't think you understand how the OVS datapath works.
> >

From blp at nicira.com  Tue Jan  6 15:06:23 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 15:06:23 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CABFtFwm8KdS=Kh5fBW7_PuZKjvNJ2kP+3NEBCVrQ39PfgYgZow@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
 <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
 <20150106214353.GC19347@nicira.com>
 <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>
 <CABFtFwm8KdS=Kh5fBW7_PuZKjvNJ2kP+3NEBCVrQ39PfgYgZow@mail.gmail.com>
Message-ID: <20150106230623.GE19347@nicira.com>

On Tue, Jan 06, 2015 at 02:38:53PM -0800, Ashok Chippa wrote:
> So, I am reading how OVS datapath works... don't see the details but read
> the following (which I had read before as well):
> 
> - A flow may be identified by any combination of ... (tunnel id, ipv6 nd
> target, ipv4/6 src addr, ip4/6 dst addr, ... etc.)
> - The first packet of the flow is sent to the controller....
> 
> Q1: How does the OVS datapath know that the packet is the first packet?
> Doesn't it identify the flow by some combination of the above packet
> fields? What is thisidentification? Isn't it a flow index that is derived
> by hashing some combination of the above fields? I guess you call it a
> cookie? Okay, lets call it a cookie.
> 
> Q2: When the first packet is sent to the controller, isn't the cookie also
> sent?        All I am requesting is an API that: given any combination of
> (tunnel id, ipv6 nd target. ipv4/6 source address, ...) in an API message,
> returns the cookie... this will be used in the control path (even before
> the first packet hits the datapath)...

I think you're asking for something to extract the packet headers from
an arbitrary packet and report them to the controller.  OpenFlow
doesn't offer that feature.  The appropriate place to request such a
feature would be the OpenFlow extensibility working group.

From blp at nicira.com  Tue Jan  6 15:09:40 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 6 Jan 2015 15:09:40 -0800
Subject: [ovs-discuss] CHECK_OVERLAP and identical flows
In-Reply-To: <CAGVJBz1S+tXqCLggfiTRpmuLkd5Xkp1JoV+qHU6n8XzHw6uiyQ@mail.gmail.com>
References: <CAGVJBz1S+tXqCLggfiTRpmuLkd5Xkp1JoV+qHU6n8XzHw6uiyQ@mail.gmail.com>
Message-ID: <20150106230940.GF19347@nicira.com>

On Tue, Jan 06, 2015 at 05:16:12PM -0500, Anup Khadka wrote:
> Hi, during an add-flow request with CHECK_OVERLAP set, if an identical flow
> exists in the table, what should be the expected behavior?
> 
> Should we reject it and send an error with OFPFMFC_OVERLAP code back to the
> controller?
> 
> The current OVS code transforms add to modify if there is an existing
> identical flow even if CHECK_OVERLAP is set.
> 
> I guess the primary question is: are identical flows not overlapping flows?
> I thought the OpenFlow standard was sort of ambiguous when it defined
> overlapping flows:
> "Two flow entries overlap if a single packet may match both, and both
> entries have the same priority"

This will be clarified in the next OpenFlow 1.3.x release. in the
OpenFlow extensibility working group.  The new wording is: "Two flow
entries overlap if a single packet may match both, and both flow
entries have the same priority, but the two flow entries don't have
the exact same match."

From benoitne at gmail.com  Tue Jan  6 15:34:10 2015
From: benoitne at gmail.com (Ben)
Date: Wed, 07 Jan 2015 00:34:10 +0100
Subject: [ovs-discuss] Vlan & OVS basic concepts
In-Reply-To: <20150106212153.GB19347@nicira.com>
References: <549A94FA.7060805@gmail.com> <3188267.6epc1LhtVY@t520.home>
 <E23D776E-0F9B-48E2-9E54-9D01C1AD28E0@gmail.com>
 <6047309.98caJuJXKu@t520.home> <54AC2FF5.10201@gmail.com>
 <20150106212153.GB19347@nicira.com>
Message-ID: <54AC70F2.2060007@gmail.com>

Thanks Ben,

I found this FAQ this morning and this is the reason I tried to tweak my 
kernel but no effect :(
Even dropping policy on forward iptables is not doing anything, I can 
still ping on all direction.

As I haven't been so clear this is what I discover :

I ----------------Server 1---------------- I=eth0=Direct Patch=eth0=I 
----------------Server 2----------------- I
I--------------------VM1------------------I 
I--------------------VM2-------------------I
I      eth0 (192.168.1.1/24) I I     eth0 (192.168.1.2/24)             I
I      eth1 (10.10.1.1) I I eth1 (10.10.1.2)                      I

on both Server 1 and Server 2
ovs-vsctl add-br vswitch-trust
ovs-vsctl add-port vswitch-trust eth0
ovs-vsctl add-port vswitch-trust tap50 tag=50
ovs-vsctl add-port vswitch-trust tap60 tag=60

eth0 on VM is linked to tap50
eth1 on VM is linked to tap60

from VM1 I can ping 192.168.1.2 & 10.10.1.2 as expected.
from VM2 I can ping 192.168.1.1 & 10.10.1.1 as expected.
If I removed eth1 on VM2 and try to ping 192.168.1.2 from VM1 I can as 
expected.
adding ip route add via 192.168.1.2 on VM1 I can ping 10.10.1.2

so VM2 is routing the trafic even if it is not on the same vlan, I 
suspect because it is done on VM and vlan is done on server (not VM)

If you have any idea I would be very happy :)

belette

On 06/01/2015 22:21, Ben Pfaff wrote:
> On Tue, Jan 06, 2015 at 07:56:53PM +0100, Ben wrote:
>> I just figured out a strange behaviour :
>>
>> If I set two tap devices on 2 VM (tap50 & tap60) and set tap50
>> tag=50 and tap60 tag=60 on ovs I noticed that it is working well.
>> Each VM IP can ping each other on the same vlan, but if I erase one
>> IP address on one vm and add a default gw to route all the traffic
>> on the second tap interface I noticed that the other vm is still
>> responding to the ping even if I am requestiing an ip address into
>> the other vlan.
>>
>> I check ip forwarding and ajust the rp_ & arp filter on my linux
>> kernel and iptables forward to deny everything but is keeps respond
>> to my ping.
>> I guess OVS is forwarding it properly to the VM but to the wrong tap
>> interface.
> Maybe this FAQ is relevant.  I can't tell for sure.
>
> ### Q: I configured one IP address on VLAN 0 and another on VLAN 9, like
>     this:
>
>         ovs-vsctl add-br br0
>         ovs-vsctl add-port br0 eth0
>         ifconfig br0 192.168.0.5
>         ovs-vsctl add-port br0 vlan9 tag=9 -- set interface vlan9 type=internal
>         ifconfig vlan9 192.168.0.9
>
>     but other hosts that are only on VLAN 0 can reach the IP address
>     configured on VLAN 9.  What's going on?
>
> A: RFC 1122 section 3.3.4.2 "Multihoming Requirements" describes two
>     approaches to IP address handling in Internet hosts:
>
>     - In the "Strong ES Model", where an ES is a host ("End
>       System"), an IP address is primarily associated with a
>       particular interface.  The host discards packets that arrive
>       on interface A if they are destined for an IP address that is
>       configured on interface B.  The host never sends packets from
>       interface A using a source address configured on interface B.
>
>     - In the "Weak ES Model", an IP address is primarily associated
>       with a host.  The host accepts packets that arrive on any
>       interface if they are destined for any of the host's IP
>       addresses, even if the address is configured on some
>       interface other than the one on which it arrived.  The host
>       does not restrict itself to sending packets from an IP
>       address associated with the originating interface.
>
>     Linux uses the weak ES model.  That means that when packets
>     destined to the VLAN 9 IP address arrive on eth0 and are bridged to
>     br0, the kernel IP stack accepts them there for the VLAN 9 IP
>     address, even though they were not received on vlan9, the network
>     device for vlan9.
>
>     To simulate the strong ES model on Linux, one may add iptables rule
>     to filter packets based on source and destination address and
>     adjust ARP configuration with sysctls.
>
>     BSD uses the strong ES model.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/5afa2513/attachment-0001.html>

From a.n.chippa at gmail.com  Tue Jan  6 16:48:41 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Tue, 6 Jan 2015 16:48:41 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <20150106230129.GD19347@nicira.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <20150106165236.GE478@nicira.com>
 <CABFtFw=cnjT+gYuSZn6wRweHunydN-pVkhYjaEHZHvSAFoTLkA@mail.gmail.com>
 <20150106214353.GC19347@nicira.com>
 <CABFtFwkb4R3uX3AHxNrgwaJwx32nO+GuajaVzANF0LtzsxRnBA@mail.gmail.com>
 <20150106230129.GD19347@nicira.com>
Message-ID: <CABFtFw=VkoauKmDrH8_7tThW3Bs5pEL3h89cNcq-OhZ0eMRY7Q@mail.gmail.com>

>From reading various docs, at some point (a few months ago) it did occur to
me that lookups are implemented similar to CAM lookups... Not sure why I
forgot that since then :(  In any case, thanks for humoring me so far... :)

BTW, I have seen ASICs that use hash tables (with indices) for FDB
tables.... For L3 I am aware of ASICs with TCAMs... With L3 there could be
issues such as low TCAM space and having to move bulk of entries to make
room for more specific/longer matches...  Naturally wondering how CAM like
lookups scale in software... Time to go dig deeper into the code...

In any case, now I see why it did not make sense to you :) Given how
lookups are implemented, now it does not make sense to me either :)
Thanks...


On Tue, Jan 6, 2015 at 3:01 PM, Ben Pfaff <blp at nicira.com> wrote:

> The OVS datapath extracts the packet headers then looks for a match in
> its flow table.  What part of that is the "flow index"?
>
> On Tue, Jan 06, 2015 at 02:01:51PM -0800, Ashok Chippa wrote:
> > Okay. How does the OVS datapath know this is a new flow? i.e. there is no
> > matching flow entry? Doesn't it derive some sort of an index (into the
> flow
> > table) from packet header fields? What am I missing? :)
> >
> > If this is explained in details somewhere, I would appreciate the
> pointer.
> >
> > Thanks,
> > ashok
> >
> > On Tue, Jan 6, 2015 at 1:43 PM, Ben Pfaff <blp at nicira.com> wrote:
> >
> > > On Tue, Jan 06, 2015 at 11:01:08AM -0800, Ashok Chippa wrote:
> > > > Perhaps once you understand, it will make sense? :)
> > > >
> > > > Call it whatever flow_id or cookie or xyz? Let me call it "flow
> index"
> > > for
> > > > the sake of this discussion. The ovs datapath has some sort of a flow
> > > index
> > > > to look into the flow table when a packet arrives, right? Now, how
> does
> > > the
> > > > ovs datapath arrive at this flow index (upon a packet arrival)? It
> takes
> > > > certain match parameters (from the packet header and perhaps some
> > > > metadata)  and hashes them, right?
> > >
> > > I don't think you understand how the OVS datapath works.
> > >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150106/c8dd0cd4/attachment.html>

From sammiestoel at gmail.com  Tue Jan  6 19:18:12 2015
From: sammiestoel at gmail.com (Sam Stoelinga)
Date: Wed, 7 Jan 2015 11:18:12 +0800
Subject: [ovs-discuss] QoS rate limit a port created by a Neutron virtual
	router
Message-ID: <CAJQK-mjH2OLrsUGbNhUUu5ypA2pDtVgVdDzeShg5XUktHJ6G2w@mail.gmail.com>

Hi,

I am trying to rate limit a port which is the gateway of a Neutron virtual
router without success.

I have created a virtual router with 2 ports:
ip netns exec qrouter-6a080f37-4da0-4646-ad36-062b748d15be ip a
10: qg-4bda7108-d2: <BROADCAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state
UNKNOWN
    link/ether fa:16:3e:95:cc:7b brd ff:ff:ff:ff:ff:ff
    inet 8.8.8.8/27 brd 119.81.159.223 scope global qg-4bda7108-d2
    inet 8.8.8.9/32 brd 119.81.159.207 scope global qg-4bda7108-d2
    inet 8.8.8.10/32 brd 119.81.159.209 scope global qg-4bda7108-d2
    inet6 fe80::f816:3eff:fe95:cc7b/64 scope link
       valid_lft forever preferred_lft forever
16: qr-a9b3962f-d4: <BROADCAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state
UNKNOWN
    link/ether fa:16:3e:c2:64:dd brd ff:ff:ff:ff:ff:ff
    inet 192.168.99.1/24 brd 192.168.99.255 scope global qr-a9b3962f-d4
    inet6 fe80::f816:3eff:fec2:64dd/64 scope link
       valid_lft forever preferred_lft forever

Now I want to rate limit the port qr-a9b3962f-d4 so that I can efficiently
rate limit the upstream connection of all instances using the virtual
router to connect to the internet. I have tried both to use the
ingress_policy_rate and to use the QoS queues without success.

These were the commands I tried:
(Using Default queue, doesn't work)
ovs-vsctl set port qr-a9b3962f-d4 qos=@newqos -- --id=@newqos create qos
type=linux-htb queues=0=@q0 -- --id=@q0 create queue
other-config:min-rate=1000000 other-config:max-rate=1000000
download rate was not limited to 1 mbitps

(Using specific queue and modify the flow to enqueue based on FAQ also
doesn't work)
ovs-vsctl set port qr-a9b3962f-d4 qos=@newqos -- --id=@newqos create qos
type=linux-htb queues=0=@q0 -- --id=@q0 create queue
other-config:min-rate=1000000 other-config:max-rate=1000000
ovs-ofctl add-flow br-int out_port=12,actions=set_queue:0,normal
download rate was not limited to 1 mbitps

Now what does work is if I go to the compute node and apply QoS on the
instance port directly like this:
ovs-vsctl set port {{port of instance}} qos=@newqos -- --id=@newqos create
qos type=linux-htb queues=0=@q0 -- --id=@q0 create queue
other-config:min-rate=1000000 other-config:max-rate=1000000
the above command immediately limits the download rate to 1 mbitps

Does anybody know what I'm doing wrong? I also posted a question on
stackexchange:
http://unix.stackexchange.com/questions/177680/is-traffic-control-inside-namespace-on-ports-created-by-openvswitch-supported
which shows that TC isn't working on interfaces created by openvswitch in a
namespace, which may be the root cause.

Help is greatly appreciated! Thanks in advance.

See related br-int:
    Bridge br-int
        Port int-br-ex
            Interface int-br-ex
        Port patch-tun
            Interface patch-tun
                type: patch
                options: {peer=patch-int}
        Port br-int
            Interface br-int
                type: internal
        Port "tap5074e9db-25"
            tag: 2
            Interface "tap5074e9db-25"
                type: internal
        Port "tap7f0b82cf-b1"
            tag: 3
            Interface "tap7f0b82cf-b1"
                type: internal
        Port "tap842b6685-8c"
            tag: 1
            Interface "tap842b6685-8c"
                type: internal
        Port "qr-a9b3962f-d4"
            tag: 1
            Interface "qr-a9b3962f-d4"
                type: internal
        Port "qr-abc388da-cf"
            tag: 2
            Interface "qr-abc388da-cf"
                type: internal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/4909bc5e/attachment.html>

From vishwa.info at gmail.com  Wed Jan  7 00:14:08 2015
From: vishwa.info at gmail.com (Vishwa)
Date: Wed, 7 Jan 2015 13:44:08 +0530
Subject: [ovs-discuss] MSS clamping
Message-ID: <CAJ4=-OiitW_+0GEjY6kCc1G5GuWmZty37vp1-2MWqEOTh=pA5g@mail.gmail.com>

Hi All,
I am newbie to OVS world. I have installed OVS on linux platform. I have
GRE tunnel in my setup and because of this I am planning to use MSS
clamping using iptables. But it is not working as expected.
Does iptables work on bridges created using OVS ?
If not, How can do this in OVS (is there any alternate other than iptables)
?

Thanks.


-- 
regards,
Vishwa.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/6c9c7fcb/attachment.html>

From james.page at ubuntu.com  Wed Jan  7 01:03:53 2015
From: james.page at ubuntu.com (James Page)
Date: Wed, 07 Jan 2015 09:03:53 +0000
Subject: [ovs-discuss] SIGSEGV in nl_attr_get_size() - OVS 2.0.2
In-Reply-To: <CAGeueKgwfZN_DPigevsPe7zsuVecH2WpDJvUnFtd-ypyo4wvCw@mail.gmail.com>
References: <CAGeueKhhob0EVpt5EF4cZxwcciAM3Qw8VxaH7-yDhUQ0TFpQ=w@mail.gmail.com>
 <20141031224241.GL13010@nicira.com>
 <CAGeueKgwfZN_DPigevsPe7zsuVecH2WpDJvUnFtd-ypyo4wvCw@mail.gmail.com>
Message-ID: <54ACF679.6000201@ubuntu.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Duncan/Ben

I've seen this SIGSEGV reported twice on this ML and I think its
probably the root cause of:

  https://bugs.launchpad.net/ubuntu/+source/openvswitch/+bug/1336555

I'll dig in a see if this an optimizer bug of some description.

On 04/11/14 00:40, Duncan Idaho wrote:
> Strange indeed.
> 
> Ubuntu built this binary with this GCC: (Ubuntu 4.8.2-19ubuntu1)
> 4.8.2
> 
> Let me know if there is any other information I can provide that
> would be helpful here.


- -- 
James Page
Ubuntu and Debian Developer
james.page at ubuntu.com
jamespage at debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJUrPZ1AAoJEL/srsug59jDm60P/jav3ONRTf/ddP2p/eBZNZeS
IemrQCtVkmYdPWcr0BmlZYzOckxqM2Lywtu7bTqBx93b7BcEq84hR2zbIuVD+bht
D9zmoQzULpw5HVqfG1N0YcTZGRYvU63pW3CP50dYQlfGrhc7/9Dv/URc1pBBBIr3
oCpb3YOuyzQySqQCAcV614NLuhd8G8ICzVE+Ah0ZeKoRjeX5GpDpta3SrHf0b62X
pP+35uXPrKhmasVTouijuYcNZxRWwDDyRLLDW3be7HJuywiys15KYSNkGijQ/eIH
EcNM0+yJjWYu83FU5/mpw6Nvm7tUS3ZrBnoS3wLIYS+TjHa2gBkwIusea+9Y1Srl
aYRvpbrsMlO/rKjKH0mDPCfItlzQ/qWOB/h+tsqxCLb2P774PqI2YAJ5DaGF/SQk
kAR0JDI8OSZOxTadh62Nc6s5mJgtipcTGdY7H6o1c/9ParIT/F6SmyQ6Q2c/UAui
3GxI/JgGPStA/4gO8dN43L+e4exNffkbLlEzrZ/G8f86BnfHJOdKuPZkt2QLV0gx
obsP3fOT/QFMcyzQ6laK7v1LSXqAL0sbbcV784/KmsEwM2vi3tWtpU5Um70hsrfP
HPW6i4rzT++UbqzvW7JGLte30ZnP1uNbOXPIObMhq4SCY6lXnzBN1YweDQxy6di8
2euy/69REHam1bgWJ9a/
=QGxf
-----END PGP SIGNATURE-----

From kevin.traynor at intel.com  Wed Jan  7 02:26:07 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Wed, 7 Jan 2015 10:26:07 +0000
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>

I notice in the logs you have “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not supported in OVS at present. There is a patch for it but it was causing an issue with unit test and is being reworked.

I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK 1.7.1)

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Shankari Vaidyalingam
Sent: Tuesday, January 6, 2015 6:56 PM
To: Ben Pfaff
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] Difference seen in OVSDB initialization with & without DPDK

Also to add to the below mail which I'd sent pls find below the output of starting OVS with the debugs enabled:

controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:

2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16 nodes, 8 buckets)
 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock: connection failed (Connection refused)
2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connection attempt failed (Connection refused)
2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: waiting 2.15e+06 seconds before reconnect
2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Connection refused)
 DBG: Trying to reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$<mailto:reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$> ps -Af | grep ovsdb-server
root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring pid 963 (healthy)
root       963   962  0 Jan03 ?        00:00:00 ovsdb-server /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info --remote=punix:/var/run/openvswitch/db.sock --private-key=db:Open_vSwitch,SSL,private_key --certificate=db:Open_vSwitch,SSL,certificate --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir --log-file=/var/log/openvswitch/ovsdb-server.log --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto ovsdb-server

Regards
Shankari.V

On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
Hi

The excerpt below was due to a wrong copy paste of the commands at the command prompt which gave the error message: "No such file or directory".
The error which I had mentioned in my previous message was:

controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovsdb-tool create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovsdb-server /usr/local/etc/openvswitch/conf.db --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach --log-file
2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file /usr/local/var/log/openvswitch/ovsdb-server.log



controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovs-vsctl --no-wait init

 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Connection refused)
Regards
Shankari.V

On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com<mailto:blp at nicira.com>> wrote:
Here's an excerpt from your "with DPDK" log. It looks like you typoed
a command and therefore ovsdb-server didn't start.

controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$>
controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo
ovsdb-server /usr/local/etc/openvswitch/conf.db
--remote=punix:/usr/local/var/run/openvswitch/db.sock
--remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
--detach --log-file
bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$>: No
such file or directory

On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
<shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
> Hi,
>
> I tried executing the steps for initializing the OVSDB-server and the OVS
> given in the below link:
>
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/<http://networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/>
>
> I'm using Ubuntu Trusty tahr, OVS version 2.3.1
>
> I was able to get the OVS working for the build which I compiled without
> DPDK.
> But with DPDK_BUILD configured in the Makefile the build produced "Database
> connection refused" error and the OVS was not getting started because of
> this error. Kindly help me in resolving this issue.
>
> Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> build
>
> Regards,
> Shankari.V
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org<mailto:discuss at openvswitch.org>
> http://openvswitch.org/mailman/listinfo/discuss
>



--
"I don't normally do acked-by's.  I think it's my way of avoiding
getting blamed when it all blows up."               Andrew Morton


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/f9a6ed4a/attachment-0001.html>

From thomasfherbert at gmail.com  Wed Jan  7 06:50:16 2015
From: thomasfherbert at gmail.com (Thomas F Herbert)
Date: Wed, 07 Jan 2015 09:50:16 -0500
Subject: [ovs-discuss] QinQ support
In-Reply-To: <54AC3F04.6030808@mitaka-g.net>
References: <54AAF954.5040902@mitaka-g.net> <54AB2CA2.8060700@gmail.com>
 <54AC3F04.6030808@mitaka-g.net>
Message-ID: <54AD47A8.1000003@gmail.com>

Dimitar,

802.1ad will separate client traffic from each other and from provider 
traffic. Each level of VLAN tag will is 12 bits. So you could have 4096 
provider VLANS and then within each of those provider VLANS you could 
have 4094 "customer" or in your case client VLANs.

You can try our patch for 802.1ad but you will have to build OVS from 
source.

As is the case with 802.1ad, openflow spec supports 802.1ah (PBB) but 
OVS doesn't support it as yet.

There have been several contributions toward this goal. We at EntryPoint 
hope to work on this as well after 802.1ad.

--Tom

On 1/6/15 3:01 PM, Dimitar Ianakiev wrote:
> Hello,
>
> Thanks for the reply. I will look at 802.1ah. Currently our architecture
> does not involve physical hardware as we do not have control over it. We
> were planning on using the provided private network from the data centre
> and separating the traffic of our clients inside this vlan. We just need
> to host more than 4094 vlans in such network. Does the openvswitch
> support 802.1ah?
>
> Regards
> Dimitar
>
> On 06/01/15 02:30, Thomas F Herbert wrote:
>> Dimitar,
>>
>> Open vSwitch does not currently support 802.1ad. I have submitted a
>> patch for 802.1ad and I am in the process of submitting a new version.
>> However, 802.1ad will not solve the namespace problem. Perhaps you are
>> thinking of 802.1ah?
>>
>> --Tom
>>
>> On 1/5/15 3:51 PM, Dimitar Ianakiev wrote:
>>> Hello,
>>>
>>> We are using openvswitch for some time and we are trying to implement
>>> "private vlans" for our customers. Each customer should have vlan(s)
>>> between his/her virtual instances. The problem with 802.1q vlans is that
>>> we are expecting more than 4094 clients per openvswitch instance and the
>>> vlan limit is 4096. We are considering QinQ(802.1ad).
>>>
>>> My question is if ovs supports QinQ and how this can be achieved ?
>>> Please propose other approach if this is not a good solution to the
>>> problem.
>>>
>>> Regards
>>> Dimitar Ianakiev
>>> _______________________________________________
>>> discuss mailing list
>>> discuss at openvswitch.org
>>> http://openvswitch.org/mailman/listinfo/discuss
>>


-- 
Thomas F. Herbert


From blp at nicira.com  Wed Jan  7 08:18:56 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 7 Jan 2015 08:18:56 -0800
Subject: [ovs-discuss] SIGSEGV in nl_attr_get_size() - OVS 2.0.2
In-Reply-To: <54ACF679.6000201@ubuntu.com>
References: <CAGeueKhhob0EVpt5EF4cZxwcciAM3Qw8VxaH7-yDhUQ0TFpQ=w@mail.gmail.com>
 <20141031224241.GL13010@nicira.com>
 <CAGeueKgwfZN_DPigevsPe7zsuVecH2WpDJvUnFtd-ypyo4wvCw@mail.gmail.com>
 <54ACF679.6000201@ubuntu.com>
Message-ID: <20150107161856.GA22895@nicira.com>

Thanks.  In the past I've tried but I've been unable to track down the
root cause.  I also suspected some kind of compiler bug or strange
interaction.

On Wed, Jan 07, 2015 at 09:03:53AM +0000, James Page wrote:
> Duncan/Ben
> 
> I've seen this SIGSEGV reported twice on this ML and I think its
> probably the root cause of:
> 
>   https://bugs.launchpad.net/ubuntu/+source/openvswitch/+bug/1336555
> 
> I'll dig in a see if this an optimizer bug of some description.
> 
> On 04/11/14 00:40, Duncan Idaho wrote:
> > Strange indeed.
> > 
> > Ubuntu built this binary with this GCC: (Ubuntu 4.8.2-19ubuntu1)
> > 4.8.2
> > 
> > Let me know if there is any other information I can provide that
> > would be helpful here.

From hyunon at essex.ac.uk  Wed Jan  7 08:54:41 2015
From: hyunon at essex.ac.uk (Han, Yunong)
Date: Wed, 7 Jan 2015 16:54:41 +0000
Subject: [ovs-discuss] wrong buffer_id ?
Message-ID: <1420649680465.63309@essex.ac.uk>

Hi everyone,


I'm running ovs 2.1.2 on TP-link router (openwrt installed). I got the error message Error OFPET_BAD_REQUEST OFPBRC_BUFFER_UNKNOWN from OFSwitchImpl.


I checked the system log and found the messages:


daemon.warn ovs-vswitchd: ovs|20991|pktbuf|WARN|attempt to reuse buffer 00000000

daemon.notice ovs-vswitchd: ovs|20992|connmgr|INFO|dp0<->tcp:155.245.64.10: sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message


I did some research and it seems that the error is caused by wrong buffer_id ?  correct me if my understand is wrong.  Also, how can I fix this error ?   Thanks in advance.


regards

YUNONG

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/49cbac2d/attachment.html>

From lists at mitaka-g.net  Wed Jan  7 09:07:24 2015
From: lists at mitaka-g.net (Dimitar Ianakiev)
Date: Wed, 07 Jan 2015 19:07:24 +0200
Subject: [ovs-discuss] QinQ support
In-Reply-To: <54AD47A8.1000003@gmail.com>
References: <54AAF954.5040902@mitaka-g.net> <54AB2CA2.8060700@gmail.com>
 <54AC3F04.6030808@mitaka-g.net> <54AD47A8.1000003@gmail.com>
Message-ID: <54AD67CB.2010805@mitaka-g.net>

Hi Tom,

Thank you very much for the clarification. I am looking forward to your
patch. Meanwhile I will take a look at the code of OVS and see if I can
patch it myself.

Regards
Dimitar


On 07/01/15 16:50, Thomas F Herbert wrote:
> Dimitar,
>
> 802.1ad will separate client traffic from each other and from provider
> traffic. Each level of VLAN tag will is 12 bits. So you could have
> 4096 provider VLANS and then within each of those provider VLANS you
> could have 4094 "customer" or in your case client VLANs.
>
> You can try our patch for 802.1ad but you will have to build OVS from
> source.
>
> As is the case with 802.1ad, openflow spec supports 802.1ah (PBB) but
> OVS doesn't support it as yet.
>
> There have been several contributions toward this goal. We at
> EntryPoint hope to work on this as well after 802.1ad.
>
> --Tom
>
> On 1/6/15 3:01 PM, Dimitar Ianakiev wrote:
>> Hello,
>>
>> Thanks for the reply. I will look at 802.1ah. Currently our architecture
>> does not involve physical hardware as we do not have control over it. We
>> were planning on using the provided private network from the data centre
>> and separating the traffic of our clients inside this vlan. We just need
>> to host more than 4094 vlans in such network. Does the openvswitch
>> support 802.1ah?
>>
>> Regards
>> Dimitar
>>
>> On 06/01/15 02:30, Thomas F Herbert wrote:
>>> Dimitar,
>>>
>>> Open vSwitch does not currently support 802.1ad. I have submitted a
>>> patch for 802.1ad and I am in the process of submitting a new version.
>>> However, 802.1ad will not solve the namespace problem. Perhaps you are
>>> thinking of 802.1ah?
>>>
>>> --Tom
>>>
>>> On 1/5/15 3:51 PM, Dimitar Ianakiev wrote:
>>>> Hello,
>>>>
>>>> We are using openvswitch for some time and we are trying to implement
>>>> "private vlans" for our customers. Each customer should have vlan(s)
>>>> between his/her virtual instances. The problem with 802.1q vlans is
>>>> that
>>>> we are expecting more than 4094 clients per openvswitch instance
>>>> and the
>>>> vlan limit is 4096. We are considering QinQ(802.1ad).
>>>>
>>>> My question is if ovs supports QinQ and how this can be achieved ?
>>>> Please propose other approach if this is not a good solution to the
>>>> problem.
>>>>
>>>> Regards
>>>> Dimitar Ianakiev
>>>> _______________________________________________
>>>> discuss mailing list
>>>> discuss at openvswitch.org
>>>> http://openvswitch.org/mailman/listinfo/discuss
>>>
>
>


From joestringer at nicira.com  Wed Jan  7 09:46:18 2015
From: joestringer at nicira.com (Joe Stringer)
Date: Wed, 7 Jan 2015 09:46:18 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
Message-ID: <CANr6G5yAJFzCDgpcOSx7FFptq6wSYu1deP2UE_bLaY=-Q8H0sQ@mail.gmail.com>

Is there something particular that you're trying to achieve which
standard OpenFlow cookies do not provide?

On 5 January 2015 at 23:24, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> Hi,
>
> Could someone please let me know if my request can be accomodated...
>
> I have asked a few times for this before, but I'll ask again:
>
> Basically, I need a new ofp_type support... something like
> OFPT_GET_FLOWID_REQUEST and OFPT_GET_FLOWID_RESPONSE.
>
> Looking for an API, that given certain match parameters in an ofp_type
> OFPT_GET_FLOWID_REQUEST message, returns a FLOWID (or cookie)... in the
> OFPT_GET_FLOWID_RESPONSE message.
>
> Basically take that part of the "ovs-ofctl add-flow <bridge-name> <flow>"...
> code that determines the flow_id and use it to implement the above API. In
> this API the flow comes from the OFPT_GET_FLOWID_REQUEST instead of the
> "ovs-ofctl add-flow..." CLI...
>
> Please someone let me know if this can be added.. or if I should add it...
> If later, could someone kindly guide me to where supoprt for "ovs-ofctl
> add-flow..." resides...
>
> Thanks,
> Ashok
>
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From benoitne at gmail.com  Wed Jan  7 09:50:55 2015
From: benoitne at gmail.com (Ben)
Date: Wed, 07 Jan 2015 18:50:55 +0100
Subject: [ovs-discuss] Vlan & OVS basic concepts
In-Reply-To: <54AC70F2.2060007@gmail.com>
References: <549A94FA.7060805@gmail.com> <3188267.6epc1LhtVY@t520.home>
 <E23D776E-0F9B-48E2-9E54-9D01C1AD28E0@gmail.com>
 <6047309.98caJuJXKu@t520.home> <54AC2FF5.10201@gmail.com>
 <20150106212153.GB19347@nicira.com> <54AC70F2.2060007@gmail.com>
Message-ID: <54AD71FF.50609@gmail.com>

more information on this one :

doing packet capture I can see that TTL is not decreasing when I ping 
from VM1 (192.168.1.2) to VM2 (10.10.1.2)
this means that VM2 is not doing any routing.

When I ping 10.10.1.2 I see that it is the MAC address from eth0 
(192.168.1.2) who is responding.

At the end it is like the kernel is usurpating the IP address from the 
other interface but not doing any routing process!

iptables FORWARD DROP & ip_forward=0 is not changing anything.

to double check I tried to not only access to the 10.10.1.2 IP Address 
but another address connected (one more jump) and here I can see that 
iptables & ip_forward is doing the right job.

Someone has seen this before? Is there a way to ajdust the kernel to not 
act like this ? (any tips on iptables if there is no other choice?)

Many thanks :-)

On 07/01/2015 0:34, Ben wrote:
> Thanks Ben,
>
> I found this FAQ this morning and this is the reason I tried to tweak 
> my kernel but no effect :(
> Even dropping policy on forward iptables is not doing anything, I can 
> still ping on all direction.
>
> As I haven't been so clear this is what I discover :
>
> I ----------------Server 1---------------- I=eth0=Direct Patch=eth0=I 
> ----------------Server 2----------------- I
> I--------------------VM1------------------I 
> I--------------------VM2-------------------I
> I      eth0 (192.168.1.1/24) I I     eth0 (192.168.1.2/24)             I
> I      eth1 (10.10.1.1) I I eth1 (10.10.1.2)                      I
>
> on both Server 1 and Server 2
> ovs-vsctl add-br vswitch-trust
> ovs-vsctl add-port vswitch-trust eth0
> ovs-vsctl add-port vswitch-trust tap50 tag=50
> ovs-vsctl add-port vswitch-trust tap60 tag=60
>
> eth0 on VM is linked to tap50
> eth1 on VM is linked to tap60
>
> from VM1 I can ping 192.168.1.2 & 10.10.1.2 as expected.
> from VM2 I can ping 192.168.1.1 & 10.10.1.1 as expected.
> If I removed eth1 on VM*1* and try to ping 192.168.1.2 from VM1 I can 
> as expected.
> adding ip route add via 192.168.1.2 on VM1 I can ping 10.10.1.2
>
> so VM2 is routing the trafic even if it is not on the same vlan, I 
> suspect because it is done on VM and vlan is done on server (not VM)
>
> If you have any idea I would be very happy :)
>
> belette
>
> On 06/01/2015 22:21, Ben Pfaff wrote:
>> On Tue, Jan 06, 2015 at 07:56:53PM +0100, Ben wrote:
>>> I just figured out a strange behaviour :
>>>
>>> If I set two tap devices on 2 VM (tap50 & tap60) and set tap50
>>> tag=50 and tap60 tag=60 on ovs I noticed that it is working well.
>>> Each VM IP can ping each other on the same vlan, but if I erase one
>>> IP address on one vm and add a default gw to route all the traffic
>>> on the second tap interface I noticed that the other vm is still
>>> responding to the ping even if I am requestiing an ip address into
>>> the other vlan.
>>>
>>> I check ip forwarding and ajust the rp_ & arp filter on my linux
>>> kernel and iptables forward to deny everything but is keeps respond
>>> to my ping.
>>> I guess OVS is forwarding it properly to the VM but to the wrong tap
>>> interface.
>> Maybe this FAQ is relevant.  I can't tell for sure.
>>
>> ### Q: I configured one IP address on VLAN 0 and another on VLAN 9, like
>>     this:
>>
>>         ovs-vsctl add-br br0
>>         ovs-vsctl add-port br0 eth0
>>         ifconfig br0 192.168.0.5
>>         ovs-vsctl add-port br0 vlan9 tag=9 -- set interface vlan9 type=internal
>>         ifconfig vlan9 192.168.0.9
>>
>>     but other hosts that are only on VLAN 0 can reach the IP address
>>     configured on VLAN 9.  What's going on?
>>
>> A: RFC 1122 section 3.3.4.2 "Multihoming Requirements" describes two
>>     approaches to IP address handling in Internet hosts:
>>
>>     - In the "Strong ES Model", where an ES is a host ("End
>>       System"), an IP address is primarily associated with a
>>       particular interface.  The host discards packets that arrive
>>       on interface A if they are destined for an IP address that is
>>       configured on interface B.  The host never sends packets from
>>       interface A using a source address configured on interface B.
>>
>>     - In the "Weak ES Model", an IP address is primarily associated
>>       with a host.  The host accepts packets that arrive on any
>>       interface if they are destined for any of the host's IP
>>       addresses, even if the address is configured on some
>>       interface other than the one on which it arrived.  The host
>>       does not restrict itself to sending packets from an IP
>>       address associated with the originating interface.
>>
>>     Linux uses the weak ES model.  That means that when packets
>>     destined to the VLAN 9 IP address arrive on eth0 and are bridged to
>>     br0, the kernel IP stack accepts them there for the VLAN 9 IP
>>     address, even though they were not received on vlan9, the network
>>     device for vlan9.
>>
>>     To simulate the strong ES model on Linux, one may add iptables rule
>>     to filter packets based on source and destination address and
>>     adjust ARP configuration with sysctls.
>>
>>     BSD uses the strong ES model.
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150107/3b791323/attachment.html>

From joestringer at nicira.com  Wed Jan  7 09:52:18 2015
From: joestringer at nicira.com (Joe Stringer)
Date: Wed, 7 Jan 2015 09:52:18 -0800
Subject: [ovs-discuss] Resending request for a new API between
 controller and switch
In-Reply-To: <CANr6G5yAJFzCDgpcOSx7FFptq6wSYu1deP2UE_bLaY=-Q8H0sQ@mail.gmail.com>
References: <CABFtFwnB5qsk4dSZV+NO0CR1uh7kE1kxDx+wx4EebaRbnMCD0g@mail.gmail.com>
 <CANr6G5yAJFzCDgpcOSx7FFptq6wSYu1deP2UE_bLaY=-Q8H0sQ@mail.gmail.com>
Message-ID: <CANr6G5wGsxGq2L-V-Oe-inq5Bg-DLsgUTpUBVs5pGDLtrCA0yQ@mail.gmail.com>

Woops, missed the sibling thread. Please disregard.

On 7 January 2015 at 09:46, Joe Stringer <joestringer at nicira.com> wrote:
> Is there something particular that you're trying to achieve which
> standard OpenFlow cookies do not provide?
>
> On 5 January 2015 at 23:24, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>> Hi,
>>
>> Could someone please let me know if my request can be accomodated...
>>
>> I have asked a few times for this before, but I'll ask again:
>>
>> Basically, I need a new ofp_type support... something like
>> OFPT_GET_FLOWID_REQUEST and OFPT_GET_FLOWID_RESPONSE.
>>
>> Looking for an API, that given certain match parameters in an ofp_type
>> OFPT_GET_FLOWID_REQUEST message, returns a FLOWID (or cookie)... in the
>> OFPT_GET_FLOWID_RESPONSE message.
>>
>> Basically take that part of the "ovs-ofctl add-flow <bridge-name> <flow>"...
>> code that determines the flow_id and use it to implement the above API. In
>> this API the flow comes from the OFPT_GET_FLOWID_REQUEST instead of the
>> "ovs-ofctl add-flow..." CLI...
>>
>> Please someone let me know if this can be added.. or if I should add it...
>> If later, could someone kindly guide me to where supoprt for "ovs-ofctl
>> add-flow..." resides...
>>
>> Thanks,
>> Ashok
>>
>>
>>
>> _______________________________________________
>> discuss mailing list
>> discuss at openvswitch.org
>> http://openvswitch.org/mailman/listinfo/discuss
>>

From shankari.v.2014 at gmail.com  Wed Jan  7 11:33:41 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Thu, 8 Jan 2015 01:03:41 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
Message-ID: <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>

Hi Kevin

Thanks  for the response.
I used DPDK-1.7.1 and used the same for building the OVS. The OVS version I
use is OVS 2.3.1.
I followed the steps mentioned in INSTALL.DPDK in
https://github.com/openvswitch/ovs/blob/master/INSTALL.DPDK.md.
I'm getting the below error while executing the make command. Pls let me
know whether there exists a patch for resolving the issue. I know how to
resolve the last 2 errors.

/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:115:2:
warning: cast from function call of type 'uintptr_t' to non-matching type
'void *' [-Wbad-function-cast]
  (typeof(ptr))rte_align_floor_int((uintptr_t)ptr, align)
  ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:133:2:
note: in expansion of macro 'RTE_PTR_ALIGN_FLOOR'
  RTE_PTR_ALIGN_FLOOR((typeof(ptr))RTE_PTR_ADD(ptr, (align) - 1), align)
  ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:151:35:
note: in expansion of macro 'RTE_PTR_ALIGN_CEIL'
 #define RTE_PTR_ALIGN(ptr, align) RTE_PTR_ALIGN_CEIL(ptr, align)
                                   ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:176:9:
note: in expansion of macro 'RTE_PTR_ALIGN'
  return RTE_PTR_ALIGN(ptr, align) == ptr;
         ^
In file included from lib/dpif.h:393:0,
                 from lib/bfd.c:27:
lib/ofpbuf.h: In function 'ofpbuf_size':
lib/ofpbuf.h:385:21: error: 'const struct rte_mbuf' has no member named
'pkt_len'
       return b->mbuf.pkt_len;
                     ^
lib/ofpbuf.h: In function 'ofpbuf_set_size':
lib/ofpbuf.h:394:12: error: 'struct rte_mbuf' has no member named 'pkt_len'
     b->mbuf.pkt_len = v;
            ^
In file included from lib/dpif.h:393:0,
                 from lib/bfd.c:27:
lib/ofpbuf.h: In function 'ofpbuf_size':
lib/ofpbuf.h:386:1: warning: control reaches end of non-void function
[-Wreturn-type]
 }
 ^
make[2]: *** [lib/bfd.lo] Error 1
make[2]: Leaving directory
`/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
make: *** [all] Error 2

Regards
Shankari.V

On Wed, Jan 7, 2015 at 3:56 PM, Traynor, Kevin <kevin.traynor at intel.com>
wrote:

>  I notice in the logs you have
> “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not
> supported in OVS at present. There is a patch for it but it was causing an
> issue with unit test and is being reworked.
>
>
>
> I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK
> 1.7.1)
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* discuss [mailto:discuss-bounces at openvswitch.org] *On Behalf Of *Shankari
> Vaidyalingam
> *Sent:* Tuesday, January 6, 2015 6:56 PM
> *To:* Ben Pfaff
> *Cc:* discuss at openvswitch.org
> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization with
> & without DPDK
>
>
>
> Also to add to the below mail which I'd sent pls find below the output of
> starting OVS with the debugs enabled:
>
> controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:
>
> 2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
> 2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
> nodes, 8 buckets)
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> 2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock:
> connection failed (Connection refused)
> 2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
> 2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
> 2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connection attempt failed (Connection refused)
> 2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> waiting 2.15e+06 seconds before reconnect
> 2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>  DBG: Trying to
> reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
> ps -Af | grep ovsdb-server
> root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring
> pid 963
> (healthy)
>
> root       963   962  0 Jan03 ?        00:00:00 ovsdb-server
> /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info
> --remote=punix:/var/run/openvswitch/db.sock
> --private-key=db:Open_vSwitch,SSL,private_key
> --certificate=db:Open_vSwitch,SSL,certificate
> --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir
> --log-file=/var/log/openvswitch/ovsdb-server.log
> --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
> control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto
> ovsdb-server
>
>  Regards
>
> Shankari.V
>
>
>
> On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <
> shankari.v.2014 at gmail.com> wrote:
>
>    Hi
>
>
>
> The excerpt below was due to a wrong copy paste of the commands at the
> command prompt which gave the error message: "No such file or directory".
>
> The error which I had mentioned in my previous message was:
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-tool
> create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
> --log-file
> 2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file
> /usr/local/var/log/openvswitch/ovsdb-server.log
>
>
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovs-vsctl
> --no-wait init
>
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>
> Regards
>
> Shankari.V
>
>
>
> On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com> wrote:
>
> Here's an excerpt from your "with DPDK" log. It looks like you typoed
> a command and therefore ovsdb-server didn't start.
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
> --detach --log-file
> bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
> such file or directory
>
>
> On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
> <shankari.v.2014 at gmail.com> wrote:
> > Hi,
> >
> > I tried executing the steps for initializing the OVSDB-server and the OVS
> > given in the below link:
> >
> >
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
> >
> > I'm using Ubuntu Trusty tahr, OVS version 2.3.1
> >
> > I was able to get the OVS working for the build which I compiled without
> > DPDK.
> > But with DPDK_BUILD configured in the Makefile the build produced
> "Database
> > connection refused" error and the OVS was not getting started because of
> > this error. Kindly help me in resolving this issue.
> >
> > Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> > build
> >
> > Regards,
> > Shankari.V
> >
>
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> >
>
>
>
> --
> "I don't normally do acked-by's.  I think it's my way of avoiding
> getting blamed when it all blows up."               Andrew Morton
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150108/9ca9ed41/attachment-0001.html>

From jesse at nicira.com  Wed Jan  7 12:38:05 2015
From: jesse at nicira.com (Jesse Gross)
Date: Wed, 7 Jan 2015 12:38:05 -0800
Subject: [ovs-discuss] MSS clamping
In-Reply-To: <CAJ4=-OiitW_+0GEjY6kCc1G5GuWmZty37vp1-2MWqEOTh=pA5g@mail.gmail.com>
References: <CAJ4=-OiitW_+0GEjY6kCc1G5GuWmZty37vp1-2MWqEOTh=pA5g@mail.gmail.com>
Message-ID: <CAEP_g=9-1RarucyCs_iE=N1BexPA1Br9xS63Ps=FVhGEqr+LYw@mail.gmail.com>

On Wed, Jan 7, 2015 at 12:14 AM, Vishwa <vishwa.info at gmail.com> wrote:
> Hi All,
> I am newbie to OVS world. I have installed OVS on linux platform. I have GRE
> tunnel in my setup and because of this I am planning to use MSS clamping
> using iptables. But it is not working as expected.
> Does iptables work on bridges created using OVS ?
> If not, How can do this in OVS (is there any alternate other than iptables)
> ?

There have been some discussions on how to resolve this automatically
but there is nothing currently available. The current recommendation
is to manually adjust MTUs.

From shankari.v.2014 at gmail.com  Wed Jan  7 12:39:25 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Thu, 8 Jan 2015 02:09:25 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>
Message-ID: <CAGuFQhAbpXkhOLuqifrqzTyCPwFi2uVSAQdoMNDEY7XnkK5rWQ@mail.gmail.com>

Hi

I resolved the below mentioned compiler errors and the build goes fine.
But the issue with the database connectivity still persists. Now the error
message seen is different. Pls find the logs below. Let me know how to
resolve this:

controller at controller-Latitude-E5440:~/$ cd openvswitch-2.3.1
controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-tool create
/usr/local/etc/openvswitch/conf.db ./vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-server
--remote=punix:/usr/local/var/run/openvswitch/db.sock
--remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
controller at controller-Latitude-E5440:~/$ sudo ./utilities/ovs-vsctl
--no-wait --verbose init

2015-01-07T20:35:37Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering BACKOFF
 I'm executing here 226
2015-01-07T20:35:37Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
nodes, 8 buckets)
 DSBG: Name of the session opened =
unix:/usr/local/var/run/openvswitch/db.sock, pstream_verify_name(name) = 97
retry = 0
 Can proceed further
 About to connect to the dataabase 239
2015-01-07T20:35:37Z|00004|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
connecting...
2015-01-07T20:35:37Z|00005|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering CONNECTING
2015-01-07T20:35:37Z|00006|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4
(<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd-unix.c:120
2015-01-07T20:35:37Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
connected
2015-01-07T20:35:37Z|00008|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering ACTIVE
 ovsdb_idl_
is_alive(idl) = 1
2015-01-07T20:35:37Z|00009|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
send request, method="monitor",
params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
2015-01-07T20:35:37Z|00010|jsonrpc|WARN|unix:/usr/local/var/run/openvswitch/db.sock:
send error: Bad address
2015-01-07T20:35:37Z|00011|poll_loop|DBG|wakeup due to 0-ms timeout at
unix:/usr/local/var/run/openvswitch/db.sock
2015-01-07T20:35:37Z|00012|reconnect|WARN|unix:/usr/local/var/run/openvswitch/db.sock:
connection dropped (Bad address)
2015-01-07T20:35:37Z|00013|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
entering BACKOFF
 DBG: Returning 0 without any action
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection
failed (Bad address)
 DBG: Returning 0 without any actioncontroller at controller-Latitude-E5440:~/$


Regards
Shankari

On Thu, Jan 8, 2015 at 1:03 AM, Shankari Vaidyalingam <
shankari.v.2014 at gmail.com> wrote:

> Hi Kevin
>
> Thanks  for the response.
> I used DPDK-1.7.1 and used the same for building the OVS. The OVS version
> I use is OVS 2.3.1.
> I followed the steps mentioned in INSTALL.DPDK in
> https://github.com/openvswitch/ovs/blob/master/INSTALL.DPDK.md.
> I'm getting the below error while executing the make command. Pls let me
> know whether there exists a patch for resolving the issue. I know how to
> resolve the last 2 errors.
>
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:115:2:
> warning: cast from function call of type 'uintptr_t' to non-matching type
> 'void *' [-Wbad-function-cast]
>   (typeof(ptr))rte_align_floor_int((uintptr_t)ptr, align)
>   ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:133:2:
> note: in expansion of macro 'RTE_PTR_ALIGN_FLOOR'
>   RTE_PTR_ALIGN_FLOOR((typeof(ptr))RTE_PTR_ADD(ptr, (align) - 1), align)
>   ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:151:35:
> note: in expansion of macro 'RTE_PTR_ALIGN_CEIL'
>  #define RTE_PTR_ALIGN(ptr, align) RTE_PTR_ALIGN_CEIL(ptr, align)
>                                    ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:176:9:
> note: in expansion of macro 'RTE_PTR_ALIGN'
>   return RTE_PTR_ALIGN(ptr, align) == ptr;
>          ^
> In file included from lib/dpif.h:393:0,
>                  from lib/bfd.c:27:
> lib/ofpbuf.h: In function 'ofpbuf_size':
> lib/ofpbuf.h:385:21: error: 'const struct rte_mbuf' has no member named
> 'pkt_len'
>        return b->mbuf.pkt_len;
>                      ^
> lib/ofpbuf.h: In function 'ofpbuf_set_size':
> lib/ofpbuf.h:394:12: error: 'struct rte_mbuf' has no member named 'pkt_len'
>      b->mbuf.pkt_len = v;
>             ^
> In file included from lib/dpif.h:393:0,
>                  from lib/bfd.c:27:
> lib/ofpbuf.h: In function 'ofpbuf_size':
> lib/ofpbuf.h:386:1: warning: control reaches end of non-void function
> [-Wreturn-type]
>  }
>  ^
> make[2]: *** [lib/bfd.lo] Error 1
> make[2]: Leaving directory
> `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory
> `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
> make: *** [all] Error 2
>
> Regards
> Shankari.V
>
> On Wed, Jan 7, 2015 at 3:56 PM, Traynor, Kevin <kevin.traynor at intel.com>
> wrote:
>
>>  I notice in the logs you have
>> “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not
>> supported in OVS at present. There is a patch for it but it was causing an
>> issue with unit test and is being reworked.
>>
>>
>>
>> I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK
>> 1.7.1)
>>
>>
>>
>> Thanks,
>>
>> Kevin.
>>
>>
>>
>> *From:* discuss [mailto:discuss-bounces at openvswitch.org] *On Behalf Of *Shankari
>> Vaidyalingam
>> *Sent:* Tuesday, January 6, 2015 6:56 PM
>> *To:* Ben Pfaff
>> *Cc:* discuss at openvswitch.org
>> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization
>> with & without DPDK
>>
>>
>>
>> Also to add to the below mail which I'd sent pls find below the output of
>> starting OVS with the debugs enabled:
>>
>>
>> controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
>> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:
>>
>> 2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
>> entering BACKOFF
>> 2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket
>> (16 nodes, 8 buckets)
>>  I'm executing here 226
>>  Can proceed further
>>  About to connect to the dataabase 239
>>  ovsdb_idl_is_alive(idl) = 1
>>  ==== Entering the database section =====
>>  DBG: s->pstream is NULL
>>  DBG: s->stream is non NULL
>> 2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock:
>> connection failed (Connection refused)
>> 2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
>> connecting...
>> 2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
>> entering CONNECTING
>> 2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
>> connection attempt failed (Connection refused)
>> 2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
>> waiting 2.15e+06 seconds before reconnect
>> 2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
>> entering BACKOFF
>> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
>> connection failed (Connection refused)
>>  DBG: Trying to
>> reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
>> ps -Af | grep ovsdb-server
>> root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring
>> pid 963
>> (healthy)
>>
>> root       963   962  0 Jan03 ?        00:00:00 ovsdb-server
>> /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info
>> --remote=punix:/var/run/openvswitch/db.sock
>> --private-key=db:Open_vSwitch,SSL,private_key
>> --certificate=db:Open_vSwitch,SSL,certificate
>> --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir
>> --log-file=/var/log/openvswitch/ovsdb-server.log
>> --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
>> control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto
>> ovsdb-server
>>
>>  Regards
>>
>> Shankari.V
>>
>>
>>
>> On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <
>> shankari.v.2014 at gmail.com> wrote:
>>
>>    Hi
>>
>>
>>
>> The excerpt below was due to a wrong copy paste of the commands at the
>> command prompt which gave the error message: "No such file or directory".
>>
>> The error which I had mentioned in my previous message was:
>>
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-tool
>> create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
>> ovsdb-server /usr/local/etc/openvswitch/conf.db
>> --remote=punix:/usr/local/var/run/openvswitch/db.sock
>> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
>> --log-file
>> 2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file
>> /usr/local/var/log/openvswitch/ovsdb-server.log
>>
>>
>>
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovs-vsctl
>> --no-wait init
>>
>>  I'm executing here 226
>>  Can proceed further
>>  About to connect to the dataabase 239
>>  ovsdb_idl_is_alive(idl) = 1
>>  ==== Entering the database section =====
>>  DBG: s->pstream is NULL
>>  DBG: s->stream is non NULL
>> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
>> connection failed (Connection refused)
>>
>> Regards
>>
>> Shankari.V
>>
>>
>>
>> On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com> wrote:
>>
>> Here's an excerpt from your "with DPDK" log. It looks like you typoed
>> a command and therefore ovsdb-server didn't start.
>>
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$
>> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
>> ovsdb-server /usr/local/etc/openvswitch/conf.db
>> --remote=punix:/usr/local/var/run/openvswitch/db.sock
>> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
>> --detach --log-file
>> bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
>> such file or directory
>>
>>
>> On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
>> <shankari.v.2014 at gmail.com> wrote:
>> > Hi,
>> >
>> > I tried executing the steps for initializing the OVSDB-server and the
>> OVS
>> > given in the below link:
>> >
>> >
>> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
>> >
>> > I'm using Ubuntu Trusty tahr, OVS version 2.3.1
>> >
>> > I was able to get the OVS working for the build which I compiled without
>> > DPDK.
>> > But with DPDK_BUILD configured in the Makefile the build produced
>> "Database
>> > connection refused" error and the OVS was not getting started because of
>> > this error. Kindly help me in resolving this issue.
>> >
>> > Enclosed the logs separately for "without DPDK" build and for "With
>> DPDK"
>> > build
>> >
>> > Regards,
>> > Shankari.V
>> >
>>
>> > _______________________________________________
>> > discuss mailing list
>> > discuss at openvswitch.org
>> > http://openvswitch.org/mailman/listinfo/discuss
>> >
>>
>>
>>
>> --
>> "I don't normally do acked-by's.  I think it's my way of avoiding
>> getting blamed when it all blows up."               Andrew Morton
>>
>>
>>
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150108/23819b66/attachment-0001.html>

From vishwa.info at gmail.com  Wed Jan  7 22:16:16 2015
From: vishwa.info at gmail.com (Vishwa)
Date: Thu, 8 Jan 2015 11:46:16 +0530
Subject: [ovs-discuss] MSS clamping
In-Reply-To: <CAEP_g=9-1RarucyCs_iE=N1BexPA1Br9xS63Ps=FVhGEqr+LYw@mail.gmail.com>
References: <CAJ4=-OiitW_+0GEjY6kCc1G5GuWmZty37vp1-2MWqEOTh=pA5g@mail.gmail.com>
 <CAEP_g=9-1RarucyCs_iE=N1BexPA1Br9xS63Ps=FVhGEqr+LYw@mail.gmail.com>
Message-ID: <CAJ4=-Oi1L4txCD7t4VuRYTVB-YKwQhut_g96jCLz5Npn7-S3mg@mail.gmail.com>

Thanks for the information Jesse.

On Thu, Jan 8, 2015 at 2:08 AM, Jesse Gross <jesse at nicira.com> wrote:

> On Wed, Jan 7, 2015 at 12:14 AM, Vishwa <vishwa.info at gmail.com> wrote:
> > Hi All,
> > I am newbie to OVS world. I have installed OVS on linux platform. I have
> GRE
> > tunnel in my setup and because of this I am planning to use MSS clamping
> > using iptables. But it is not working as expected.
> > Does iptables work on bridges created using OVS ?
> > If not, How can do this in OVS (is there any alternate other than
> iptables)
> > ?
>
> There have been some discussions on how to resolve this automatically
> but there is nothing currently available. The current recommendation
> is to manually adjust MTUs.
>



-- 
regards,
Vishwa.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150108/ad53ce1b/attachment.html>

From chris at picton.nom.za  Thu Jan  8 00:11:32 2015
From: chris at picton.nom.za (Chris Picton)
Date: Thu, 08 Jan 2015 10:11:32 +0200
Subject: [ovs-discuss] Recommended OVS version for built-in rhel6/centos6
	module
Message-ID: <54AE3BB4.2010009@picton.nom.za>

Hi

As the subject asks, what is the recommended OVS version for use with 
the built-in rhel6/centos6 kernel module.  Would I be causing any 
compatibility issues by doing this?

Regards
Chris

From zsy056 at gmail.com  Thu Jan  8 01:35:30 2015
From: zsy056 at gmail.com (Shaoyu Zhang)
Date: Thu, 08 Jan 2015 09:35:30 +0000
Subject: [ovs-discuss] SetAsyncConfig in OpenFlow 1.4
Message-ID: <CAOeDw-_BYkmE7h7u3Sw28hxcApyWEj2qV2AZcey4r6gQcxvwpw@mail.gmail.com>

Hi all,

I want to use SetAsyncConfig message to enable several kinds of Async
Messages. The Open vSwitch is set to OpenFlow 1.4 mode.
However, after sending the SetAsyncConfig message, I cannot receive
any PACKET_IN any more, but the same controller side code works
if we use a Pica8 physical switch.

Here's the content OFPGetAsyncReply after sending the config message:
 OFPGetAsyncReply:
[OFPAsyncConfigPropReasons(length=8,mask=63,type=1),
 OFPAsyncConfigPropReasons(length=8,mask=7,type=3),
 OFPAsyncConfigPropReasons(length=8,mask=63,type=5)]

I'm using Open vSwitch 2.3.0
Has anyone came across this kind of issue or can help me figure out
what may be wrong?

And also some properties seems to be missing in GetAsyncReply,
such as ROLE_STATUS, TABLE_STATUS, while the specification
says ' In a OFPT_GET_ASYNC_REPLY message,
all properties must be included.'

Thanks.

Best regards,
Shaoyu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150108/f3a3e7cb/attachment.html>

From fbl at redhat.com  Thu Jan  8 08:43:57 2015
From: fbl at redhat.com (Flavio Leitner)
Date: Thu, 08 Jan 2015 14:43:57 -0200
Subject: [ovs-discuss] Recommended OVS version for built-in
	rhel6/centos6 module
In-Reply-To: <54AE3BB4.2010009@picton.nom.za>
References: <54AE3BB4.2010009@picton.nom.za>
Message-ID: <1594426.k5dGXPEWlq@t520.home>

On Thursday, January 08, 2015 10:11:32 AM Chris Picton wrote:
> Hi
> 
> As the subject asks, what is the recommended OVS version for use with 
> the built-in rhel6/centos6 kernel module.  Would I be causing any 
> compatibility issues by doing this?

You should be able to run any LTS releases or branch master
without issues.  If you find any, please report. 

If possible, I'd suggest to go with rhel7/centos7 instead.

fbl

From james.page at ubuntu.com  Thu Jan  8 13:15:17 2015
From: james.page at ubuntu.com (James Page)
Date: Thu, 08 Jan 2015 21:15:17 +0000
Subject: [ovs-discuss] SIGSEGV in nl_attr_get_size() - OVS 2.0.2
In-Reply-To: <20150107161856.GA22895@nicira.com>
References: <CAGeueKhhob0EVpt5EF4cZxwcciAM3Qw8VxaH7-yDhUQ0TFpQ=w@mail.gmail.com>
 <20141031224241.GL13010@nicira.com>
 <CAGeueKgwfZN_DPigevsPe7zsuVecH2WpDJvUnFtd-ypyo4wvCw@mail.gmail.com>
 <54ACF679.6000201@ubuntu.com> <20150107161856.GA22895@nicira.com>
Message-ID: <54AEF365.4070502@ubuntu.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Hi Ben

On 07/01/15 16:18, Ben Pfaff wrote:
> Thanks.  In the past I've tried but I've been unable to track down
> the root cause.  I also suspected some kind of compiler bug or
> strange interaction.

I've still not determined whether this is an optimizer issue, but we
have now seen this problem across all 6 server in our Ubuntu QA cloud;
this appears to be a problem that builds up over time - the tenant
that sees this first is our automated testing account which
creates/deletes alot of instances over time.

Across all nodes I see:

2015-01-08T13:36:07.822Z|80336|dpif|WARN|system at ovs-system: failed to
flow_del (No such file or directory)
skb_priority(0),in_port(4),skb_mark(0),eth(src=ae:c4:93:ba:85:3e,dst=33:33:ff:5f:c4:32),eth_type(0x86dd),ipv6(src=::,dst=ff02::1:ff5f:c432,label=0,proto=58,tclass=0,hlimit=255,frag=no),icmpv6(type=135,code=0),nd(target=fe80::8412:d1ff:fe5f:c432)

message alot; which is related to
https://github.com/openvswitch/ovs/commit/3601bd879 which we don't
have in the 3.13 kernel for trusty.

I'm wondering whether this is related - the stacktrace relates to flow
misses and has a large parameter list in the handle_flow_misses call.

The optimized code may just be obfuscating the actual problem.

- -- 
James Page
Ubuntu and Debian Developer
james.page at ubuntu.com
jamespage at debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJUrvNhAAoJEL/srsug59jD7SgQAM5FC8Sfg7Uob11fx5Ik8458
UwiLHMHq93eT9Tp4YQXXpjThY4EioT9LWWcJtidGOAAWw4Zc7BsMB8KL7v5aclno
dLogpAQNRd+dt/trAXchkOIqCWEDhXvEmbusJJkEGktk3ZOPHayJjjTsJ7eX+V4s
JH9xuDsfqDlOiRpFhwCr1xEwlKZNqB3aKeqj9ulMgiQviy/GC3JcWDcVKOogo8Tr
LUwuiotjJkPDuwjIhu7TO6uRpPE1N15JLZnhwGzlBFXNGI5gWK+PQzDcVANi+B6x
2mDXDIq1QK8lhABBcjc2P2cAwmQEZ+TnHdn0E9ZlIUdWkRNMQVuVJPWJh6LK+gkO
ZznyAFfUhL+qbt7znLB/NXA/fAFHLXjehTOYLGIvQgcbEU2tqy/ENfpNy1UPhsRs
6hu5FpTuNqUz5IdGqb8EnI6MANR8P2sNv9zk90/eD2TveGGN6GdKXCW1CZ2JYBmc
/iIdycLiKpsT0Ugcvf80Xp0nrSATWYtVNRlaTE/yzEHldwFb0Th/hSMsVpWw0bnS
voaxRwiv4EgiwVGbu2WNR6AufC1a01XYtbQJCubMlzpiVv4T6zABHzbJe36HLpTi
sz+8jZFAPBIylOHZz+cwPmBNownxpNKE83ZvqrhPqLSNI90jmCekWhzjiqvVMnP/
HXrLgyqqJsyEpi4FXo8w
=3qsm
-----END PGP SIGNATURE-----

From benoitne at gmail.com  Thu Jan  8 14:59:36 2015
From: benoitne at gmail.com (Ben)
Date: Thu, 08 Jan 2015 23:59:36 +0100
Subject: [ovs-discuss] OVS & Hostapd patch
Message-ID: <54AF0BD8.8020400@gmail.com>

Hi,

I tried to make OVS work with Hostapd unsuccessfully. (if I start 
hostapd before adding the port to ovs bridge it is working)
I realized that I soon as I del-port my wlan0 on my ovs bridge where I 
run hostapd it is working.
Hostapd is not working on EAPOL stage so I investigated on internet and 
found a patch :

https://github.com/hschaa/hostapd/commit/c89daaeca4ee90c8bc158e37acb1b679c823d7ab#diff-165dd5a1681d9394993972f6923fddf8R153

I applied it but it is not changing anything :(
Anyone succesfully make it works or has some experience on it?

Many thanks

belette

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150108/80cda694/attachment.html>

From a.n.chippa at gmail.com  Thu Jan  8 17:21:52 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Thu, 8 Jan 2015 17:21:52 -0800
Subject: [ovs-discuss] A quick question
Message-ID: <CABFtFwmVncg1A6nYW3qF9MJ5KfRoTeOpSBwKxX4d5Nt0u3Zhpg@mail.gmail.com>

Hi all,

I understand when a packet arrives, the ovs datapath extracts various
fields from the packet and does a match. If there is no match and the
action is set to CONTROLLER, the packet is sent to the controller.

Question: Is there any way for ovs datapath to send the extracted fields to
the controller along with the packet?

Appreciate your response.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150108/c566ebf2/attachment.html>

From chaitanya.tanwar at gmail.com  Fri Jan  9 06:03:32 2015
From: chaitanya.tanwar at gmail.com (chaitanya tanwar)
Date: Fri, 9 Jan 2015 19:33:32 +0530
Subject: [ovs-discuss] Proxy Server on Switch
Message-ID: <CAEm0QqDqdvUYm9UEy7YCY5PbAEX1b272g8Y3myZzM60fEo=J-g@mail.gmail.com>

Hi All,

  I want to set up proxy server on one openvswitch in the network. Is it
possible? Please help.


Thanks and Regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/f5e90e6f/attachment.html>

From benoitne at gmail.com  Fri Jan  9 07:31:39 2015
From: benoitne at gmail.com (Ben)
Date: Fri, 09 Jan 2015 16:31:39 +0100
Subject: [ovs-discuss] OVS & Hostapd patch
In-Reply-To: <54AF0BD8.8020400@gmail.com>
References: <54AF0BD8.8020400@gmail.com>
Message-ID: <54AFF45B.8020607@gmail.com>

Sorry I made a mistake during my makepkg command.
The patch seems to work :-)

belette

On 08/01/2015 23:59, Ben wrote:
> Hi,
>
> I tried to make OVS work with Hostapd unsuccessfully. (if I start 
> hostapd before adding the port to ovs bridge it is working)
> I realized that I soon as I del-port my wlan0 on my ovs bridge where I 
> run hostapd it is working.
> Hostapd is not working on EAPOL stage so I investigated on internet 
> and found a patch :
>
> https://github.com/hschaa/hostapd/commit/c89daaeca4ee90c8bc158e37acb1b679c823d7ab#diff-165dd5a1681d9394993972f6923fddf8R153
>
> I applied it but it is not changing anything :(
> Anyone succesfully make it works or has some experience on it?
>
> Many thanks
>
> belette
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/c0862f88/attachment.html>

From blp at nicira.com  Fri Jan  9 08:03:00 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 9 Jan 2015 08:03:00 -0800
Subject: [ovs-discuss] Proxy Server on Switch
In-Reply-To: <CAEm0QqDqdvUYm9UEy7YCY5PbAEX1b272g8Y3myZzM60fEo=J-g@mail.gmail.com>
References: <CAEm0QqDqdvUYm9UEy7YCY5PbAEX1b272g8Y3myZzM60fEo=J-g@mail.gmail.com>
Message-ID: <20150109160300.GA30726@nicira.com>

On Fri, Jan 09, 2015 at 07:33:32PM +0530, chaitanya tanwar wrote:
>   I want to set up proxy server on one openvswitch in the network. Is it
> possible? Please help.

I don't think a proxy server has a special relationship to switching
software.  You can run one with or without Open vSwitch.

From blp at nicira.com  Fri Jan  9 08:29:21 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 9 Jan 2015 08:29:21 -0800
Subject: [ovs-discuss] wrong buffer_id ?
In-Reply-To: <1420649680465.63309@essex.ac.uk>
References: <1420649680465.63309@essex.ac.uk>
Message-ID: <20150109162921.GD30726@nicira.com>

On Wed, Jan 07, 2015 at 04:54:41PM +0000, Han, Yunong wrote:
> I'm running ovs 2.1.2 on TP-link router (openwrt installed). I got the error message Error OFPET_BAD_REQUEST OFPBRC_BUFFER_UNKNOWN from OFSwitchImpl.
> 
> 
> I checked the system log and found the messages:
> 
> 
> daemon.warn ovs-vswitchd: ovs|20991|pktbuf|WARN|attempt to reuse buffer 00000000
> 
> daemon.notice ovs-vswitchd: ovs|20992|connmgr|INFO|dp0<->tcp:155.245.64.10: sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message
> 
> 
> I did some research and it seems that the error is caused by wrong buffer_id ?  correct me if my understand is wrong.  Also, how can I fix this error ?   Thanks in advance.

### Q: My controller is getting errors about "buffers".  What's going on?

A: When a switch sends a packet to an OpenFlow controller using a
   "packet-in" message, it can also keep a copy of that packet in a
   "buffer", identified by a 32-bit integer "buffer_id".  There are
   two advantages to buffering.  First, when the controller wants to
   tell the switch to do something with the buffered packet (with a
   "packet-out" OpenFlow request), it does not need to send another
   copy of the packet back across the OpenFlow connection, which
   reduces the bandwidth cost of the connection and improves latency.
   This enables the second advantage: the switch can optionally send
   only the first part of the packet to the controller (assuming that
   the switch only needs to look at the first few bytes of the
   packet), further reducing bandwidth and improving latency.

   However, buffering introduces some issues of its own.  First, any
   switch has limited resources, so if the controller does not use a
   buffered packet, the switch has to decide how long to keep it
   buffered.  When many packets are sent to a controller and buffered,
   Open vSwitch can discard buffered packets that the controller has
   not used after as little as 5 seconds.  This means that
   controllers, if they make use of packet buffering, should use the
   buffered packets promptly.  (This includes sending a "packet-out"
   with no actions if the controller does not want to do anything with
   a buffered packet, to clear the packet buffer and effectively
   "drop" its packet.)

   Second, packet buffers are one-time-use, meaning that a controller
   cannot use a single packet buffer in two or more "packet-out"
   commands.  Open vSwitch will respond with an error to the second
   and subsequent "packet-out"s in such a case.

   Finally, a common error early in controller development is to try
   to use buffer_id 0 in a "packet-out" message as if 0 represented
   "no buffered packet".  This is incorrect usage: the buffer_id with
   this meaning is actually 0xffffffff.

   ovs-vswitchd(8) describes some details of Open vSwitch packet
   buffering that the OpenFlow specification requires implementations
   to document.

From kevin.traynor at intel.com  Fri Jan  9 09:44:02 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Fri, 9 Jan 2015 17:44:02 +0000
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CAGuFQhAbpXkhOLuqifrqzTyCPwFi2uVSAQdoMNDEY7XnkK5rWQ@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>
 <CAGuFQhAbpXkhOLuqifrqzTyCPwFi2uVSAQdoMNDEY7XnkK5rWQ@mail.gmail.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F73066A350@IRSMSX104.ger.corp.intel.com>

The compile error was consistent with using DPDK 1.8 as the mbuf format has changed. I’m not sure why you are getting (bad address) connecting to the db only with DPDK as the DPDK code doesn’t have anything to do with this. I’ve tried to reproduce but am unable to, my logs below. Did you try anything to make sure it’s not system state e.g. reboot; with DPDK; without DPDK; with DPDK ?

[ovs_int]$ sudo ./ovsdb/ovsdb-server --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
[ovs_int]$ sudo ./utilities/ovs-vsctl --no-wait --verbose init
2015-01-09T17:34:40Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
2015-01-09T17:34:40Z|00003|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-09T17:34:40Z|00004|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-09T17:34:40Z|00005|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4 (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:151
2015-01-09T17:34:40Z|00006|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connected
2015-01-09T17:34:40Z|00007|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering ACTIVE
2015-01-09T17:34:40Z|00008|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock: send request, method="monitor", params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
2015-01-09T17:34:40Z|00009|poll_loop|DBG|wakeup due to [POLLIN] on fd 4 (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:155
2015-01-09T17:34:40Z|00010|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock: received reply, result={"Open_vSwitch":{"98aa7f23-74c6-4318-a41b-7c22bef9b6ec":{"new":{}}}}, id=0

Thanks,
Kevin.

From: Shankari Vaidyalingam [mailto:shankari.v.2014 at gmail.com]
Sent: Wednesday, January 7, 2015 8:39 PM
To: Traynor, Kevin
Cc: Ben Pfaff; discuss at openvswitch.org
Subject: Re: [ovs-discuss] Difference seen in OVSDB initialization with & without DPDK

Hi
I resolved the below mentioned compiler errors and the build goes fine.
But the issue with the database connectivity still persists. Now the error message seen is different. Pls find the logs below. Let me know how to resolve this:

controller at controller-Latitude-E5440:~/$ cd openvswitch-2.3.1
controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-tool create /usr/local/etc/openvswitch/conf.db ./vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-server --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
controller at controller-Latitude-E5440:~/$ sudo ./utilities/ovs-vsctl --no-wait --verbose init

2015-01-07T20:35:37Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
 I'm executing here 226
2015-01-07T20:35:37Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16 nodes, 8 buckets)
 DSBG: Name of the session opened = unix:/usr/local/var/run/openvswitch/db.sock, pstream_verify_name(name) = 97 retry = 0
 Can proceed further
 About to connect to the dataabase 239
2015-01-07T20:35:37Z|00004|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-07T20:35:37Z|00005|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-07T20:35:37Z|00006|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4 (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd-unix.c:120
2015-01-07T20:35:37Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connected
2015-01-07T20:35:37Z|00008|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering ACTIVE
 ovsdb_idl_
is_alive(idl) = 1
2015-01-07T20:35:37Z|00009|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock: send request, method="monitor", params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
2015-01-07T20:35:37Z|00010|jsonrpc|WARN|unix:/usr/local/var/run/openvswitch/db.sock: send error: Bad address
2015-01-07T20:35:37Z|00011|poll_loop|DBG|wakeup due to 0-ms timeout at unix:/usr/local/var/run/openvswitch/db.sock
2015-01-07T20:35:37Z|00012|reconnect|WARN|unix:/usr/local/var/run/openvswitch/db.sock: connection dropped (Bad address)
2015-01-07T20:35:37Z|00013|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
 DBG: Returning 0 without any action
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Bad address)
 DBG: Returning 0 without any actioncontroller at controller-Latitude-E5440:~/$
Regards
Shankari

On Thu, Jan 8, 2015 at 1:03 AM, Shankari Vaidyalingam <shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
Hi Kevin
Thanks  for the response.
I used DPDK-1.7.1 and used the same for building the OVS. The OVS version I use is OVS 2.3.1.
I followed the steps mentioned in INSTALL.DPDK in https://github.com/openvswitch/ovs/blob/master/INSTALL.DPDK.md.
I'm getting the below error while executing the make command. Pls let me know whether there exists a patch for resolving the issue. I know how to resolve the last 2 errors.

/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:115:2: warning: cast from function call of type 'uintptr_t' to non-matching type 'void *' [-Wbad-function-cast]
  (typeof(ptr))rte_align_floor_int((uintptr_t)ptr, align)
  ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:133:2: note: in expansion of macro 'RTE_PTR_ALIGN_FLOOR'
  RTE_PTR_ALIGN_FLOOR((typeof(ptr))RTE_PTR_ADD(ptr, (align) - 1), align)
  ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:151:35: note: in expansion of macro 'RTE_PTR_ALIGN_CEIL'
 #define RTE_PTR_ALIGN(ptr, align) RTE_PTR_ALIGN_CEIL(ptr, align)
                                   ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:176:9: note: in expansion of macro 'RTE_PTR_ALIGN'
  return RTE_PTR_ALIGN(ptr, align) == ptr;
         ^
In file included from lib/dpif.h:393:0,
                 from lib/bfd.c:27:
lib/ofpbuf.h: In function 'ofpbuf_size':
lib/ofpbuf.h:385:21: error: 'const struct rte_mbuf' has no member named 'pkt_len'
       return b->mbuf.pkt_len;
                     ^
lib/ofpbuf.h: In function 'ofpbuf_set_size':
lib/ofpbuf.h:394:12: error: 'struct rte_mbuf' has no member named 'pkt_len'
     b->mbuf.pkt_len = v;
            ^
In file included from lib/dpif.h:393:0,
                 from lib/bfd.c:27:
lib/ofpbuf.h: In function 'ofpbuf_size':
lib/ofpbuf.h:386:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
make[2]: *** [lib/bfd.lo] Error 1
make[2]: Leaving directory `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
make: *** [all] Error 2
Regards
Shankari.V

On Wed, Jan 7, 2015 at 3:56 PM, Traynor, Kevin <kevin.traynor at intel.com<mailto:kevin.traynor at intel.com>> wrote:
I notice in the logs you have “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not supported in OVS at present. There is a patch for it but it was causing an issue with unit test and is being reworked.

I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK 1.7.1)

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org<mailto:discuss-bounces at openvswitch.org>] On Behalf Of Shankari Vaidyalingam
Sent: Tuesday, January 6, 2015 6:56 PM
To: Ben Pfaff
Cc: discuss at openvswitch.org<mailto:discuss at openvswitch.org>
Subject: Re: [ovs-discuss] Difference seen in OVSDB initialization with & without DPDK

Also to add to the below mail which I'd sent pls find below the output of starting OVS with the debugs enabled:

controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:

2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16 nodes, 8 buckets)
 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock: connection failed (Connection refused)
2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connection attempt failed (Connection refused)
2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: waiting 2.15e+06 seconds before reconnect
2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Connection refused)
 DBG: Trying to reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$<mailto:reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$> ps -Af | grep ovsdb-server
root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring pid 963 (healthy)
root       963   962  0 Jan03 ?        00:00:00 ovsdb-server /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info --remote=punix:/var/run/openvswitch/db.sock --private-key=db:Open_vSwitch,SSL,private_key --certificate=db:Open_vSwitch,SSL,certificate --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir --log-file=/var/log/openvswitch/ovsdb-server.log --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto ovsdb-server
Regards
Shankari.V

On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
Hi

The excerpt below was due to a wrong copy paste of the commands at the command prompt which gave the error message: "No such file or directory".
The error which I had mentioned in my previous message was:

controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovsdb-tool create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovsdb-server /usr/local/etc/openvswitch/conf.db --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach --log-file
2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file /usr/local/var/log/openvswitch/ovsdb-server.log



controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovs-vsctl --no-wait init

 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Connection refused)
Regards
Shankari.V

On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com<mailto:blp at nicira.com>> wrote:
Here's an excerpt from your "with DPDK" log. It looks like you typoed
a command and therefore ovsdb-server didn't start.

controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$>
controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo
ovsdb-server /usr/local/etc/openvswitch/conf.db
--remote=punix:/usr/local/var/run/openvswitch/db.sock
--remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
--detach --log-file
bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$>: No
such file or directory

On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
<shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
> Hi,
>
> I tried executing the steps for initializing the OVSDB-server and the OVS
> given in the below link:
>
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/<http://networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/>
>
> I'm using Ubuntu Trusty tahr, OVS version 2.3.1
>
> I was able to get the OVS working for the build which I compiled without
> DPDK.
> But with DPDK_BUILD configured in the Makefile the build produced "Database
> connection refused" error and the OVS was not getting started because of
> this error. Kindly help me in resolving this issue.
>
> Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> build
>
> Regards,
> Shankari.V
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org<mailto:discuss at openvswitch.org>
> http://openvswitch.org/mailman/listinfo/discuss
>



--
"I don't normally do acked-by's.  I think it's my way of avoiding
getting blamed when it all blows up."               Andrew Morton




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/92410c34/attachment-0001.html>

From padmajs80 at gmail.com  Thu Jan  8 20:11:05 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Fri, 9 Jan 2015 09:41:05 +0530
Subject: [ovs-discuss] How to control logging of data
Message-ID: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>

Hi,
   I am using ovs along with mininet and pox. I have installed ovs and
mininet in a virtual box. Due to ovs logs, i am facing low disk space
problem..Can v set the logging levels for ovs to avoid it. If so how to do
it. Please clarify.

Thanks and Regards,
Padma V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/1183118b/attachment-0001.html>

From a.alghadhban at gmail.com  Fri Jan  9 04:03:43 2015
From: a.alghadhban at gmail.com (Amer)
Date: Fri, 9 Jan 2015 15:03:43 +0300
Subject: [ovs-discuss] MAC address encaps
In-Reply-To: <92D849DD-D34E-494A-B776-DDBFA2F1A555@nicira.com>
References: <CAG76yv0f_ohqGX8ya6FyaXDpPbvU-wqoShWWpPkvjQ=jHtzLuQ@mail.gmail.com>
 <92D849DD-D34E-494A-B776-DDBFA2F1A555@nicira.com>
Message-ID: <C06E0A98-30AA-493B-AFC2-66C8085FD9DD@gmail.com>

Hello,

Dear all

May please tell me what is the command to do MAC address encapsulation like MAC-in-MAC.

Best regards,
Amer

Sent from my iPhone

> On ١٦‏/١٢‏/٢٠١٤, at ٧:٤٤ م, Justin Pettit <jpettit at nicira.com> wrote:
> 
> 
>> On Dec 16, 2014, at 7:04 AM, amer AlGhadhban <a.alghadhban at gmail.com> wrote:
>> 
>> I would like to do the following step in vSwitch:
>> When the switch reads the MAC address, read the IP protocol then encapsulate the MAC address with new one, then forward it.
>> I do not whether this is possible or not
>> Where to start and what to modify?
> 
> You can do all of that with OVS.  Check out the ovs-ofctl man page.  The matching should be pretty obvious.  To modify the MAC address, look at mod_dl_dst.
> 
> --Justin
> 
> 

From amer7777 at hotmail.com  Fri Jan  9 05:18:35 2015
From: amer7777 at hotmail.com (Amer)
Date: Fri, 9 Jan 2015 16:18:35 +0300
Subject: [ovs-discuss] MAC address
Message-ID: <BLU436-SMTP1503CD3D8042D8B227F754D4440@phx.gbl>

Hello,

Dear all

May please tell me what is the command to do MAC address encapsulation like MAC-in-MAC.

Best regards,

Sent from my iPhone

From simon.beaulieu at bell.ca  Fri Jan  9 07:34:33 2015
From: simon.beaulieu at bell.ca (Beaulieu, Simon (6076932))
Date: Fri, 9 Jan 2015 10:34:33 -0500
Subject: [ovs-discuss] [openvswitch 2.3.1] testsuite: 350 815 817 failed
Message-ID: <25C71E6FD9F4664A857922E53B0DEBA70BFE357588@MBX10.bell.corp.bce.ca>

Hello,

I am trying to install OpenVSwitch on a minimal installation of CentOS7, with gcc 4.8.2, running on a VMware virtual machine.
My knowledge of OpenFlow / CentOS / C and C++ programming language are limited, but I will try to investigate on my own anyways.
I don't know if the test failures will impact the functionalities of the switch so I will continue with my testing.

Please find attached the test results.

Best regards,

[cid:image001.gif at 01D02BF7.79A8DA90]
Simon Beaulieu
IT Technical Architect
Bell Business Market
Email: simon.beaulieu at bell.ca


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/89024e33/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 1851 bytes
Desc: image001.gif
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/89024e33/attachment-0001.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenVSwitch_2.3.1_CentOS7_gcc482_TestResults.zip
Type: application/x-zip-compressed
Size: 232232 bytes
Desc: OpenVSwitch_2.3.1_CentOS7_gcc482_TestResults.zip
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150109/89024e33/attachment-0001.bin>

From blp at nicira.com  Fri Jan  9 11:42:18 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 9 Jan 2015 11:42:18 -0800
Subject: [ovs-discuss] How to control logging of data
In-Reply-To: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
References: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
Message-ID: <20150109194217.GA31087@nicira.com>

On Fri, Jan 09, 2015 at 09:41:05AM +0530, Padma Jayasankar wrote:
>    I am using ovs along with mininet and pox. I have installed ovs and
> mininet in a virtual box. Due to ovs logs, i am facing low disk space
> problem..Can v set the logging levels for ovs to avoid it. If so how to do
> it. Please clarify.

That's quite strange.  Does mininet turn the OVS logging level way up?

From rlantz at cs.stanford.edu  Fri Jan  9 13:37:12 2015
From: rlantz at cs.stanford.edu (Bob Lantz)
Date: Fri, 9 Jan 2015 13:37:12 -0800
Subject: [ovs-discuss] How to control logging of data
In-Reply-To: <20150109194217.GA31087@nicira.com>
References: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
 <20150109194217.GA31087@nicira.com>
Message-ID: <D2BAFEF5-C9C4-4839-81BF-DCB4E3A4AE85@cs.stanford.edu>

[cross-post deleted]

I don't think so -  logging appears to be set at "info" level. On my development VM (which constantly creates, deletes and reconfigures hundreds of OVS bridges) the OVS logs since last July are about 17 MB, which doesn't seem terrible.

-Bob

> On Jan 9, 2015, at 11:42 AM, Ben Pfaff <blp at nicira.com> wrote:
> 
> On Fri, Jan 09, 2015 at 09:41:05AM +0530, Padma Jayasankar wrote:
>>   I am using ovs along with mininet and pox. I have installed ovs and
>> mininet in a virtual box. Due to ovs logs, i am facing low disk space
>> problem..Can v set the logging levels for ovs to avoid it. If so how to do
>> it. Please clarify.
> 
> That's quite strange.  Does mininet turn the OVS logging level way up?
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss


From gopi2101 at yahoo.com  Sat Jan 10 10:34:06 2015
From: gopi2101 at yahoo.com (Gopikrishnan)
Date: Sat, 10 Jan 2015 18:34:06 +0000 (UTC)
Subject: [ovs-discuss] How Rule insert works
Message-ID: <1467639039.145685.1420914846468.JavaMail.yahoo@jws10064.mail.ne1.yahoo.com>

Hi,
I am a beginner to the OVS code.I am interested to implement the ofproto-provider.h for my hardware datapath.I am trying to understand the ofproto-dpif implementation and reuse some functionality.
Regarding the rule insert, my understanding from the code is,When a flow mod message is received,1. ofproto parses it and inserts the rule to its oftable datastructure.2. After that, it creates an ofopgroup and invokes the ofproto_class->rule_insert() to insert the rule.3. In ofproto-dpif, the need_revalidate reason flag is set to REV_FLOW_TABLE To signal the udpif_revalidator thread.
My Questions are,1. When will this rule insert to the datapath(dpif-linux/dpif-netdev) happens ?. I never see the rule insert happening immediately. Only when an upcall table miss happens, the rule is inserted to the datapath. 2. Is it possible to have an asynchronous rule insertion using the ofopgroup?    Is it a good idea to have an another thread("Async thread"), to process all this ofopgroup and do rule insert from another thread context ?3. Is there any possibility to insert a batch of rules to the datapath using a single API for faster operation ?4. I would also like to know some insights on udpif_revalidator and upcall handler. Is there any good documentation for the same ? 
I would appreciate if someone can help me to clarify my doubts and it might be more useful for my work.
Thanks and Regards,Gopi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150110/c17202f3/attachment.html>

From blp at nicira.com  Sat Jan 10 14:11:54 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sat, 10 Jan 2015 14:11:54 -0800
Subject: [ovs-discuss] How Rule insert works
In-Reply-To: <1467639039.145685.1420914846468.JavaMail.yahoo@jws10064.mail.ne1.yahoo.com>
References: <1467639039.145685.1420914846468.JavaMail.yahoo@jws10064.mail.ne1.yahoo.com>
Message-ID: <20150110221154.GA21775@nicira.com>

On Sat, Jan 10, 2015 at 06:34:06PM +0000, Gopikrishnan wrote:
> I am a beginner to the OVS code.I am interested to implement the
> ofproto-provider.h for my hardware datapath.I am trying to understand
> the ofproto-dpif implementation and reuse some functionality.

> Regarding the rule insert, my understanding from the code is,When a
> flow mod message is received,1. ofproto parses it and inserts the rule
> to its oftable datastructure.2. After that, it creates an ofopgroup
> and invokes the ofproto_class->rule_insert() to insert the rule.3. In
> ofproto-dpif, the need_revalidate reason flag is set to REV_FLOW_TABLE
> To signal the udpif_revalidator thread.

> My Questions are,1. When will this rule insert to the
> datapath(dpif-linux/dpif-netdev) happens ?. I never see the rule
> insert happening immediately. Only when an upcall table miss happens,
> the rule is inserted to the datapath. 

That's correct; it's how ofproto-dpif works.

> 2. Is it possible to have an asynchronous rule insertion using the
> ofopgroup?    Is it a good idea to have an another thread("Async
> thread"), to process all this ofopgroup and do rule insert from
> another thread context ?

I guess you must be working with some old version of Open vSwitch.
There are no ofopgroups in the master branch.  I think that you should
probably develop from the master branch, because otherwise you'll just
have to update later.

> 3. Is there any possibility to insert a batch
> of rules to the datapath using a single API for faster operation ?

Sure, OVS batches datapath inserts routinely.

> 4. I would also like to know some insights on udpif_revalidator and
> upcall handler. Is there any good documentation for the same ?

I guess not.

From blp at nicira.com  Sun Jan 11 09:28:58 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 11 Jan 2015 09:28:58 -0800
Subject: [ovs-discuss] How to control logging of data
In-Reply-To: <D2BAFEF5-C9C4-4839-81BF-DCB4E3A4AE85@cs.stanford.edu>
References: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
 <20150109194217.GA31087@nicira.com>
 <D2BAFEF5-C9C4-4839-81BF-DCB4E3A4AE85@cs.stanford.edu>
Message-ID: <20150111172858.GB27729@nicira.com>

Bob: Thanks for the info.

Padma: What kinds of messages are filling up your disk?  Open vSwitch is
designed to rate-limit messages that are likely to recur, so if it's
filling up your disk quickly at the default log levels, then that's a
bug.

On Fri, Jan 09, 2015 at 01:37:12PM -0800, Bob Lantz wrote:
> [cross-post deleted]
> 
> I don't think so -  logging appears to be set at "info" level. On my development VM (which constantly creates, deletes and reconfigures hundreds of OVS bridges) the OVS logs since last July are about 17 MB, which doesn't seem terrible.
> 
> -Bob
> 
> > On Jan 9, 2015, at 11:42 AM, Ben Pfaff <blp at nicira.com> wrote:
> > 
> > On Fri, Jan 09, 2015 at 09:41:05AM +0530, Padma Jayasankar wrote:
> >>   I am using ovs along with mininet and pox. I have installed ovs and
> >> mininet in a virtual box. Due to ovs logs, i am facing low disk space
> >> problem..Can v set the logging levels for ovs to avoid it. If so how to do
> >> it. Please clarify.
> > 
> > That's quite strange.  Does mininet turn the OVS logging level way up?
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> 

From blp at nicira.com  Sun Jan 11 09:58:41 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 11 Jan 2015 09:58:41 -0800
Subject: [ovs-discuss] A quick question
In-Reply-To: <CABFtFwmVncg1A6nYW3qF9MJ5KfRoTeOpSBwKxX4d5Nt0u3Zhpg@mail.gmail.com>
References: <CABFtFwmVncg1A6nYW3qF9MJ5KfRoTeOpSBwKxX4d5Nt0u3Zhpg@mail.gmail.com>
Message-ID: <20150111175841.GE27729@nicira.com>

On Thu, Jan 08, 2015 at 05:21:52PM -0800, Ashok Chippa wrote:
> I understand when a packet arrives, the ovs datapath extracts various
> fields from the packet and does a match. If there is no match and the
> action is set to CONTROLLER, the packet is sent to the controller.
> 
> Question: Is there any way for ovs datapath to send the extracted fields to
> the controller along with the packet?

This is possible in OpenFlow 1.3 and later, but that information is
redundant with what's already found in the packet itself, which is also
sent to the controller.

From blp at nicira.com  Sun Jan 11 10:04:31 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 11 Jan 2015 10:04:31 -0800
Subject: [ovs-discuss] SetAsyncConfig in OpenFlow 1.4
In-Reply-To: <CAOeDw-_BYkmE7h7u3Sw28hxcApyWEj2qV2AZcey4r6gQcxvwpw@mail.gmail.com>
References: <CAOeDw-_BYkmE7h7u3Sw28hxcApyWEj2qV2AZcey4r6gQcxvwpw@mail.gmail.com>
Message-ID: <20150111180431.GG27729@nicira.com>

On Thu, Jan 08, 2015 at 09:35:30AM +0000, Shaoyu Zhang wrote:
> I want to use SetAsyncConfig message to enable several kinds of Async
> Messages. The Open vSwitch is set to OpenFlow 1.4 mode.
> However, after sending the SetAsyncConfig message, I cannot receive
> any PACKET_IN any more, but the same controller side code works
> if we use a Pica8 physical switch.

It looks like OFPT_SET_ASYNC_REQUEST has not been implemented in OVS for
OF1.4 yet.  The message is there but it still implements the OF1.3 wire
format.

From blp at nicira.com  Sun Jan 11 10:05:41 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 11 Jan 2015 10:05:41 -0800
Subject: [ovs-discuss] SIGSEGV in nl_attr_get_size() - OVS 2.0.2
In-Reply-To: <54AEF365.4070502@ubuntu.com>
References: <CAGeueKhhob0EVpt5EF4cZxwcciAM3Qw8VxaH7-yDhUQ0TFpQ=w@mail.gmail.com>
 <20141031224241.GL13010@nicira.com>
 <CAGeueKgwfZN_DPigevsPe7zsuVecH2WpDJvUnFtd-ypyo4wvCw@mail.gmail.com>
 <54ACF679.6000201@ubuntu.com> <20150107161856.GA22895@nicira.com>
 <54AEF365.4070502@ubuntu.com>
Message-ID: <20150111180541.GH27729@nicira.com>

On Thu, Jan 08, 2015 at 09:15:17PM +0000, James Page wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA256
> 
> Hi Ben
> 
> On 07/01/15 16:18, Ben Pfaff wrote:
> > Thanks.  In the past I've tried but I've been unable to track down
> > the root cause.  I also suspected some kind of compiler bug or
> > strange interaction.
> 
> I've still not determined whether this is an optimizer issue, but we
> have now seen this problem across all 6 server in our Ubuntu QA cloud;
> this appears to be a problem that builds up over time - the tenant
> that sees this first is our automated testing account which
> creates/deletes alot of instances over time.
> 
> Across all nodes I see:
> 
> 2015-01-08T13:36:07.822Z|80336|dpif|WARN|system at ovs-system: failed to
> flow_del (No such file or directory)
> skb_priority(0),in_port(4),skb_mark(0),eth(src=ae:c4:93:ba:85:3e,dst=33:33:ff:5f:c4:32),eth_type(0x86dd),ipv6(src=::,dst=ff02::1:ff5f:c432,label=0,proto=58,tclass=0,hlimit=255,frag=no),icmpv6(type=135,code=0),nd(target=fe80::8412:d1ff:fe5f:c432)
> 
> message alot; which is related to
> https://github.com/openvswitch/ovs/commit/3601bd879 which we don't
> have in the 3.13 kernel for trusty.
> 
> I'm wondering whether this is related - the stacktrace relates to flow
> misses and has a large parameter list in the handle_flow_misses call.
> 
> The optimized code may just be obfuscating the actual problem.

Any chance you could try a build without optimization, or without
optimization in the source files at issue?

From shankari.v.2014 at gmail.com  Sun Jan 11 10:11:56 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Sun, 11 Jan 2015 23:41:56 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <BC0FEEC7D7650749874CEC11314A88F73066A350@IRSMSX104.ger.corp.intel.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>
 <CAGuFQhAbpXkhOLuqifrqzTyCPwFi2uVSAQdoMNDEY7XnkK5rWQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F73066A350@IRSMSX104.ger.corp.intel.com>
Message-ID: <CAGuFQhABV8gvDnaAkaHcd0XR0U8HOvBWUQA3ieLwz7DpmLD0SA@mail.gmail.com>

Hi Kevin,

Sorry I'm not able to get your question
I have got the above logs when I tried this sequence: reboot; with DPDK;
I'm using OVS version - 2.3.1 and DPDK version - 1.7.1.
The compilation errors are seen in OVS 2.3.1 with DPDK 1.7.1 as well. But I
have solved those errors and the build proceeds fine. I'd like to submit a
patch for the same in Git repository. Let me know the process for
submitting the patch.

Regards
Shankari.V

On Fri, Jan 9, 2015 at 11:14 PM, Traynor, Kevin <kevin.traynor at intel.com>
wrote:

>  The compile error was consistent with using DPDK 1.8 as the mbuf format
> has changed. I’m not sure why you are getting (bad address) connecting to
> the db only with DPDK as the DPDK code doesn’t have anything to do with
> this. I’ve tried to reproduce but am unable to, my logs below. Did you try
> anything to make sure it’s not system state e.g. reboot; with DPDK; without
> DPDK; with DPDK ?
>
>
>
> [ovs_int]$ sudo ./ovsdb/ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
>
> [ovs_int]$ sudo ./utilities/ovs-vsctl --no-wait --verbose
> init
>
> 2015-01-09T17:34:40Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
>
> 2015-01-09T17:34:40Z|00003|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
>
> 2015-01-09T17:34:40Z|00004|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
>
> 2015-01-09T17:34:40Z|00005|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4
> (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:151
>
> 2015-01-09T17:34:40Z|00006|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connected
>
> 2015-01-09T17:34:40Z|00007|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering ACTIVE
>
> 2015-01-09T17:34:40Z|00008|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> send request, method="monitor",
> params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
>
> 2015-01-09T17:34:40Z|00009|poll_loop|DBG|wakeup due to [POLLIN] on fd 4
> (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:155
>
> 2015-01-09T17:34:40Z|00010|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> received reply,
> result={"Open_vSwitch":{"98aa7f23-74c6-4318-a41b-7c22bef9b6ec":{"new":{}}}},
> id=0
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* Shankari Vaidyalingam [mailto:shankari.v.2014 at gmail.com]
> *Sent:* Wednesday, January 7, 2015 8:39 PM
> *To:* Traynor, Kevin
> *Cc:* Ben Pfaff; discuss at openvswitch.org
>
> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization with
> & without DPDK
>
>
>
> Hi
>
> I resolved the below mentioned compiler errors and the build goes fine.
>
> But the issue with the database connectivity still persists. Now the error
> message seen is different. Pls find the logs below. Let me know how to
> resolve this:
>
> controller at controller-Latitude-E5440:~/$ cd openvswitch-2.3.1
> controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-tool create
> /usr/local/etc/openvswitch/conf.db ./vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
> controller at controller-Latitude-E5440:~/$ sudo ./utilities/ovs-vsctl
> --no-wait --verbose init
>
> 2015-01-07T20:35:37Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
>  I'm executing here 226
> 2015-01-07T20:35:37Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
> nodes, 8 buckets)
>  DSBG: Name of the session opened =
> unix:/usr/local/var/run/openvswitch/db.sock, pstream_verify_name(name) = 97
> retry = 0
>  Can proceed further
>  About to connect to the dataabase 239
> 2015-01-07T20:35:37Z|00004|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
> 2015-01-07T20:35:37Z|00005|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
> 2015-01-07T20:35:37Z|00006|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4
> (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd-unix.c:120
> 2015-01-07T20:35:37Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connected
> 2015-01-07T20:35:37Z|00008|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering ACTIVE
>  ovsdb_idl_
> is_alive(idl) = 1
> 2015-01-07T20:35:37Z|00009|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> send request, method="monitor",
> params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
> 2015-01-07T20:35:37Z|00010|jsonrpc|WARN|unix:/usr/local/var/run/openvswitch/db.sock:
> send error: Bad address
> 2015-01-07T20:35:37Z|00011|poll_loop|DBG|wakeup due to 0-ms timeout at
> unix:/usr/local/var/run/openvswitch/db.sock
> 2015-01-07T20:35:37Z|00012|reconnect|WARN|unix:/usr/local/var/run/openvswitch/db.sock:
> connection dropped (Bad address)
> 2015-01-07T20:35:37Z|00013|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
>  DBG: Returning 0 without any action
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Bad address)
>  DBG: Returning 0 without any actioncontroller at controller-Latitude-E5440:~/$
>
>
> Regards
>
> Shankari
>
>
>
> On Thu, Jan 8, 2015 at 1:03 AM, Shankari Vaidyalingam <
> shankari.v.2014 at gmail.com> wrote:
>
>     Hi Kevin
>
> Thanks  for the response.
>
> I used DPDK-1.7.1 and used the same for building the OVS. The OVS version
> I use is OVS 2.3.1.
>
> I followed the steps mentioned in INSTALL.DPDK in
> https://github.com/openvswitch/ovs/blob/master/INSTALL.DPDK.md.
>
> I'm getting the below error while executing the make command. Pls let me
> know whether there exists a patch for resolving the issue. I know how to
> resolve the last 2 errors.
>
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:115:2:
> warning: cast from function call of type 'uintptr_t' to non-matching type
> 'void *' [-Wbad-function-cast]
>   (typeof(ptr))rte_align_floor_int((uintptr_t)ptr, align)
>   ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:133:2:
> note: in expansion of macro 'RTE_PTR_ALIGN_FLOOR'
>   RTE_PTR_ALIGN_FLOOR((typeof(ptr))RTE_PTR_ADD(ptr, (align) - 1), align)
>   ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:151:35:
> note: in expansion of macro 'RTE_PTR_ALIGN_CEIL'
>  #define RTE_PTR_ALIGN(ptr, align) RTE_PTR_ALIGN_CEIL(ptr, align)
>                                    ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:176:9:
> note: in expansion of macro 'RTE_PTR_ALIGN'
>   return RTE_PTR_ALIGN(ptr, align) == ptr;
>          ^
> In file included from lib/dpif.h:393:0,
>                  from lib/bfd.c:27:
> lib/ofpbuf.h: In function 'ofpbuf_size':
> lib/ofpbuf.h:385:21: error: 'const struct rte_mbuf' has no member named
> 'pkt_len'
>        return b->mbuf.pkt_len;
>                      ^
> lib/ofpbuf.h: In function 'ofpbuf_set_size':
> lib/ofpbuf.h:394:12: error: 'struct rte_mbuf' has no member named 'pkt_len'
>      b->mbuf.pkt_len = v;
>             ^
> In file included from lib/dpif.h:393:0,
>                  from lib/bfd.c:27:
> lib/ofpbuf.h: In function 'ofpbuf_size':
> lib/ofpbuf.h:386:1: warning: control reaches end of non-void function
> [-Wreturn-type]
>  }
>  ^
> make[2]: *** [lib/bfd.lo] Error 1
> make[2]: Leaving directory
> `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory
> `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
> make: *** [all] Error 2
>
> Regards
>
> Shankari.V
>
>
>
> On Wed, Jan 7, 2015 at 3:56 PM, Traynor, Kevin <kevin.traynor at intel.com>
> wrote:
>
>  I notice in the logs you have
> “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not
> supported in OVS at present. There is a patch for it but it was causing an
> issue with unit test and is being reworked.
>
>
>
> I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK
> 1.7.1)
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* discuss [mailto:discuss-bounces at openvswitch.org] *On Behalf Of *Shankari
> Vaidyalingam
> *Sent:* Tuesday, January 6, 2015 6:56 PM
> *To:* Ben Pfaff
> *Cc:* discuss at openvswitch.org
> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization with
> & without DPDK
>
>
>
> Also to add to the below mail which I'd sent pls find below the output of
> starting OVS with the debugs enabled:
>
> controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:
>
> 2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
> 2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
> nodes, 8 buckets)
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> 2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock:
> connection failed (Connection refused)
> 2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
> 2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
> 2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connection attempt failed (Connection refused)
> 2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> waiting 2.15e+06 seconds before reconnect
> 2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>  DBG: Trying to
> reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
> ps -Af | grep ovsdb-server
> root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring
> pid 963
> (healthy)
>
> root       963   962  0 Jan03 ?        00:00:00 ovsdb-server
> /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info
> --remote=punix:/var/run/openvswitch/db.sock
> --private-key=db:Open_vSwitch,SSL,private_key
> --certificate=db:Open_vSwitch,SSL,certificate
> --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir
> --log-file=/var/log/openvswitch/ovsdb-server.log
> --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
> control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto
> ovsdb-server
>
> Regards
>
> Shankari.V
>
>
>
> On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <
> shankari.v.2014 at gmail.com> wrote:
>
>    Hi
>
>
>
> The excerpt below was due to a wrong copy paste of the commands at the
> command prompt which gave the error message: "No such file or directory".
>
> The error which I had mentioned in my previous message was:
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-tool
> create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
> --log-file
> 2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file
> /usr/local/var/log/openvswitch/ovsdb-server.log
>
>
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovs-vsctl
> --no-wait init
>
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>
> Regards
>
> Shankari.V
>
>
>
> On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com> wrote:
>
> Here's an excerpt from your "with DPDK" log. It looks like you typoed
> a command and therefore ovsdb-server didn't start.
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
> --detach --log-file
> bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
> such file or directory
>
>
> On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
> <shankari.v.2014 at gmail.com> wrote:
> > Hi,
> >
> > I tried executing the steps for initializing the OVSDB-server and the OVS
> > given in the below link:
> >
> >
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
> >
> > I'm using Ubuntu Trusty tahr, OVS version 2.3.1
> >
> > I was able to get the OVS working for the build which I compiled without
> > DPDK.
> > But with DPDK_BUILD configured in the Makefile the build produced
> "Database
> > connection refused" error and the OVS was not getting started because of
> > this error. Kindly help me in resolving this issue.
> >
> > Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> > build
> >
> > Regards,
> > Shankari.V
> >
>
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> >
>
>
>
> --
> "I don't normally do acked-by's.  I think it's my way of avoiding
> getting blamed when it all blows up."               Andrew Morton
>
>
>
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150111/e32eb272/attachment-0001.html>

From blp at nicira.com  Sun Jan 11 11:12:40 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 11 Jan 2015 11:12:40 -0800
Subject: [ovs-discuss] How to control logging of data
In-Reply-To: <CACveyy+P4PH-+=qnBFowq6Bf4DvZDM3a6oBgCib5s8P=Tm9Pqw@mail.gmail.com>
References: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
 <20150109194217.GA31087@nicira.com>
 <D2BAFEF5-C9C4-4839-81BF-DCB4E3A4AE85@cs.stanford.edu>
 <20150111172858.GB27729@nicira.com>
 <CACveyy+P4PH-+=qnBFowq6Bf4DvZDM3a6oBgCib5s8P=Tm9Pqw@mail.gmail.com>
Message-ID: <20150111191240.GJ27729@nicira.com>

On Mon, Jan 12, 2015 at 12:37:52AM +0530, Padma Jayasankar wrote:
>   Btw,Is there a way to stop logging. Please clarify.

To restore all default log levels: "ovs-appctl vlog/set info"
To turn off all logging: "ovs-appctl vlog/set off"

From a.n.chippa at gmail.com  Sun Jan 11 12:18:27 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Sun, 11 Jan 2015 12:18:27 -0800
Subject: [ovs-discuss] A quick question
In-Reply-To: <20150111175841.GE27729@nicira.com>
References: <CABFtFwmVncg1A6nYW3qF9MJ5KfRoTeOpSBwKxX4d5Nt0u3Zhpg@mail.gmail.com>
 <20150111175841.GE27729@nicira.com>
Message-ID: <CABFtFwmpwhvcWUezHEsygBKzMNGQnBvONqFbtsAgqJox4Cw1TA@mail.gmail.com>

Thanks Ben. Yes, it would be redundant... Just trying to avoid
re-extracting the fields...

Thanks

On Sun, Jan 11, 2015 at 9:58 AM, Ben Pfaff <blp at nicira.com> wrote:

> On Thu, Jan 08, 2015 at 05:21:52PM -0800, Ashok Chippa wrote:
> > I understand when a packet arrives, the ovs datapath extracts various
> > fields from the packet and does a match. If there is no match and the
> > action is set to CONTROLLER, the packet is sent to the controller.
> >
> > Question: Is there any way for ovs datapath to send the extracted fields
> to
> > the controller along with the packet?
>
> This is possible in OpenFlow 1.3 and later, but that information is
> redundant with what's already found in the packet itself, which is also
> sent to the controller.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150111/5a8ba208/attachment.html>

From troy_lea at hotmail.com  Sun Jan 11 16:23:40 2015
From: troy_lea at hotmail.com (Troy Lea)
Date: Mon, 12 Jan 2015 11:23:40 +1100
Subject: [ovs-discuss] 2000 Ports - things aren't working as expected
Message-ID: <SNT153-W92BA2DCECC338E2E99DA20E8430@phx.gbl>

Not sure if this is the right place to post but I need to start somewhere.

Back story:

I have been using Nagios for a while now and with that I have used MRTG for switch monitoring. I've been wanting to push the limits of MRTG in relation to the amount of ports that can be monitored and the affect this has on disk I/O on the Nagios host running MRTG. 

I am wanting to test in the region of 10,000+ ports. As you can imagine I don't have that many switches sitting around to perform that sort of testing. Hence I started to look if virtual switches existed and if so would they work. Then I found Open vSwitch.


Current State:

I've installed Open vSwitch on Ubuntu 14.04.1 and have tested it successfully. I've been able to create switches with up to 1000 ports and I can poll them via SNMP using MRTG. 

I've been creating these ports with a simple "for 1..1000 bash script".

However it does seem though once I start creating more than 800 ports there is an impact on the Ubuntu system. This is noticeable in the time it takes to create each port when the script runs. It's like every port causes the system to take a little longer, kind of exponential.

Creating 500 ports takes about 5 minutes.

When creating 2000 ports it takes about 3 hours. When it is finished the system is still accessible (I can ping it from another server). However once I reboot it it doesn't respond to pings or SSH.

Once I reboot the system is horribly slow.

I've included all the information below which demonstrates how I am doing all of this.


What am I asking?

Is what I am doing realistic, creating 2000 ports? Are there limitations in Open vSwitch or am I hitting limitations in Ubuntu?

MRTG creates lots of files for the data it collects from switches and it is the impact these small files has on the Nagios system which I am interested in. I am only using vSwitch as a mechanism to create these small files.

I know I could run up 10 Ubuntu servers with each one having 1000 ports each and I would have the 10,000 ports I am after, I was just seeing how many ports I Open vSwitch would handle.


Thanks I've you've kept reading this far. 

Thanks in advance if you send a reponse :)


How am I doing it:

Build a Ubuntu 14.04.1 server, minimal install. 

snmpd installed and configured

Install Open vSwitch

apt-get install openvswitch-switch 

ovs-vsctl add-br ovsbr0 

ovs-vsctl add-port ovsbr0 eth0 

ovs-vsctl add-port ovsbr0 ovsbr0p1 -- set interface ovsbr0p1 type=internal 

edit /etc/network/interfaces. 

assign an IP to ovsbr0. 

Reboot

Everything is working peachy with this setup. 

Then I create the 2000 ports using this script:

#!/bin/bash 
start_time=$(date +%s) 
for f in {2..2000}  
do 
        ovs-vsctl add-port ovsbr0 ovsbr0p$f -- set interface ovsbr0p$f type=internal 
        end_time=$(date +%s) 
        run_time=$((end_time - start_time)) 
        echo "Last command for ovsbr0p$f took $run_time" seconds 
        start_time="$end_time" 
done 


Which generates this output:

Last command for ovsbr0p2 took 0 seconds
Last command for ovsbr0p3 took 0 seconds
Last command for ovsbr0p4 took 0 seconds
Last command for ovsbr0p5 took 0 seconds
Last command for ovsbr0p6 took 0 seconds
Last command for ovsbr0p7 took 0 seconds
Last command for ovsbr0p8 took 0 seconds
Last command for ovsbr0p9 took 0 seconds
Last command for ovsbr0p10 took 0 seconds
Last command for ovsbr0p11 took 0 seconds
Last command for ovsbr0p12 took 0 seconds
Last command for ovsbr0p13 took 0 seconds
Last command for ovsbr0p14 took 0 seconds
Last command for ovsbr0p15 took 0 seconds
Last command for ovsbr0p16 took 1 seconds
Last command for ovsbr0p17 took 0 seconds
Last command for ovsbr0p18 took 0 seconds
Last command for ovsbr0p19 took 0 seconds
Last command for ovsbr0p20 took 0 seconds
Last command for ovsbr0p21 took 0 seconds
Last command for ovsbr0p22 took 0 seconds
Last command for ovsbr0p23 took 0 seconds
Last command for ovsbr0p24 took 0 seconds
Last command for ovsbr0p25 took 0 seconds
Last command for ovsbr0p26 took 0 seconds
Last command for ovsbr0p27 took 0 seconds
Last command for ovsbr0p28 took 0 seconds
Last command for ovsbr0p29 took 0 seconds
Last command for ovsbr0p30 took 0 seconds
Last command for ovsbr0p31 took 0 seconds
Last command for ovsbr0p32 took 0 seconds
Last command for ovsbr0p33 took 0 seconds
Last command for ovsbr0p34 took 0 seconds
Last command for ovsbr0p35 took 0 seconds
Last command for ovsbr0p36 took 0 seconds
Last command for ovsbr0p37 took 0 seconds
Last command for ovsbr0p38 took 0 seconds
Last command for ovsbr0p39 took 0 seconds
Last command for ovsbr0p40 took 0 seconds
Last command for ovsbr0p41 took 0 seconds
Last command for ovsbr0p42 took 0 seconds
Last command for ovsbr0p43 took 1 seconds
Last command for ovsbr0p44 took 0 seconds
Last command for ovsbr0p45 took 0 seconds
Last command for ovsbr0p46 took 0 seconds
Last command for ovsbr0p47 took 0 seconds
Last command for ovsbr0p48 took 0 seconds
Last command for ovsbr0p49 took 0 seconds
Last command for ovsbr0p50 took 0 seconds
Last command for ovsbr0p51 took 0 seconds
Last command for ovsbr0p52 took 0 seconds
Last command for ovsbr0p53 took 0 seconds
Last command for ovsbr0p54 took 0 seconds
Last command for ovsbr0p55 took 0 seconds
Last command for ovsbr0p56 took 0 seconds
Last command for ovsbr0p57 took 0 seconds
Last command for ovsbr0p58 took 0 seconds
Last command for ovsbr0p59 took 0 seconds
Last command for ovsbr0p60 took 0 seconds
Last command for ovsbr0p61 took 0 seconds
Last command for ovsbr0p62 took 0 seconds
Last command for ovsbr0p63 took 0 seconds
Last command for ovsbr0p64 took 0 seconds
Last command for ovsbr0p65 took 0 seconds
Last command for ovsbr0p66 took 1 seconds
Last command for ovsbr0p67 took 0 seconds
Last command for ovsbr0p68 took 0 seconds
Last command for ovsbr0p69 took 0 seconds
Last command for ovsbr0p70 took 0 seconds
Last command for ovsbr0p71 took 0 seconds
Last command for ovsbr0p72 took 0 seconds
Last command for ovsbr0p73 took 0 seconds
Last command for ovsbr0p74 took 0 seconds
Last command for ovsbr0p75 took 0 seconds
Last command for ovsbr0p76 took 0 seconds
Last command for ovsbr0p77 took 0 seconds
Last command for ovsbr0p78 took 0 seconds
Last command for ovsbr0p79 took 0 seconds
Last command for ovsbr0p80 took 0 seconds
Last command for ovsbr0p81 took 0 seconds
Last command for ovsbr0p82 took 1 seconds
Last command for ovsbr0p83 took 0 seconds
Last command for ovsbr0p84 took 0 seconds
Last command for ovsbr0p85 took 0 seconds
Last command for ovsbr0p86 took 0 seconds
Last command for ovsbr0p87 took 0 seconds
Last command for ovsbr0p88 took 0 seconds
Last command for ovsbr0p89 took 0 seconds
Last command for ovsbr0p90 took 0 seconds
Last command for ovsbr0p91 took 0 seconds
Last command for ovsbr0p92 took 0 seconds
Last command for ovsbr0p93 took 0 seconds
Last command for ovsbr0p94 took 0 seconds
Last command for ovsbr0p95 took 0 seconds
Last command for ovsbr0p96 took 0 seconds
Last command for ovsbr0p97 took 0 seconds
Last command for ovsbr0p98 took 1 seconds
Last command for ovsbr0p99 took 0 seconds
Last command for ovsbr0p100 took 0 seconds
Last command for ovsbr0p101 took 0 seconds
Last command for ovsbr0p102 took 0 seconds
Last command for ovsbr0p103 took 0 seconds
Last command for ovsbr0p104 took 0 seconds
Last command for ovsbr0p105 took 0 seconds
Last command for ovsbr0p106 took 0 seconds
Last command for ovsbr0p107 took 0 seconds
Last command for ovsbr0p108 took 0 seconds
Last command for ovsbr0p109 took 0 seconds
Last command for ovsbr0p110 took 0 seconds
Last command for ovsbr0p111 took 0 seconds
Last command for ovsbr0p112 took 0 seconds
Last command for ovsbr0p113 took 0 seconds
Last command for ovsbr0p114 took 0 seconds
Last command for ovsbr0p115 took 1 seconds
Last command for ovsbr0p116 took 0 seconds
Last command for ovsbr0p117 took 0 seconds
Last command for ovsbr0p118 took 0 seconds
Last command for ovsbr0p119 took 0 seconds
Last command for ovsbr0p120 took 0 seconds
Last command for ovsbr0p121 took 0 seconds
Last command for ovsbr0p122 took 0 seconds
Last command for ovsbr0p123 took 0 seconds
Last command for ovsbr0p124 took 0 seconds
Last command for ovsbr0p125 took 0 seconds
Last command for ovsbr0p126 took 0 seconds
Last command for ovsbr0p127 took 0 seconds
Last command for ovsbr0p128 took 0 seconds
Last command for ovsbr0p129 took 0 seconds
Last command for ovsbr0p130 took 0 seconds
Last command for ovsbr0p131 took 0 seconds
Last command for ovsbr0p132 took 1 seconds
Last command for ovsbr0p133 took 0 seconds
Last command for ovsbr0p134 took 0 seconds
Last command for ovsbr0p135 took 0 seconds
Last command for ovsbr0p136 took 0 seconds
Last command for ovsbr0p137 took 0 seconds
Last command for ovsbr0p138 took 0 seconds
Last command for ovsbr0p139 took 0 seconds
Last command for ovsbr0p140 took 0 seconds
Last command for ovsbr0p141 took 0 seconds
Last command for ovsbr0p142 took 0 seconds
Last command for ovsbr0p143 took 0 seconds
Last command for ovsbr0p144 took 0 seconds
Last command for ovsbr0p145 took 0 seconds
Last command for ovsbr0p146 took 0 seconds
Last command for ovsbr0p147 took 1 seconds
Last command for ovsbr0p148 took 0 seconds
Last command for ovsbr0p149 took 0 seconds
Last command for ovsbr0p150 took 0 seconds
Last command for ovsbr0p151 took 0 seconds
Last command for ovsbr0p152 took 0 seconds
Last command for ovsbr0p153 took 0 seconds
Last command for ovsbr0p154 took 0 seconds
Last command for ovsbr0p155 took 0 seconds
Last command for ovsbr0p156 took 0 seconds
Last command for ovsbr0p157 took 0 seconds
Last command for ovsbr0p158 took 0 seconds
Last command for ovsbr0p159 took 0 seconds
Last command for ovsbr0p160 took 0 seconds
Last command for ovsbr0p161 took 1 seconds
Last command for ovsbr0p162 took 0 seconds
Last command for ovsbr0p163 took 0 seconds
Last command for ovsbr0p164 took 0 seconds
Last command for ovsbr0p165 took 0 seconds
Last command for ovsbr0p166 took 0 seconds
Last command for ovsbr0p167 took 0 seconds
Last command for ovsbr0p168 took 0 seconds
Last command for ovsbr0p169 took 0 seconds
Last command for ovsbr0p170 took 0 seconds
Last command for ovsbr0p171 took 0 seconds
Last command for ovsbr0p172 took 0 seconds
Last command for ovsbr0p173 took 0 seconds
Last command for ovsbr0p174 took 0 seconds
Last command for ovsbr0p175 took 1 seconds
Last command for ovsbr0p176 took 0 seconds
Last command for ovsbr0p177 took 0 seconds
Last command for ovsbr0p178 took 0 seconds
Last command for ovsbr0p179 took 0 seconds
Last command for ovsbr0p180 took 0 seconds
Last command for ovsbr0p181 took 0 seconds
Last command for ovsbr0p182 took 0 seconds
Last command for ovsbr0p183 took 0 seconds
Last command for ovsbr0p184 took 0 seconds
Last command for ovsbr0p185 took 0 seconds
Last command for ovsbr0p186 took 0 seconds
Last command for ovsbr0p187 took 0 seconds
Last command for ovsbr0p188 took 0 seconds
Last command for ovsbr0p189 took 1 seconds
Last command for ovsbr0p190 took 0 seconds
Last command for ovsbr0p191 took 0 seconds
Last command for ovsbr0p192 took 0 seconds
Last command for ovsbr0p193 took 0 seconds
Last command for ovsbr0p194 took 0 seconds
Last command for ovsbr0p195 took 0 seconds
Last command for ovsbr0p196 took 0 seconds
Last command for ovsbr0p197 took 0 seconds
Last command for ovsbr0p198 took 0 seconds
Last command for ovsbr0p199 took 0 seconds
Last command for ovsbr0p200 took 0 seconds
Last command for ovsbr0p201 took 0 seconds
Last command for ovsbr0p202 took 1 seconds
Last command for ovsbr0p203 took 0 seconds
Last command for ovsbr0p204 took 0 seconds
Last command for ovsbr0p205 took 0 seconds
Last command for ovsbr0p206 took 0 seconds
Last command for ovsbr0p207 took 0 seconds
Last command for ovsbr0p208 took 0 seconds
Last command for ovsbr0p209 took 0 seconds
Last command for ovsbr0p210 took 0 seconds
Last command for ovsbr0p211 took 0 seconds
Last command for ovsbr0p212 took 0 seconds
Last command for ovsbr0p213 took 0 seconds
Last command for ovsbr0p214 took 1 seconds
Last command for ovsbr0p215 took 0 seconds
Last command for ovsbr0p216 took 0 seconds
Last command for ovsbr0p217 took 0 seconds
Last command for ovsbr0p218 took 0 seconds
Last command for ovsbr0p219 took 0 seconds
Last command for ovsbr0p220 took 0 seconds
Last command for ovsbr0p221 took 0 seconds
Last command for ovsbr0p222 took 0 seconds
Last command for ovsbr0p223 took 0 seconds
Last command for ovsbr0p224 took 0 seconds
Last command for ovsbr0p225 took 0 seconds
Last command for ovsbr0p226 took 1 seconds
Last command for ovsbr0p227 took 0 seconds
Last command for ovsbr0p228 took 0 seconds
Last command for ovsbr0p229 took 0 seconds
Last command for ovsbr0p230 took 0 seconds
Last command for ovsbr0p231 took 0 seconds
Last command for ovsbr0p232 took 0 seconds
Last command for ovsbr0p233 took 0 seconds
Last command for ovsbr0p234 took 0 seconds
Last command for ovsbr0p235 took 0 seconds
Last command for ovsbr0p236 took 0 seconds
Last command for ovsbr0p237 took 0 seconds
Last command for ovsbr0p238 took 1 seconds
Last command for ovsbr0p239 took 0 seconds
Last command for ovsbr0p240 took 0 seconds
Last command for ovsbr0p241 took 0 seconds
Last command for ovsbr0p242 took 0 seconds
Last command for ovsbr0p243 took 0 seconds
Last command for ovsbr0p244 took 0 seconds
Last command for ovsbr0p245 took 0 seconds
Last command for ovsbr0p246 took 0 seconds
Last command for ovsbr0p247 took 0 seconds
Last command for ovsbr0p248 took 0 seconds
Last command for ovsbr0p249 took 1 seconds
Last command for ovsbr0p250 took 0 seconds
Last command for ovsbr0p251 took 0 seconds
Last command for ovsbr0p252 took 0 seconds
Last command for ovsbr0p253 took 0 seconds
Last command for ovsbr0p254 took 0 seconds
Last command for ovsbr0p255 took 0 seconds
Last command for ovsbr0p256 took 0 seconds
Last command for ovsbr0p257 took 0 seconds
Last command for ovsbr0p258 took 0 seconds
Last command for ovsbr0p259 took 0 seconds
Last command for ovsbr0p260 took 1 seconds
Last command for ovsbr0p261 took 0 seconds
Last command for ovsbr0p262 took 0 seconds
Last command for ovsbr0p263 took 0 seconds
Last command for ovsbr0p264 took 0 seconds
Last command for ovsbr0p265 took 0 seconds
Last command for ovsbr0p266 took 0 seconds
Last command for ovsbr0p267 took 0 seconds
Last command for ovsbr0p268 took 0 seconds
Last command for ovsbr0p269 took 0 seconds
Last command for ovsbr0p270 took 1 seconds
Last command for ovsbr0p271 took 0 seconds
Last command for ovsbr0p272 took 0 seconds
Last command for ovsbr0p273 took 0 seconds
Last command for ovsbr0p274 took 0 seconds
Last command for ovsbr0p275 took 0 seconds
Last command for ovsbr0p276 took 0 seconds
Last command for ovsbr0p277 took 0 seconds
Last command for ovsbr0p278 took 0 seconds
Last command for ovsbr0p279 took 1 seconds
Last command for ovsbr0p280 took 0 seconds
Last command for ovsbr0p281 took 0 seconds
Last command for ovsbr0p282 took 0 seconds
Last command for ovsbr0p283 took 0 seconds
Last command for ovsbr0p284 took 0 seconds
Last command for ovsbr0p285 took 0 seconds
Last command for ovsbr0p286 took 1 seconds
Last command for ovsbr0p287 took 0 seconds
Last command for ovsbr0p288 took 0 seconds
Last command for ovsbr0p289 took 0 seconds
Last command for ovsbr0p290 took 0 seconds
Last command for ovsbr0p291 took 0 seconds
Last command for ovsbr0p292 took 0 seconds
Last command for ovsbr0p293 took 0 seconds
Last command for ovsbr0p294 took 1 seconds
Last command for ovsbr0p295 took 0 seconds
Last command for ovsbr0p296 took 1 seconds
Last command for ovsbr0p297 took 0 seconds
Last command for ovsbr0p298 took 0 seconds
Last command for ovsbr0p299 took 0 seconds
2015-01-10T01:12:03Z|00002|timeval|WARN|Unreasonably long 1010ms poll interval (352ms user, 1ms system)
2015-01-10T01:12:03Z|00003|timeval|WARN|faults: 299 minor, 0 major
2015-01-10T01:12:03Z|00004|timeval|WARN|context switches: 0 voluntary, 7 involuntary
Last command for ovsbr0p300 took 1 seconds
Last command for ovsbr0p301 took 0 seconds
Last command for ovsbr0p302 took 0 seconds
Last command for ovsbr0p303 took 1 seconds
Last command for ovsbr0p304 took 0 seconds
Last command for ovsbr0p305 took 0 seconds
Last command for ovsbr0p306 took 0 seconds
Last command for ovsbr0p307 took 0 seconds
Last command for ovsbr0p308 took 0 seconds
Last command for ovsbr0p309 took 0 seconds
Last command for ovsbr0p310 took 0 seconds
Last command for ovsbr0p311 took 1 seconds
Last command for ovsbr0p312 took 0 seconds
Last command for ovsbr0p313 took 0 seconds
Last command for ovsbr0p314 took 0 seconds
Last command for ovsbr0p315 took 0 seconds
Last command for ovsbr0p316 took 0 seconds
Last command for ovsbr0p317 took 0 seconds
Last command for ovsbr0p318 took 1 seconds
Last command for ovsbr0p319 took 0 seconds
Last command for ovsbr0p320 took 0 seconds
Last command for ovsbr0p321 took 0 seconds
Last command for ovsbr0p322 took 0 seconds
Last command for ovsbr0p323 took 0 seconds
Last command for ovsbr0p324 took 1 seconds
Last command for ovsbr0p325 took 0 seconds
Last command for ovsbr0p326 took 0 seconds
Last command for ovsbr0p327 took 0 seconds
Last command for ovsbr0p328 took 0 seconds
Last command for ovsbr0p329 took 0 seconds
Last command for ovsbr0p330 took 0 seconds
Last command for ovsbr0p331 took 0 seconds
Last command for ovsbr0p332 took 1 seconds
Last command for ovsbr0p333 took 0 seconds
Last command for ovsbr0p334 took 0 seconds
Last command for ovsbr0p335 took 0 seconds
Last command for ovsbr0p336 took 0 seconds
Last command for ovsbr0p337 took 0 seconds
Last command for ovsbr0p338 took 0 seconds
Last command for ovsbr0p339 took 0 seconds
Last command for ovsbr0p340 took 1 seconds
Last command for ovsbr0p341 took 0 seconds
Last command for ovsbr0p342 took 0 seconds
Last command for ovsbr0p343 took 0 seconds
Last command for ovsbr0p344 took 0 seconds
Last command for ovsbr0p345 took 0 seconds
Last command for ovsbr0p346 took 0 seconds
Last command for ovsbr0p347 took 1 seconds
Last command for ovsbr0p348 took 0 seconds
Last command for ovsbr0p349 took 0 seconds
Last command for ovsbr0p350 took 0 seconds
Last command for ovsbr0p351 took 0 seconds
Last command for ovsbr0p352 took 0 seconds
Last command for ovsbr0p353 took 1 seconds
Last command for ovsbr0p354 took 0 seconds
Last command for ovsbr0p355 took 0 seconds
Last command for ovsbr0p356 took 0 seconds
Last command for ovsbr0p357 took 0 seconds
Last command for ovsbr0p358 took 0 seconds
Last command for ovsbr0p359 took 0 seconds
Last command for ovsbr0p360 took 1 seconds
Last command for ovsbr0p361 took 0 seconds
Last command for ovsbr0p362 took 0 seconds
Last command for ovsbr0p363 took 0 seconds
Last command for ovsbr0p364 took 0 seconds
Last command for ovsbr0p365 took 0 seconds
Last command for ovsbr0p366 took 1 seconds
Last command for ovsbr0p367 took 0 seconds
Last command for ovsbr0p368 took 0 seconds
Last command for ovsbr0p369 took 0 seconds
Last command for ovsbr0p370 took 0 seconds
Last command for ovsbr0p371 took 0 seconds
Last command for ovsbr0p372 took 1 seconds
Last command for ovsbr0p373 took 0 seconds
Last command for ovsbr0p374 took 0 seconds
Last command for ovsbr0p375 took 0 seconds
Last command for ovsbr0p376 took 0 seconds
Last command for ovsbr0p377 took 0 seconds
Last command for ovsbr0p378 took 0 seconds
Last command for ovsbr0p379 took 1 seconds
Last command for ovsbr0p380 took 0 seconds
Last command for ovsbr0p381 took 0 seconds
Last command for ovsbr0p382 took 0 seconds
Last command for ovsbr0p383 took 0 seconds
Last command for ovsbr0p384 took 1 seconds
Last command for ovsbr0p385 took 0 seconds
Last command for ovsbr0p386 took 0 seconds
Last command for ovsbr0p387 took 0 seconds
Last command for ovsbr0p388 took 0 seconds
Last command for ovsbr0p389 took 1 seconds
Last command for ovsbr0p390 took 0 seconds
Last command for ovsbr0p391 took 0 seconds
Last command for ovsbr0p392 took 0 seconds
Last command for ovsbr0p393 took 0 seconds
Last command for ovsbr0p394 took 0 seconds
Last command for ovsbr0p395 took 0 seconds
Last command for ovsbr0p396 took 1 seconds
Last command for ovsbr0p397 took 0 seconds
Last command for ovsbr0p398 took 0 seconds
Last command for ovsbr0p399 took 0 seconds
Last command for ovsbr0p400 took 0 seconds
Last command for ovsbr0p401 took 1 seconds
Last command for ovsbr0p402 took 0 seconds
Last command for ovsbr0p403 took 0 seconds
Last command for ovsbr0p404 took 0 seconds
Last command for ovsbr0p405 took 0 seconds
Last command for ovsbr0p406 took 0 seconds
Last command for ovsbr0p407 took 1 seconds
Last command for ovsbr0p408 took 0 seconds
Last command for ovsbr0p409 took 0 seconds
Last command for ovsbr0p410 took 0 seconds
Last command for ovsbr0p411 took 1 seconds
Last command for ovsbr0p412 took 0 seconds
Last command for ovsbr0p413 took 0 seconds
Last command for ovsbr0p414 took 0 seconds
Last command for ovsbr0p415 took 1 seconds
Last command for ovsbr0p416 took 0 seconds
Last command for ovsbr0p417 took 0 seconds
Last command for ovsbr0p418 took 0 seconds
Last command for ovsbr0p419 took 0 seconds
Last command for ovsbr0p420 took 1 seconds
Last command for ovsbr0p421 took 0 seconds
Last command for ovsbr0p422 took 0 seconds
Last command for ovsbr0p423 took 1 seconds
Last command for ovsbr0p424 took 0 seconds
Last command for ovsbr0p425 took 0 seconds
Last command for ovsbr0p426 took 0 seconds
Last command for ovsbr0p427 took 1 seconds
Last command for ovsbr0p428 took 0 seconds
Last command for ovsbr0p429 took 0 seconds
Last command for ovsbr0p430 took 0 seconds
Last command for ovsbr0p431 took 1 seconds
Last command for ovsbr0p432 took 0 seconds
Last command for ovsbr0p433 took 0 seconds
Last command for ovsbr0p434 took 0 seconds
Last command for ovsbr0p435 took 0 seconds
Last command for ovsbr0p436 took 0 seconds
Last command for ovsbr0p437 took 1 seconds
Last command for ovsbr0p438 took 0 seconds
Last command for ovsbr0p439 took 0 seconds
Last command for ovsbr0p440 took 0 seconds
Last command for ovsbr0p441 took 1 seconds
Last command for ovsbr0p442 took 0 seconds
Last command for ovsbr0p443 took 0 seconds
Last command for ovsbr0p444 took 0 seconds
Last command for ovsbr0p445 took 1 seconds
Last command for ovsbr0p446 took 0 seconds
Last command for ovsbr0p447 took 0 seconds
Last command for ovsbr0p448 took 0 seconds
Last command for ovsbr0p449 took 1 seconds
Last command for ovsbr0p450 took 0 seconds
Last command for ovsbr0p451 took 1 seconds
Last command for ovsbr0p452 took 0 seconds
Last command for ovsbr0p453 took 0 seconds
Last command for ovsbr0p454 took 0 seconds
Last command for ovsbr0p455 took 0 seconds
Last command for ovsbr0p456 took 0 seconds
Last command for ovsbr0p457 took 0 seconds
Last command for ovsbr0p458 took 1 seconds
Last command for ovsbr0p459 took 0 seconds
Last command for ovsbr0p460 took 0 seconds
Last command for ovsbr0p461 took 0 seconds
Last command for ovsbr0p462 took 1 seconds
Last command for ovsbr0p463 took 0 seconds
Last command for ovsbr0p464 took 0 seconds
Last command for ovsbr0p465 took 1 seconds
Last command for ovsbr0p466 took 0 seconds
Last command for ovsbr0p467 took 0 seconds
Last command for ovsbr0p468 took 1 seconds
Last command for ovsbr0p469 took 0 seconds
Last command for ovsbr0p470 took 0 seconds
Last command for ovsbr0p471 took 0 seconds
Last command for ovsbr0p472 took 0 seconds
Last command for ovsbr0p473 took 1 seconds
Last command for ovsbr0p474 took 0 seconds
Last command for ovsbr0p475 took 0 seconds
Last command for ovsbr0p476 took 1 seconds
Last command for ovsbr0p477 took 0 seconds
Last command for ovsbr0p478 took 0 seconds
Last command for ovsbr0p479 took 0 seconds
Last command for ovsbr0p480 took 0 seconds
Last command for ovsbr0p481 took 1 seconds
Last command for ovsbr0p482 took 0 seconds
Last command for ovsbr0p483 took 0 seconds
Last command for ovsbr0p484 took 0 seconds
Last command for ovsbr0p485 took 1 seconds
Last command for ovsbr0p486 took 0 seconds
Last command for ovsbr0p487 took 0 seconds
Last command for ovsbr0p488 took 1 seconds
Last command for ovsbr0p489 took 0 seconds
Last command for ovsbr0p490 took 1 seconds
Last command for ovsbr0p491 took 0 seconds
Last command for ovsbr0p492 took 0 seconds
Last command for ovsbr0p493 took 0 seconds
Last command for ovsbr0p494 took 0 seconds
Last command for ovsbr0p495 took 0 seconds
Last command for ovsbr0p496 took 1 seconds
Last command for ovsbr0p497 took 1 seconds
Last command for ovsbr0p498 took 0 seconds
Last command for ovsbr0p499 took 1 seconds
Last command for ovsbr0p500 took 0 seconds
Last command for ovsbr0p501 took 0 seconds
Last command for ovsbr0p502 took 0 seconds
Last command for ovsbr0p503 took 1 seconds
Last command for ovsbr0p504 took 0 seconds
Last command for ovsbr0p505 took 0 seconds
Last command for ovsbr0p506 took 0 seconds
Last command for ovsbr0p507 took 1 seconds
Last command for ovsbr0p508 took 0 seconds
Last command for ovsbr0p509 took 1 seconds
Last command for ovsbr0p510 took 0 seconds
Last command for ovsbr0p511 took 0 seconds
Last command for ovsbr0p512 took 0 seconds
Last command for ovsbr0p513 took 0 seconds
Last command for ovsbr0p514 took 1 seconds
Last command for ovsbr0p515 took 0 seconds
Last command for ovsbr0p516 took 1 seconds
Last command for ovsbr0p517 took 0 seconds
Last command for ovsbr0p518 took 1 seconds
Last command for ovsbr0p519 took 0 seconds
Last command for ovsbr0p520 took 0 seconds
Last command for ovsbr0p521 took 0 seconds
Last command for ovsbr0p522 took 0 seconds
Last command for ovsbr0p523 took 1 seconds
Last command for ovsbr0p524 took 0 seconds
Last command for ovsbr0p525 took 1 seconds
Last command for ovsbr0p526 took 0 seconds
Last command for ovsbr0p527 took 1 seconds
Last command for ovsbr0p528 took 0 seconds
Last command for ovsbr0p529 took 0 seconds
Last command for ovsbr0p530 took 1 seconds
Last command for ovsbr0p531 took 0 seconds
Last command for ovsbr0p532 took 0 seconds
Last command for ovsbr0p533 took 1 seconds
Last command for ovsbr0p534 took 0 seconds
Last command for ovsbr0p535 took 1 seconds
Last command for ovsbr0p536 took 0 seconds
Last command for ovsbr0p537 took 0 seconds
Last command for ovsbr0p538 took 1 seconds
Last command for ovsbr0p539 took 0 seconds
Last command for ovsbr0p540 took 0 seconds
Last command for ovsbr0p541 took 0 seconds
Last command for ovsbr0p542 took 1 seconds
Last command for ovsbr0p543 took 1 seconds
Last command for ovsbr0p544 took 0 seconds
Last command for ovsbr0p545 took 0 seconds
Last command for ovsbr0p546 took 0 seconds
Last command for ovsbr0p547 took 1 seconds
Last command for ovsbr0p548 took 0 seconds
Last command for ovsbr0p549 took 1 seconds
Last command for ovsbr0p550 took 0 seconds
2015-01-10T01:13:03Z|00002|timeval|WARN|Unreasonably long 1411ms poll interval (413ms user, 1ms system)
2015-01-10T01:13:03Z|00003|timeval|WARN|faults: 25 minor, 0 major
2015-01-10T01:13:03Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p551 took 2 seconds
Last command for ovsbr0p552 took 0 seconds
Last command for ovsbr0p553 took 1 seconds
Last command for ovsbr0p554 took 0 seconds
Last command for ovsbr0p555 took 0 seconds
Last command for ovsbr0p556 took 1 seconds
Last command for ovsbr0p557 took 0 seconds
Last command for ovsbr0p558 took 0 seconds
Last command for ovsbr0p559 took 0 seconds
Last command for ovsbr0p560 took 1 seconds
Last command for ovsbr0p561 took 0 seconds
Last command for ovsbr0p562 took 1 seconds
Last command for ovsbr0p563 took 0 seconds
Last command for ovsbr0p564 took 1 seconds
Last command for ovsbr0p565 took 0 seconds
Last command for ovsbr0p566 took 0 seconds
Last command for ovsbr0p567 took 1 seconds
Last command for ovsbr0p568 took 0 seconds
Last command for ovsbr0p569 took 1 seconds
Last command for ovsbr0p570 took 0 seconds
Last command for ovsbr0p571 took 0 seconds
Last command for ovsbr0p572 took 0 seconds
Last command for ovsbr0p573 took 1 seconds
Last command for ovsbr0p574 took 0 seconds
Last command for ovsbr0p575 took 0 seconds
Last command for ovsbr0p576 took 1 seconds
Last command for ovsbr0p577 took 1 seconds
Last command for ovsbr0p578 took 0 seconds
Last command for ovsbr0p579 took 1 seconds
Last command for ovsbr0p580 took 0 seconds
Last command for ovsbr0p581 took 0 seconds
Last command for ovsbr0p582 took 1 seconds
Last command for ovsbr0p583 took 0 seconds
Last command for ovsbr0p584 took 1 seconds
Last command for ovsbr0p585 took 0 seconds
Last command for ovsbr0p586 took 1 seconds
Last command for ovsbr0p587 took 0 seconds
Last command for ovsbr0p588 took 1 seconds
Last command for ovsbr0p589 took 0 seconds
Last command for ovsbr0p590 took 0 seconds
Last command for ovsbr0p591 took 0 seconds
Last command for ovsbr0p592 took 1 seconds
Last command for ovsbr0p593 took 0 seconds
Last command for ovsbr0p594 took 1 seconds
Last command for ovsbr0p595 took 0 seconds
Last command for ovsbr0p596 took 0 seconds
Last command for ovsbr0p597 took 1 seconds
Last command for ovsbr0p598 took 0 seconds
Last command for ovsbr0p599 took 1 seconds
Last command for ovsbr0p600 took 0 seconds
Last command for ovsbr0p601 took 1 seconds
Last command for ovsbr0p602 took 1 seconds
Last command for ovsbr0p603 took 0 seconds
Last command for ovsbr0p604 took 1 seconds
Last command for ovsbr0p605 took 0 seconds
Last command for ovsbr0p606 took 1 seconds
Last command for ovsbr0p607 took 1 seconds
Last command for ovsbr0p608 took 1 seconds
Last command for ovsbr0p609 took 1 seconds
Last command for ovsbr0p610 took 0 seconds
Last command for ovsbr0p611 took 0 seconds
Last command for ovsbr0p612 took 0 seconds
Last command for ovsbr0p613 took 1 seconds
Last command for ovsbr0p614 took 0 seconds
Last command for ovsbr0p615 took 0 seconds
Last command for ovsbr0p616 took 1 seconds
Last command for ovsbr0p617 took 1 seconds
Last command for ovsbr0p618 took 0 seconds
Last command for ovsbr0p619 took 0 seconds
Last command for ovsbr0p620 took 1 seconds
Last command for ovsbr0p621 took 0 seconds
Last command for ovsbr0p622 took 1 seconds
Last command for ovsbr0p623 took 0 seconds
Last command for ovsbr0p624 took 1 seconds
Last command for ovsbr0p625 took 0 seconds
Last command for ovsbr0p626 took 0 seconds
Last command for ovsbr0p627 took 0 seconds
Last command for ovsbr0p628 took 1 seconds
Last command for ovsbr0p629 took 0 seconds
Last command for ovsbr0p630 took 1 seconds
Last command for ovsbr0p631 took 0 seconds
Last command for ovsbr0p632 took 1 seconds
Last command for ovsbr0p633 took 0 seconds
Last command for ovsbr0p634 took 1 seconds
Last command for ovsbr0p635 took 0 seconds
Last command for ovsbr0p636 took 1 seconds
Last command for ovsbr0p637 took 0 seconds
Last command for ovsbr0p638 took 0 seconds
Last command for ovsbr0p639 took 1 seconds
Last command for ovsbr0p640 took 1 seconds
Last command for ovsbr0p641 took 0 seconds
Last command for ovsbr0p642 took 0 seconds
Last command for ovsbr0p643 took 1 seconds
Last command for ovsbr0p644 took 1 seconds
Last command for ovsbr0p645 took 0 seconds
Last command for ovsbr0p646 took 1 seconds
Last command for ovsbr0p647 took 0 seconds
Last command for ovsbr0p648 took 0 seconds
Last command for ovsbr0p649 took 1 seconds
Last command for ovsbr0p650 took 0 seconds
Last command for ovsbr0p651 took 1 seconds
Last command for ovsbr0p652 took 1 seconds
Last command for ovsbr0p653 took 0 seconds
Last command for ovsbr0p654 took 0 seconds
Last command for ovsbr0p655 took 0 seconds
Last command for ovsbr0p656 took 1 seconds
Last command for ovsbr0p657 took 1 seconds
Last command for ovsbr0p658 took 0 seconds
Last command for ovsbr0p659 took 1 seconds
Last command for ovsbr0p660 took 0 seconds
Last command for ovsbr0p661 took 1 seconds
Last command for ovsbr0p662 took 0 seconds
Last command for ovsbr0p663 took 1 seconds
Last command for ovsbr0p664 took 0 seconds
Last command for ovsbr0p665 took 2 seconds
Last command for ovsbr0p666 took 0 seconds
Last command for ovsbr0p667 took 0 seconds
Last command for ovsbr0p668 took 1 seconds
Last command for ovsbr0p669 took 0 seconds
Last command for ovsbr0p670 took 1 seconds
Last command for ovsbr0p671 took 0 seconds
Last command for ovsbr0p672 took 0 seconds
Last command for ovsbr0p673 took 1 seconds
Last command for ovsbr0p674 took 0 seconds
Last command for ovsbr0p675 took 1 seconds
Last command for ovsbr0p676 took 1 seconds
Last command for ovsbr0p677 took 0 seconds
Last command for ovsbr0p678 took 0 seconds
Last command for ovsbr0p679 took 1 seconds
Last command for ovsbr0p680 took 0 seconds
Last command for ovsbr0p681 took 0 seconds
2015-01-10T01:14:03Z|00002|timeval|WARN|Unreasonably long 1105ms poll interval (-8ms user, 13ms system)
2015-01-10T01:14:03Z|00003|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p682 took 2 seconds
Last command for ovsbr0p683 took 3 seconds
Last command for ovsbr0p684 took 1 seconds
Last command for ovsbr0p685 took 0 seconds
Last command for ovsbr0p686 took 1 seconds
Last command for ovsbr0p687 took 0 seconds
Last command for ovsbr0p688 took 0 seconds
Last command for ovsbr0p689 took 0 seconds
Last command for ovsbr0p690 took 1 seconds
Last command for ovsbr0p691 took 0 seconds
Last command for ovsbr0p692 took 1 seconds
Last command for ovsbr0p693 took 0 seconds
Last command for ovsbr0p694 took 0 seconds
Last command for ovsbr0p695 took 0 seconds
Last command for ovsbr0p696 took 0 seconds
Last command for ovsbr0p697 took 1 seconds
Last command for ovsbr0p698 took 0 seconds
Last command for ovsbr0p699 took 0 seconds
Last command for ovsbr0p700 took 1 seconds
Last command for ovsbr0p701 took 1 seconds
Last command for ovsbr0p702 took 0 seconds
Last command for ovsbr0p703 took 0 seconds
Last command for ovsbr0p704 took 1 seconds
Last command for ovsbr0p705 took 0 seconds
Last command for ovsbr0p706 took 0 seconds
Last command for ovsbr0p707 took 0 seconds
Last command for ovsbr0p708 took 0 seconds
Last command for ovsbr0p709 took 1 seconds
Last command for ovsbr0p710 took 0 seconds
Last command for ovsbr0p711 took 1 seconds
Last command for ovsbr0p712 took 0 seconds
Last command for ovsbr0p713 took 1 seconds
Last command for ovsbr0p714 took 0 seconds
Last command for ovsbr0p715 took 1 seconds
Last command for ovsbr0p716 took 0 seconds
Last command for ovsbr0p717 took 4 seconds
Last command for ovsbr0p718 took 0 seconds
Last command for ovsbr0p719 took 2 seconds
Last command for ovsbr0p720 took 0 seconds
Last command for ovsbr0p721 took 1 seconds
Last command for ovsbr0p722 took 0 seconds
Last command for ovsbr0p723 took 2 seconds
Last command for ovsbr0p724 took 0 seconds
Last command for ovsbr0p725 took 1 seconds
Last command for ovsbr0p726 took 1 seconds
Last command for ovsbr0p727 took 0 seconds
Last command for ovsbr0p728 took 0 seconds
Last command for ovsbr0p729 took 1 seconds
Last command for ovsbr0p730 took 1 seconds
Last command for ovsbr0p731 took 1 seconds
Last command for ovsbr0p732 took 0 seconds
Last command for ovsbr0p733 took 0 seconds
Last command for ovsbr0p734 took 0 seconds
Last command for ovsbr0p735 took 1 seconds
Last command for ovsbr0p736 took 1 seconds
Last command for ovsbr0p737 took 1 seconds
Last command for ovsbr0p738 took 1 seconds
Last command for ovsbr0p739 took 0 seconds
Last command for ovsbr0p740 took 1 seconds
Last command for ovsbr0p741 took 1 seconds
Last command for ovsbr0p742 took 0 seconds
Last command for ovsbr0p743 took 0 seconds
Last command for ovsbr0p744 took 1 seconds
Last command for ovsbr0p745 took 1 seconds
Last command for ovsbr0p746 took 1 seconds
Last command for ovsbr0p747 took 0 seconds
Last command for ovsbr0p748 took 1 seconds
Last command for ovsbr0p749 took 1 seconds
Last command for ovsbr0p750 took 0 seconds
Last command for ovsbr0p751 took 1 seconds
Last command for ovsbr0p752 took 1 seconds
Last command for ovsbr0p753 took 0 seconds
Last command for ovsbr0p754 took 1 seconds
Last command for ovsbr0p755 took 0 seconds
Last command for ovsbr0p756 took 2 seconds
Last command for ovsbr0p757 took 0 seconds
Last command for ovsbr0p758 took 1 seconds
Last command for ovsbr0p759 took 0 seconds
Last command for ovsbr0p760 took 1 seconds
Last command for ovsbr0p761 took 0 seconds
Last command for ovsbr0p762 took 1 seconds
Last command for ovsbr0p763 took 0 seconds
Last command for ovsbr0p764 took 1 seconds
Last command for ovsbr0p765 took 1 seconds
Last command for ovsbr0p766 took 0 seconds
Last command for ovsbr0p767 took 1 seconds
Last command for ovsbr0p768 took 2 seconds
Last command for ovsbr0p769 took 0 seconds
Last command for ovsbr0p770 took 0 seconds
Last command for ovsbr0p771 took 1 seconds
Last command for ovsbr0p772 took 1 seconds
Last command for ovsbr0p773 took 1 seconds
Last command for ovsbr0p774 took 0 seconds
Last command for ovsbr0p775 took 1 seconds
Last command for ovsbr0p776 took 0 seconds
Last command for ovsbr0p777 took 4 seconds
Last command for ovsbr0p778 took 1 seconds
Last command for ovsbr0p779 took 1 seconds
Last command for ovsbr0p780 took 0 seconds
Last command for ovsbr0p781 took 1 seconds
Last command for ovsbr0p782 took 0 seconds
Last command for ovsbr0p783 took 1 seconds
Last command for ovsbr0p784 took 1 seconds
Last command for ovsbr0p785 took 0 seconds
Last command for ovsbr0p786 took 1 seconds
Last command for ovsbr0p787 took 0 seconds
Last command for ovsbr0p788 took 1 seconds
Last command for ovsbr0p789 took 1 seconds
Last command for ovsbr0p790 took 0 seconds
Last command for ovsbr0p791 took 0 seconds
Last command for ovsbr0p792 took 2 seconds
Last command for ovsbr0p793 took 1 seconds
Last command for ovsbr0p794 took 0 seconds
Last command for ovsbr0p795 took 1 seconds
Last command for ovsbr0p796 took 0 seconds
Last command for ovsbr0p797 took 1 seconds
Last command for ovsbr0p798 took 0 seconds
Last command for ovsbr0p799 took 1 seconds
Last command for ovsbr0p800 took 8 seconds
2015-01-10T01:15:27Z|00002|timeval|WARN|Unreasonably long 1071ms poll interval (22ms user, 47ms system)
2015-01-10T01:15:27Z|00003|timeval|WARN|faults: 746 minor, 0 major
2015-01-10T01:15:27Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p801 took 8 seconds
Last command for ovsbr0p802 took 6 seconds
Last command for ovsbr0p803 took 6 seconds
Last command for ovsbr0p804 took 5 seconds
Last command for ovsbr0p805 took 3 seconds
Last command for ovsbr0p806 took 1 seconds
Last command for ovsbr0p807 took 1 seconds
Last command for ovsbr0p808 took 0 seconds
Last command for ovsbr0p809 took 2 seconds
Last command for ovsbr0p810 took 0 seconds
Last command for ovsbr0p811 took 2 seconds
Last command for ovsbr0p812 took 0 seconds
Last command for ovsbr0p813 took 4 seconds
Last command for ovsbr0p814 took 0 seconds
Last command for ovsbr0p815 took 1 seconds
Last command for ovsbr0p816 took 0 seconds
Last command for ovsbr0p817 took 0 seconds
Last command for ovsbr0p818 took 3 seconds
Last command for ovsbr0p819 took 1 seconds
Last command for ovsbr0p820 took 1 seconds
Last command for ovsbr0p821 took 0 seconds
Last command for ovsbr0p822 took 1 seconds
Last command for ovsbr0p823 took 1 seconds
Last command for ovsbr0p824 took 0 seconds
Last command for ovsbr0p825 took 1 seconds
Last command for ovsbr0p826 took 0 seconds
Last command for ovsbr0p827 took 8 seconds
Last command for ovsbr0p828 took 8 seconds
Last command for ovsbr0p829 took 4 seconds
Last command for ovsbr0p830 took 1 seconds
Last command for ovsbr0p831 took 2 seconds
2015-01-10T01:16:39Z|00002|timeval|WARN|Unreasonably long 2994ms poll interval (33ms user, 247ms system)
2015-01-10T01:16:39Z|00003|timeval|WARN|faults: 787 minor, 0 major
2015-01-10T01:16:39Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p832 took 5 seconds
Last command for ovsbr0p833 took 0 seconds
Last command for ovsbr0p834 took 1 seconds
Last command for ovsbr0p835 took 2 seconds
Last command for ovsbr0p836 took 1 seconds
Last command for ovsbr0p837 took 0 seconds
Last command for ovsbr0p838 took 2 seconds
Last command for ovsbr0p839 took 0 seconds
Last command for ovsbr0p840 took 2 seconds
Last command for ovsbr0p841 took 0 seconds
Last command for ovsbr0p842 took 1 seconds
Last command for ovsbr0p843 took 1 seconds
Last command for ovsbr0p844 took 1 seconds
Last command for ovsbr0p845 took 0 seconds
Last command for ovsbr0p846 took 2 seconds
Last command for ovsbr0p847 took 1 seconds
Last command for ovsbr0p848 took 0 seconds
Last command for ovsbr0p849 took 1 seconds
Last command for ovsbr0p850 took 0 seconds
Last command for ovsbr0p851 took 3 seconds
Last command for ovsbr0p852 took 0 seconds
Last command for ovsbr0p853 took 1 seconds
Last command for ovsbr0p854 took 1 seconds
Last command for ovsbr0p855 took 2 seconds
Last command for ovsbr0p856 took 0 seconds
Last command for ovsbr0p857 took 1 seconds
Last command for ovsbr0p858 took 1 seconds
Last command for ovsbr0p859 took 1 seconds
Last command for ovsbr0p860 took 0 seconds
Last command for ovsbr0p861 took 1 seconds
Last command for ovsbr0p862 took 0 seconds
Last command for ovsbr0p863 took 0 seconds
Last command for ovsbr0p864 took 0 seconds
Last command for ovsbr0p865 took 1 seconds
Last command for ovsbr0p866 took 0 seconds
Last command for ovsbr0p867 took 1 seconds
Last command for ovsbr0p868 took 1 seconds
Last command for ovsbr0p869 took 0 seconds
Last command for ovsbr0p870 took 4 seconds
Last command for ovsbr0p871 took 2 seconds
Last command for ovsbr0p872 took 0 seconds
Last command for ovsbr0p873 took 2 seconds
Last command for ovsbr0p874 took 1 seconds
Last command for ovsbr0p875 took 0 seconds
Last command for ovsbr0p876 took 1 seconds
Last command for ovsbr0p877 took 0 seconds
Last command for ovsbr0p878 took 1 seconds
Last command for ovsbr0p879 took 0 seconds
Last command for ovsbr0p880 took 0 seconds
Last command for ovsbr0p881 took 1 seconds
Last command for ovsbr0p882 took 0 seconds
Last command for ovsbr0p883 took 14 seconds
Last command for ovsbr0p884 took 4 seconds
Last command for ovsbr0p885 took 6 seconds
Last command for ovsbr0p886 took 4 seconds
Last command for ovsbr0p887 took 11 seconds
2015-01-10T01:18:03Z|00002|timeval|WARN|Unreasonably long 1738ms poll interval (27ms user, 3ms system)
2015-01-10T01:18:03Z|00003|timeval|WARN|faults: 844 minor, 0 major
2015-01-10T01:18:03Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p888 took 6 seconds
Last command for ovsbr0p889 took 10 seconds
Last command for ovsbr0p890 took 5 seconds
Last command for ovsbr0p891 took 9 seconds
Last command for ovsbr0p892 took 6 seconds
Last command for ovsbr0p893 took 5 seconds
Last command for ovsbr0p894 took 9 seconds
Last command for ovsbr0p895 took 9 seconds
Last command for ovsbr0p896 took 14 seconds
Last command for ovsbr0p897 took 5 seconds
Last command for ovsbr0p898 took 20 seconds
Last command for ovsbr0p899 took 18 seconds
Last command for ovsbr0p900 took 5 seconds
2015-01-10T01:20:04Z|00002|timeval|WARN|Unreasonably long 1958ms poll interval (69ms user, 2ms system)
2015-01-10T01:20:04Z|00003|timeval|WARN|faults: 861 minor, 0 major
2015-01-10T01:20:04Z|00004|timeval|WARN|context switches: 0 voluntary, 6 involuntary
Last command for ovsbr0p901 took 38 seconds
Last command for ovsbr0p902 took 2 seconds
Last command for ovsbr0p903 took 1 seconds
Last command for ovsbr0p904 took 1 seconds
Last command for ovsbr0p905 took 0 seconds
2015-01-10T01:20:46Z|00002|timeval|WARN|Unreasonably long 1633ms poll interval (0ms user, 83ms system)
2015-01-10T01:20:46Z|00003|timeval|WARN|faults: 872 minor, 0 major
2015-01-10T01:20:46Z|00004|timeval|WARN|context switches: 0 voluntary, 9 involuntary
Last command for ovsbr0p906 took 3 seconds
Last command for ovsbr0p907 took 1 seconds
Last command for ovsbr0p908 took 1 seconds
Last command for ovsbr0p909 took 4 seconds
Last command for ovsbr0p910 took 4 seconds
Last command for ovsbr0p911 took 10 seconds
Last command for ovsbr0p912 took 11 seconds
Last command for ovsbr0p913 took 50 seconds
Last command for ovsbr0p914 took 6 seconds
Last command for ovsbr0p915 took 1 seconds
Last command for ovsbr0p916 took 1 seconds
Last command for ovsbr0p917 took 1 seconds
Last command for ovsbr0p918 took 1 seconds
Last command for ovsbr0p919 took 0 seconds
Last command for ovsbr0p920 took 0 seconds
Last command for ovsbr0p921 took 3 seconds
Last command for ovsbr0p922 took 0 seconds
Last command for ovsbr0p923 took 1 seconds
Last command for ovsbr0p924 took 0 seconds
Last command for ovsbr0p925 took 1 seconds
Last command for ovsbr0p926 took 11 seconds
Last command for ovsbr0p927 took 5 seconds
Last command for ovsbr0p928 took 6 seconds
Last command for ovsbr0p929 took 13 seconds
Last command for ovsbr0p930 took 43 seconds
Last command for ovsbr0p931 took 2 seconds
Last command for ovsbr0p932 took 0 seconds
Last command for ovsbr0p933 took 1 seconds
Last command for ovsbr0p934 took 2 seconds
Last command for ovsbr0p935 took 1 seconds
Last command for ovsbr0p936 took 1 seconds
Last command for ovsbr0p937 took 1 seconds
Last command for ovsbr0p938 took 0 seconds
Last command for ovsbr0p939 took 16 seconds
Last command for ovsbr0p940 took 10 seconds
Last command for ovsbr0p941 took 16 seconds
2015-01-10T01:24:34Z|00002|timeval|WARN|Unreasonably long 1262ms poll interval (23ms user, 113ms system)
2015-01-10T01:24:34Z|00003|timeval|WARN|faults: 874 minor, 0 major
2015-01-10T01:24:34Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p942 took 20 seconds
Last command for ovsbr0p943 took 19 seconds
Last command for ovsbr0p944 took 12 seconds
Last command for ovsbr0p945 took 0 seconds
Last command for ovsbr0p946 took 2 seconds
Last command for ovsbr0p947 took 1 seconds
Last command for ovsbr0p948 took 1 seconds
Last command for ovsbr0p949 took 0 seconds
Last command for ovsbr0p950 took 1 seconds
Last command for ovsbr0p951 took 1 seconds
Last command for ovsbr0p952 took 2 seconds
Last command for ovsbr0p953 took 1 seconds
Last command for ovsbr0p954 took 1 seconds
Last command for ovsbr0p955 took 0 seconds
Last command for ovsbr0p956 took 0 seconds
2015-01-10T01:25:34Z|00002|timeval|WARN|Unreasonably long 1762ms poll interval (18ms user, 44ms system)
2015-01-10T01:25:34Z|00003|timeval|WARN|faults: 896 minor, 0 major
2015-01-10T01:25:34Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p957 took 5 seconds
2015-01-10T01:25:39Z|00002|timeval|WARN|Unreasonably long 2016ms poll interval (15ms user, 117ms system)
2015-01-10T01:25:39Z|00003|timeval|WARN|faults: 915 minor, 0 major
2015-01-10T01:25:39Z|00004|timeval|WARN|context switches: 0 voluntary, 13 involuntary
Last command for ovsbr0p958 took 24 seconds
Last command for ovsbr0p959 took 29 seconds
Last command for ovsbr0p960 took 31 seconds
2015-01-10T01:27:03Z|00002|timeval|WARN|Unreasonably long 1921ms poll interval (29ms user, 16ms system)
2015-01-10T01:27:03Z|00003|timeval|WARN|faults: 883 minor, 0 major
2015-01-10T01:27:03Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p961 took 35 seconds
Last command for ovsbr0p962 took 32 seconds
Last command for ovsbr0p963 took 4 seconds
Last command for ovsbr0p964 took 0 seconds
Last command for ovsbr0p965 took 1 seconds
Last command for ovsbr0p966 took 0 seconds
2015-01-10T01:28:16Z|00002|timeval|WARN|Unreasonably long 1788ms poll interval (12ms user, 55ms system)
2015-01-10T01:28:16Z|00003|timeval|WARN|faults: 891 minor, 0 major
2015-01-10T01:28:16Z|00004|timeval|WARN|context switches: 0 voluntary, 8 involuntary
Last command for ovsbr0p967 took 3 seconds
Last command for ovsbr0p968 took 2 seconds
Last command for ovsbr0p969 took 0 seconds
Last command for ovsbr0p970 took 2 seconds
Last command for ovsbr0p971 took 12 seconds
Last command for ovsbr0p972 took 14 seconds
Last command for ovsbr0p973 took 18 seconds
Last command for ovsbr0p974 took 23 seconds
Last command for ovsbr0p975 took 12 seconds
Last command for ovsbr0p976 took 1 seconds
Last command for ovsbr0p977 took 1 seconds
Last command for ovsbr0p978 took 1 seconds
Last command for ovsbr0p979 took 2 seconds
Last command for ovsbr0p980 took 1 seconds
Last command for ovsbr0p981 took 1 seconds
Last command for ovsbr0p982 took 1 seconds
Last command for ovsbr0p983 took 1 seconds
Last command for ovsbr0p984 took 1 seconds
Last command for ovsbr0p985 took 2 seconds
Last command for ovsbr0p986 took 1 seconds
Last command for ovsbr0p987 took 1 seconds
Last command for ovsbr0p988 took 0 seconds
Last command for ovsbr0p989 took 2 seconds
Last command for ovsbr0p990 took 19 seconds
Last command for ovsbr0p991 took 7 seconds
Last command for ovsbr0p992 took 0 seconds
Last command for ovsbr0p993 took 3 seconds
Last command for ovsbr0p994 took 0 seconds
Last command for ovsbr0p995 took 1 seconds
Last command for ovsbr0p996 took 1 seconds
Last command for ovsbr0p997 took 2 seconds
Last command for ovsbr0p998 took 1 seconds
Last command for ovsbr0p999 took 0 seconds
Last command for ovsbr0p1000 took 1 seconds
Last command for ovsbr0p1001 took 2 seconds
Last command for ovsbr0p1002 took 11 seconds
Last command for ovsbr0p1003 took 11 seconds
Last command for ovsbr0p1004 took 13 seconds
Last command for ovsbr0p1005 took 1 seconds
Last command for ovsbr0p1006 took 1 seconds
Last command for ovsbr0p1007 took 5 seconds
2015-01-10T01:31:17Z|00002|timeval|WARN|Unreasonably long 1863ms poll interval (18ms user, 177ms system)
2015-01-10T01:31:17Z|00003|timeval|WARN|faults: 921 minor, 0 major
2015-01-10T01:31:17Z|00004|timeval|WARN|context switches: 0 voluntary, 13 involuntary
Last command for ovsbr0p1008 took 25 seconds
Last command for ovsbr0p1009 took 2 seconds
2015-01-10T01:31:44Z|00002|timeval|WARN|Unreasonably long 1362ms poll interval (25ms user, 98ms system)
2015-01-10T01:31:44Z|00003|timeval|WARN|faults: 931 minor, 0 major
2015-01-10T01:31:44Z|00004|timeval|WARN|context switches: 0 voluntary, 8 involuntary
Last command for ovsbr0p1010 took 14 seconds
Last command for ovsbr0p1011 took 23 seconds
Last command for ovsbr0p1012 took 21 seconds
2015-01-10T01:32:42Z|00002|timeval|WARN|Unreasonably long 2066ms poll interval (26ms user, 225ms system)
2015-01-10T01:32:42Z|00003|timeval|WARN|faults: 931 minor, 0 major
2015-01-10T01:32:42Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1013 took 36 seconds
Last command for ovsbr0p1014 took 19 seconds
Last command for ovsbr0p1015 took 12 seconds
Last command for ovsbr0p1016 took 22 seconds
Last command for ovsbr0p1017 took 28 seconds
Last command for ovsbr0p1018 took 34 seconds
Last command for ovsbr0p1019 took 22 seconds
Last command for ovsbr0p1020 took 4 seconds
Last command for ovsbr0p1021 took 1 seconds
Last command for ovsbr0p1022 took 0 seconds
Last command for ovsbr0p1023 took 0 seconds
2015-01-10T01:35:40Z|00002|timeval|WARN|Unreasonably long 1706ms poll interval (20ms user, 48ms system)
2015-01-10T01:35:40Z|00003|timeval|WARN|faults: 972 minor, 0 major
2015-01-10T01:35:40Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1024 took 33 seconds
Last command for ovsbr0p1025 took 21 seconds
Last command for ovsbr0p1026 took 45 seconds
Last command for ovsbr0p1027 took 39 seconds
Last command for ovsbr0p1028 took 37 seconds
Last command for ovsbr0p1029 took 5 seconds
Last command for ovsbr0p1030 took 0 seconds
Last command for ovsbr0p1031 took 1 seconds
2015-01-10T01:38:40Z|00002|timeval|WARN|Unreasonably long 1255ms poll interval (1ms user, 45ms system)
2015-01-10T01:38:40Z|00003|timeval|WARN|faults: 959 minor, 0 major
2015-01-10T01:38:40Z|00004|timeval|WARN|context switches: 0 voluntary, 7 involuntary
Last command for ovsbr0p1032 took 3 seconds
Last command for ovsbr0p1033 took 4 seconds
Last command for ovsbr0p1034 took 1 seconds
Last command for ovsbr0p1035 took 3 seconds
Last command for ovsbr0p1036 took 32 seconds
Last command for ovsbr0p1037 took 35 seconds
Last command for ovsbr0p1038 took 37 seconds
Last command for ovsbr0p1039 took 14 seconds
Last command for ovsbr0p1040 took 45 seconds
Last command for ovsbr0p1041 took 59 seconds
Last command for ovsbr0p1042 took 29 seconds
Last command for ovsbr0p1043 took 24 seconds
Last command for ovsbr0p1044 took 16 seconds
Last command for ovsbr0p1045 took 4 seconds
Last command for ovsbr0p1046 took 1 seconds
Last command for ovsbr0p1047 took 4 seconds
Last command for ovsbr0p1048 took 1 seconds
Last command for ovsbr0p1049 took 1 seconds
2015-01-10T01:43:53Z|00002|timeval|WARN|Unreasonably long 1065ms poll interval (24ms user, 130ms system)
2015-01-10T01:43:53Z|00003|timeval|WARN|faults: 995 minor, 0 major
2015-01-10T01:43:53Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1050 took 4 seconds
Last command for ovsbr0p1051 took 2 seconds
Last command for ovsbr0p1052 took 3 seconds
2015-01-10T01:44:03Z|00002|timeval|WARN|Unreasonably long 2219ms poll interval (22ms user, 43ms system)
2015-01-10T01:44:03Z|00003|timeval|WARN|faults: 970 minor, 0 major
2015-01-10T01:44:03Z|00004|timeval|WARN|context switches: 0 voluntary, 8 involuntary
Last command for ovsbr0p1053 took 12 seconds
Last command for ovsbr0p1054 took 4 seconds
Last command for ovsbr0p1055 took 12 seconds
Last command for ovsbr0p1056 took 1 seconds
2015-01-10T01:44:31Z|00002|timeval|WARN|Unreasonably long 2114ms poll interval (27ms user, 131ms system)
2015-01-10T01:44:31Z|00003|timeval|WARN|faults: 976 minor, 0 major
2015-01-10T01:44:31Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1057 took 33 seconds
2015-01-10T01:45:08Z|00002|timeval|WARN|Unreasonably long 1333ms poll interval (24ms user, 12ms system)
2015-01-10T01:45:08Z|00003|timeval|WARN|faults: 969 minor, 0 major
2015-01-10T01:45:08Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1058 took 19 seconds
Last command for ovsbr0p1059 took 2 seconds
Last command for ovsbr0p1060 took 1 seconds
Last command for ovsbr0p1061 took 1 seconds
Last command for ovsbr0p1062 took 4 seconds
2015-01-10T01:45:32Z|00002|timeval|WARN|Unreasonably long 1048ms poll interval (28ms user, 130ms system)
2015-01-10T01:45:32Z|00003|timeval|WARN|faults: 969 minor, 0 major
2015-01-10T01:45:32Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1063 took 38 seconds
Last command for ovsbr0p1064 took 18 seconds
Last command for ovsbr0p1065 took 6 seconds
Last command for ovsbr0p1066 took 8 seconds
Last command for ovsbr0p1067 took 2 seconds
2015-01-10T01:46:44Z|00002|timeval|WARN|Unreasonably long 1898ms poll interval (-17ms user, 57ms system)
2015-01-10T01:46:44Z|00003|timeval|WARN|faults: 1003 minor, 0 major
2015-01-10T01:46:44Z|00004|timeval|WARN|context switches: 0 voluntary, 9 involuntary
Last command for ovsbr0p1068 took 22 seconds
Last command for ovsbr0p1069 took 14 seconds
Last command for ovsbr0p1070 took 25 seconds
Last command for ovsbr0p1071 took 5 seconds
Last command for ovsbr0p1072 took 1 seconds
Last command for ovsbr0p1073 took 1 seconds
Last command for ovsbr0p1074 took 19 seconds
Last command for ovsbr0p1075 took 2 seconds
Last command for ovsbr0p1076 took 4 seconds
Last command for ovsbr0p1077 took 2 seconds
Last command for ovsbr0p1078 took 2 seconds
Last command for ovsbr0p1079 took 11 seconds
Last command for ovsbr0p1080 took 45 seconds
Last command for ovsbr0p1081 took 15 seconds
Last command for ovsbr0p1082 took 2 seconds
Last command for ovsbr0p1083 took 2 seconds
Last command for ovsbr0p1084 took 0 seconds
Last command for ovsbr0p1085 took 12 seconds
Last command for ovsbr0p1086 took 25 seconds
Last command for ovsbr0p1087 took 31 seconds
Last command for ovsbr0p1088 took 6 seconds
Last command for ovsbr0p1089 took 1 seconds
Last command for ovsbr0p1090 took 0 seconds
2015-01-10T01:50:50Z|00002|timeval|WARN|Unreasonably long 1034ms poll interval (33ms user, 85ms system)
2015-01-10T01:50:50Z|00003|timeval|WARN|faults: 1036 minor, 0 major
2015-01-10T01:50:50Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1091 took 9 seconds
Last command for ovsbr0p1092 took 25 seconds
Last command for ovsbr0p1093 took 22 seconds
Last command for ovsbr0p1094 took 2 seconds
Last command for ovsbr0p1095 took 14 seconds
Last command for ovsbr0p1096 took 53 seconds
Last command for ovsbr0p1097 took 55 seconds
Last command for ovsbr0p1098 took 8 seconds
Last command for ovsbr0p1099 took 1 seconds
Last command for ovsbr0p1100 took 2 seconds
Last command for ovsbr0p1101 took 2 seconds
2015-01-10T01:54:03Z|00002|timeval|WARN|Unreasonably long 1786ms poll interval (16ms user, 67ms system)
2015-01-10T01:54:03Z|00003|timeval|WARN|faults: 1013 minor, 0 major
2015-01-10T01:54:03Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1102 took 36 seconds
Last command for ovsbr0p1103 took 22 seconds
Last command for ovsbr0p1104 took 2 seconds
Last command for ovsbr0p1105 took 3 seconds
Last command for ovsbr0p1106 took 3 seconds
Last command for ovsbr0p1107 took 4 seconds
Last command for ovsbr0p1108 took 5 seconds
Last command for ovsbr0p1109 took 3 seconds
Last command for ovsbr0p1110 took 1 seconds
Last command for ovsbr0p1111 took 15 seconds
2015-01-10T01:55:37Z|00002|timeval|WARN|Unreasonably long 1733ms poll interval (33ms user, 2ms system)
2015-01-10T01:55:38Z|00003|timeval|WARN|faults: 1023 minor, 0 major
2015-01-10T01:55:38Z|00004|timeval|WARN|context switches: 0 voluntary, 8 involuntary
Last command for ovsbr0p1112 took 9 seconds
Last command for ovsbr0p1113 took 3 seconds
Last command for ovsbr0p1114 took 13 seconds
Last command for ovsbr0p1115 took 2 seconds
Last command for ovsbr0p1116 took 7 seconds
Last command for ovsbr0p1117 took 0 seconds
Last command for ovsbr0p1118 took 14 seconds
Last command for ovsbr0p1119 took 32 seconds
Last command for ovsbr0p1120 took 25 seconds
Last command for ovsbr0p1121 took 12 seconds
Last command for ovsbr0p1122 took 1 seconds
Last command for ovsbr0p1123 took 2 seconds
2015-01-10T01:57:37Z|00002|timeval|WARN|Unreasonably long 2252ms poll interval (21ms user, 80ms system)
2015-01-10T01:57:37Z|00003|timeval|WARN|faults: 1066 minor, 0 major
2015-01-10T01:57:37Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1124 took 7 seconds
Last command for ovsbr0p1125 took 14 seconds
Last command for ovsbr0p1126 took 23 seconds
Last command for ovsbr0p1127 took 15 seconds
Last command for ovsbr0p1128 took 2 seconds
Last command for ovsbr0p1129 took 1 seconds
Last command for ovsbr0p1130 took 6 seconds
2015-01-10T01:58:48Z|00002|timeval|WARN|Unreasonably long 2318ms poll interval (48ms user, 226ms system)
2015-01-10T01:58:48Z|00003|timeval|WARN|faults: 1053 minor, 0 major
2015-01-10T01:58:48Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1131 took 13 seconds
Last command for ovsbr0p1132 took 1 seconds
Last command for ovsbr0p1133 took 3 seconds
Last command for ovsbr0p1134 took 4 seconds
2015-01-10T01:59:06Z|00002|timeval|WARN|Unreasonably long 1657ms poll interval (45ms user, 150ms system)
2015-01-10T01:59:06Z|00003|timeval|WARN|faults: 1033 minor, 0 major
2015-01-10T01:59:06Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1135 took 4 seconds
Last command for ovsbr0p1136 took 1 seconds
2015-01-10T01:59:12Z|00002|timeval|WARN|Unreasonably long 1932ms poll interval (27ms user, 172ms system)
2015-01-10T01:59:12Z|00003|timeval|WARN|faults: 1060 minor, 0 major
2015-01-10T01:59:12Z|00004|timeval|WARN|context switches: 0 voluntary, 9 involuntary
Last command for ovsbr0p1137 took 5 seconds
Last command for ovsbr0p1138 took 0 seconds
2015-01-10T01:59:17Z|00002|timeval|WARN|Unreasonably long 2258ms poll interval (21ms user, 46ms system)
2015-01-10T01:59:17Z|00003|timeval|WARN|faults: 1061 minor, 0 major
2015-01-10T01:59:17Z|00004|timeval|WARN|context switches: 0 voluntary, 13 involuntary
Last command for ovsbr0p1139 took 32 seconds
Last command for ovsbr0p1140 took 21 seconds
Last command for ovsbr0p1141 took 1 seconds
Last command for ovsbr0p1142 took 2 seconds
Last command for ovsbr0p1143 took 4 seconds
Last command for ovsbr0p1144 took 2 seconds
Last command for ovsbr0p1145 took 3 seconds
Last command for ovsbr0p1146 took 5 seconds
Last command for ovsbr0p1147 took 1 seconds
2015-01-10T02:00:28Z|00002|timeval|WARN|Unreasonably long 2798ms poll interval (27ms user, 243ms system)
2015-01-10T02:00:28Z|00003|timeval|WARN|faults: 1075 minor, 0 major
2015-01-10T02:00:28Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1148 took 15 seconds
Last command for ovsbr0p1149 took 38 seconds
Last command for ovsbr0p1150 took 6 seconds
Last command for ovsbr0p1151 took 4 seconds
Last command for ovsbr0p1152 took 57 seconds
Last command for ovsbr0p1153 took 39 seconds
Last command for ovsbr0p1154 took 10 seconds
Last command for ovsbr0p1155 took 3 seconds
2015-01-10T02:03:21Z|00002|timeval|WARN|Unreasonably long 1815ms poll interval (5ms user, 177ms system)
2015-01-10T02:03:21Z|00003|timeval|WARN|faults: 1072 minor, 0 major
2015-01-10T02:03:21Z|00004|timeval|WARN|context switches: 0 voluntary, 9 involuntary
Last command for ovsbr0p1156 took 4 seconds
Last command for ovsbr0p1157 took 3 seconds
Last command for ovsbr0p1158 took 6 seconds
Last command for ovsbr0p1159 took 34 seconds
Last command for ovsbr0p1160 took 4 seconds
Last command for ovsbr0p1161 took 29 seconds
Last command for ovsbr0p1162 took 10 seconds
Last command for ovsbr0p1163 took 9 seconds
Last command for ovsbr0p1164 took 1 seconds
Last command for ovsbr0p1165 took 1 seconds
Last command for ovsbr0p1166 took 7 seconds
Last command for ovsbr0p1167 took 1 seconds
Last command for ovsbr0p1168 took 21 seconds
Last command for ovsbr0p1169 took 41 seconds
Last command for ovsbr0p1170 took 32 seconds
Last command for ovsbr0p1171 took 7 seconds
Last command for ovsbr0p1172 took 2 seconds
Last command for ovsbr0p1173 took 2 seconds
Last command for ovsbr0p1174 took 21 seconds
Last command for ovsbr0p1175 took 17 seconds
Last command for ovsbr0p1176 took 2 seconds
Last command for ovsbr0p1177 took 1 seconds
Last command for ovsbr0p1178 took 16 seconds
Last command for ovsbr0p1179 took 36 seconds
2015-01-10T02:08:26Z|00002|timeval|WARN|Unreasonably long 1343ms poll interval (17ms user, 129ms system)
2015-01-10T02:08:26Z|00003|timeval|WARN|faults: 26 minor, 0 major
2015-01-10T02:08:26Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1180 took 13 seconds
Last command for ovsbr0p1181 took 2 seconds
Last command for ovsbr0p1182 took 5 seconds
Last command for ovsbr0p1183 took 1 seconds
2015-01-10T02:08:47Z|00002|timeval|WARN|Unreasonably long 1578ms poll interval (23ms user, 40ms system)
2015-01-10T02:08:47Z|00003|timeval|WARN|faults: 1083 minor, 0 major
2015-01-10T02:08:47Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1184 took 14 seconds
Last command for ovsbr0p1185 took 30 seconds
Last command for ovsbr0p1186 took 30 seconds
Last command for ovsbr0p1187 took 2 seconds
2015-01-10T02:10:04Z|00002|timeval|WARN|Unreasonably long 2811ms poll interval (304ms user, 3ms system)
2015-01-10T02:10:04Z|00003|timeval|WARN|faults: 1089 minor, 0 major
2015-01-10T02:10:04Z|00004|timeval|WARN|context switches: 0 voluntary, 8 involuntary
Last command for ovsbr0p1188 took 6 seconds
Last command for ovsbr0p1189 took 0 seconds
Last command for ovsbr0p1190 took 16 seconds
Last command for ovsbr0p1191 took 35 seconds
Last command for ovsbr0p1192 took 59 seconds
Last command for ovsbr0p1193 took 16 seconds
Last command for ovsbr0p1194 took 7 seconds
Last command for ovsbr0p1195 took 1 seconds
Last command for ovsbr0p1196 took 1 seconds
Last command for ovsbr0p1197 took 8 seconds
Last command for ovsbr0p1198 took 7 seconds
Last command for ovsbr0p1199 took 0 seconds
Last command for ovsbr0p1200 took 9 seconds
Last command for ovsbr0p1201 took 8 seconds
Last command for ovsbr0p1202 took 2 seconds
Last command for ovsbr0p1203 took 4 seconds
2015-01-10T02:13:03Z|00002|timeval|WARN|Unreasonably long 2369ms poll interval (27ms user, 48ms system)
2015-01-10T02:13:03Z|00003|timeval|WARN|faults: 1113 minor, 0 major
2015-01-10T02:13:03Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p1204 took 7 seconds
Last command for ovsbr0p1205 took 2 seconds
Last command for ovsbr0p1206 took 0 seconds
2015-01-10T02:13:19Z|00002|timeval|WARN|Unreasonably long 8575ms poll interval (174ms user, 629ms system)
2015-01-10T02:13:19Z|00003|timeval|WARN|faults: 1095 minor, 0 major
2015-01-10T02:13:19Z|00004|timeval|WARN|context switches: 0 voluntary, 13 involuntary
Last command for ovsbr0p1207 took 20 seconds
Last command for ovsbr0p1208 took 4 seconds
Last command for ovsbr0p1209 took 3 seconds
Last command for ovsbr0p1210 took 17 seconds
Last command for ovsbr0p1211 took 34 seconds
Last command for ovsbr0p1212 took 6 seconds
Last command for ovsbr0p1213 took 2 seconds
Last command for ovsbr0p1214 took 1 seconds
2015-01-10T02:14:39Z|00002|timeval|WARN|Unreasonably long 2130ms poll interval (30ms user, 80ms system)
2015-01-10T02:14:39Z|00003|timeval|WARN|faults: 1124 minor, 0 major
2015-01-10T02:14:39Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1215 took 7 seconds
Last command for ovsbr0p1216 took 1 seconds
Last command for ovsbr0p1217 took 27 seconds
Last command for ovsbr0p1218 took 12 seconds
Last command for ovsbr0p1219 took 1 seconds
Last command for ovsbr0p1220 took 4 seconds
Last command for ovsbr0p1221 took 1 seconds
2015-01-10T02:15:32Z|00002|timeval|WARN|Unreasonably long 1939ms poll interval (0ms user, 10ms system)
2015-01-10T02:15:32Z|00003|timeval|WARN|faults: 25 minor, 0 major
2015-01-10T02:15:32Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1222 took 25 seconds
Last command for ovsbr0p1223 took 2 seconds
Last command for ovsbr0p1224 took 19 seconds
Last command for ovsbr0p1225 took 5 seconds
Last command for ovsbr0p1226 took 1 seconds
Last command for ovsbr0p1227 took 3 seconds
Last command for ovsbr0p1228 took 14 seconds
Last command for ovsbr0p1229 took 13 seconds
Last command for ovsbr0p1230 took 2 seconds
Last command for ovsbr0p1231 took 1 seconds
2015-01-10T02:16:57Z|00002|timeval|WARN|Unreasonably long 3003ms poll interval (24ms user, 79ms system)
2015-01-10T02:16:57Z|00003|timeval|WARN|faults: 1132 minor, 0 major
2015-01-10T02:16:57Z|00004|timeval|WARN|context switches: 1 voluntary, 10 involuntary
Last command for ovsbr0p1232 took 36 seconds
2015-01-10T02:17:33Z|00002|timeval|WARN|Unreasonably long 1881ms poll interval (25ms user, 33ms system)
2015-01-10T02:17:33Z|00003|timeval|WARN|faults: 1133 minor, 0 major
2015-01-10T02:17:33Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p1233 took 20 seconds
Last command for ovsbr0p1234 took 4 seconds
Last command for ovsbr0p1235 took 1 seconds
Last command for ovsbr0p1236 took 4 seconds
Last command for ovsbr0p1237 took 22 seconds
Last command for ovsbr0p1238 took 36 seconds
Last command for ovsbr0p1239 took 14 seconds
Last command for ovsbr0p1240 took 2 seconds
Last command for ovsbr0p1241 took 3 seconds
Last command for ovsbr0p1242 took 2 seconds
Last command for ovsbr0p1243 took 1 seconds
2015-01-10T02:19:21Z|00002|timeval|WARN|Unreasonably long 1307ms poll interval (36ms user, 53ms system)
2015-01-10T02:19:21Z|00003|timeval|WARN|faults: 1164 minor, 0 major
2015-01-10T02:19:21Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1244 took 8 seconds
Last command for ovsbr0p1245 took 0 seconds
Last command for ovsbr0p1246 took 9 seconds
Last command for ovsbr0p1247 took 4 seconds
Last command for ovsbr0p1248 took 15 seconds
Last command for ovsbr0p1249 took 15 seconds
Last command for ovsbr0p1250 took 4 seconds
Last command for ovsbr0p1251 took 27 seconds
Last command for ovsbr0p1252 took 16 seconds
Last command for ovsbr0p1253 took 9 seconds
Last command for ovsbr0p1254 took 1 seconds
Last command for ovsbr0p1255 took 1 seconds
Last command for ovsbr0p1256 took 25 seconds
Last command for ovsbr0p1257 took 14 seconds
Last command for ovsbr0p1258 took 58 seconds
Last command for ovsbr0p1259 took 32 seconds
Last command for ovsbr0p1260 took 13 seconds
Last command for ovsbr0p1261 took 5 seconds
Last command for ovsbr0p1262 took 1 seconds
Last command for ovsbr0p1263 took 4 seconds
Last command for ovsbr0p1264 took 3 seconds
Last command for ovsbr0p1265 took 4 seconds
Last command for ovsbr0p1266 took 1 seconds
Last command for ovsbr0p1267 took 4 seconds
2015-01-10T02:23:54Z|00002|timeval|WARN|Unreasonably long 1242ms poll interval (4ms user, 1ms system)
2015-01-10T02:23:54Z|00003|timeval|WARN|faults: 26 minor, 0 major
2015-01-10T02:23:54Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1268 took 22 seconds
Last command for ovsbr0p1269 took 2 seconds
Last command for ovsbr0p1270 took 1 seconds
Last command for ovsbr0p1271 took 14 seconds
Last command for ovsbr0p1272 took 18 seconds
Last command for ovsbr0p1273 took 5 seconds
Last command for ovsbr0p1274 took 0 seconds
Last command for ovsbr0p1275 took 11 seconds
Last command for ovsbr0p1276 took 1 seconds
Last command for ovsbr0p1277 took 4 seconds
Last command for ovsbr0p1278 took 1 seconds
2015-01-10T02:25:13Z|00002|timeval|WARN|Unreasonably long 1619ms poll interval (26ms user, 51ms system)
2015-01-10T02:25:13Z|00003|timeval|WARN|faults: 1176 minor, 0 major
2015-01-10T02:25:13Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p1279 took 19 seconds
Last command for ovsbr0p1280 took 12 seconds
Last command for ovsbr0p1281 took 17 seconds
Last command for ovsbr0p1282 took 9 seconds
Last command for ovsbr0p1283 took 4 seconds
Last command for ovsbr0p1284 took 1 seconds
Last command for ovsbr0p1285 took 3 seconds
Last command for ovsbr0p1286 took 13 seconds
2015-01-10T02:26:31Z|00002|timeval|WARN|Unreasonably long 1358ms poll interval (22ms user, 130ms system)
2015-01-10T02:26:31Z|00003|timeval|WARN|faults: 1203 minor, 0 major
2015-01-10T02:26:31Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1287 took 23 seconds
Last command for ovsbr0p1288 took 4 seconds
Last command for ovsbr0p1289 took 1 seconds
Last command for ovsbr0p1290 took 3 seconds
Last command for ovsbr0p1291 took 4 seconds
Last command for ovsbr0p1292 took 1 seconds
Last command for ovsbr0p1293 took 24 seconds
Last command for ovsbr0p1294 took 2 seconds
2015-01-10T02:27:33Z|00002|timeval|WARN|Unreasonably long 1523ms poll interval (20ms user, 47ms system)
2015-01-10T02:27:33Z|00003|timeval|WARN|faults: 1196 minor, 0 major
2015-01-10T02:27:33Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1295 took 6 seconds
Last command for ovsbr0p1296 took 0 seconds
Last command for ovsbr0p1297 took 4 seconds
Last command for ovsbr0p1298 took 1 seconds
Last command for ovsbr0p1299 took 4 seconds
2015-01-10T02:27:48Z|00002|timeval|WARN|Unreasonably long 1882ms poll interval (26ms user, 203ms system)
2015-01-10T02:27:48Z|00003|timeval|WARN|faults: 1184 minor, 0 major
2015-01-10T02:27:48Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p1300 took 17 seconds
Last command for ovsbr0p1301 took 28 seconds
Last command for ovsbr0p1302 took 6 seconds
Last command for ovsbr0p1303 took 2 seconds
Last command for ovsbr0p1304 took 1 seconds
Last command for ovsbr0p1305 took 1 seconds
Last command for ovsbr0p1306 took 22 seconds
Last command for ovsbr0p1307 took 26 seconds
Last command for ovsbr0p1308 took 2 seconds
Last command for ovsbr0p1309 took 18 seconds
Last command for ovsbr0p1310 took 6 seconds
Last command for ovsbr0p1311 took 4 seconds
Last command for ovsbr0p1312 took 13 seconds
Last command for ovsbr0p1313 took 3 seconds
Last command for ovsbr0p1314 took 20 seconds
2015-01-10T02:30:38Z|00002|timeval|WARN|Unreasonably long 2555ms poll interval (60ms user, 227ms system)
2015-01-10T02:30:38Z|00003|timeval|WARN|faults: 1223 minor, 0 major
2015-01-10T02:30:38Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1315 took 16 seconds
Last command for ovsbr0p1316 took 2 seconds
Last command for ovsbr0p1317 took 2 seconds
Last command for ovsbr0p1318 took 2 seconds
2015-01-10T02:30:59Z|00002|timeval|WARN|Unreasonably long 2417ms poll interval (27ms user, 87ms system)
2015-01-10T02:30:59Z|00003|timeval|WARN|faults: 1224 minor, 0 major
2015-01-10T02:30:59Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1319 took 22 seconds
Last command for ovsbr0p1320 took 20 seconds
Last command for ovsbr0p1321 took 19 seconds
Last command for ovsbr0p1322 took 6 seconds
Last command for ovsbr0p1323 took 4 seconds
Last command for ovsbr0p1324 took 0 seconds
Last command for ovsbr0p1325 took 33 seconds
Last command for ovsbr0p1326 took 14 seconds
Last command for ovsbr0p1327 took 1 seconds
Last command for ovsbr0p1328 took 1 seconds
Last command for ovsbr0p1329 took 30 seconds
Last command for ovsbr0p1330 took 31 seconds
Last command for ovsbr0p1331 took 9 seconds
Last command for ovsbr0p1332 took 1 seconds
Last command for ovsbr0p1333 took 4 seconds
Last command for ovsbr0p1334 took 2 seconds
Last command for ovsbr0p1335 took 13 seconds
Last command for ovsbr0p1336 took 13 seconds
Last command for ovsbr0p1337 took 6 seconds
Last command for ovsbr0p1338 took 11 seconds
Last command for ovsbr0p1339 took 0 seconds
Last command for ovsbr0p1340 took 34 seconds
Last command for ovsbr0p1341 took 6 seconds
Last command for ovsbr0p1342 took 2 seconds
Last command for ovsbr0p1343 took 3 seconds
2015-01-10T02:35:45Z|00002|timeval|WARN|Unreasonably long 2339ms poll interval (30ms user, 206ms system)
2015-01-10T02:35:47Z|00003|timeval|WARN|faults: 1239 minor, 0 major
2015-01-10T02:35:47Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1344 took 26 seconds
Last command for ovsbr0p1345 took 17 seconds
Last command for ovsbr0p1346 took 11 seconds
Last command for ovsbr0p1347 took 28 seconds
Last command for ovsbr0p1348 took 34 seconds
Last command for ovsbr0p1349 took 17 seconds
Last command for ovsbr0p1350 took 7 seconds
Last command for ovsbr0p1351 took 5 seconds
Last command for ovsbr0p1352 took 2 seconds
Last command for ovsbr0p1353 took 1 seconds
2015-01-10T02:38:13Z|00002|timeval|WARN|Unreasonably long 2679ms poll interval (38ms user, 190ms system)
2015-01-10T02:38:13Z|00003|timeval|WARN|faults: 1228 minor, 0 major
2015-01-10T02:38:13Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1354 took 7 seconds
Last command for ovsbr0p1355 took 16 seconds
Last command for ovsbr0p1356 took 39 seconds
Last command for ovsbr0p1357 took 21 seconds
Last command for ovsbr0p1358 took 6 seconds
Last command for ovsbr0p1359 took 2 seconds
Last command for ovsbr0p1360 took 2 seconds
Last command for ovsbr0p1361 took 6 seconds
Last command for ovsbr0p1362 took 9 seconds
Last command for ovsbr0p1363 took 2 seconds
Last command for ovsbr0p1364 took 8 seconds
2015-01-10T02:40:11Z|00002|timeval|WARN|Unreasonably long 3306ms poll interval (19ms user, 328ms system)
2015-01-10T02:40:11Z|00003|timeval|WARN|faults: 1270 minor, 0 major
2015-01-10T02:40:11Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1365 took 43 seconds
2015-01-10T02:40:53Z|00002|timeval|WARN|Unreasonably long 1245ms poll interval (2ms user, 117ms system)
2015-01-10T02:40:53Z|00003|timeval|WARN|faults: 24 minor, 0 major
2015-01-10T02:40:53Z|00004|timeval|WARN|context switches: 0 voluntary, 2 involuntary
Last command for ovsbr0p1366 took 26 seconds
Last command for ovsbr0p1367 took 12 seconds
Last command for ovsbr0p1368 took 2 seconds
Last command for ovsbr0p1369 took 15 seconds
Last command for ovsbr0p1370 took 6 seconds
Last command for ovsbr0p1371 took 2 seconds
Last command for ovsbr0p1372 took 6 seconds
Last command for ovsbr0p1373 took 1 seconds
2015-01-10T02:42:04Z|00002|timeval|WARN|Unreasonably long 2956ms poll interval (36ms user, 88ms system)
2015-01-10T02:42:04Z|00003|timeval|WARN|faults: 1265 minor, 0 major
2015-01-10T02:42:04Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1374 took 6 seconds
Last command for ovsbr0p1375 took 1 seconds
Last command for ovsbr0p1376 took 5 seconds
Last command for ovsbr0p1377 took 4 seconds
2015-01-10T02:42:19Z|00002|timeval|WARN|Unreasonably long 1573ms poll interval (4ms user, 41ms system)
2015-01-10T02:42:19Z|00003|timeval|WARN|faults: 26 minor, 0 major
2015-01-10T02:42:19Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1378 took 4 seconds
Last command for ovsbr0p1379 took 44 seconds
Last command for ovsbr0p1380 took 34 seconds
Last command for ovsbr0p1381 took 3 seconds
2015-01-10T02:43:44Z|00002|timeval|WARN|Unreasonably long 1318ms poll interval (-12ms user, 23ms system)
2015-01-10T02:43:44Z|00003|timeval|WARN|faults: 25 minor, 0 major
2015-01-10T02:43:44Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1382 took 6 seconds
Last command for ovsbr0p1383 took 2 seconds
Last command for ovsbr0p1384 took 25 seconds
Last command for ovsbr0p1385 took 18 seconds
Last command for ovsbr0p1386 took 5 seconds
Last command for ovsbr0p1387 took 2 seconds
Last command for ovsbr0p1388 took 29 seconds
Last command for ovsbr0p1389 took 5 seconds
Last command for ovsbr0p1390 took 2 seconds
Last command for ovsbr0p1391 took 10 seconds
Last command for ovsbr0p1392 took 0 seconds
Last command for ovsbr0p1393 took 6 seconds
Last command for ovsbr0p1394 took 3 seconds
Last command for ovsbr0p1395 took 6 seconds
Last command for ovsbr0p1396 took 0 seconds
Last command for ovsbr0p1397 took 1 seconds
2015-01-10T02:45:48Z|00002|timeval|WARN|Unreasonably long 5152ms poll interval (45ms user, 457ms system)
2015-01-10T02:45:48Z|00003|timeval|WARN|faults: 1274 minor, 0 major
2015-01-10T02:45:48Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1398 took 53 seconds
Last command for ovsbr0p1399 took 31 seconds
Last command for ovsbr0p1400 took 42 seconds
Last command for ovsbr0p1401 took 20 seconds
Last command for ovsbr0p1402 took 16 seconds
Last command for ovsbr0p1403 took 5 seconds
Last command for ovsbr0p1404 took 1 seconds
Last command for ovsbr0p1405 took 31 seconds
Last command for ovsbr0p1406 took 8 seconds
Last command for ovsbr0p1407 took 29 seconds
Last command for ovsbr0p1408 took 7 seconds
Last command for ovsbr0p1409 took 1 seconds
Last command for ovsbr0p1410 took 5 seconds
Last command for ovsbr0p1411 took 2 seconds
Last command for ovsbr0p1412 took 1 seconds
Last command for ovsbr0p1413 took 13 seconds
Last command for ovsbr0p1414 took 1 seconds
Last command for ovsbr0p1415 took 22 seconds
Last command for ovsbr0p1416 took 39 seconds
Last command for ovsbr0p1417 took 8 seconds
Last command for ovsbr0p1418 took 1 seconds
Last command for ovsbr0p1419 took 4 seconds
Last command for ovsbr0p1420 took 5 seconds
Last command for ovsbr0p1421 took 36 seconds
Last command for ovsbr0p1422 took 17 seconds
Last command for ovsbr0p1423 took 5 seconds
Last command for ovsbr0p1424 took 6 seconds
Last command for ovsbr0p1425 took 0 seconds
Last command for ovsbr0p1426 took 10 seconds
Last command for ovsbr0p1427 took 2 seconds
2015-01-10T02:52:45Z|00002|timeval|WARN|Unreasonably long 2312ms poll interval (14ms user, 177ms system)
2015-01-10T02:52:45Z|00003|timeval|WARN|faults: 1292 minor, 0 major
2015-01-10T02:52:45Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1428 took 4 seconds
Last command for ovsbr0p1429 took 2 seconds
Last command for ovsbr0p1430 took 1 seconds
Last command for ovsbr0p1431 took 9 seconds
Last command for ovsbr0p1432 took 7 seconds
Last command for ovsbr0p1433 took 27 seconds
2015-01-10T02:53:37Z|00002|timeval|WARN|Unreasonably long 2909ms poll interval (-4ms user, 27ms system)
2015-01-10T02:53:37Z|00003|timeval|WARN|faults: 25 minor, 0 major
2015-01-10T02:53:37Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1434 took 30 seconds
Last command for ovsbr0p1435 took 4 seconds
Last command for ovsbr0p1436 took 2 seconds
Last command for ovsbr0p1437 took 1 seconds
Last command for ovsbr0p1438 took 6 seconds
Last command for ovsbr0p1439 took 6 seconds
Last command for ovsbr0p1440 took 3 seconds
Last command for ovsbr0p1441 took 1 seconds
Last command for ovsbr0p1442 took 1 seconds
Last command for ovsbr0p1443 took 6 seconds
Last command for ovsbr0p1444 took 4 seconds
Last command for ovsbr0p1445 took 2 seconds
Last command for ovsbr0p1446 took 44 seconds
Last command for ovsbr0p1447 took 8 seconds
Last command for ovsbr0p1448 took 5 seconds
Last command for ovsbr0p1449 took 1 seconds
Last command for ovsbr0p1450 took 4 seconds
Last command for ovsbr0p1451 took 8 seconds
2015-01-10T02:55:52Z|00002|timeval|WARN|Unreasonably long 2120ms poll interval (50ms user, 215ms system)
2015-01-10T02:55:52Z|00003|timeval|WARN|faults: 1329 minor, 0 major
2015-01-10T02:55:52Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1452 took 12 seconds
Last command for ovsbr0p1453 took 19 seconds
Last command for ovsbr0p1454 took 3 seconds
2015-01-10T02:56:25Z|00002|timeval|WARN|Unreasonably long 1651ms poll interval (31ms user, 63ms system)
2015-01-10T02:56:25Z|00003|timeval|WARN|faults: 1330 minor, 0 major
2015-01-10T02:56:25Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1455 took 10 seconds
Last command for ovsbr0p1456 took 1 seconds
Last command for ovsbr0p1457 took 11 seconds
Last command for ovsbr0p1458 took 6 seconds
Last command for ovsbr0p1459 took 1 seconds
2015-01-10T02:56:54Z|00002|timeval|WARN|Unreasonably long 1235ms poll interval (1ms user, 8ms system)
2015-01-10T02:56:54Z|00003|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1460 took 5 seconds
2015-01-10T02:56:58Z|00002|timeval|WARN|Unreasonably long 1338ms poll interval (-2ms user, 52ms system)
2015-01-10T02:56:58Z|00003|timeval|WARN|faults: 1338 minor, 0 major
2015-01-10T02:56:58Z|00004|timeval|WARN|context switches: 0 voluntary, 13 involuntary
Last command for ovsbr0p1461 took 3 seconds
Last command for ovsbr0p1462 took 4 seconds
2015-01-10T02:57:07Z|00002|timeval|WARN|Unreasonably long 3054ms poll interval (24ms user, 272ms system)
2015-01-10T02:57:07Z|00003|timeval|WARN|faults: 1356 minor, 0 major
2015-01-10T02:57:07Z|00004|timeval|WARN|context switches: 0 voluntary, 22 involuntary
Last command for ovsbr0p1463 took 38 seconds
Last command for ovsbr0p1464 took 8 seconds
Last command for ovsbr0p1465 took 4 seconds
Last command for ovsbr0p1466 took 2 seconds
Last command for ovsbr0p1467 took 3 seconds
Last command for ovsbr0p1468 took 8 seconds
Last command for ovsbr0p1469 took 3 seconds
Last command for ovsbr0p1470 took 4 seconds
Last command for ovsbr0p1471 took 2 seconds
Last command for ovsbr0p1472 took 9 seconds
Last command for ovsbr0p1473 took 1 seconds
Last command for ovsbr0p1474 took 0 seconds
2015-01-10T02:58:30Z|00002|timeval|WARN|Unreasonably long 1712ms poll interval (32ms user, 151ms system)
2015-01-10T02:58:30Z|00003|timeval|WARN|faults: 1336 minor, 0 major
2015-01-10T02:58:30Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1475 took 12 seconds
Last command for ovsbr0p1476 took 2 seconds
Last command for ovsbr0p1477 took 5 seconds
Last command for ovsbr0p1478 took 2 seconds
Last command for ovsbr0p1479 took 8 seconds
Last command for ovsbr0p1480 took 36 seconds
Last command for ovsbr0p1481 took 38 seconds
Last command for ovsbr0p1482 took 5 seconds
Last command for ovsbr0p1483 took 3 seconds
Last command for ovsbr0p1484 took 5 seconds
Last command for ovsbr0p1485 took 1 seconds
Last command for ovsbr0p1486 took 2 seconds
2015-01-10T03:00:27Z|00002|timeval|WARN|Unreasonably long 1727ms poll interval (37ms user, 44ms system)
2015-01-10T03:00:27Z|00003|timeval|WARN|faults: 1360 minor, 0 major
2015-01-10T03:00:27Z|00004|timeval|WARN|context switches: 0 voluntary, 11 involuntary
Last command for ovsbr0p1487 took 29 seconds
Last command for ovsbr0p1488 took 12 seconds
Last command for ovsbr0p1489 took 2 seconds
Last command for ovsbr0p1490 took 13 seconds
Last command for ovsbr0p1491 took 37 seconds
Last command for ovsbr0p1492 took 6 seconds
Last command for ovsbr0p1493 took 13 seconds
Last command for ovsbr0p1494 took 30 seconds
Last command for ovsbr0p1495 took 9 seconds
Last command for ovsbr0p1496 took 3 seconds
Last command for ovsbr0p1497 took 12 seconds
Last command for ovsbr0p1498 took 3 seconds
2015-01-10T03:03:16Z|00002|timeval|WARN|Unreasonably long 1808ms poll interval (29ms user, 117ms system)
2015-01-10T03:03:16Z|00003|timeval|WARN|faults: 1355 minor, 0 major
2015-01-10T03:03:16Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1499 took 6 seconds
Last command for ovsbr0p1500 took 1 seconds
Last command for ovsbr0p1501 took 7 seconds
Last command for ovsbr0p1502 took 1 seconds
Last command for ovsbr0p1503 took 7 seconds
Last command for ovsbr0p1504 took 2 seconds
Last command for ovsbr0p1505 took 7 seconds
Last command for ovsbr0p1506 took 3 seconds
Last command for ovsbr0p1507 took 1 seconds
2015-01-10T03:03:51Z|00002|timeval|WARN|Unreasonably long 1000ms poll interval (30ms user, 78ms system)
2015-01-10T03:03:51Z|00003|timeval|WARN|faults: 1397 minor, 0 major
2015-01-10T03:03:51Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1508 took 24 seconds
Last command for ovsbr0p1509 took 39 seconds
Last command for ovsbr0p1510 took 21 seconds
Last command for ovsbr0p1511 took 6 seconds
Last command for ovsbr0p1512 took 2 seconds
Last command for ovsbr0p1513 took 2 seconds
2015-01-10T03:05:28Z|00002|timeval|WARN|Unreasonably long 1682ms poll interval (36ms user, 155ms system)
2015-01-10T03:05:28Z|00003|timeval|WARN|faults: 1383 minor, 0 major
2015-01-10T03:05:28Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1514 took 24 seconds
2015-01-10T03:05:49Z|00002|timeval|WARN|Unreasonably long 1047ms poll interval (41ms user, 69ms system)
2015-01-10T03:05:49Z|00003|timeval|WARN|faults: 1388 minor, 0 major
2015-01-10T03:05:49Z|00004|timeval|WARN|context switches: 0 voluntary, 13 involuntary
Last command for ovsbr0p1515 took 53 seconds
Last command for ovsbr0p1516 took 11 seconds
Last command for ovsbr0p1517 took 3 seconds
Last command for ovsbr0p1518 took 17 seconds
Last command for ovsbr0p1519 took 2 seconds
Last command for ovsbr0p1520 took 5 seconds
Last command for ovsbr0p1521 took 2 seconds
Last command for ovsbr0p1522 took 7 seconds
2015-01-10T03:07:28Z|00002|timeval|WARN|Unreasonably long 1220ms poll interval (41ms user, 60ms system)
2015-01-10T03:07:28Z|00003|timeval|WARN|faults: 1382 minor, 0 major
2015-01-10T03:07:28Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1523 took 16 seconds
Last command for ovsbr0p1524 took 36 seconds
Last command for ovsbr0p1525 took 9 seconds
2015-01-10T03:08:30Z|00002|timeval|WARN|Unreasonably long 1160ms poll interval (44ms user, 115ms system)
2015-01-10T03:08:30Z|00003|timeval|WARN|faults: 1384 minor, 0 major
2015-01-10T03:08:30Z|00004|timeval|WARN|context switches: 0 voluntary, 22 involuntary
Last command for ovsbr0p1526 took 16 seconds
Last command for ovsbr0p1527 took 5 seconds
Last command for ovsbr0p1528 took 5 seconds
Last command for ovsbr0p1529 took 7 seconds
Last command for ovsbr0p1530 took 56 seconds
Last command for ovsbr0p1531 took 19 seconds
Last command for ovsbr0p1532 took 5 seconds
Last command for ovsbr0p1533 took 16 seconds
Last command for ovsbr0p1534 took 5 seconds
Last command for ovsbr0p1535 took 3 seconds
Last command for ovsbr0p1536 took 8 seconds
Last command for ovsbr0p1537 took 0 seconds
2015-01-10T03:10:58Z|00002|timeval|WARN|Unreasonably long 3537ms poll interval (30ms user, 312ms system)
2015-01-10T03:10:58Z|00003|timeval|WARN|faults: 1404 minor, 0 major
2015-01-10T03:10:58Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1538 took 24 seconds
2015-01-10T03:11:20Z|00002|timeval|WARN|Unreasonably long 1003ms poll interval (31ms user, 86ms system)
2015-01-10T03:11:20Z|00003|timeval|WARN|faults: 1383 minor, 0 major
2015-01-10T03:11:20Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1539 took 42 seconds
Last command for ovsbr0p1540 took 21 seconds
Last command for ovsbr0p1541 took 11 seconds
Last command for ovsbr0p1542 took 5 seconds
Last command for ovsbr0p1543 took 1 seconds
Last command for ovsbr0p1544 took 5 seconds
Last command for ovsbr0p1545 took 2 seconds
Last command for ovsbr0p1546 took 21 seconds
Last command for ovsbr0p1547 took 3 seconds
Last command for ovsbr0p1548 took 2 seconds
2015-01-10T03:13:17Z|00002|timeval|WARN|Unreasonably long 6239ms poll interval (107ms user, 568ms system)
2015-01-10T03:13:17Z|00003|timeval|WARN|faults: 1394 minor, 0 major
2015-01-10T03:13:17Z|00004|timeval|WARN|context switches: 0 voluntary, 10 involuntary
Last command for ovsbr0p1549 took 20 seconds
Last command for ovsbr0p1550 took 9 seconds
Last command for ovsbr0p1551 took 4 seconds
Last command for ovsbr0p1552 took 7 seconds
Last command for ovsbr0p1553 took 2 seconds
Last command for ovsbr0p1554 took 9 seconds
2015-01-10T03:14:02Z|00002|timeval|WARN|Unreasonably long 1234ms poll interval (55ms user, 19ms system)
2015-01-10T03:14:02Z|00003|timeval|WARN|faults: 1417 minor, 0 major
2015-01-10T03:14:02Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1555 took 3 seconds
Last command for ovsbr0p1556 took 6 seconds
Last command for ovsbr0p1557 took 1 seconds
Last command for ovsbr0p1558 took 14 seconds
Last command for ovsbr0p1559 took 2 seconds
Last command for ovsbr0p1560 took 5 seconds
Last command for ovsbr0p1561 took 3 seconds
2015-01-10T03:14:36Z|00002|timeval|WARN|Unreasonably long 1298ms poll interval (45ms user, 45ms system)
2015-01-10T03:14:36Z|00003|timeval|WARN|faults: 1433 minor, 0 major
2015-01-10T03:14:36Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1562 took 2 seconds
Last command for ovsbr0p1563 took 15 seconds
Last command for ovsbr0p1564 took 13 seconds
Last command for ovsbr0p1565 took 2 seconds
Last command for ovsbr0p1566 took 6 seconds
Last command for ovsbr0p1567 took 1 seconds
Last command for ovsbr0p1568 took 5 seconds
Last command for ovsbr0p1569 took 2 seconds
Last command for ovsbr0p1570 took 0 seconds
2015-01-10T03:15:27Z|00002|timeval|WARN|Unreasonably long 2148ms poll interval (60ms user, 137ms system)
2015-01-10T03:15:27Z|00003|timeval|WARN|faults: 1415 minor, 0 major
2015-01-10T03:15:27Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1571 took 27 seconds
Last command for ovsbr0p1572 took 4 seconds
Last command for ovsbr0p1573 took 5 seconds
Last command for ovsbr0p1574 took 1 seconds
Last command for ovsbr0p1575 took 4 seconds
Last command for ovsbr0p1576 took 17 seconds
Last command for ovsbr0p1577 took 2 seconds
Last command for ovsbr0p1578 took 14 seconds
Last command for ovsbr0p1579 took 6 seconds
Last command for ovsbr0p1580 took 1 seconds
2015-01-10T03:16:44Z|00002|timeval|WARN|Unreasonably long 1636ms poll interval (38ms user, 79ms system)
2015-01-10T03:16:44Z|00003|timeval|WARN|faults: 1442 minor, 0 major
2015-01-10T03:16:44Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1581 took 18 seconds
Last command for ovsbr0p1582 took 10 seconds
Last command for ovsbr0p1583 took 4 seconds
2015-01-10T03:17:15Z|00002|timeval|WARN|Unreasonably long 1325ms poll interval (39ms user, 84ms system)
2015-01-10T03:17:15Z|00003|timeval|WARN|faults: 1461 minor, 0 major
2015-01-10T03:17:15Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1584 took 5 seconds
Last command for ovsbr0p1585 took 1 seconds
2015-01-10T03:17:23Z|00002|timeval|WARN|Unreasonably long 1520ms poll interval (40ms user, 131ms system)
2015-01-10T03:17:23Z|00003|timeval|WARN|faults: 1464 minor, 0 major
2015-01-10T03:17:23Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1586 took 16 seconds
Last command for ovsbr0p1587 took 5 seconds
Last command for ovsbr0p1588 took 15 seconds
Last command for ovsbr0p1589 took 9 seconds
Last command for ovsbr0p1590 took 1 seconds
Last command for ovsbr0p1591 took 7 seconds
Last command for ovsbr0p1592 took 1 seconds
Last command for ovsbr0p1593 took 5 seconds
2015-01-10T03:18:21Z|00002|timeval|WARN|Unreasonably long 1400ms poll interval (44ms user, 94ms system)
2015-01-10T03:18:21Z|00003|timeval|WARN|faults: 1434 minor, 0 major
2015-01-10T03:18:21Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1594 took 8 seconds
Last command for ovsbr0p1595 took 2 seconds
Last command for ovsbr0p1596 took 7 seconds
Last command for ovsbr0p1597 took 18 seconds
2015-01-10T03:18:56Z|00002|timeval|WARN|Unreasonably long 1018ms poll interval (38ms user, 82ms system)
2015-01-10T03:18:56Z|00003|timeval|WARN|faults: 1435 minor, 0 major
2015-01-10T03:18:56Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1598 took 15 seconds
Last command for ovsbr0p1599 took 0 seconds
Last command for ovsbr0p1600 took 8 seconds
Last command for ovsbr0p1601 took 4 seconds
Last command for ovsbr0p1602 took 2 seconds
Last command for ovsbr0p1603 took 7 seconds
Last command for ovsbr0p1604 took 12 seconds
Last command for ovsbr0p1605 took 2 seconds
Last command for ovsbr0p1606 took 16 seconds
Last command for ovsbr0p1607 took 11 seconds
Last command for ovsbr0p1608 took 1 seconds
Last command for ovsbr0p1609 took 14 seconds
Last command for ovsbr0p1610 took 2 seconds
Last command for ovsbr0p1611 took 3 seconds
2015-01-10T03:20:32Z|00002|timeval|WARN|Unreasonably long 1099ms poll interval (37ms user, 68ms system)
2015-01-10T03:20:32Z|00003|timeval|WARN|faults: 1480 minor, 0 major
2015-01-10T03:20:32Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1612 took 6 seconds
Last command for ovsbr0p1613 took 10 seconds
Last command for ovsbr0p1614 took 3 seconds
Last command for ovsbr0p1615 took 5 seconds
Last command for ovsbr0p1616 took 1 seconds
Last command for ovsbr0p1617 took 4 seconds
Last command for ovsbr0p1618 took 2 seconds
Last command for ovsbr0p1619 took 27 seconds
Last command for ovsbr0p1620 took 2 seconds
Last command for ovsbr0p1621 took 14 seconds
Last command for ovsbr0p1622 took 26 seconds
Last command for ovsbr0p1623 took 8 seconds
Last command for ovsbr0p1624 took 6 seconds
2015-01-10T03:22:27Z|00002|timeval|WARN|Unreasonably long 1101ms poll interval (34ms user, 99ms system)
2015-01-10T03:22:27Z|00003|timeval|WARN|faults: 1496 minor, 0 major
2015-01-10T03:22:27Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1625 took 28 seconds
Last command for ovsbr0p1626 took 7 seconds
Last command for ovsbr0p1627 took 4 seconds
2015-01-10T03:23:07Z|00002|timeval|WARN|Unreasonably long 1756ms poll interval (55ms user, 102ms system)
2015-01-10T03:23:07Z|00003|timeval|WARN|faults: 1477 minor, 0 major
2015-01-10T03:23:07Z|00004|timeval|WARN|context switches: 0 voluntary, 12 involuntary
Last command for ovsbr0p1628 took 14 seconds
Last command for ovsbr0p1629 took 2 seconds
2015-01-10T03:23:23Z|00002|timeval|WARN|Unreasonably long 1673ms poll interval (42ms user, 100ms system)
2015-01-10T03:23:23Z|00003|timeval|WARN|faults: 1499 minor, 0 major
2015-01-10T03:23:23Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1630 took 9 seconds
Last command for ovsbr0p1631 took 11 seconds
Last command for ovsbr0p1632 took 5 seconds
Last command for ovsbr0p1633 took 6 seconds
Last command for ovsbr0p1634 took 2 seconds
2015-01-10T03:23:57Z|00002|timeval|WARN|Unreasonably long 3900ms poll interval (54ms user, 111ms system)
2015-01-10T03:23:57Z|00003|timeval|WARN|faults: 1488 minor, 0 major
2015-01-10T03:23:57Z|00004|timeval|WARN|context switches: 0 voluntary, 14 involuntary
Last command for ovsbr0p1635 took 17 seconds
Last command for ovsbr0p1636 took 2 seconds
Last command for ovsbr0p1637 took 1 seconds
2015-01-10T03:24:18Z|00002|timeval|WARN|Unreasonably long 2282ms poll interval (60ms user, 188ms system)
2015-01-10T03:24:18Z|00003|timeval|WARN|faults: 1487 minor, 0 major
2015-01-10T03:24:18Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1638 took 18 seconds
Last command for ovsbr0p1639 took 3 seconds
Last command for ovsbr0p1640 took 10 seconds
Last command for ovsbr0p1641 took 2 seconds
Last command for ovsbr0p1642 took 6 seconds
Last command for ovsbr0p1643 took 2 seconds
Last command for ovsbr0p1644 took 10 seconds
Last command for ovsbr0p1645 took 3 seconds
Last command for ovsbr0p1646 took 5 seconds
Last command for ovsbr0p1647 took 17 seconds
Last command for ovsbr0p1648 took 5 seconds
Last command for ovsbr0p1649 took 2 seconds
2015-01-10T03:25:38Z|00002|timeval|WARN|Unreasonably long 1321ms poll interval (45ms user, 121ms system)
2015-01-10T03:25:38Z|00003|timeval|WARN|faults: 1510 minor, 0 major
2015-01-10T03:25:38Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1650 took 10 seconds
Last command for ovsbr0p1651 took 1 seconds
Last command for ovsbr0p1652 took 34 seconds
Last command for ovsbr0p1653 took 5 seconds
Last command for ovsbr0p1654 took 2 seconds
2015-01-10T03:26:31Z|00002|timeval|WARN|Unreasonably long 1930ms poll interval (34ms user, 46ms system)
2015-01-10T03:26:31Z|00003|timeval|WARN|faults: 1506 minor, 0 major
2015-01-10T03:26:31Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1655 took 17 seconds
Last command for ovsbr0p1656 took 20 seconds
Last command for ovsbr0p1657 took 5 seconds
Last command for ovsbr0p1658 took 3 seconds
Last command for ovsbr0p1659 took 2 seconds
Last command for ovsbr0p1660 took 7 seconds
Last command for ovsbr0p1661 took 13 seconds
Last command for ovsbr0p1662 took 2 seconds
Last command for ovsbr0p1663 took 7 seconds
Last command for ovsbr0p1664 took 10 seconds
Last command for ovsbr0p1665 took 12 seconds
Last command for ovsbr0p1666 took 3 seconds
Last command for ovsbr0p1667 took 5 seconds
Last command for ovsbr0p1668 took 1 seconds
Last command for ovsbr0p1669 took 7 seconds
Last command for ovsbr0p1670 took 10 seconds
Last command for ovsbr0p1671 took 3 seconds
2015-01-10T03:28:39Z|00002|timeval|WARN|Unreasonably long 3263ms poll interval (204ms user, 62ms system)
2015-01-10T03:28:39Z|00003|timeval|WARN|faults: 1499 minor, 0 major
2015-01-10T03:28:39Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1672 took 7 seconds
Last command for ovsbr0p1673 took 2 seconds
2015-01-10T03:28:48Z|00002|timeval|WARN|Unreasonably long 2017ms poll interval (41ms user, 79ms system)
2015-01-10T03:28:48Z|00003|timeval|WARN|faults: 1521 minor, 0 major
2015-01-10T03:28:48Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1674 took 12 seconds
2015-01-10T03:28:59Z|00002|timeval|WARN|Unreasonably long 1619ms poll interval (15ms user, 165ms system)
2015-01-10T03:28:59Z|00003|timeval|WARN|faults: 1521 minor, 0 major
2015-01-10T03:28:59Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1675 took 13 seconds
Last command for ovsbr0p1676 took 9 seconds
Last command for ovsbr0p1677 took 16 seconds
Last command for ovsbr0p1678 took 11 seconds
Last command for ovsbr0p1679 took 6 seconds
Last command for ovsbr0p1680 took 3 seconds
Last command for ovsbr0p1681 took 15 seconds
Last command for ovsbr0p1682 took 9 seconds
Last command for ovsbr0p1683 took 12 seconds
Last command for ovsbr0p1684 took 11 seconds
Last command for ovsbr0p1685 took 10 seconds
Last command for ovsbr0p1686 took 3 seconds
Last command for ovsbr0p1687 took 11 seconds
Last command for ovsbr0p1688 took 13 seconds
Last command for ovsbr0p1689 took 13 seconds
Last command for ovsbr0p1690 took 14 seconds
Last command for ovsbr0p1691 took 12 seconds
Last command for ovsbr0p1692 took 6 seconds
Last command for ovsbr0p1693 took 2 seconds
2015-01-10T03:32:07Z|00002|timeval|WARN|Unreasonably long 1727ms poll interval (52ms user, 83ms system)
2015-01-10T03:32:07Z|00003|timeval|WARN|faults: 1528 minor, 0 major
2015-01-10T03:32:07Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1694 took 7 seconds
Last command for ovsbr0p1695 took 14 seconds
Last command for ovsbr0p1696 took 32 seconds
Last command for ovsbr0p1697 took 11 seconds
Last command for ovsbr0p1698 took 13 seconds
Last command for ovsbr0p1699 took 16 seconds
Last command for ovsbr0p1700 took 10 seconds
Last command for ovsbr0p1701 took 2 seconds
Last command for ovsbr0p1702 took 10 seconds
Last command for ovsbr0p1703 took 5 seconds
Last command for ovsbr0p1704 took 1 seconds
Last command for ovsbr0p1705 took 9 seconds
Last command for ovsbr0p1706 took 2 seconds
Last command for ovsbr0p1707 took 5 seconds
Last command for ovsbr0p1708 took 2 seconds
Last command for ovsbr0p1709 took 12 seconds
Last command for ovsbr0p1710 took 3 seconds
2015-01-10T03:34:47Z|00002|timeval|WARN|Unreasonably long 2419ms poll interval (101ms user, 283ms system)
2015-01-10T03:34:47Z|00003|timeval|WARN|faults: 1558 minor, 0 major
2015-01-10T03:34:47Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1711 took 13 seconds
Last command for ovsbr0p1712 took 1 seconds
Last command for ovsbr0p1713 took 16 seconds
Last command for ovsbr0p1714 took 2 seconds
Last command for ovsbr0p1715 took 3 seconds
Last command for ovsbr0p1716 took 5 seconds
Last command for ovsbr0p1717 took 1 seconds
Last command for ovsbr0p1718 took 26 seconds
Last command for ovsbr0p1719 took 10 seconds
Last command for ovsbr0p1720 took 3 seconds
Last command for ovsbr0p1721 took 12 seconds
Last command for ovsbr0p1722 took 2 seconds
2015-01-10T03:36:15Z|00002|timeval|WARN|Unreasonably long 1730ms poll interval (72ms user, 128ms system)
2015-01-10T03:36:16Z|00003|timeval|WARN|faults: 1585 minor, 0 major
2015-01-10T03:36:16Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1723 took 7 seconds
Last command for ovsbr0p1724 took 1 seconds
Last command for ovsbr0p1725 took 16 seconds
Last command for ovsbr0p1726 took 9 seconds
Last command for ovsbr0p1727 took 5 seconds
Last command for ovsbr0p1728 took 3 seconds
2015-01-10T03:36:56Z|00002|timeval|WARN|Unreasonably long 2236ms poll interval (14ms user, 165ms system)
2015-01-10T03:36:56Z|00003|timeval|WARN|faults: 1575 minor, 0 major
2015-01-10T03:36:56Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1729 took 14 seconds
Last command for ovsbr0p1730 took 4 seconds
Last command for ovsbr0p1731 took 1 seconds
2015-01-10T03:37:15Z|00002|timeval|WARN|Unreasonably long 1090ms poll interval (39ms user, 66ms system)
2015-01-10T03:37:15Z|00003|timeval|WARN|faults: 1577 minor, 0 major
2015-01-10T03:37:15Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1732 took 12 seconds
Last command for ovsbr0p1733 took 3 seconds
Last command for ovsbr0p1734 took 7 seconds
Last command for ovsbr0p1735 took 1 seconds
2015-01-10T03:37:38Z|00002|timeval|WARN|Unreasonably long 1505ms poll interval (46ms user, 135ms system)
2015-01-10T03:37:38Z|00003|timeval|WARN|faults: 1565 minor, 0 major
2015-01-10T03:37:38Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1736 took 6 seconds
Last command for ovsbr0p1737 took 1 seconds
Last command for ovsbr0p1738 took 38 seconds
Last command for ovsbr0p1739 took 15 seconds
Last command for ovsbr0p1740 took 12 seconds
Last command for ovsbr0p1741 took 6 seconds
Last command for ovsbr0p1742 took 3 seconds
Last command for ovsbr0p1743 took 9 seconds
Last command for ovsbr0p1744 took 6 seconds
Last command for ovsbr0p1745 took 4 seconds
Last command for ovsbr0p1746 took 32 seconds
2015-01-10T03:39:50Z|00002|timeval|WARN|Unreasonably long 1113ms poll interval (43ms user, 89ms system)
2015-01-10T03:39:50Z|00003|timeval|WARN|faults: 1589 minor, 0 major
2015-01-10T03:39:50Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1747 took 44 seconds
Last command for ovsbr0p1748 took 10 seconds
Last command for ovsbr0p1749 took 10 seconds
Last command for ovsbr0p1750 took 8 seconds
Last command for ovsbr0p1751 took 3 seconds
Last command for ovsbr0p1752 took 38 seconds
2015-01-10T03:41:44Z|00002|timeval|WARN|Unreasonably long 1799ms poll interval (34ms user, 154ms system)
2015-01-10T03:41:44Z|00003|timeval|WARN|faults: 1593 minor, 0 major
2015-01-10T03:41:44Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1753 took 18 seconds
Last command for ovsbr0p1754 took 16 seconds
Last command for ovsbr0p1755 took 2 seconds
Last command for ovsbr0p1756 took 9 seconds
Last command for ovsbr0p1757 took 3 seconds
Last command for ovsbr0p1758 took 6 seconds
Last command for ovsbr0p1759 took 1 seconds
Last command for ovsbr0p1760 took 39 seconds
Last command for ovsbr0p1761 took 44 seconds
Last command for ovsbr0p1762 took 15 seconds
Last command for ovsbr0p1763 took 7 seconds
Last command for ovsbr0p1764 took 4 seconds
Last command for ovsbr0p1765 took 1 seconds
Last command for ovsbr0p1766 took 22 seconds
Last command for ovsbr0p1767 took 12 seconds
Last command for ovsbr0p1768 took 9 seconds
Last command for ovsbr0p1769 took 11 seconds
Last command for ovsbr0p1770 took 7 seconds
Last command for ovsbr0p1771 took 1 seconds
Last command for ovsbr0p1772 took 17 seconds
Last command for ovsbr0p1773 took 2 seconds
Last command for ovsbr0p1774 took 24 seconds
Last command for ovsbr0p1775 took 11 seconds
Last command for ovsbr0p1776 took 11 seconds
Last command for ovsbr0p1777 took 16 seconds
Last command for ovsbr0p1778 took 15 seconds
Last command for ovsbr0p1779 took 8 seconds
Last command for ovsbr0p1780 took 3 seconds
Last command for ovsbr0p1781 took 27 seconds
Last command for ovsbr0p1782 took 37 seconds
Last command for ovsbr0p1783 took 9 seconds
Last command for ovsbr0p1784 took 13 seconds
Last command for ovsbr0p1785 took 9 seconds
Last command for ovsbr0p1786 took 3 seconds
Last command for ovsbr0p1787 took 7 seconds
2015-01-10T03:49:02Z|00002|timeval|WARN|Unreasonably long 1860ms poll interval (34ms user, 44ms system)
2015-01-10T03:49:02Z|00003|timeval|WARN|faults: 1617 minor, 0 major
2015-01-10T03:49:02Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1788 took 15 seconds
Last command for ovsbr0p1789 took 2 seconds
Last command for ovsbr0p1790 took 11 seconds
Last command for ovsbr0p1791 took 16 seconds
Last command for ovsbr0p1792 took 5 seconds
Last command for ovsbr0p1793 took 4 seconds
Last command for ovsbr0p1794 took 11 seconds
Last command for ovsbr0p1795 took 10 seconds
Last command for ovsbr0p1796 took 2 seconds
2015-01-10T03:50:19Z|00002|timeval|WARN|Unreasonably long 2879ms poll interval (50ms user, 158ms system)
2015-01-10T03:50:19Z|00003|timeval|WARN|faults: 1648 minor, 0 major
2015-01-10T03:50:19Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1797 took 6 seconds
2015-01-10T03:50:24Z|00002|timeval|WARN|Unreasonably long 1601ms poll interval (-2ms user, 23ms system)
2015-01-10T03:50:24Z|00003|timeval|WARN|faults: 26 minor, 0 major
2015-01-10T03:50:24Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1798 took 8 seconds
Last command for ovsbr0p1799 took 17 seconds
Last command for ovsbr0p1800 took 16 seconds
Last command for ovsbr0p1801 took 13 seconds
Last command for ovsbr0p1802 took 17 seconds
Last command for ovsbr0p1803 took 10 seconds
Last command for ovsbr0p1804 took 21 seconds
Last command for ovsbr0p1805 took 9 seconds
Last command for ovsbr0p1806 took 2 seconds
2015-01-10T03:52:19Z|00002|timeval|WARN|Unreasonably long 1466ms poll interval (80ms user, 168ms system)
2015-01-10T03:52:19Z|00003|timeval|WARN|faults: 1653 minor, 0 major
2015-01-10T03:52:19Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1807 took 5 seconds
Last command for ovsbr0p1808 took 8 seconds
Last command for ovsbr0p1809 took 5 seconds
2015-01-10T03:52:34Z|00002|timeval|WARN|Unreasonably long 1201ms poll interval (40ms user, 60ms system)
2015-01-10T03:52:34Z|00003|timeval|WARN|faults: 1625 minor, 0 major
2015-01-10T03:52:34Z|00004|timeval|WARN|context switches: 0 voluntary, 15 involuntary
Last command for ovsbr0p1810 took 25 seconds
2015-01-10T03:52:59Z|00002|timeval|WARN|Unreasonably long 1675ms poll interval (41ms user, 114ms system)
2015-01-10T03:52:59Z|00003|timeval|WARN|faults: 1626 minor, 0 major
2015-01-10T03:52:59Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1811 took 15 seconds
Last command for ovsbr0p1812 took 24 seconds
Last command for ovsbr0p1813 took 13 seconds
Last command for ovsbr0p1814 took 9 seconds
Last command for ovsbr0p1815 took 6 seconds
2015-01-10T03:54:09Z|00002|timeval|WARN|Unreasonably long 2884ms poll interval (44ms user, 176ms system)
2015-01-10T03:54:09Z|00003|timeval|WARN|faults: 1647 minor, 0 major
2015-01-10T03:54:09Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1816 took 27 seconds
Last command for ovsbr0p1817 took 8 seconds
Last command for ovsbr0p1818 took 6 seconds
Last command for ovsbr0p1819 took 12 seconds
Last command for ovsbr0p1820 took 3 seconds
2015-01-10T03:55:06Z|00002|timeval|WARN|Unreasonably long 2062ms poll interval (51ms user, 138ms system)
2015-01-10T03:55:06Z|00003|timeval|WARN|faults: 1657 minor, 0 major
2015-01-10T03:55:06Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1821 took 17 seconds
Last command for ovsbr0p1822 took 2 seconds
Last command for ovsbr0p1823 took 13 seconds
Last command for ovsbr0p1824 took 2 seconds
2015-01-10T03:55:38Z|00002|timeval|WARN|Unreasonably long 1403ms poll interval (53ms user, 161ms system)
2015-01-10T03:55:38Z|00003|timeval|WARN|faults: 1662 minor, 0 major
2015-01-10T03:55:38Z|00004|timeval|WARN|context switches: 0 voluntary, 26 involuntary
Last command for ovsbr0p1825 took 11 seconds
Last command for ovsbr0p1826 took 3 seconds
2015-01-10T03:55:51Z|00002|timeval|WARN|Unreasonably long 1256ms poll interval (36ms user, 145ms system)
2015-01-10T03:55:51Z|00003|timeval|WARN|faults: 1662 minor, 0 major
2015-01-10T03:55:51Z|00004|timeval|WARN|context switches: 0 voluntary, 23 involuntary
Last command for ovsbr0p1827 took 6 seconds
Last command for ovsbr0p1828 took 13 seconds
Last command for ovsbr0p1829 took 3 seconds
Last command for ovsbr0p1830 took 8 seconds
Last command for ovsbr0p1831 took 4 seconds
Last command for ovsbr0p1832 took 5 seconds
Last command for ovsbr0p1833 took 17 seconds
Last command for ovsbr0p1834 took 8 seconds
Last command for ovsbr0p1835 took 3 seconds
Last command for ovsbr0p1836 took 10 seconds
Last command for ovsbr0p1837 took 3 seconds
Last command for ovsbr0p1838 took 14 seconds
Last command for ovsbr0p1839 took 6 seconds
Last command for ovsbr0p1840 took 3 seconds
Last command for ovsbr0p1841 took 5 seconds
Last command for ovsbr0p1842 took 8 seconds
Last command for ovsbr0p1843 took 2 seconds
Last command for ovsbr0p1844 took 17 seconds
Last command for ovsbr0p1845 took 3 seconds
Last command for ovsbr0p1846 took 7 seconds
Last command for ovsbr0p1847 took 1 seconds
Last command for ovsbr0p1848 took 8 seconds
Last command for ovsbr0p1849 took 3 seconds
Last command for ovsbr0p1850 took 24 seconds
Last command for ovsbr0p1851 took 10 seconds
Last command for ovsbr0p1852 took 14 seconds
Last command for ovsbr0p1853 took 8 seconds
Last command for ovsbr0p1854 took 5 seconds
Last command for ovsbr0p1855 took 3 seconds
2015-01-10T03:59:33Z|00002|timeval|WARN|Unreasonably long 2504ms poll interval (12ms user, 164ms system)
2015-01-10T03:59:33Z|00003|timeval|WARN|faults: 1665 minor, 0 major
2015-01-10T03:59:33Z|00004|timeval|WARN|context switches: 0 voluntary, 22 involuntary
Last command for ovsbr0p1856 took 19 seconds
Last command for ovsbr0p1857 took 5 seconds
Last command for ovsbr0p1858 took 5 seconds
Last command for ovsbr0p1859 took 5 seconds
Last command for ovsbr0p1860 took 3 seconds
Last command for ovsbr0p1861 took 7 seconds
Last command for ovsbr0p1862 took 5 seconds
Last command for ovsbr0p1863 took 7 seconds
Last command for ovsbr0p1864 took 3 seconds
Last command for ovsbr0p1865 took 7 seconds
Last command for ovsbr0p1866 took 9 seconds
Last command for ovsbr0p1867 took 3 seconds
Last command for ovsbr0p1868 took 4 seconds
Last command for ovsbr0p1869 took 17 seconds
Last command for ovsbr0p1870 took 13 seconds
2015-01-10T04:01:23Z|00002|timeval|WARN|Unreasonably long 1246ms poll interval (30ms user, 103ms system)
2015-01-10T04:01:23Z|00003|timeval|WARN|faults: 1709 minor, 0 major
2015-01-10T04:01:23Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1871 took 14 seconds
Last command for ovsbr0p1872 took 6 seconds
Last command for ovsbr0p1873 took 3 seconds
Last command for ovsbr0p1874 took 8 seconds
Last command for ovsbr0p1875 took 16 seconds
2015-01-10T04:02:11Z|00002|timeval|WARN|Unreasonably long 1565ms poll interval (82ms user, 114ms system)
2015-01-10T04:02:11Z|00003|timeval|WARN|faults: 1713 minor, 0 major
2015-01-10T04:02:11Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1876 took 57 seconds
Last command for ovsbr0p1877 took 51 seconds
Last command for ovsbr0p1878 took 16 seconds
Last command for ovsbr0p1879 took 12 seconds
Last command for ovsbr0p1880 took 16 seconds
Last command for ovsbr0p1881 took 13 seconds
Last command for ovsbr0p1882 took 6 seconds
Last command for ovsbr0p1883 took 9 seconds
Last command for ovsbr0p1884 took 11 seconds
Last command for ovsbr0p1885 took 9 seconds
Last command for ovsbr0p1886 took 11 seconds
Last command for ovsbr0p1887 took 3 seconds
2015-01-10T04:05:44Z|00002|timeval|WARN|Unreasonably long 1169ms poll interval (43ms user, 87ms system)
2015-01-10T04:05:45Z|00003|timeval|WARN|faults: 1689 minor, 0 major
2015-01-10T04:05:45Z|00004|timeval|WARN|context switches: 0 voluntary, 23 involuntary
Last command for ovsbr0p1888 took 8 seconds
Last command for ovsbr0p1889 took 6 seconds
Last command for ovsbr0p1890 took 9 seconds
Last command for ovsbr0p1891 took 3 seconds
Last command for ovsbr0p1892 took 5 seconds
Last command for ovsbr0p1893 took 1 seconds
Last command for ovsbr0p1894 took 11 seconds
Last command for ovsbr0p1895 took 7 seconds
Last command for ovsbr0p1896 took 3 seconds
2015-01-10T04:06:38Z|00002|timeval|WARN|Unreasonably long 1118ms poll interval (-6ms user, 13ms system)
2015-01-10T04:06:38Z|00003|timeval|WARN|faults: 17 minor, 0 major
2015-01-10T04:06:38Z|00004|timeval|WARN|context switches: 0 voluntary, 1 involuntary
Last command for ovsbr0p1897 took 8 seconds
Last command for ovsbr0p1898 took 16 seconds
Last command for ovsbr0p1899 took 10 seconds
Last command for ovsbr0p1900 took 11 seconds
Last command for ovsbr0p1901 took 4 seconds
Last command for ovsbr0p1902 took 12 seconds
Last command for ovsbr0p1903 took 3 seconds
Last command for ovsbr0p1904 took 7 seconds
Last command for ovsbr0p1905 took 29 seconds
Last command for ovsbr0p1906 took 12 seconds
Last command for ovsbr0p1907 took 7 seconds
Last command for ovsbr0p1908 took 3 seconds
2015-01-10T04:08:39Z|00002|timeval|WARN|Unreasonably long 1135ms poll interval (41ms user, 104ms system)
2015-01-10T04:08:39Z|00003|timeval|WARN|faults: 1724 minor, 0 major
2015-01-10T04:08:39Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1909 took 7 seconds
2015-01-10T04:08:49Z|00002|timeval|WARN|Unreasonably long 2246ms poll interval (44ms user, 195ms system)
2015-01-10T04:08:49Z|00003|timeval|WARN|faults: 1704 minor, 0 major
2015-01-10T04:08:49Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1910 took 14 seconds
Last command for ovsbr0p1911 took 9 seconds
Last command for ovsbr0p1912 took 4 seconds
Last command for ovsbr0p1913 took 11 seconds
Last command for ovsbr0p1914 took 3 seconds
Last command for ovsbr0p1915 took 15 seconds
Last command for ovsbr0p1916 took 11 seconds
Last command for ovsbr0p1917 took 7 seconds
Last command for ovsbr0p1918 took 12 seconds
Last command for ovsbr0p1919 took 4 seconds
2015-01-10T04:10:19Z|00002|timeval|WARN|Unreasonably long 3370ms poll interval (46ms user, 233ms system)
2015-01-10T04:10:19Z|00003|timeval|WARN|faults: 1754 minor, 0 major
2015-01-10T04:10:19Z|00004|timeval|WARN|context switches: 0 voluntary, 23 involuntary
Last command for ovsbr0p1920 took 14 seconds
Last command for ovsbr0p1921 took 5 seconds
Last command for ovsbr0p1922 took 17 seconds
Last command for ovsbr0p1923 took 5 seconds
Last command for ovsbr0p1924 took 3 seconds
2015-01-10T04:11:03Z|00002|timeval|WARN|Unreasonably long 1906ms poll interval (76ms user, 23ms system)
2015-01-10T04:11:03Z|00003|timeval|WARN|faults: 1758 minor, 0 major
2015-01-10T04:11:03Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1925 took 20 seconds
Last command for ovsbr0p1926 took 7 seconds
Last command for ovsbr0p1927 took 3 seconds
2015-01-10T04:11:31Z|00002|timeval|WARN|Unreasonably long 1011ms poll interval (94ms user, 50ms system)
2015-01-10T04:11:31Z|00003|timeval|WARN|faults: 1746 minor, 0 major
2015-01-10T04:11:31Z|00004|timeval|WARN|context switches: 0 voluntary, 19 involuntary
Last command for ovsbr0p1928 took 11 seconds
Last command for ovsbr0p1929 took 3 seconds
2015-01-10T04:11:48Z|00002|timeval|WARN|Unreasonably long 1166ms poll interval (50ms user, 30ms system)
2015-01-10T04:11:48Z|00003|timeval|WARN|faults: 1727 minor, 0 major
2015-01-10T04:11:48Z|00004|timeval|WARN|context switches: 0 voluntary, 20 involuntary
Last command for ovsbr0p1930 took 28 seconds
Last command for ovsbr0p1931 took 9 seconds
Last command for ovsbr0p1932 took 3 seconds
2015-01-10T04:12:28Z|00002|timeval|WARN|Unreasonably long 1100ms poll interval (22ms user, 185ms system)
2015-01-10T04:12:28Z|00003|timeval|WARN|faults: 1734 minor, 0 major
2015-01-10T04:12:28Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1933 took 19 seconds
Last command for ovsbr0p1934 took 10 seconds
Last command for ovsbr0p1935 took 9 seconds
2015-01-10T04:13:05Z|00002|timeval|WARN|Unreasonably long 2426ms poll interval (450ms user, 107ms system)
2015-01-10T04:13:05Z|00003|timeval|WARN|faults: 1735 minor, 0 major
2015-01-10T04:13:05Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1936 took 14 seconds
Last command for ovsbr0p1937 took 4 seconds
Last command for ovsbr0p1938 took 7 seconds
Last command for ovsbr0p1939 took 4 seconds
Last command for ovsbr0p1940 took 16 seconds
Last command for ovsbr0p1941 took 18 seconds
Last command for ovsbr0p1942 took 7 seconds
Last command for ovsbr0p1943 took 2 seconds
Last command for ovsbr0p1944 took 16 seconds
Last command for ovsbr0p1945 took 2 seconds
Last command for ovsbr0p1946 took 27 seconds
Last command for ovsbr0p1947 took 11 seconds
Last command for ovsbr0p1948 took 15 seconds
Last command for ovsbr0p1949 took 3 seconds
Last command for ovsbr0p1950 took 15 seconds
2015-01-10T04:15:44Z|00002|timeval|WARN|Unreasonably long 1456ms poll interval (30ms user, 105ms system)
2015-01-10T04:15:44Z|00003|timeval|WARN|faults: 1771 minor, 0 major
2015-01-10T04:15:44Z|00004|timeval|WARN|context switches: 0 voluntary, 21 involuntary
Last command for ovsbr0p1951 took 17 seconds
Last command for ovsbr0p1952 took 14 seconds
Last command for ovsbr0p1953 took 8 seconds
Last command for ovsbr0p1954 took 4 seconds
Last command for ovsbr0p1955 took 3 seconds
2015-01-10T04:16:29Z|00002|timeval|WARN|Unreasonably long 1104ms poll interval (45ms user, 38ms system)
2015-01-10T04:16:29Z|00003|timeval|WARN|faults: 1758 minor, 0 major
2015-01-10T04:16:29Z|00004|timeval|WARN|context switches: 0 voluntary, 18 involuntary
Last command for ovsbr0p1956 took 5 seconds
Last command for ovsbr0p1957 took 1 seconds
2015-01-10T04:16:38Z|00002|timeval|WARN|Unreasonably long 3782ms poll interval (46ms user, 370ms system)
2015-01-10T04:16:38Z|00003|timeval|WARN|faults: 1767 minor, 0 major
2015-01-10T04:16:38Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1958 took 10 seconds
2015-01-10T04:16:45Z|00002|timeval|WARN|Unreasonably long 1392ms poll interval (47ms user, 184ms system)
2015-01-10T04:16:45Z|00003|timeval|WARN|faults: 1768 minor, 0 major
2015-01-10T04:16:45Z|00004|timeval|WARN|context switches: 0 voluntary, 26 involuntary
Last command for ovsbr0p1959 took 6 seconds
Last command for ovsbr0p1960 took 34 seconds
Last command for ovsbr0p1961 took 11 seconds
Last command for ovsbr0p1962 took 7 seconds
Last command for ovsbr0p1963 took 3 seconds
Last command for ovsbr0p1964 took 25 seconds
Last command for ovsbr0p1965 took 13 seconds
Last command for ovsbr0p1966 took 5 seconds
Last command for ovsbr0p1967 took 10 seconds
Last command for ovsbr0p1968 took 5 seconds
Last command for ovsbr0p1969 took 17 seconds
Last command for ovsbr0p1970 took 8 seconds
Last command for ovsbr0p1971 took 3 seconds
Last command for ovsbr0p1972 took 14 seconds
Last command for ovsbr0p1973 took 6 seconds
Last command for ovsbr0p1974 took 3 seconds
Last command for ovsbr0p1975 took 12 seconds
Last command for ovsbr0p1976 took 17 seconds
Last command for ovsbr0p1977 took 17 seconds
Last command for ovsbr0p1978 took 6 seconds
Last command for ovsbr0p1979 took 4 seconds
2015-01-10T04:20:33Z|00002|timeval|WARN|Unreasonably long 2317ms poll interval (32ms user, 172ms system)
2015-01-10T04:20:33Z|00003|timeval|WARN|faults: 1771 minor, 0 major
2015-01-10T04:20:33Z|00004|timeval|WARN|context switches: 0 voluntary, 22 involuntary
Last command for ovsbr0p1980 took 17 seconds
Last command for ovsbr0p1981 took 6 seconds
2015-01-10T04:20:55Z|00002|timeval|WARN|Unreasonably long 1245ms poll interval (37ms user, 86ms system)
2015-01-10T04:20:55Z|00003|timeval|WARN|faults: 1769 minor, 0 major
2015-01-10T04:20:55Z|00004|timeval|WARN|context switches: 0 voluntary, 17 involuntary
Last command for ovsbr0p1982 took 15 seconds
Last command for ovsbr0p1983 took 4 seconds
Last command for ovsbr0p1984 took 5 seconds
Last command for ovsbr0p1985 took 9 seconds
Last command for ovsbr0p1986 took 2 seconds
Last command for ovsbr0p1987 took 17 seconds
Last command for ovsbr0p1988 took 4 seconds
2015-01-10T04:21:50Z|00002|timeval|WARN|Unreasonably long 1313ms poll interval (54ms user, 100ms system)
2015-01-10T04:21:50Z|00003|timeval|WARN|faults: 1788 minor, 0 major
2015-01-10T04:21:50Z|00004|timeval|WARN|context switches: 0 voluntary, 16 involuntary
Last command for ovsbr0p1989 took 16 seconds
Last command for ovsbr0p1990 took 9 seconds
Last command for ovsbr0p1991 took 3 seconds
Last command for ovsbr0p1992 took 5 seconds
2015-01-10T04:22:25Z|00002|timeval|WARN|Unreasonably long 2196ms poll interval (45ms user, 213ms system)
2015-01-10T04:22:25Z|00003|timeval|WARN|faults: 1808 minor, 0 major
2015-01-10T04:22:25Z|00004|timeval|WARN|context switches: 0 voluntary, 22 involuntary
Last command for ovsbr0p1993 took 44 seconds
Last command for ovsbr0p1994 took 15 seconds
Last command for ovsbr0p1995 took 9 seconds
Last command for ovsbr0p1996 took 3 seconds
2015-01-10T04:23:35Z|00002|timeval|WARN|Unreasonably long 1702ms poll interval (40ms user, 102ms system)
2015-01-10T04:23:35Z|00003|timeval|WARN|faults: 1815 minor, 0 major
2015-01-10T04:23:35Z|00004|timeval|WARN|context switches: 0 voluntary, 25 involuntary
Last command for ovsbr0p1997 took 7 seconds
Last command for ovsbr0p1998 took 8 seconds
Last command for ovsbr0p1999 took 3 seconds
Last command for ovsbr0p2000 took 18 seconds





 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/12c0409c/attachment-0001.html>

From ricky.li.net at gmail.com  Sun Jan 11 17:05:14 2015
From: ricky.li.net at gmail.com (Ji Li)
Date: Mon, 12 Jan 2015 09:05:14 +0800
Subject: [ovs-discuss] How to apply a patch posted in ovs-dev mailing list?
Message-ID: <CADs2Enbm7txp7XU23nniqPajpm+zOzUREiSowd1GhWrff6KXzg@mail.gmail.com>

Hi all,

I am working on a project related to ovs user space tunneling and I found a
patch posted in ovs-dev mailing list:

http://openvswitch.org/pipermail/dev/2014-October/047443.html

I want to apply this patch and have a test on my side, but I don't know
which version of ovs source code is the base code for this patch? Or is
there any tool to identify the corresponding base code version for this
patch?

Many thanks for helping me on this stupid question. :)

Thank you,
Ricky
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/b32b2393/attachment.html>

From zsy056 at gmail.com  Sun Jan 11 17:34:27 2015
From: zsy056 at gmail.com (Shaoyu Zhang)
Date: Mon, 12 Jan 2015 01:34:27 +0000
Subject: [ovs-discuss] SetAsyncConfig in OpenFlow 1.4
References: <CAOeDw-_BYkmE7h7u3Sw28hxcApyWEj2qV2AZcey4r6gQcxvwpw@mail.gmail.com>
 <20150111180431.GG27729@nicira.com>
Message-ID: <CAOeDw--j9z_0J66raBwD8EEY-bb5+pCbQJWqMKzK-8tdAzJqSA@mail.gmail.com>

Hi Ben,

Thank you. I didn't notice that in the document(
https://github.com/openvswitch/ovs/blob/master/OPENFLOW-1.1%2B.md)

Best regards,
Shaoyu

On Mon Jan 12 2015 at 3:04:59 AM Ben Pfaff <blp at nicira.com> wrote:

> On Thu, Jan 08, 2015 at 09:35:30AM +0000, Shaoyu Zhang wrote:
> > I want to use SetAsyncConfig message to enable several kinds of Async
> > Messages. The Open vSwitch is set to OpenFlow 1.4 mode.
> > However, after sending the SetAsyncConfig message, I cannot receive
> > any PACKET_IN any more, but the same controller side code works
> > if we use a Pica8 physical switch.
>
> It looks like OFPT_SET_ASYNC_REQUEST has not been implemented in OVS for
> OF1.4 yet.  The message is there but it still implements the OF1.3 wire
> format.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/93b1228a/attachment.html>

From jpettit at nicira.com  Sun Jan 11 18:09:56 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Sun, 11 Jan 2015 18:09:56 -0800
Subject: [ovs-discuss] How to apply a patch posted in ovs-dev mailing
	list?
In-Reply-To: <CADs2Enbm7txp7XU23nniqPajpm+zOzUREiSowd1GhWrff6KXzg@mail.gmail.com>
References: <CADs2Enbm7txp7XU23nniqPajpm+zOzUREiSowd1GhWrff6KXzg@mail.gmail.com>
Message-ID: <C21503DA-8BF9-4DE0-A72F-5C87565F3B9F@nicira.com>


> On Jan 11, 2015, at 5:05 PM, Ji Li <ricky.li.net at gmail.com> wrote:
> 
> Hi all,
> 
> I am working on a project related to ovs user space tunneling and I found a patch posted in ovs-dev mailing list:
> 
> http://openvswitch.org/pipermail/dev/2014-October/047443.html
> 
> I want to apply this patch and have a test on my side, but I don't know which version of ovs source code is the base code for this patch? Or is there any tool to identify the corresponding base code version for this patch?

It was almost certainly the tip of master at that time. If it was anything different, it should be indicated in the patch. There's not really a good way to identify it otherwise. 

> Many thanks for helping me on this stupid question. :)

It's a perfectly reasonable question. 

Good luck!

--Justin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150111/b7870b8c/attachment.html>

From tigran.avanesov at uni.lu  Sun Jan 11 22:24:19 2015
From: tigran.avanesov at uni.lu (Tigran Avanaesov)
Date: Mon, 12 Jan 2015 07:24:19 +0100
Subject: [ovs-discuss]  2000 Ports - things aren't working as expected
In-Reply-To: <mailman.2512.1421022232.4182.discuss@openvswitch.org>
References: <mailman.2512.1421022232.4182.discuss@openvswitch.org>
Message-ID: <54B36893.6080900@uni.lu>

It seems you are not the first with that question,
please look here:
http://openvswitch.org/pipermail/discuss/2014-August/014819.html

On 01/12/2015 01:23 AM, discuss-request at openvswitch.org wrote:
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://openvswitch.org/pipermail/discuss/attachments/20150111/5a8ba208/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Mon, 12 Jan 2015 11:23:40 +1100
> From: Troy Lea <troy_lea at hotmail.com>
> To: "discuss at openvswitch.org" <discuss at openvswitch.org>
> Subject: [ovs-discuss] 2000 Ports - things aren't working as expected
> Message-ID: <SNT153-W92BA2DCECC338E2E99DA20E8430 at phx.gbl>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Not sure if this is the right place to post but I need to start somewhere.
>
> Back story:
>
> I have been using Nagios for a while now and with that I have used MRTG for switch monitoring. I've been wanting to push the limits of MRTG in relation to the amount of ports that can be monitored and the affect this has on disk I/O on the Nagios host running MRTG.
>
> I am wanting to test in the region of 10,000+ ports. As you can imagine I don't have that many switches sitting around to perform that sort of testing. Hence I started to look if virtual switches existed and if so would they work. Then I found Open vSwitch.
>
>
> Current State:
>
> I've installed Open vSwitch on Ubuntu 14.04.1 and have tested it successfully. I've been able to create switches with up to 1000 ports and I can poll them via SNMP using MRTG.
>
> I've been creating these ports with a simple "for 1..1000 bash script".
>
> However it does seem though once I start creating more than 800 ports there is an impact on the Ubuntu system. This is noticeable in the time it takes to create each port when the script runs. It's like every port causes the system to take a little longer, kind of exponential.
>
> Creating 500 ports takes about 5 minutes.
>
> When creating 2000 ports it takes about 3 hours. When it is finished the system is still accessible (I can ping it from another server). However once I reboot it it doesn't respond to pings or SSH.
>
> Once I reboot the system is horribly slow.
>
> I've included all the information below which demonstrates how I am doing all of this.
>
>
> What am I asking?
>
> Is what I am doing realistic, creating 2000 ports? Are there limitations in Open vSwitch or am I hitting limitations in Ubuntu?
>
> MRTG creates lots of files for the data it collects from switches and it is the impact these small files has on the Nagios system which I am interested in. I am only using vSwitch as a mechanism to create these small files.
>
> I know I could run up 10 Ubuntu servers with each one having 1000 ports each and I would have the 10,000 ports I am after, I was just seeing how many ports I Open vSwitch would handle.
>
>
> Thanks I've you've kept reading this far.
>
> Thanks in advance if you send a reponse :)
>
>
> How am I doing it:
>
> Build a Ubuntu 14.04.1 server, minimal install.
>
> snmpd installed and configured
>
> Install Open vSwitch
>
> apt-get install openvswitch-switch
>
> ovs-vsctl add-br ovsbr0
>
> ovs-vsctl add-port ovsbr0 eth0
>
> ovs-vsctl add-port ovsbr0 ovsbr0p1 -- set interface ovsbr0p1 type=internal
>
> edit /etc/network/interfaces.
>
> assign an IP to ovsbr0.
>
> Reboot
>
> Everything is working peachy with this setup.
>
> Then I create the 2000 ports using this script:
>
> #!/bin/bash
> start_time=$(date +%s)
> for f in {2..2000}
> do
>          ovs-vsctl add-port ovsbr0 ovsbr0p$f -- set interface ovsbr0p$f type=internal
>          end_time=$(date +%s)
>          run_time=$((end_time - start_time))
>          echo "Last command for ovsbr0p$f took $run_time" seconds
>          start_time="$end_time"
> done
>
>
> Which generates this output:
>
> Last command for ovsbr0p2 took 0 seconds
> ...
>
>   		 	   		
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/12c0409c/attachment.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>
>
> ------------------------------
>
> End of discuss Digest, Vol 67, Issue 28
> ***************************************


-- 
Tigran Avanesov
Interdisciplinary Centre for Security, Reliability and Trust

UNIVERSITE DU LUXEMBOURG
BÂTIMENT WEICKER
4, rue Alphonse Weicker
L-2721 Luxembourg

Office C021
T +352 46 66 44 5617
tigran.avanesov at uni.lu
www.uni.lu  www.securityandtrust.lu


From james.page at ubuntu.com  Mon Jan 12 00:03:52 2015
From: james.page at ubuntu.com (James Page)
Date: Mon, 12 Jan 2015 08:03:52 +0000
Subject: [ovs-discuss] SIGSEGV in nl_attr_get_size() - OVS 2.0.2
In-Reply-To: <20150111180541.GH27729@nicira.com>
References: <CAGeueKhhob0EVpt5EF4cZxwcciAM3Qw8VxaH7-yDhUQ0TFpQ=w@mail.gmail.com>
 <20141031224241.GL13010@nicira.com>
 <CAGeueKgwfZN_DPigevsPe7zsuVecH2WpDJvUnFtd-ypyo4wvCw@mail.gmail.com>
 <54ACF679.6000201@ubuntu.com> <20150107161856.GA22895@nicira.com>
 <54AEF365.4070502@ubuntu.com> <20150111180541.GH27729@nicira.com>
Message-ID: <54B37FE8.7040803@ubuntu.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

On 11/01/15 18:05, Ben Pfaff wrote:
>>> I'm wondering whether this is related - the stacktrace relates
>>> to flow misses and has a large parameter list in the
>>> handle_flow_misses call.
>>> 
>>> The optimized code may just be obfuscating the actual problem.
> Any chance you could try a build without optimization, or without 
> optimization in the source files at issue?

The following PPA:

  https://launchpad.net/~james-page/+archive/ubuntu/openvswitch

contains packages with optimization disabled (-O0); I've got those
deployed on 2/6 nodes.

Lets see if that produces a better stack trace.


- -- 
James Page
Ubuntu and Debian Developer
james.page at ubuntu.com
jamespage at debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJUs3/jAAoJEL/srsug59jDVpUQAJuz9ByprRSyF9Nzx2tSbnDq
ExuYcsR21TTlbxJJYQAe1PPXcd3zR1iehmLTF77QR1SLrkrBchJ3VaP7eQZU+dAk
isgONyqR075DC+HvxeQEVFL3HnU6409pxy2nDwPdi6A1JOvm/AXAseFwoWZ+k7Ak
skHQyfoUWkmloaWtRk1DE8QP4k/Lkntn2Rgj0Pw8qbEw00+6hTjV2VoeSkOGG3nN
4hNo9uBWVRxOExE8Qjgan0DohyzaLE0+W+6YKssOZu+8ZwxmpbxsO4omYdY3BDVj
oCnYf6n0iXkjpsF/oaiNnzsMYVQYK1OzVUg343cZIfbBA+IiUeesxJgWx6urCs58
WIQSzbBE0dcIST8Y5JiHX6FmmJjSoIjUvdkPjV7xbKNfk3N+vn1P7qbehvFNgpvf
wo89I9Y4ZsMxVJMzpsO1qg/luJpXZuAWHkQA8UvQGho2UGhsy8bI/bGUrvWS617V
v26Pr63fXUpOTDDCNbYUAHy2FR+GDvE3Nhpb9GDpbit12GWv67nSqSJyoZ/PU2nD
hR8O/nqYfMTiLx2gNJVp6EfUKvs2tvto38iBUWiif5kHispx6UWUUMN/XNyNGaG3
n9pRQS9VdzWdwx3OolfyzEnv+ogpZQi+xrXv0KTF/LBHy8jhimqoyJ/ryMiIGWH2
4LGwabanCJ+ZAkWenQVF
=THel
-----END PGP SIGNATURE-----

From kevin.traynor at intel.com  Mon Jan 12 05:19:06 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Mon, 12 Jan 2015 13:19:06 +0000
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <CAGuFQhABV8gvDnaAkaHcd0XR0U8HOvBWUQA3ieLwz7DpmLD0SA@mail.gmail.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>
 <CAGuFQhAbpXkhOLuqifrqzTyCPwFi2uVSAQdoMNDEY7XnkK5rWQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F73066A350@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhABV8gvDnaAkaHcd0XR0U8HOvBWUQA3ieLwz7DpmLD0SA@mail.gmail.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F73066BEE7@IRSMSX104.ger.corp.intel.com>

I wasn’t able to reproduce and I’m finding it hard to understand how it’s DPDK related as that doesn’t affect connection to the ovsdb. So my question was about if you have been able to isolate the issue on a clean system/clean builds etc to rule out any other issues. Were you able to run OVS without DPDK immediately after the test below and it was working?

If your patch is for OVS (including netdev-dpdk) then submit as normal (http://openvswitch.org/development/) , if it’s for the DPDK libraries then see http://dpdk.org/dev

Thanks,
Kevin.

From: Shankari Vaidyalingam [mailto:shankari.v.2014 at gmail.com]
Sent: Sunday, January 11, 2015 6:12 PM
To: Traynor, Kevin
Cc: Ben Pfaff; discuss at openvswitch.org
Subject: Re: [ovs-discuss] Difference seen in OVSDB initialization with & without DPDK

Hi Kevin,
Sorry I'm not able to get your question
I have got the above logs when I tried this sequence: reboot; with DPDK;
I'm using OVS version - 2.3.1 and DPDK version - 1.7.1.
The compilation errors are seen in OVS 2.3.1 with DPDK 1.7.1 as well. But I have solved those errors and the build proceeds fine. I'd like to submit a patch for the same in Git repository. Let me know the process for submitting the patch.
Regards
Shankari.V

On Fri, Jan 9, 2015 at 11:14 PM, Traynor, Kevin <kevin.traynor at intel.com<mailto:kevin.traynor at intel.com>> wrote:
The compile error was consistent with using DPDK 1.8 as the mbuf format has changed. I’m not sure why you are getting (bad address) connecting to the db only with DPDK as the DPDK code doesn’t have anything to do with this. I’ve tried to reproduce but am unable to, my logs below. Did you try anything to make sure it’s not system state e.g. reboot; with DPDK; without DPDK; with DPDK ?

[ovs_int]$ sudo ./ovsdb/ovsdb-server --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
[ovs_int]$ sudo ./utilities/ovs-vsctl --no-wait --verbose init
2015-01-09T17:34:40Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
2015-01-09T17:34:40Z|00003|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-09T17:34:40Z|00004|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-09T17:34:40Z|00005|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4 (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:151
2015-01-09T17:34:40Z|00006|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connected
2015-01-09T17:34:40Z|00007|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering ACTIVE
2015-01-09T17:34:40Z|00008|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock: send request, method="monitor", params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
2015-01-09T17:34:40Z|00009|poll_loop|DBG|wakeup due to [POLLIN] on fd 4 (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:155
2015-01-09T17:34:40Z|00010|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock: received reply, result={"Open_vSwitch":{"98aa7f23-74c6-4318-a41b-7c22bef9b6ec":{"new":{}}}}, id=0

Thanks,
Kevin.

From: Shankari Vaidyalingam [mailto:shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>]
Sent: Wednesday, January 7, 2015 8:39 PM
To: Traynor, Kevin
Cc: Ben Pfaff; discuss at openvswitch.org<mailto:discuss at openvswitch.org>

Subject: Re: [ovs-discuss] Difference seen in OVSDB initialization with & without DPDK

Hi
I resolved the below mentioned compiler errors and the build goes fine.
But the issue with the database connectivity still persists. Now the error message seen is different. Pls find the logs below. Let me know how to resolve this:

controller at controller-Latitude-E5440:~/$ cd openvswitch-2.3.1
controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-tool create /usr/local/etc/openvswitch/conf.db ./vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-server --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
controller at controller-Latitude-E5440:~/$ sudo ./utilities/ovs-vsctl --no-wait --verbose init

2015-01-07T20:35:37Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
 I'm executing here 226
2015-01-07T20:35:37Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16 nodes, 8 buckets)
 DSBG: Name of the session opened = unix:/usr/local/var/run/openvswitch/db.sock, pstream_verify_name(name) = 97 retry = 0
 Can proceed further
 About to connect to the dataabase 239
2015-01-07T20:35:37Z|00004|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-07T20:35:37Z|00005|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-07T20:35:37Z|00006|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4 (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd-unix.c:120
2015-01-07T20:35:37Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connected
2015-01-07T20:35:37Z|00008|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering ACTIVE
 ovsdb_idl_
is_alive(idl) = 1
2015-01-07T20:35:37Z|00009|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock: send request, method="monitor", params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
2015-01-07T20:35:37Z|00010|jsonrpc|WARN|unix:/usr/local/var/run/openvswitch/db.sock: send error: Bad address
2015-01-07T20:35:37Z|00011|poll_loop|DBG|wakeup due to 0-ms timeout at unix:/usr/local/var/run/openvswitch/db.sock
2015-01-07T20:35:37Z|00012|reconnect|WARN|unix:/usr/local/var/run/openvswitch/db.sock: connection dropped (Bad address)
2015-01-07T20:35:37Z|00013|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
 DBG: Returning 0 without any action
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Bad address)
 DBG: Returning 0 without any actioncontroller at controller-Latitude-E5440:~/$
Regards
Shankari

On Thu, Jan 8, 2015 at 1:03 AM, Shankari Vaidyalingam <shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
Hi Kevin
Thanks  for the response.
I used DPDK-1.7.1 and used the same for building the OVS. The OVS version I use is OVS 2.3.1.
I followed the steps mentioned in INSTALL.DPDK in https://github.com/openvswitch/ovs/blob/master/INSTALL.DPDK.md.
I'm getting the below error while executing the make command. Pls let me know whether there exists a patch for resolving the issue. I know how to resolve the last 2 errors.

/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:115:2: warning: cast from function call of type 'uintptr_t' to non-matching type 'void *' [-Wbad-function-cast]
  (typeof(ptr))rte_align_floor_int((uintptr_t)ptr, align)
  ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:133:2: note: in expansion of macro 'RTE_PTR_ALIGN_FLOOR'
  RTE_PTR_ALIGN_FLOOR((typeof(ptr))RTE_PTR_ADD(ptr, (align) - 1), align)
  ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:151:35: note: in expansion of macro 'RTE_PTR_ALIGN_CEIL'
 #define RTE_PTR_ALIGN(ptr, align) RTE_PTR_ALIGN_CEIL(ptr, align)
                                   ^
/home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:176:9: note: in expansion of macro 'RTE_PTR_ALIGN'
  return RTE_PTR_ALIGN(ptr, align) == ptr;
         ^
In file included from lib/dpif.h:393:0,
                 from lib/bfd.c:27:
lib/ofpbuf.h: In function 'ofpbuf_size':
lib/ofpbuf.h:385:21: error: 'const struct rte_mbuf' has no member named 'pkt_len'
       return b->mbuf.pkt_len;
                     ^
lib/ofpbuf.h: In function 'ofpbuf_set_size':
lib/ofpbuf.h:394:12: error: 'struct rte_mbuf' has no member named 'pkt_len'
     b->mbuf.pkt_len = v;
            ^
In file included from lib/dpif.h:393:0,
                 from lib/bfd.c:27:
lib/ofpbuf.h: In function 'ofpbuf_size':
lib/ofpbuf.h:386:1: warning: control reaches end of non-void function [-Wreturn-type]
 }
 ^
make[2]: *** [lib/bfd.lo] Error 1
make[2]: Leaving directory `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
make: *** [all] Error 2
Regards
Shankari.V

On Wed, Jan 7, 2015 at 3:56 PM, Traynor, Kevin <kevin.traynor at intel.com<mailto:kevin.traynor at intel.com>> wrote:
I notice in the logs you have “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not supported in OVS at present. There is a patch for it but it was causing an issue with unit test and is being reworked.

I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK 1.7.1)

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org<mailto:discuss-bounces at openvswitch.org>] On Behalf Of Shankari Vaidyalingam
Sent: Tuesday, January 6, 2015 6:56 PM
To: Ben Pfaff
Cc: discuss at openvswitch.org<mailto:discuss at openvswitch.org>
Subject: Re: [ovs-discuss] Difference seen in OVSDB initialization with & without DPDK

Also to add to the below mail which I'd sent pls find below the output of starting OVS with the debugs enabled:

controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:

2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16 nodes, 8 buckets)
 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock: connection failed (Connection refused)
2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connecting...
2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering CONNECTING
2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: connection attempt failed (Connection refused)
2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock: waiting 2.15e+06 seconds before reconnect
2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock: entering BACKOFF
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Connection refused)
 DBG: Trying to reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$<mailto:reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$> ps -Af | grep ovsdb-server
root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring pid 963 (healthy)
root       963   962  0 Jan03 ?        00:00:00 ovsdb-server /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info --remote=punix:/var/run/openvswitch/db.sock --private-key=db:Open_vSwitch,SSL,private_key --certificate=db:Open_vSwitch,SSL,certificate --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir --log-file=/var/log/openvswitch/ovsdb-server.log --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto ovsdb-server
Regards
Shankari.V

On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
Hi

The excerpt below was due to a wrong copy paste of the commands at the command prompt which gave the error message: "No such file or directory".
The error which I had mentioned in my previous message was:

controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovsdb-tool create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovsdb-server /usr/local/etc/openvswitch/conf.db --remote=punix:/usr/local/var/run/openvswitch/db.sock --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach --log-file
2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file /usr/local/var/log/openvswitch/ovsdb-server.log



controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo ovs-vsctl --no-wait init

 I'm executing here 226
 Can proceed further
 About to connect to the dataabase 239
 ovsdb_idl_is_alive(idl) = 1
 ==== Entering the database section =====
 DBG: s->pstream is NULL
 DBG: s->stream is non NULL
ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database connection failed (Connection refused)
Regards
Shankari.V

On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com<mailto:blp at nicira.com>> wrote:
Here's an excerpt from your "with DPDK" log. It looks like you typoed
a command and therefore ovsdb-server didn't start.

controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$>
controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$> sudo
ovsdb-server /usr/local/etc/openvswitch/conf.db
--remote=punix:/usr/local/var/run/openvswitch/db.sock
--remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
--detach --log-file
bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$<mailto:controller at controller-Latitude-E5440:~openvswitch-2.3.1$>: No
such file or directory

On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
<shankari.v.2014 at gmail.com<mailto:shankari.v.2014 at gmail.com>> wrote:
> Hi,
>
> I tried executing the steps for initializing the OVSDB-server and the OVS
> given in the below link:
>
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/<http://networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/>
>
> I'm using Ubuntu Trusty tahr, OVS version 2.3.1
>
> I was able to get the OVS working for the build which I compiled without
> DPDK.
> But with DPDK_BUILD configured in the Makefile the build produced "Database
> connection refused" error and the OVS was not getting started because of
> this error. Kindly help me in resolving this issue.
>
> Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> build
>
> Regards,
> Shankari.V
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org<mailto:discuss at openvswitch.org>
> http://openvswitch.org/mailman/listinfo/discuss
>



--
"I don't normally do acked-by's.  I think it's my way of avoiding
getting blamed when it all blows up."               Andrew Morton





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/66ab299e/attachment-0001.html>

From davidjoshuaevans at gmail.com  Mon Jan 12 07:01:26 2015
From: davidjoshuaevans at gmail.com (David Evans)
Date: Mon, 12 Jan 2015 09:01:26 -0600
Subject: [ovs-discuss] what is multiq - and why is it required by ovs for
 dpdk vmnet3 interfaces?
Message-ID: <D0D93DE6.221AB%davidjoshuaevans@gmail.com>

Hi,

If I add vmnet3 dpdk compatible driver to ovs, I cannot use it in ovs
because it requires multiq?
What does this mean?
Could I change it?

Regards,

Dave.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/643824ed/attachment.html>

From shankari.v.2014 at gmail.com  Mon Jan 12 08:19:06 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Mon, 12 Jan 2015 21:49:06 +0530
Subject: [ovs-discuss] Difference seen in OVSDB initialization with &
 without DPDK
In-Reply-To: <BC0FEEC7D7650749874CEC11314A88F73066BEE7@IRSMSX104.ger.corp.intel.com>
References: <CAGuFQhCur5q5t+q821NzL3vQbEe1OaX=YtNeWhNqCWaLc9WG6Q@mail.gmail.com>
 <CACjuMbzqg_VK+XcMKemrsT1qrEj=8BXQOb4uOHzbuJkQAupxWw@mail.gmail.com>
 <CAGuFQhDLq+2=57B_KbPqKf+EHbN6F66gQzMccfndJsRcj_CM6A@mail.gmail.com>
 <CAGuFQhC-GJDNsR9Dvpfr1q-j4N4xwxV3=PBuRLntxM8ZDzYtCQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F730668104@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhB=zXGRgwK6gHQktsyv_xGuwnZ0cB9c1no1zAOjgdh=8w@mail.gmail.com>
 <CAGuFQhAbpXkhOLuqifrqzTyCPwFi2uVSAQdoMNDEY7XnkK5rWQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F73066A350@IRSMSX104.ger.corp.intel.com>
 <CAGuFQhABV8gvDnaAkaHcd0XR0U8HOvBWUQA3ieLwz7DpmLD0SA@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F73066BEE7@IRSMSX104.ger.corp.intel.com>
Message-ID: <CAGuFQhB1UV6W04NPHiMpo9y37wEqFiOgLfRDBaanQCO=S98BaQ@mail.gmail.com>

Hi Kevin,

Thanks for clarification.
 I was able to run OVS without DPDK immediately after the test below and
the OVSDB initialization went fine without any error.
I agree with you that DPDK may not have any impact on the OVSDB
connectivity.
But I presume that there is some piece of code that is getting invoked when
DPDK is included along with the OVS build and hence preventing the OVSDB
initialization.

Regards
Shankari.V

On Mon, Jan 12, 2015 at 6:49 PM, Traynor, Kevin <kevin.traynor at intel.com>
wrote:

>  I wasn’t able to reproduce and I’m finding it hard to understand how
> it’s DPDK related as that doesn’t affect connection to the ovsdb. So my
> question was about if you have been able to isolate the issue on a clean
> system/clean builds etc to rule out any other issues. Were you able to run
> OVS without DPDK immediately after the test below and it was working?
>
>
>
> If your patch is for OVS (including netdev-dpdk) then submit as normal (
> http://openvswitch.org/development/) , if it’s for the DPDK libraries
> then see http://dpdk.org/dev
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* Shankari Vaidyalingam [mailto:shankari.v.2014 at gmail.com]
> *Sent:* Sunday, January 11, 2015 6:12 PM
>
> *To:* Traynor, Kevin
> *Cc:* Ben Pfaff; discuss at openvswitch.org
> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization with
> & without DPDK
>
>
>
> Hi Kevin,
>
> Sorry I'm not able to get your question
> I have got the above logs when I tried this sequence: reboot; with DPDK;
>
> I'm using OVS version - 2.3.1 and DPDK version - 1.7.1.
>
> The compilation errors are seen in OVS 2.3.1 with DPDK 1.7.1 as well. But
> I have solved those errors and the build proceeds fine. I'd like to submit
> a patch for the same in Git repository. Let me know the process for
> submitting the patch.
>
> Regards
>
> Shankari.V
>
>
>
> On Fri, Jan 9, 2015 at 11:14 PM, Traynor, Kevin <kevin.traynor at intel.com>
> wrote:
>
>  The compile error was consistent with using DPDK 1.8 as the mbuf format
> has changed. I’m not sure why you are getting (bad address) connecting to
> the db only with DPDK as the DPDK code doesn’t have anything to do with
> this. I’ve tried to reproduce but am unable to, my logs below. Did you try
> anything to make sure it’s not system state e.g. reboot; with DPDK; without
> DPDK; with DPDK ?
>
>
>
> [ovs_int]$ sudo ./ovsdb/ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
>
> [ovs_int]$ sudo ./utilities/ovs-vsctl --no-wait --verbose
> init
>
> 2015-01-09T17:34:40Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
>
> 2015-01-09T17:34:40Z|00003|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
>
> 2015-01-09T17:34:40Z|00004|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
>
> 2015-01-09T17:34:40Z|00005|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4
> (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:151
>
> 2015-01-09T17:34:40Z|00006|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connected
>
> 2015-01-09T17:34:40Z|00007|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering ACTIVE
>
> 2015-01-09T17:34:40Z|00008|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> send request, method="monitor",
> params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
>
> 2015-01-09T17:34:40Z|00009|poll_loop|DBG|wakeup due to [POLLIN] on fd 4
> (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd.c:155
>
> 2015-01-09T17:34:40Z|00010|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> received reply,
> result={"Open_vSwitch":{"98aa7f23-74c6-4318-a41b-7c22bef9b6ec":{"new":{}}}},
> id=0
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* Shankari Vaidyalingam [mailto:shankari.v.2014 at gmail.com]
> *Sent:* Wednesday, January 7, 2015 8:39 PM
> *To:* Traynor, Kevin
> *Cc:* Ben Pfaff; discuss at openvswitch.org
>
>
> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization with
> & without DPDK
>
>
>
> Hi
>
> I resolved the below mentioned compiler errors and the build goes fine.
>
> But the issue with the database connectivity still persists. Now the error
> message seen is different. Pls find the logs below. Let me know how to
> resolve this:
>
> controller at controller-Latitude-E5440:~/$ cd openvswitch-2.3.1
> controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-tool create
> /usr/local/etc/openvswitch/conf.db ./vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~/$ sudo ./ovsdb/ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
> controller at controller-Latitude-E5440:~/$ sudo ./utilities/ovs-vsctl
> --no-wait --verbose init
>
> 2015-01-07T20:35:37Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
>  I'm executing here 226
> 2015-01-07T20:35:37Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
> nodes, 8 buckets)
>  DSBG: Name of the session opened =
> unix:/usr/local/var/run/openvswitch/db.sock, pstream_verify_name(name) = 97
> retry = 0
>  Can proceed further
>  About to connect to the dataabase 239
> 2015-01-07T20:35:37Z|00004|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
> 2015-01-07T20:35:37Z|00005|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
> 2015-01-07T20:35:37Z|00006|poll_loop|DBG|wakeup due to [POLLOUT] on fd 4
> (<->/usr/local/var/run/openvswitch/db.sock) at lib/stream-fd-unix.c:120
> 2015-01-07T20:35:37Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connected
> 2015-01-07T20:35:37Z|00008|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering ACTIVE
>  ovsdb_idl_
> is_alive(idl) = 1
> 2015-01-07T20:35:37Z|00009|jsonrpc|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> send request, method="monitor",
> params=["Open_vSwitch",null,{"Open_vSwitch":{"columns":[]}}], id=0
> 2015-01-07T20:35:37Z|00010|jsonrpc|WARN|unix:/usr/local/var/run/openvswitch/db.sock:
> send error: Bad address
> 2015-01-07T20:35:37Z|00011|poll_loop|DBG|wakeup due to 0-ms timeout at
> unix:/usr/local/var/run/openvswitch/db.sock
> 2015-01-07T20:35:37Z|00012|reconnect|WARN|unix:/usr/local/var/run/openvswitch/db.sock:
> connection dropped (Bad address)
> 2015-01-07T20:35:37Z|00013|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
>  DBG: Returning 0 without any action
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Bad address)
>  DBG: Returning 0 without any actioncontroller at controller-Latitude-E5440:~/$
>
>
> Regards
>
> Shankari
>
>
>
> On Thu, Jan 8, 2015 at 1:03 AM, Shankari Vaidyalingam <
> shankari.v.2014 at gmail.com> wrote:
>
>     Hi Kevin
>
> Thanks  for the response.
>
> I used DPDK-1.7.1 and used the same for building the OVS. The OVS version
> I use is OVS 2.3.1.
>
> I followed the steps mentioned in INSTALL.DPDK in
> https://github.com/openvswitch/ovs/blob/master/INSTALL.DPDK.md.
>
> I'm getting the below error while executing the make command. Pls let me
> know whether there exists a patch for resolving the issue. I know how to
> resolve the last 2 errors.
>
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:115:2:
> warning: cast from function call of type 'uintptr_t' to non-matching type
> 'void *' [-Wbad-function-cast]
>   (typeof(ptr))rte_align_floor_int((uintptr_t)ptr, align)
>   ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:133:2:
> note: in expansion of macro 'RTE_PTR_ALIGN_FLOOR'
>   RTE_PTR_ALIGN_FLOOR((typeof(ptr))RTE_PTR_ADD(ptr, (align) - 1), align)
>   ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:151:35:
> note: in expansion of macro 'RTE_PTR_ALIGN_CEIL'
>  #define RTE_PTR_ALIGN(ptr, align) RTE_PTR_ALIGN_CEIL(ptr, align)
>                                    ^
> /home/controller/PoC/LLDP/software/dpdk-1.7.1/x86_64-native-linuxapp-gcc/include/rte_common.h:176:9:
> note: in expansion of macro 'RTE_PTR_ALIGN'
>   return RTE_PTR_ALIGN(ptr, align) == ptr;
>          ^
> In file included from lib/dpif.h:393:0,
>                  from lib/bfd.c:27:
> lib/ofpbuf.h: In function 'ofpbuf_size':
> lib/ofpbuf.h:385:21: error: 'const struct rte_mbuf' has no member named
> 'pkt_len'
>        return b->mbuf.pkt_len;
>                      ^
> lib/ofpbuf.h: In function 'ofpbuf_set_size':
> lib/ofpbuf.h:394:12: error: 'struct rte_mbuf' has no member named 'pkt_len'
>      b->mbuf.pkt_len = v;
>             ^
> In file included from lib/dpif.h:393:0,
>                  from lib/bfd.c:27:
> lib/ofpbuf.h: In function 'ofpbuf_size':
> lib/ofpbuf.h:386:1: warning: control reaches end of non-void function
> [-Wreturn-type]
>  }
>  ^
> make[2]: *** [lib/bfd.lo] Error 1
> make[2]: Leaving directory
> `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory
> `/home/controller/PoC/LLDP/software/openvswitch-2.3.1'
> make: *** [all] Error 2
>
> Regards
>
> Shankari.V
>
>
>
> On Wed, Jan 7, 2015 at 3:56 PM, Traynor, Kevin <kevin.traynor at intel.com>
> wrote:
>
>  I notice in the logs you have
> “/home/controllerdpdk-1.8.0/x86_64-native-linuxapp-gcc”. DPDK 1.8.0 is not
> supported in OVS at present. There is a patch for it but it was causing an
> issue with unit test and is being reworked.
>
>
>
> I’d suggest rebooting and following the steps in INSTALL.dpdk (with DPDK
> 1.7.1)
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* discuss [mailto:discuss-bounces at openvswitch.org] *On Behalf Of *Shankari
> Vaidyalingam
> *Sent:* Tuesday, January 6, 2015 6:56 PM
> *To:* Ben Pfaff
> *Cc:* discuss at openvswitch.org
> *Subject:* Re: [ovs-discuss] Difference seen in OVSDB initialization with
> & without DPDK
>
>
>
> Also to add to the below mail which I'd sent pls find below the output of
> starting OVS with the debugs enabled:
>
> controller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
> sudo ovs-vsctl --no-wait --verbose init[sudo] password for controller:
>
> 2015-01-06T18:51:12Z|00002|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
> 2015-01-06T18:51:12Z|00003|hmap|DBG|lib/shash.c:112: 6 nodes in bucket (16
> nodes, 8 buckets)
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> 2015-01-06T18:51:12Z|00004|stream_unix|DBG|/usr/local/var/run/openvswitch/db.sock:
> connection failed (Connection refused)
> 2015-01-06T18:51:12Z|00005|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connecting...
> 2015-01-06T18:51:12Z|00006|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering CONNECTING
> 2015-01-06T18:51:12Z|00007|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> connection attempt failed (Connection refused)
> 2015-01-06T18:51:12Z|00008|reconnect|INFO|unix:/usr/local/var/run/openvswitch/db.sock:
> waiting 2.15e+06 seconds before reconnect
> 2015-01-06T18:51:12Z|00009|reconnect|DBG|unix:/usr/local/var/run/openvswitch/db.sock:
> entering BACKOFF
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>  DBG: Trying to
> reconnectcontroller at controller-Latitude-E5440:~/PoC/LLDP/software/openvswitch-2.3.1$
> ps -Af | grep ovsdb-server
> root       962     1  0 Jan03 ?        00:00:00 ovsdb-server: monitoring
> pid 963
> (healthy)
>
> root       963   962  0 Jan03 ?        00:00:00 ovsdb-server
> /etc/openvswitch/conf.db -vconsole:emer -vsyslog:err -vfile:info
> --remote=punix:/var/run/openvswitch/db.sock
> --private-key=db:Open_vSwitch,SSL,private_key
> --certificate=db:Open_vSwitch,SSL,certificate
> --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir
> --log-file=/var/log/openvswitch/ovsdb-server.log
> --pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor
> control+ 22079  4381  0 00:21 pts/1    00:00:00 grep --color=auto
> ovsdb-server
>
> Regards
>
> Shankari.V
>
>
>
> On Wed, Jan 7, 2015 at 12:16 AM, Shankari Vaidyalingam <
> shankari.v.2014 at gmail.com> wrote:
>
>    Hi
>
>
>
> The excerpt below was due to a wrong copy paste of the commands at the
> command prompt which gave the error message: "No such file or directory".
>
> The error which I had mentioned in my previous message was:
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovsdb-tool
> create /usr/local/etc/openvswitch/conf.db vswitchd/vswitch.ovsschema
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile --detach
> --log-file
> 2015-01-05T07:11:19Z|00001|vlog|INFO|opened log file
> /usr/local/var/log/openvswitch/ovsdb-server.log
>
>
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo ovs-vsctl
> --no-wait init
>
>  I'm executing here 226
>  Can proceed further
>  About to connect to the dataabase 239
>  ovsdb_idl_is_alive(idl) = 1
>  ==== Entering the database section =====
>  DBG: s->pstream is NULL
>  DBG: s->stream is non NULL
> ovs-vsctl: unix:/usr/local/var/run/openvswitch/db.sock: database
> connection failed (Connection refused)
>
> Regards
>
> Shankari.V
>
>
>
> On Tue, Jan 6, 2015 at 10:27 PM, Ben Pfaff <blp at nicira.com> wrote:
>
> Here's an excerpt from your "with DPDK" log. It looks like you typoed
> a command and therefore ovsdb-server didn't start.
>
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$
> controller at controller-Latitude-E5440:~openvswitch-2.3.1$ sudo
> ovsdb-server /usr/local/etc/openvswitch/conf.db
> --remote=punix:/usr/local/var/run/openvswitch/db.sock
> --remote=db:Open_vSwitch,Open_vSwitch,manager_options --pidfile
> --detach --log-file
> bash: controller at controller-Latitude-E5440:~openvswitch-2.3.1$: No
> such file or directory
>
>
> On Mon, Jan 5, 2015 at 4:11 PM, Shankari Vaidyalingam
> <shankari.v.2014 at gmail.com> wrote:
> > Hi,
> >
> > I tried executing the steps for initializing the OVSDB-server and the OVS
> > given in the below link:
> >
> >
> networkstatic.net/installing-and-configuring-openvswitch-on-ubuntu-12-04-precise-pangolin/
> >
> > I'm using Ubuntu Trusty tahr, OVS version 2.3.1
> >
> > I was able to get the OVS working for the build which I compiled without
> > DPDK.
> > But with DPDK_BUILD configured in the Makefile the build produced
> "Database
> > connection refused" error and the OVS was not getting started because of
> > this error. Kindly help me in resolving this issue.
> >
> > Enclosed the logs separately for "without DPDK" build and for "With DPDK"
> > build
> >
> > Regards,
> > Shankari.V
> >
>
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> >
>
>
>
> --
> "I don't normally do acked-by's.  I think it's my way of avoiding
> getting blamed when it all blows up."               Andrew Morton
>
>
>
>
>
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/be4de45d/attachment-0001.html>

From blp at nicira.com  Mon Jan 12 08:20:08 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 12 Jan 2015 08:20:08 -0800
Subject: [ovs-discuss] 2000 Ports - things aren't working as expected
In-Reply-To: <SNT153-W92BA2DCECC338E2E99DA20E8430@phx.gbl>
References: <SNT153-W92BA2DCECC338E2E99DA20E8430@phx.gbl>
Message-ID: <20150112162008.GE31451@nicira.com>

On Mon, Jan 12, 2015 at 11:23:40AM +1100, Troy Lea wrote:
> I've installed Open vSwitch on Ubuntu 14.04.1 and have tested it successfully. I've been able to create switches with up to 1000 ports and I can poll them via SNMP using MRTG. 
> 
> I've been creating these ports with a simple "for 1..1000 bash script".
> 
> However it does seem though once I start creating more than 800 ports there is an impact on the Ubuntu system. This is noticeable in the time it takes to create each port when the script runs. It's like every port causes the system to take a little longer, kind of exponential.
> 
> Creating 500 ports takes about 5 minutes.

You'll get better performance if you add more than one port in a single
ovs-vsctl execution.

From blp at nicira.com  Mon Jan 12 08:27:43 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 12 Jan 2015 08:27:43 -0800
Subject: [ovs-discuss] 2000 Ports - things aren't working as expected
In-Reply-To: <20150112162008.GE31451@nicira.com>
References: <SNT153-W92BA2DCECC338E2E99DA20E8430@phx.gbl>
 <20150112162008.GE31451@nicira.com>
Message-ID: <20150112162743.GF31451@nicira.com>

On Mon, Jan 12, 2015 at 08:20:08AM -0800, Ben Pfaff wrote:
> On Mon, Jan 12, 2015 at 11:23:40AM +1100, Troy Lea wrote:
> > I've installed Open vSwitch on Ubuntu 14.04.1 and have tested it successfully. I've been able to create switches with up to 1000 ports and I can poll them via SNMP using MRTG. 
> > 
> > I've been creating these ports with a simple "for 1..1000 bash script".
> > 
> > However it does seem though once I start creating more than 800 ports there is an impact on the Ubuntu system. This is noticeable in the time it takes to create each port when the script runs. It's like every port causes the system to take a little longer, kind of exponential.
> > 
> > Creating 500 ports takes about 5 minutes.
> 
> You'll get better performance if you add more than one port in a single
> ovs-vsctl execution.

For example:

    ovs-vsctl add-br br0
    cmds=; for i in {1..5000}; do cmds+=" -- add-port br0 p$i"; done
    time ovs-vsctl $cmds

takes about 7 seconds.

From padmajs80 at gmail.com  Sun Jan 11 11:07:52 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Mon, 12 Jan 2015 00:37:52 +0530
Subject: [ovs-discuss] How to control logging of data
In-Reply-To: <20150111172858.GB27729@nicira.com>
References: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
 <20150109194217.GA31087@nicira.com>
 <D2BAFEF5-C9C4-4839-81BF-DCB4E3A4AE85@cs.stanford.edu>
 <20150111172858.GB27729@nicira.com>
Message-ID: <CACveyy+P4PH-+=qnBFowq6Bf4DvZDM3a6oBgCib5s8P=Tm9Pqw@mail.gmail.com>

HI,
  Thanks for the response.
  The file ovs-vswitchd.log in the path /usr/var/openvswitch grows very
fastly and occupies more space(ard 3 GB).
  But i forgot to delete some logs which i added for debugging purpose. Now
i have removed those logs. Sorry for troubling u. If the problem still
continues will get back to u.
  Btw,Is there a way to stop logging. Please clarify.

Thanks and Regards,
Padma V

Thanks and Regards,
Padma V


On Sun, Jan 11, 2015 at 10:58 PM, Ben Pfaff <blp at nicira.com> wrote:

> Bob: Thanks for the info.
>
> Padma: What kinds of messages are filling up your disk?  Open vSwitch is
> designed to rate-limit messages that are likely to recur, so if it's
> filling up your disk quickly at the default log levels, then that's a
> bug.
>
> On Fri, Jan 09, 2015 at 01:37:12PM -0800, Bob Lantz wrote:
> > [cross-post deleted]
> >
> > I don't think so -  logging appears to be set at "info" level. On my
> development VM (which constantly creates, deletes and reconfigures hundreds
> of OVS bridges) the OVS logs since last July are about 17 MB, which doesn't
> seem terrible.
> >
> > -Bob
> >
> > > On Jan 9, 2015, at 11:42 AM, Ben Pfaff <blp at nicira.com> wrote:
> > >
> > > On Fri, Jan 09, 2015 at 09:41:05AM +0530, Padma Jayasankar wrote:
> > >>   I am using ovs along with mininet and pox. I have installed ovs and
> > >> mininet in a virtual box. Due to ovs logs, i am facing low disk space
> > >> problem..Can v set the logging levels for ovs to avoid it. If so how
> to do
> > >> it. Please clarify.
> > >
> > > That's quite strange.  Does mininet turn the OVS logging level way up?
> > > _______________________________________________
> > > discuss mailing list
> > > discuss at openvswitch.org
> > > http://openvswitch.org/mailman/listinfo/discuss
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/78eb6ade/attachment-0001.html>

From padmajs80 at gmail.com  Sun Jan 11 16:11:15 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Mon, 12 Jan 2015 05:41:15 +0530
Subject: [ovs-discuss] Format of flow entries to use fast fail over group
	type in OF 1.3
Message-ID: <CACveyyKPxkW2X2pnUJaNOhxBeGzUPY1a+B7LjH0j-Ta1zVF_5Q@mail.gmail.com>

Hi,
  I want to use fast fail over group type of OpenFlow 1.3. I need sample
flow entries for doing this. According to my knowledge, we have to change
the action as group table and then add an entry in the group table. but how
to specify in the flow table entry.Please clarify.

Thanks and Regards,
Padma V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/d056acfa/attachment-0001.html>

From padmajs80 at gmail.com  Sun Jan 11 16:11:58 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Mon, 12 Jan 2015 05:41:58 +0530
Subject: [ovs-discuss] How to control logging of data
In-Reply-To: <20150111191240.GJ27729@nicira.com>
References: <CACveyyKo1MoLHy=jms4Hs+uAshBWTochvmZnJpYWS77gcWu=0Q@mail.gmail.com>
 <20150109194217.GA31087@nicira.com>
 <D2BAFEF5-C9C4-4839-81BF-DCB4E3A4AE85@cs.stanford.edu>
 <20150111172858.GB27729@nicira.com>
 <CACveyy+P4PH-+=qnBFowq6Bf4DvZDM3a6oBgCib5s8P=Tm9Pqw@mail.gmail.com>
 <20150111191240.GJ27729@nicira.com>
Message-ID: <CACveyyKtFdHX_QsdPaF4gm5cH-nSZp_pN8gAs3V6oeQ7vh+eXg@mail.gmail.com>

Thank You.

On Mon, Jan 12, 2015 at 12:42 AM, Ben Pfaff <blp at nicira.com> wrote:

> On Mon, Jan 12, 2015 at 12:37:52AM +0530, Padma Jayasankar wrote:
> >   Btw,Is there a way to stop logging. Please clarify.
>
> To restore all default log levels: "ovs-appctl vlog/set info"
> To turn off all logging: "ovs-appctl vlog/set off"
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/4a9d10ec/attachment-0001.html>

From rucha.abhyankar at yahoo.com  Mon Jan 12 01:48:19 2015
From: rucha.abhyankar at yahoo.com (Rucha Abhyankar)
Date: Mon, 12 Jan 2015 09:48:19 +0000 (UTC)
Subject: [ovs-discuss] Kernel crashes after receiving packets via bridge
Message-ID: <534044957.470572.1421056099429.JavaMail.yahoo@jws10932.mail.sg3.yahoo.com>

Hello,I have installed ovs 2.1.0 on ubuntu 13.10 in kernel version 3.11.0-12-generic.
After configuring the bridge, the kernel crashes after receiving the packets and I have to restart the computer. 
What can be the problem.

 Thanks in advance, Rucha 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/b584deca/attachment-0001.html>

From rucha.abhyankar at yahoo.com  Mon Jan 12 01:59:02 2015
From: rucha.abhyankar at yahoo.com (Rucha Abhyankar)
Date: Mon, 12 Jan 2015 09:59:02 +0000 (UTC)
Subject: [ovs-discuss] Ovs controller missing
Message-ID: <430384405.478707.1421056742921.JavaMail.yahoo@jws10925.mail.sg3.yahoo.com>

Hello,I have installed openvswitch 2.1.0 on ubuntu 13. It is successfully installed and working.
But after# ps -ea | grep ovs
Output is:
  782 ?        00:00:00 ovsdb-server
  799 ?        00:00:00 ovs-vswitchd
Controller is not seen in the output.
When I try to install controller separately, it gives an error.
#sudo apt-get install openvswitch-switch openvswitch-controller

I have attached screenshot of the output.
 How can I rectify the problem. 

Thanks in advanceRucha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/a6bedb31/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: controller_missing.png
Type: image/png
Size: 214706 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/a6bedb31/attachment-0001.png>

From swairshah at gmail.com  Mon Jan 12 10:19:06 2015
From: swairshah at gmail.com (swair shah)
Date: Mon, 12 Jan 2015 12:19:06 -0600
Subject: [ovs-discuss] Measuring Buffer Usage in Openvswitch
Message-ID: <CAKRDMx_+JjQ==rpWx0fNp8wVgh3Wxx89h3ZOU_OvhMDOQJ9LYg@mail.gmail.com>

Hi,

When the switch sends OFPT_PACKET_IN message to controller, it buffers the
packet. I want to measure this buffer space usage. Can you point me at the
right code where I can log this particular buffer usage?

thanks,
swair.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150112/21b1a42b/attachment.html>

From jesse at nicira.com  Mon Jan 12 14:03:18 2015
From: jesse at nicira.com (Jesse Gross)
Date: Mon, 12 Jan 2015 14:03:18 -0800
Subject: [ovs-discuss] Kernel crashes after receiving packets via bridge
In-Reply-To: <534044957.470572.1421056099429.JavaMail.yahoo@jws10932.mail.sg3.yahoo.com>
References: <534044957.470572.1421056099429.JavaMail.yahoo@jws10932.mail.sg3.yahoo.com>
Message-ID: <CAEP_g=9NwsXsfy58un1LQBrx1Bc2jOfEFKLLC5QuYx46rqBNsQ@mail.gmail.com>

On Mon, Jan 12, 2015 at 1:48 AM, Rucha Abhyankar
<rucha.abhyankar at yahoo.com> wrote:
> Hello,
> I have installed ovs 2.1.0 on ubuntu 13.10 in kernel version
> 3.11.0-12-generic.
>
> After configuring the bridge, the kernel crashes after receiving the packets
> and I have to restart the computer.
> What can be the problem.

You're going to need to provide a much more detailed report in order
for anyone to have an idea of what is going on, such as a stack trace
or a screenshot of the crash. Please also describe exactly what you
installed/are running.

In addition, 2.1.0 is no longer supported so please also try with a
newer release. I'm guessing that you are using the OVS kernel module
bundled with 3.11 and, if so, that has also been sunset by the kernel
community.

From pshelar at nicira.com  Mon Jan 12 14:39:30 2015
From: pshelar at nicira.com (Pravin Shelar)
Date: Mon, 12 Jan 2015 14:39:30 -0800
Subject: [ovs-discuss] How to apply a patch posted in ovs-dev mailing
	list?
In-Reply-To: <CADs2Enbm7txp7XU23nniqPajpm+zOzUREiSowd1GhWrff6KXzg@mail.gmail.com>
References: <CADs2Enbm7txp7XU23nniqPajpm+zOzUREiSowd1GhWrff6KXzg@mail.gmail.com>
Message-ID: <CALnjE+rGe=YrBpENOxrvtznnp8e124+GgJd+0_cMOfqQccDPQg@mail.gmail.com>

On Sun, Jan 11, 2015 at 5:05 PM, Ji Li <ricky.li.net at gmail.com> wrote:
> Hi all,
>
> I am working on a project related to ovs user space tunneling and I found a
> patch posted in ovs-dev mailing list:
>
> http://openvswitch.org/pipermail/dev/2014-October/047443.html
>
> I want to apply this patch and have a test on my side, but I don't know
> which version of ovs source code is the base code for this patch? Or is
> there any tool to identify the corresponding base code version for this
> patch?
>
If you want to test the patch, you can use OVS master branch. It has
userspace tunneling already merged. Ref to README-native-tunneling.md
for more info.


> Many thanks for helping me on this stupid question. :)
>
> Thank you,
> Ricky
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From blp at nicira.com  Mon Jan 12 19:55:12 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 12 Jan 2015 19:55:12 -0800
Subject: [ovs-discuss] Measuring Buffer Usage in Openvswitch
In-Reply-To: <CAKRDMx_+JjQ==rpWx0fNp8wVgh3Wxx89h3ZOU_OvhMDOQJ9LYg@mail.gmail.com>
References: <CAKRDMx_+JjQ==rpWx0fNp8wVgh3Wxx89h3ZOU_OvhMDOQJ9LYg@mail.gmail.com>
Message-ID: <20150113035512.GC11396@nicira.com>

On Mon, Jan 12, 2015 at 12:19:06PM -0600, swair shah wrote:
> When the switch sends OFPT_PACKET_IN message to controller, it buffers the
> packet. I want to measure this buffer space usage. Can you point me at the
> right code where I can log this particular buffer usage?

ofproto/pktbuf.c

From blp at nicira.com  Mon Jan 12 20:00:07 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 12 Jan 2015 20:00:07 -0800
Subject: [ovs-discuss] Ovs controller missing
In-Reply-To: <430384405.478707.1421056742921.JavaMail.yahoo@jws10925.mail.sg3.yahoo.com>
References: <430384405.478707.1421056742921.JavaMail.yahoo@jws10925.mail.sg3.yahoo.com>
Message-ID: <20150113040007.GD11396@nicira.com>

On Mon, Jan 12, 2015 at 09:59:02AM +0000, Rucha Abhyankar wrote:
> Hello,I have installed openvswitch 2.1.0 on ubuntu 13. It is successfully installed and working.
> But after# ps -ea | grep ovs
> Output is:
>   782 ?        00:00:00 ovsdb-server
>   799 ?        00:00:00 ovs-vswitchd
> Controller is not seen in the output.
> When I try to install controller separately, it gives an error.
> #sudo apt-get install openvswitch-switch openvswitch-controller
> 
> I have attached screenshot of the output.
>  How can I rectify the problem. 

Why do you want to run ovs-controller?

From blp at nicira.com  Mon Jan 12 20:08:04 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 12 Jan 2015 20:08:04 -0800
Subject: [ovs-discuss] Seeking Downstream Stakeholders for Open vSwitch
Message-ID: <20150113040804.GG11396@nicira.com>

Open vSwitch has a new vulnerability management process:

        https://github.com/openvswitch/ovs/blob/master/SECURITY.md

Step 4 in this process is "Embargoed Disclosure", in which the security
advisory and patches are sent to downstream stakeholders, who are major
Open vSwitch users or distributors.  We are now inviting users to apply
to join the list of downstream stakeholders.  To apply as a
representative of a downstream stakeholder, please send an email to
security at openvswitch.org.  Please include a few sentences on how your
organization uses Open vSwitch and why you are an appropriate
representative.

From dsingh at merunetworks.com  Tue Jan 13 00:49:01 2015
From: dsingh at merunetworks.com (Deepak Singh)
Date: Tue, 13 Jan 2015 08:49:01 +0000
Subject: [ovs-discuss] Setting the tcp buffer
Message-ID: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>

Hi ,

How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?



Thanks,
Deepak

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150113/9b7e98fd/attachment-0001.html>

From rsachidev at onecloudinc.com  Tue Jan 13 02:36:42 2015
From: rsachidev at onecloudinc.com (Renuka Sachidev)
Date: Tue, 13 Jan 2015 16:06:42 +0530
Subject: [ovs-discuss] OVS 2.3.90 Multicast to different Subnets
Message-ID: <001601d02f1c$e247a400$a6d6ec00$@com>

Greeting,

 

I've been following up OpenVSwitch threads lately and sounds pretty much
interesting.

Do appreciate all those who are helping out to the community. Hopefully
would join soon the bandwagon of OVS community to contribute.

 

My interest lies in testing and getting a solution out from OVS to Openstack
community on Multicast areas.

And wanted to know if there is any provision to test the scenarios of
Sending the Multicast packets from One subnet to another subnet having the
Neutron Router. I know for sure that the Multicast works with-in the same
subnet with OVS, but wanted some way to forward those packets on to other
subnet connected to the same router (neutron router). I tried to look up on
PIM (SM/DM) support on Openstack and was not able to get anything from
there. 

 

I know experts over OVS has greater knowledge and hence posting this
question here and @ "dev"

 

e.g Multicast Sender VM is on 192.x.x.x network and would like to receive
the packets on 20.x.x.x. 

 

[This diagram is best viewed with Courier New Font size 10]

+       +--------+      +       +

|-------| Router |<---->|192.   |20. 

|P      +--------+      |168.   |10.

|u           ^          |x.     |x.

|b           |          |x      |x.

|l           +----------------->|

|i                              |

|c                              +

|                               

+

 

Appreciate any directions to the above mentioned scenario.

 

Thank you,

Renuka

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150113/08befd8f/attachment.html>

From jpettit at nicira.com  Tue Jan 13 11:28:34 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Tue, 13 Jan 2015 11:28:34 -0800
Subject: [ovs-discuss] OVN, Bringing Native Virtual Networking to OVS
Message-ID: <74660AF6-F584-4658-BD75-09D4A60A56BB@nicira.com>

The Open vSwitch team is pleased to announce OVN, a new subproject in development within the Open vSwitch.  The full project announcement is at Network Heresy and reproduced below.  OVN complements the existing capabilities of OVS to add native support for virtual network abstractions, such as virtual L2 and L3 overlays and security groups.  Just like OVS, our design goal is to have a production-quality implementation that can operate at significant scale.

--The Open vSwitch Team


-=-=-=-=-=-=-=-=-=-

OVN, Bringing Native Virtual Networking to OVS

By Justin Pettit, Ben Pfaff, Chris Wright, and Madhu Venugopal


Today we are excited to announce Open Virtual Network (OVN), a new project that brings virtual networking to the OVS user community. OVN complements the existing capabilities of OVS to add native support for virtual network abstractions, such as virtual L2 and L3 overlays and security groups. Just like OVS, our design goal is to have a production quality implementation that can operate at significant scale. 

Why are we doing this? The primary goal in developing Open vSwitch has always been to provide a production-ready low-level networking component for hypervisors that could support a diverse range of network environments.  As one example of the success of this approach, Open vSwitch is the most popular choice of virtual switch in OpenStack deployments. To make OVS more effective in these environments, we believe the logical next step is to augment the low-level switching capabilities with a lightweight control plane that provides native support for common virtual networking abstractions.

To achieve these goals, OVN's design is narrowly focused on providing L2/L3 virtual networking. This distinguishes OVN from general-purpose SDN controllers or platforms.

OVN is a new project from the Open vSwitch team to support virtual network abstraction. OVN will put users in control over cloud network resources, by allowing users to connect groups of VMs or containers into private L2 and L3 networks, quickly, programmatically, and without the need to provision VLANs or other physical network resources.  OVN will include logical switches and routers, security groups, and L2/L3/L4 ACLs, implemented on top of a tunnel-based (VXLAN, NVGRE, Geneve, STT, IPsec) overlay network.  

OVN aims to be sufficiently robust and scalable to support large production deployments. OVN will support the same virtual machine environments as Open vSwitch, including KVM, Xen, and the emerging port to Hyper-V.  Container systems such as Docker are growing in importance but pose new challenges in scale and responsiveness, so we will work with the container community to ensure quality native support.  For physical-logical network integration, OVN will implement software gateways, as well as support hardware gateways from vendors that implement the “vtep” schema that ships with OVS.

Northbound, we will work with the OpenStack community to integrate OVN via a new plugin.  The OVN architecture will simplify the current Open vSwitch integration within Neutron by providing a virtual networking abstraction.  OVN will provide Neutron with improved dataplane performance through shortcut, distributed logical L3 processing and in-kernel based security groups, without running special OpenStack agents on hypervisors. Lastly, it will provide a scale-out and highly available gateway solution responsible for bridging from logical into physical space.

The Open vSwitch team will build and maintain OVN under the same open source license terms as Open vSwitch, and is open to contributions from all.  The outline of OVN’s design is guided by our experience developing Open vSwitch, OpenStack, and Nicira/VMware’s networking solutions.  We will evolve the design and implementation in the Open vSwitch mailing lists, using the same open process used for Open vSwitch.

OVN will not require a special build of OVS or OVN-specific changes to ovs-vswitchd or ovsdb-server.  OVN components will be part of the Open vSwitch source and binary distributions.  OVN will integrate with existing Open vSwitch components, using established protocols such as OpenFlow and OVSDB, using an OVN agent that connects to ovs-vswitchd and ovsdb-server.  (The VTEP emulator already in OVS’s “vtep” directory uses a similar architecture.)  

OVN is not a generic platform or SDN controller on which applications are built.  Rather, OVN will be purpose built to provide virtual networking.  Because OVN will use the same interfaces as any other controller, OVS will remain as flexible and unspecialized as it is today.  It will still provide the same primitives that it always has and continue to be the best software switch for any controller.

The design and implementation will occur on the ovs-dev mailing list.  In fact, a high-level description of the architecture was posted this morning.  If you’d like to join the effort, please check out the mailing list.

Happy switching!



From mestery at mestery.com  Tue Jan 13 11:41:33 2015
From: mestery at mestery.com (Kyle Mestery)
Date: Tue, 13 Jan 2015 13:41:33 -0600
Subject: [ovs-discuss] OVN, Bringing Native Virtual Networking to OVS
In-Reply-To: <74660AF6-F584-4658-BD75-09D4A60A56BB@nicira.com>
References: <74660AF6-F584-4658-BD75-09D4A60A56BB@nicira.com>
Message-ID: <CAL3VkVygX21J70DnfG2MbkvjMbG+WAUKyiN5fD1WBy5ciBY+6w@mail.gmail.com>

On Tue, Jan 13, 2015 at 1:28 PM, Justin Pettit <jpettit at nicira.com> wrote:

> The Open vSwitch team is pleased to announce OVN, a new subproject in
> development within the Open vSwitch.  The full project announcement is at
> Network Heresy and reproduced below.  OVN complements the existing
> capabilities of OVS to add native support for virtual network abstractions,
> such as virtual L2 and L3 overlays and security groups.  Just like OVS, our
> design goal is to have a production-quality implementation that can operate
> at significant scale.
>
> --The Open vSwitch Team
>
> I'll be the first to say it:

"Awesome!"

Looking forward to seeing this evolve and develop inside the OVS project!

Thanks,
Kyle


> -=-=-=-=-=-=-=-=-=-
>
> OVN, Bringing Native Virtual Networking to OVS
>
> By Justin Pettit, Ben Pfaff, Chris Wright, and Madhu Venugopal
>
>
> Today we are excited to announce Open Virtual Network (OVN), a new project
> that brings virtual networking to the OVS user community. OVN complements
> the existing capabilities of OVS to add native support for virtual network
> abstractions, such as virtual L2 and L3 overlays and security groups. Just
> like OVS, our design goal is to have a production quality implementation
> that can operate at significant scale.
>
> Why are we doing this? The primary goal in developing Open vSwitch has
> always been to provide a production-ready low-level networking component
> for hypervisors that could support a diverse range of network
> environments.  As one example of the success of this approach, Open vSwitch
> is the most popular choice of virtual switch in OpenStack deployments. To
> make OVS more effective in these environments, we believe the logical next
> step is to augment the low-level switching capabilities with a lightweight
> control plane that provides native support for common virtual networking
> abstractions.
>
> To achieve these goals, OVN's design is narrowly focused on providing
> L2/L3 virtual networking. This distinguishes OVN from general-purpose SDN
> controllers or platforms.
>
> OVN is a new project from the Open vSwitch team to support virtual network
> abstraction. OVN will put users in control over cloud network resources, by
> allowing users to connect groups of VMs or containers into private L2 and
> L3 networks, quickly, programmatically, and without the need to provision
> VLANs or other physical network resources.  OVN will include logical
> switches and routers, security groups, and L2/L3/L4 ACLs, implemented on
> top of a tunnel-based (VXLAN, NVGRE, Geneve, STT, IPsec) overlay network.
>
> OVN aims to be sufficiently robust and scalable to support large
> production deployments. OVN will support the same virtual machine
> environments as Open vSwitch, including KVM, Xen, and the emerging port to
> Hyper-V.  Container systems such as Docker are growing in importance but
> pose new challenges in scale and responsiveness, so we will work with the
> container community to ensure quality native support.  For physical-logical
> network integration, OVN will implement software gateways, as well as
> support hardware gateways from vendors that implement the “vtep” schema
> that ships with OVS.
>
> Northbound, we will work with the OpenStack community to integrate OVN via
> a new plugin.  The OVN architecture will simplify the current Open vSwitch
> integration within Neutron by providing a virtual networking abstraction.
> OVN will provide Neutron with improved dataplane performance through
> shortcut, distributed logical L3 processing and in-kernel based security
> groups, without running special OpenStack agents on hypervisors. Lastly, it
> will provide a scale-out and highly available gateway solution responsible
> for bridging from logical into physical space.
>
> The Open vSwitch team will build and maintain OVN under the same open
> source license terms as Open vSwitch, and is open to contributions from
> all.  The outline of OVN’s design is guided by our experience developing
> Open vSwitch, OpenStack, and Nicira/VMware’s networking solutions.  We will
> evolve the design and implementation in the Open vSwitch mailing lists,
> using the same open process used for Open vSwitch.
>
> OVN will not require a special build of OVS or OVN-specific changes to
> ovs-vswitchd or ovsdb-server.  OVN components will be part of the Open
> vSwitch source and binary distributions.  OVN will integrate with existing
> Open vSwitch components, using established protocols such as OpenFlow and
> OVSDB, using an OVN agent that connects to ovs-vswitchd and ovsdb-server.
> (The VTEP emulator already in OVS’s “vtep” directory uses a similar
> architecture.)
>
> OVN is not a generic platform or SDN controller on which applications are
> built.  Rather, OVN will be purpose built to provide virtual networking.
> Because OVN will use the same interfaces as any other controller, OVS will
> remain as flexible and unspecialized as it is today.  It will still provide
> the same primitives that it always has and continue to be the best software
> switch for any controller.
>
> The design and implementation will occur on the ovs-dev mailing list.  In
> fact, a high-level description of the architecture was posted this
> morning.  If you’d like to join the effort, please check out the mailing
> list.
>
> Happy switching!
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150113/04d8e3eb/attachment-0001.html>

From Chris at waxery.com  Tue Jan 13 12:32:55 2015
From: Chris at waxery.com (Chris Beasley)
Date: Tue, 13 Jan 2015 20:32:55 +0000
Subject: [ovs-discuss] Does OpenVswitch support IP over Infiniband yet?
Message-ID: <0df8727cbac04418876c793e71ba03be@mbx1.waxery.com>

Hi,

I've read a number of mailing list posts and forum posts regarding the use of IPoIB that seem to indicate a lack of support in Openvswitch for the mac address length.  Has this been changed in the newer versions?  I'm currently looking at infiniband HBAs for a cheap 10Gbps network in Xenserver but unless OVS has support for the cards then what I have read suggests it won't work well.

Thanks,

Chris


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150113/d87c5498/attachment.html>

From blp at nicira.com  Tue Jan 13 12:35:16 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 12:35:16 -0800
Subject: [ovs-discuss] Does OpenVswitch support IP over Infiniband yet?
In-Reply-To: <0df8727cbac04418876c793e71ba03be@mbx1.waxery.com>
References: <0df8727cbac04418876c793e71ba03be@mbx1.waxery.com>
Message-ID: <20150113203516.GA14864@nicira.com>

On Tue, Jan 13, 2015 at 08:32:55PM +0000, Chris Beasley wrote:
> I've read a number of mailing list posts and forum posts regarding
> the use of IPoIB that seem to indicate a lack of support in
> Openvswitch for the mac address length.  Has this been changed in
> the newer versions?  I'm currently looking at infiniband HBAs for a
> cheap 10Gbps network in Xenserver but unless OVS has support for the
> cards then what I have read suggests it won't work well.

OVS doesn't have any special support for IP over Infiniband.

From Chris at waxery.com  Tue Jan 13 12:48:23 2015
From: Chris at waxery.com (Chris Beasley)
Date: Tue, 13 Jan 2015 20:48:23 +0000
Subject: [ovs-discuss] Does OpenVswitch support IP over Infiniband yet?
In-Reply-To: <20150113203516.GA14864@nicira.com>
References: <0df8727cbac04418876c793e71ba03be@mbx1.waxery.com>
 <20150113203516.GA14864@nicira.com>
Message-ID: <5e62de8098b44239aa93bf2b16a59544@mbx1.waxery.com>

Hi Ben,

Thanks.  Sorry I suppose I should have been a little more specific.

The issue that I can tell (from recent posts on the Citrix support forum) relates to the length of the MAC address.  Infiniband HBA's appear to have a length greater than 6 bytes (?) which was the limit I found OVS uses for MAC addresses in various posts.  This renders OVS from working when bridging Infiniband cards to Virtual Machines as it truncates to the MAC to 6 bytes and therefore cannot  use the HBA.  Using linux bridging does work, but for things like Xenserver I'm not sure what it would mean.

Cheers,

Chris

-----Original Message-----
From: Ben Pfaff [mailto:blp at nicira.com] 
Sent: Wednesday, 14 January 2015 9:35 a.m.
To: Chris Beasley
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] Does OpenVswitch support IP over Infiniband yet?

On Tue, Jan 13, 2015 at 08:32:55PM +0000, Chris Beasley wrote:
> I've read a number of mailing list posts and forum posts regarding the 
> use of IPoIB that seem to indicate a lack of support in Openvswitch 
> for the mac address length.  Has this been changed in the newer 
> versions?  I'm currently looking at infiniband HBAs for a cheap 10Gbps 
> network in Xenserver but unless OVS has support for the cards then 
> what I have read suggests it won't work well.

OVS doesn't have any special support for IP over Infiniband.

From blp at nicira.com  Tue Jan 13 12:53:30 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 12:53:30 -0800
Subject: [ovs-discuss] Does OpenVswitch support IP over Infiniband yet?
In-Reply-To: <5e62de8098b44239aa93bf2b16a59544@mbx1.waxery.com>
References: <0df8727cbac04418876c793e71ba03be@mbx1.waxery.com>
 <20150113203516.GA14864@nicira.com>
 <5e62de8098b44239aa93bf2b16a59544@mbx1.waxery.com>
Message-ID: <20150113205330.GB14864@nicira.com>

OVS forwards Ethernet packets, which contain 6-byte MAC addresses.
OVS has some support for forwarding IPv4 and IPv6 as well, which don't
contain any MAC addresses at all.  I don't know how OVS would even
encounter Infiniband frames.

On Tue, Jan 13, 2015 at 08:48:23PM +0000, Chris Beasley wrote:
> Hi Ben,
> 
> Thanks.  Sorry I suppose I should have been a little more specific.
> 
> The issue that I can tell (from recent posts on the Citrix support
> forum) relates to the length of the MAC address.  Infiniband HBA's
> appear to have a length greater than 6 bytes (?) which was the limit
> I found OVS uses for MAC addresses in various posts.  This renders
> OVS from working when bridging Infiniband cards to Virtual Machines
> as it truncates to the MAC to 6 bytes and therefore cannot use the
> HBA.  Using linux bridging does work, but for things like Xenserver
> I'm not sure what it would mean.
> 
> Cheers,
> 
> Chris
> 
> -----Original Message-----
> From: Ben Pfaff [mailto:blp at nicira.com] 
> Sent: Wednesday, 14 January 2015 9:35 a.m.
> To: Chris Beasley
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Does OpenVswitch support IP over Infiniband yet?
> 
> On Tue, Jan 13, 2015 at 08:32:55PM +0000, Chris Beasley wrote:
> > I've read a number of mailing list posts and forum posts regarding the 
> > use of IPoIB that seem to indicate a lack of support in Openvswitch 
> > for the mac address length.  Has this been changed in the newer 
> > versions?  I'm currently looking at infiniband HBAs for a cheap 10Gbps 
> > network in Xenserver but unless OVS has support for the cards then 
> > what I have read suggests it won't work well.
> 
> OVS doesn't have any special support for IP over Infiniband.

From blp at nicira.com  Tue Jan 13 13:18:19 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 13:18:19 -0800
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
Message-ID: <20150113211819.GC14864@nicira.com>

On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?

What are you really trying to accomplish?  It isn't usually useful to
hand-tune TCP buffer sizes.

lib/stream-tcp.c has the code that opens and accepts TCP connections,
so that might be a good place to adjust buffer size.

From yamamoto at valinux.co.jp  Tue Jan 13 18:30:23 2015
From: yamamoto at valinux.co.jp (YAMAMOTO Takashi)
Date: Wed, 14 Jan 2015 11:30:23 +0900 (JST)
Subject: [ovs-discuss] Failure building ovs on Freebsd 9.3
In-Reply-To: Your message of "Fri, 2 Jan 2015 18:40:56 -0800"
 <CAArS4XUtuETQ3GwUCsQmMGwgRLUqXZu45D0MfhU6M6sNkD2ewA@mail.gmail.com>
References: <CAArS4XUtuETQ3GwUCsQmMGwgRLUqXZu45D0MfhU6M6sNkD2ewA@mail.gmail.com>
Message-ID: <20150114023023.26DB670A08@kuma.localdomain>

hi,

> Hey Yamamoto,
> 
> Having trouble building ovs on my freebsd 9.3 release (VM).
> 
> I installed 'gmake, automake, python27, py27-xml, openssl', and the
> clang version is: 3.4.1 (I had same issue with gcc as well).
> 
> When I execute `./boot.sh ; ./configure; gmake -j32` on ovs master,
> I failed with
> 
> */usr/include/netinet/ip6.h:82: error: field 'ip6_src' has incomplete type*
> 
> */usr/include/netinet/ip6.h:83: error: field 'ip6_dst' has incomplete type*
> Seems to me, there is something wrong with the POSIX macro tests
> which caused the /usr/include/netinet6/in6.h not included.
> 
> Have you encountered similar issue?~  Is there any special
> configuration (not included in INSTALL.NetBSD) for make and make
> check ovs?

sorry for delay.  i've been offline for newyear holidays.

i've seen similar issues on NetBSD but not this exact one.
probably because the header is indirectly included via other
headers on NetBSD.

your committed fix seems reasonable.

YAMAMOTO Takashi

> 
> 
> Thanks,
> Alex Wang,

From blp at nicira.com  Tue Jan 13 20:52:49 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 20:52:49 -0800
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
Message-ID: <20150114045249.GC17092@nicira.com>

It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in
ovs-vswitchd, maybe you could explain further?

On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> 
> ________________________________________
> From: Ben Pfaff [blp at nicira.com]
> Sent: 14 January 2015 02:48:19
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> 
> What are you really trying to accomplish?  It isn't usually useful to
> hand-tune TCP buffer sizes.
> 
> lib/stream-tcp.c has the code that opens and accepts TCP connections,
> so that might be a good place to adjust buffer size.

From blp at nicira.com  Tue Jan 13 21:16:38 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 21:16:38 -0800
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
Message-ID: <20150114051638.GE17092@nicira.com>

I'm afraid that none of this makes sense to me, sorry.

On Wed, Jan 14, 2015 at 05:14:49AM +0000, Deepak Singh wrote:
> I am using the unix socket . From ovs-vsctl side i am opening a client socket who send the size of the TCP buffer . And ovs-vswitchd side i am opening the server socket who keep running for client and receive the buffer size and call the setsockopt for fd .
> For this FD i am creating a new thread who will get the stream->fd(br->ofproto->ofconn->rconn->vconn_stream->stream->fd) . But one problem is coming when i using HMAP_FOR_EACH (br, node, &all_bridges) and further calling the find_controller_by_target to get ofconn pointer but this ofconn is coming NULL .
> 
> 
> -----Original Message-----
> From: Ben Pfaff [mailto:blp at nicira.com] 
> Sent: 14 January 2015 10:23
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in ovs-vswitchd, maybe you could explain further?
> 
> On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> > packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> > Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> > 
> > ________________________________________
> > From: Ben Pfaff [blp at nicira.com]
> > Sent: 14 January 2015 02:48:19
> > To: Deepak Singh
> > Cc: discuss at openvswitch.org
> > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > 
> > On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> > 
> > What are you really trying to accomplish?  It isn't usually useful to 
> > hand-tune TCP buffer sizes.
> > 
> > lib/stream-tcp.c has the code that opens and accepts TCP connections, 
> > so that might be a good place to adjust buffer size.

From blp at nicira.com  Tue Jan 13 21:46:56 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 21:46:56 -0800
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <D68445AEE938844D8378F38C93C02D170F166F23@STAR.merunetworks.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
 <20150114051638.GE17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166F23@STAR.merunetworks.com>
Message-ID: <20150114054656.GF17092@nicira.com>

I'd like a better explanation of the problem first.  So far, your
explanation is so barebones that I'm not confident that TCP buffer size
is the solution.

On Wed, Jan 14, 2015 at 05:44:47AM +0000, Deepak Singh wrote:
> Could you suggest the way i can do this ?
> 
> -----Original Message-----
> From: Ben Pfaff [mailto:blp at nicira.com] 
> Sent: 14 January 2015 10:47
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> I'm afraid that none of this makes sense to me, sorry.
> 
> On Wed, Jan 14, 2015 at 05:14:49AM +0000, Deepak Singh wrote:
> > I am using the unix socket . From ovs-vsctl side i am opening a client socket who send the size of the TCP buffer . And ovs-vswitchd side i am opening the server socket who keep running for client and receive the buffer size and call the setsockopt for fd .
> > For this FD i am creating a new thread who will get the stream->fd(br->ofproto->ofconn->rconn->vconn_stream->stream->fd) . But one problem is coming when i using HMAP_FOR_EACH (br, node, &all_bridges) and further calling the find_controller_by_target to get ofconn pointer but this ofconn is coming NULL .
> > 
> > 
> > -----Original Message-----
> > From: Ben Pfaff [mailto:blp at nicira.com]
> > Sent: 14 January 2015 10:23
> > To: Deepak Singh
> > Cc: discuss at openvswitch.org
> > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > 
> > It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in ovs-vswitchd, maybe you could explain further?
> > 
> > On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> > > packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> > > Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> > > 
> > > ________________________________________
> > > From: Ben Pfaff [blp at nicira.com]
> > > Sent: 14 January 2015 02:48:19
> > > To: Deepak Singh
> > > Cc: discuss at openvswitch.org
> > > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > > 
> > > On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > > > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > > > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> > > 
> > > What are you really trying to accomplish?  It isn't usually useful 
> > > to hand-tune TCP buffer sizes.
> > > 
> > > lib/stream-tcp.c has the code that opens and accepts TCP 
> > > connections, so that might be a good place to adjust buffer size.

From blp at nicira.com  Tue Jan 13 22:02:45 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 13 Jan 2015 22:02:45 -0800
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <D68445AEE938844D8378F38C93C02D170F166F49@STAR.merunetworks.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
 <20150114051638.GE17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166F23@STAR.merunetworks.com>
 <20150114054656.GF17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166F49@STAR.merunetworks.com>
Message-ID: <20150114060245.GG17092@nicira.com>

So you're using TCP buffer sizes as a form of QoS for two competing
streams?  I haven't heard of this before, and it seems too simple to
work.  I'd like to see some support for the idea that this is actually
an effective approach.  Can you sketch out an intuitive explanation of
how and why it works, or point to some paper or article describing this
or something similar?

On Wed, Jan 14, 2015 at 05:57:27AM +0000, Deepak Singh wrote:
> We are creating the priority queue .For low priority packet-in packets
> are pre-empted . So high priority packet-in cannot be send to odl when
> TCP buffer on the openflow switch is congested . To avoid the problem
> ,TCP buffer size has to be configurable if needed.
> 
> -----Original Message-----
> From: Ben Pfaff [mailto:blp at nicira.com] 
> Sent: 14 January 2015 11:17
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> I'd like a better explanation of the problem first.  So far, your explanation is so barebones that I'm not confident that TCP buffer size is the solution.
> 
> On Wed, Jan 14, 2015 at 05:44:47AM +0000, Deepak Singh wrote:
> > Could you suggest the way i can do this ?
> > 
> > -----Original Message-----
> > From: Ben Pfaff [mailto:blp at nicira.com]
> > Sent: 14 January 2015 10:47
> > To: Deepak Singh
> > Cc: discuss at openvswitch.org
> > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > 
> > I'm afraid that none of this makes sense to me, sorry.
> > 
> > On Wed, Jan 14, 2015 at 05:14:49AM +0000, Deepak Singh wrote:
> > > I am using the unix socket . From ovs-vsctl side i am opening a client socket who send the size of the TCP buffer . And ovs-vswitchd side i am opening the server socket who keep running for client and receive the buffer size and call the setsockopt for fd .
> > > For this FD i am creating a new thread who will get the stream->fd(br->ofproto->ofconn->rconn->vconn_stream->stream->fd) . But one problem is coming when i using HMAP_FOR_EACH (br, node, &all_bridges) and further calling the find_controller_by_target to get ofconn pointer but this ofconn is coming NULL .
> > > 
> > > 
> > > -----Original Message-----
> > > From: Ben Pfaff [mailto:blp at nicira.com]
> > > Sent: 14 January 2015 10:23
> > > To: Deepak Singh
> > > Cc: discuss at openvswitch.org
> > > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > > 
> > > It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in ovs-vswitchd, maybe you could explain further?
> > > 
> > > On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> > > > packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> > > > Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> > > > 
> > > > ________________________________________
> > > > From: Ben Pfaff [blp at nicira.com]
> > > > Sent: 14 January 2015 02:48:19
> > > > To: Deepak Singh
> > > > Cc: discuss at openvswitch.org
> > > > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > > > 
> > > > On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > > > > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > > > > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> > > > 
> > > > What are you really trying to accomplish?  It isn't usually useful 
> > > > to hand-tune TCP buffer sizes.
> > > > 
> > > > lib/stream-tcp.c has the code that opens and accepts TCP 
> > > > connections, so that might be a good place to adjust buffer size.

From fededido91 at hotmail.it  Tue Jan 13 13:09:06 2015
From: fededido91 at hotmail.it (Federico Di Domenicantonio)
Date: Tue, 13 Jan 2015 22:09:06 +0100
Subject: [ovs-discuss] Dpif-netdev datapath capabilities
Message-ID: <DUB127-W260B255EC6CA4A1B674F55BF400@phx.gbl>

Hello,

I'm trying to implement an OpenFlow modification to Open vSwitch userspace-only implementation (dpif-netdev) for my thesis.

What I fail to accomplish is to find where the datapath capabilities (one of enum ofp1x_capabilities) are set, and how to access them inside the dpif-netdev.c code; going more in detail, I need to check if the datapath has a capability immediately before the flow lookup.

Thank you in advance,

Federico Di Domenicantonio
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150113/88ec848e/attachment-0001.html>

From dsingh at merunetworks.com  Tue Jan 13 18:02:13 2015
From: dsingh at merunetworks.com (Deepak Singh)
Date: Wed, 14 Jan 2015 02:02:13 +0000
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <20150113211819.GC14864@nicira.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>,
 <20150113211819.GC14864@nicira.com>
Message-ID: <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>


packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 

________________________________________
From: Ben Pfaff [blp at nicira.com]
Sent: 14 January 2015 02:48:19
To: Deepak Singh
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] Setting the tcp buffer

On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?

What are you really trying to accomplish?  It isn't usually useful to
hand-tune TCP buffer sizes.

lib/stream-tcp.c has the code that opens and accepts TCP connections,
so that might be a good place to adjust buffer size.

From dsingh at merunetworks.com  Tue Jan 13 21:14:49 2015
From: dsingh at merunetworks.com (Deepak Singh)
Date: Wed, 14 Jan 2015 05:14:49 +0000
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <20150114045249.GC17092@nicira.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
Message-ID: <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>

I am using the unix socket . From ovs-vsctl side i am opening a client socket who send the size of the TCP buffer . And ovs-vswitchd side i am opening the server socket who keep running for client and receive the buffer size and call the setsockopt for fd .
For this FD i am creating a new thread who will get the stream->fd(br->ofproto->ofconn->rconn->vconn_stream->stream->fd) . But one problem is coming when i using HMAP_FOR_EACH (br, node, &all_bridges) and further calling the find_controller_by_target to get ofconn pointer but this ofconn is coming NULL .


-----Original Message-----
From: Ben Pfaff [mailto:blp at nicira.com] 
Sent: 14 January 2015 10:23
To: Deepak Singh
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] Setting the tcp buffer

It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in ovs-vswitchd, maybe you could explain further?

On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> 
> ________________________________________
> From: Ben Pfaff [blp at nicira.com]
> Sent: 14 January 2015 02:48:19
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> 
> What are you really trying to accomplish?  It isn't usually useful to 
> hand-tune TCP buffer sizes.
> 
> lib/stream-tcp.c has the code that opens and accepts TCP connections, 
> so that might be a good place to adjust buffer size.

From dsingh at merunetworks.com  Tue Jan 13 21:44:47 2015
From: dsingh at merunetworks.com (Deepak Singh)
Date: Wed, 14 Jan 2015 05:44:47 +0000
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <20150114051638.GE17092@nicira.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
 <20150114051638.GE17092@nicira.com>
Message-ID: <D68445AEE938844D8378F38C93C02D170F166F23@STAR.merunetworks.com>

Could you suggest the way i can do this ?

-----Original Message-----
From: Ben Pfaff [mailto:blp at nicira.com] 
Sent: 14 January 2015 10:47
To: Deepak Singh
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] Setting the tcp buffer

I'm afraid that none of this makes sense to me, sorry.

On Wed, Jan 14, 2015 at 05:14:49AM +0000, Deepak Singh wrote:
> I am using the unix socket . From ovs-vsctl side i am opening a client socket who send the size of the TCP buffer . And ovs-vswitchd side i am opening the server socket who keep running for client and receive the buffer size and call the setsockopt for fd .
> For this FD i am creating a new thread who will get the stream->fd(br->ofproto->ofconn->rconn->vconn_stream->stream->fd) . But one problem is coming when i using HMAP_FOR_EACH (br, node, &all_bridges) and further calling the find_controller_by_target to get ofconn pointer but this ofconn is coming NULL .
> 
> 
> -----Original Message-----
> From: Ben Pfaff [mailto:blp at nicira.com]
> Sent: 14 January 2015 10:23
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in ovs-vswitchd, maybe you could explain further?
> 
> On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> > packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> > Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> > 
> > ________________________________________
> > From: Ben Pfaff [blp at nicira.com]
> > Sent: 14 January 2015 02:48:19
> > To: Deepak Singh
> > Cc: discuss at openvswitch.org
> > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > 
> > On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> > 
> > What are you really trying to accomplish?  It isn't usually useful 
> > to hand-tune TCP buffer sizes.
> > 
> > lib/stream-tcp.c has the code that opens and accepts TCP 
> > connections, so that might be a good place to adjust buffer size.

From dsingh at merunetworks.com  Tue Jan 13 21:57:27 2015
From: dsingh at merunetworks.com (Deepak Singh)
Date: Wed, 14 Jan 2015 05:57:27 +0000
Subject: [ovs-discuss] Setting the tcp buffer
In-Reply-To: <20150114054656.GF17092@nicira.com>
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
 <20150114051638.GE17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166F23@STAR.merunetworks.com>
 <20150114054656.GF17092@nicira.com>
Message-ID: <D68445AEE938844D8378F38C93C02D170F166F49@STAR.merunetworks.com>

We are creating the priority queue .For low priority packet-in packets are pre-empted . So high priority packet-in cannot be send to odl when TCP buffer on the openflow switch is congested . To avoid the problem ,TCP buffer size has to be configurable if needed.

-----Original Message-----
From: Ben Pfaff [mailto:blp at nicira.com] 
Sent: 14 January 2015 11:17
To: Deepak Singh
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] Setting the tcp buffer

I'd like a better explanation of the problem first.  So far, your explanation is so barebones that I'm not confident that TCP buffer size is the solution.

On Wed, Jan 14, 2015 at 05:44:47AM +0000, Deepak Singh wrote:
> Could you suggest the way i can do this ?
> 
> -----Original Message-----
> From: Ben Pfaff [mailto:blp at nicira.com]
> Sent: 14 January 2015 10:47
> To: Deepak Singh
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Setting the tcp buffer
> 
> I'm afraid that none of this makes sense to me, sorry.
> 
> On Wed, Jan 14, 2015 at 05:14:49AM +0000, Deepak Singh wrote:
> > I am using the unix socket . From ovs-vsctl side i am opening a client socket who send the size of the TCP buffer . And ovs-vswitchd side i am opening the server socket who keep running for client and receive the buffer size and call the setsockopt for fd .
> > For this FD i am creating a new thread who will get the stream->fd(br->ofproto->ofconn->rconn->vconn_stream->stream->fd) . But one problem is coming when i using HMAP_FOR_EACH (br, node, &all_bridges) and further calling the find_controller_by_target to get ofconn pointer but this ofconn is coming NULL .
> > 
> > 
> > -----Original Message-----
> > From: Ben Pfaff [mailto:blp at nicira.com]
> > Sent: 14 January 2015 10:23
> > To: Deepak Singh
> > Cc: discuss at openvswitch.org
> > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > 
> > It's hard to imagine how ovs-vsctl can change the TCP buffer sizes in ovs-vswitchd, maybe you could explain further?
> > 
> > On Wed, Jan 14, 2015 at 02:02:13AM +0000, Deepak Singh wrote:
> > > packet-in high priority cannot be sent to ODL when TCP buffer on the OFS is congested .
> > > Yes lib/stream-tcp.c has the code but i have to hand-tune  from ovs-vsctl binary. 
> > > 
> > > ________________________________________
> > > From: Ben Pfaff [blp at nicira.com]
> > > Sent: 14 January 2015 02:48:19
> > > To: Deepak Singh
> > > Cc: discuss at openvswitch.org
> > > Subject: Re: [ovs-discuss] Setting the tcp buffer
> > > 
> > > On Tue, Jan 13, 2015 at 08:49:01AM +0000, Deepak Singh wrote:
> > > > How can i get the socket fd (send socket) ?  Is the stream_fd  data structure which i have to get ?
> > > > Actually i am tuning the tcp buffer size from the ovs-vsctl . ovs-vsctl and ovs-vswitch are different binary so i am using the unix sockets to access the socket fd . Is it the right approach ?
> > > 
> > > What are you really trying to accomplish?  It isn't usually useful 
> > > to hand-tune TCP buffer sizes.
> > > 
> > > lib/stream-tcp.c has the code that opens and accepts TCP 
> > > connections, so that might be a good place to adjust buffer size.

From 464366985 at qq.com  Tue Jan 13 23:58:16 2015
From: 464366985 at qq.com (=?utf-8?B?5b+D54G16LSp5a2Q?=)
Date: Wed, 14 Jan 2015 15:58:16 +0800
Subject: [ovs-discuss] Does openvswitch support LACP with VM?
Message-ID: <tencent_202D3BA26802710A1937915E@qq.com>

Hi, all
  
    I'm trying to research if the openvswitch could support LACP between VM.
    My topo is:

                               vSwitch
            ---------------------------------
                |           |                   |
                |           |                   |
                |           |                   |    
             ------    ------          --------
               VM1      VM2             VM3‍

   I want to make bond with vm1 and vm2, then from vm3 ping the bond interface. Check if the request will be load balance to each VM1 and VM2.
   Right now, when I make bond with vm1 and vm2, and from vm3 ping the bond interface, each port on vm1 and vm2 received the same ping request and reply the response. So that there will be a duplicate package send to vm3. That is not my wish. 
   As my understanding, the port of vm1 and vm2 should negotiation with vSwitch port to make bond. But right now, the port of vm1 and vm2 are negotiation by themself.

Could anyone tell me how to enable the bond between the VMs? 

Thanks in advance

‍,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150114/8644977c/attachment-0001.html>

From pengyujian5201314 at 126.com  Wed Jan 14 00:28:17 2015
From: pengyujian5201314 at 126.com (Peng)
Date: Wed, 14 Jan 2015 16:28:17 +0800 (CST)
Subject: [ovs-discuss] How to Configure two VMs to a vxlan?
Message-ID: <4df9586e.1dfa1.14ae78eb752.Coremail.pengyujian5201314@126.com>

Hi

I'm testing vxlan.
I have one host with two VMs:
vm interface ip
vm1 vmnet1  10.1.0.14/24
vm2 vmnet2  10.1.0.15/24

The host ip is 10.1.0.13

I want to configure vm1 and vm2 to a vxlan.

ovs-vsctl add-br br1
ovs-vsctl add-port br1 eth1
ovs-vsctl add-port br1 vmnet1 --set interface vmnet1 type=vxlan option:key=100 option:remote_ip=10.1.0.13
ovs-vsctl add-port br1 vmnet2 --set interface vmnet2 type=vxlan option:key=100 option:remote_ip=10.1.0.13

But vm1 and vm2 cannot ping each other.

How to configure vm1 and vm2 to a vxlan?

Thanks a lot!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150114/5e12dccd/attachment.html>

From jason at koelker.net  Wed Jan 14 00:43:48 2015
From: jason at koelker.net (=?UTF-8?Q?Jason_K=C3=B6lker?=)
Date: Wed, 14 Jan 2015 08:43:48 +0000
Subject: [ovs-discuss] Does openvswitch support LACP with VM?
In-Reply-To: <tencent_202D3BA26802710A1937915E@qq.com>
References: <tencent_202D3BA26802710A1937915E@qq.com>
Message-ID: <CAB=yZ1OkgztBa9dATESS6K172WGP=k+v8nOJ_1sfRR_CDdDvOA@mail.gmail.com>

On Wed, Jan 14, 2015 at 7:58 AM, 心灵贩子 <464366985 at qq.com> wrote:

> Hi, all
>
>     I'm trying to research if the openvswitch could support LACP between
> VM.
>     My topo is:
>
>                                vSwitch
>             ---------------------------------
>                 |           |                   |
>                 |           |                   |
>                 |           |                   |
>              ------    ------          --------
>                VM1      VM2             VM3‍
>
>    I want to make bond with vm1 and vm2, then from vm3 ping the bond
> interface. Check if the request will be load balance to each VM1 and VM2.
>    Right now, when I make bond with vm1 and vm2, and from vm3 ping the
> bond interface, each port on vm1 and vm2 received the same ping request and
> reply the response. So that there will be a duplicate package send to vm3.
> That is not my wish.
>    As my understanding, the port of vm1 and vm2 should negotiation with
> vSwitch port to make bond. But right now, the port of vm1 and vm2 are
> negotiation by themself.
>
> Could anyone tell me how to enable the bond between the VMs?


Ovs can LB between the vm's using the bundle action. Assuming VM1, VM2, and
VM3 correspond to ofports 1, 2, and 3 respectively:

in_port=3,actions=bundle(symmetric_l4, 0, hrw, ofport, slaves:[1,2])

Will distribute the traffic between VM1 and VM2 based on the L4 tuple.

I don't know of a way to do this with LACP controlling the link state.

Happy Hacking!

7-11
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150114/edbd4217/attachment.html>

From urisimchoni at gmail.com  Wed Jan 14 03:26:37 2015
From: urisimchoni at gmail.com (Uri Simchoni)
Date: Wed, 14 Jan 2015 13:26:37 +0200
Subject: [ovs-discuss] MSS Clamping
Message-ID: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>

Hi,

Just seen a recent thread on MSS clamping in OpenVSwitch and that it's
not available. I'm also new to OVS and interested in this feature.
Some digging into past discussions show that there was actually a
proposed patch which did not get through for some reason.

I'm wondering why MSS clamping is not available - is it lack of
interest / none to pick it up,  or is there some objection to such a
feature.

Thanks,
Uri.

From blp at nicira.com  Wed Jan 14 09:36:38 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 14 Jan 2015 09:36:38 -0800
Subject: [ovs-discuss] Does openvswitch support LACP with VM?
In-Reply-To: <tencent_202D3BA26802710A1937915E@qq.com>
References: <tencent_202D3BA26802710A1937915E@qq.com>
Message-ID: <20150114173638.GB15684@nicira.com>

On Wed, Jan 14, 2015 at 03:58:16PM +0800, 心灵贩子 wrote:
> Hi, all
>   
>     I'm trying to research if the openvswitch could support LACP between VM.
>     My topo is:
> 
>                                vSwitch
>             ---------------------------------
>                 |           |                   |
>                 |           |                   |
>                 |           |                   |    
>              ------    ------          --------
>                VM1      VM2             VM3‍
> 
>    I want to make bond with vm1 and vm2, then from vm3 ping the bond interface. Check if the request will be load balance to each VM1 and VM2.
>    Right now, when I make bond with vm1 and vm2, and from vm3 ping the bond interface, each port on vm1 and vm2 received the same ping request and reply the response. So that there will be a duplicate package send to vm3. That is not my wish. 
>    As my understanding, the port of vm1 and vm2 should negotiation with vSwitch port to make bond. But right now, the port of vm1 and vm2 are negotiation by themself.
> 
> Could anyone tell me how to enable the bond between the VMs? 

Did you configure the ports as a bonded pair, e.g. with "ovs-vsctl
add-bond"?

From jesse at nicira.com  Wed Jan 14 12:43:41 2015
From: jesse at nicira.com (Jesse Gross)
Date: Wed, 14 Jan 2015 12:43:41 -0800
Subject: [ovs-discuss] How to Configure two VMs to a vxlan?
In-Reply-To: <4df9586e.1dfa1.14ae78eb752.Coremail.pengyujian5201314@126.com>
References: <4df9586e.1dfa1.14ae78eb752.Coremail.pengyujian5201314@126.com>
Message-ID: <CAEP_g=-UEbYBVOO3H8C1q2LXAFJ2-6wE=yyD3OgytYzFP8M7Vw@mail.gmail.com>

On Wed, Jan 14, 2015 at 12:28 AM, Peng <pengyujian5201314 at 126.com> wrote:
> Hi
>
> I'm testing vxlan.
> I have one host with two VMs:
> vm interface ip
> vm1 vmnet1  10.1.0.14/24
> vm2 vmnet2  10.1.0.15/24
>
> The host ip is 10.1.0.13
>
> I want to configure vm1 and vm2 to a vxlan.
>
> ovs-vsctl add-br br1
> ovs-vsctl add-port br1 eth1
> ovs-vsctl add-port br1 vmnet1 --set interface vmnet1 type=vxlan
> option:key=100 option:remote_ip=10.1.0.13
> ovs-vsctl add-port br1 vmnet2 --set interface vmnet2 type=vxlan
> option:key=100 option:remote_ip=10.1.0.13
>
> But vm1 and vm2 cannot ping each other.
>
> How to configure vm1 and vm2 to a vxlan?

VXLAN configuration should be set on a tunnel port instead of the VM
ports directly. There are several tutorials available online, for
example:
http://openvswitch.org/support/config-cookbooks/port-tunneling/

(Just substitute VXLAN for GRE.)

From jesse at nicira.com  Wed Jan 14 12:54:15 2015
From: jesse at nicira.com (Jesse Gross)
Date: Wed, 14 Jan 2015 12:54:15 -0800
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
Message-ID: <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>

On Wed, Jan 14, 2015 at 3:26 AM, Uri Simchoni <urisimchoni at gmail.com> wrote:
> Hi,
>
> Just seen a recent thread on MSS clamping in OpenVSwitch and that it's
> not available. I'm also new to OVS and interested in this feature.
> Some digging into past discussions show that there was actually a
> proposed patch which did not get through for some reason.
>
> I'm wondering why MSS clamping is not available - is it lack of
> interest / none to pick it up,  or is there some objection to such a
> feature.

It needs to be properly integrated into the rest of the code base.
There have been some more recent discussions on how to do this but
nothing is ready yet.

From jesse at nicira.com  Wed Jan 14 13:09:41 2015
From: jesse at nicira.com (Jesse Gross)
Date: Wed, 14 Jan 2015 13:09:41 -0800
Subject: [ovs-discuss] Dpif-netdev datapath capabilities
In-Reply-To: <DUB127-W260B255EC6CA4A1B674F55BF400@phx.gbl>
References: <DUB127-W260B255EC6CA4A1B674F55BF400@phx.gbl>
Message-ID: <CAEP_g=-PiAWprWD9md5p-oxBH+TPXBfj+tSHPc_i+J7MFbA_AA@mail.gmail.com>

On Tue, Jan 13, 2015 at 1:09 PM, Federico Di Domenicantonio
<fededido91 at hotmail.it> wrote:
> Hello,
>
> I'm trying to implement an OpenFlow modification to Open vSwitch
> userspace-only implementation (dpif-netdev) for my thesis.
>
> What I fail to accomplish is to find where the datapath capabilities (one of
> enum ofp1x_capabilities) are set, and how to access them inside the
> dpif-netdev.c code; going more in detail, I need to check if the datapath
> has a capability immediately before the flow lookup.

OpenFlow capabilities represent what the entire switch can do, not
specific datapath. It does not make sense to use them during flow
lookup since by definition that means that the switch supports some
aspect of the capability.

Other optional capabilities are detected by probing the datapath ahead
of time. You can look at OVS_FLOW_ATTR_PROBE for examples of this.

From shankari.v.2014 at gmail.com  Wed Jan 14 19:11:51 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Thu, 15 Jan 2015 08:41:51 +0530
Subject: [ovs-discuss] Please confirm the OVS installation steps
Message-ID: <CAGuFQhB4qFzOEBuzJp9Y+JeY0UbHJETrf2U7bHDXBEA88=YF_A@mail.gmail.com>

Hi,

I'm executing the below steps for building OVS with DPDK. Please let me
know if I'm missing something.

I have built DPDK 1.7.1 before executing these commands

cd /home/PoC/openvswitch
sudo ./boot.sh
sudo ./configure --with dpdk=$DPDK_BUILD
sudo make CFLAGS='-O3 -march=native'
sudo make install

OVS version used: 2.3.1

I have downloaded the tar ball of both DPDK and OVS and extracted them and
using it to build.

Writing this mail because I'm facing OVSDB connectivity issues while OVSDB
initialization.

Regards
Shankari.V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150115/f618fafb/attachment.html>

From vbadiger at avaya.com  Wed Jan 14 21:26:52 2015
From: vbadiger at avaya.com (Badiger, Vishwanath (Vishwa))
Date: Thu, 15 Jan 2015 05:26:52 +0000
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
Message-ID: <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>

Hi,
I am in the process of migrating MSS clamping patch into recent OVS code base 2.3.0. But not finding functions like,
1. subfacet_make_actions()
2. iface_parse_tunnel()

Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created. 
I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.

Also, Is there any other way of implementing MSS clamping than how patch implements it ? 
Thanks.


Regards,
Vishwa.

-----Original Message-----
From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Jesse Gross
Sent: Thursday, January 15, 2015 2:24 AM
To: Uri Simchoni
Cc: discuss at openvswitch.org
Subject: Re: [ovs-discuss] MSS Clamping

On Wed, Jan 14, 2015 at 3:26 AM, Uri Simchoni <urisimchoni at gmail.com> wrote:
> Hi,
>
> Just seen a recent thread on MSS clamping in OpenVSwitch and that it's 
> not available. I'm also new to OVS and interested in this feature.
> Some digging into past discussions show that there was actually a 
> proposed patch which did not get through for some reason.
>
> I'm wondering why MSS clamping is not available - is it lack of 
> interest / none to pick it up,  or is there some objection to such a 
> feature.

It needs to be properly integrated into the rest of the code base.
There have been some more recent discussions on how to do this but nothing is ready yet.
_______________________________________________
discuss mailing list
discuss at openvswitch.org
https://urldefense.proofpoint.com/v2/url?u=http-3A__openvswitch.org_mailman_listinfo_discuss&d=AwIGaQ&c=BFpWQw8bsuKpl1SgiZH64Q&r=QlZE3gUHm8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=dBeJ1kImNwAvSrZcs1MlYSevxv2uhxvCtYTNx37gonk&s=PH9iOSRJtehPFMitQJJ9AhJIHtBnoG6-HOFZfYtCKr0&e= 

From jesse at nicira.com  Wed Jan 14 21:33:58 2015
From: jesse at nicira.com (Jesse Gross)
Date: Wed, 14 Jan 2015 21:33:58 -0800
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
Message-ID: <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>

On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa)
<vbadiger at avaya.com> wrote:
> Hi,
> I am in the process of migrating MSS clamping patch into recent OVS code base 2.3.0. But not finding functions like,
> 1. subfacet_make_actions()
> 2. iface_parse_tunnel()
>
> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>
> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
> Thanks.

I don't actually know what patch you are referring to. However, I
doubt that a patch that is just updated to the latest code base will
be accepted if the original wasn't.

Please see this (long) thread on more recent discussion of how to
handle this problem:
http://www.spinics.net/lists/netdev/msg306502.html

From vbadiger at avaya.com  Wed Jan 14 22:29:36 2015
From: vbadiger at avaya.com (Badiger, Vishwanath (Vishwa))
Date: Thu, 15 Jan 2015 06:29:36 +0000
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
Message-ID: <7712B9DB39307A41B020D8182A22B13C445F4517@AZ-FFEXMB04.global.avaya.com>

I am referring to below patch,
http://openvswitch.org/pipermail/dev/2012-June/017640.html

MSS clamping even avoids packet getting fragmented by modifying MSS value in TCP SYN packets.


Regards,
Vishwa.


-----Original Message-----
From: Jesse Gross [mailto:jesse at nicira.com] 
Sent: Thursday, January 15, 2015 11:04 AM
To: Badiger, Vishwanath (Vishwa)
Cc: Uri Simchoni; discuss at openvswitch.org
Subject: Re: [ovs-discuss] MSS Clamping

On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
> Hi,
> I am in the process of migrating MSS clamping patch into recent OVS 
> code base 2.3.0. But not finding functions like, 1. 
> subfacet_make_actions() 2. iface_parse_tunnel()
>
> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>
> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
> Thanks.

I don't actually know what patch you are referring to. However, I doubt that a patch that is just updated to the latest code base will be accepted if the original wasn't.

Please see this (long) thread on more recent discussion of how to handle this problem:
https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spinics.net_lists_netdev_msg306502.html&d=AwIBaQ&c=BFpWQw8bsuKpl1SgiZH64Q&r=QlZE3gUHm8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=7iNT4HO2rZcKPACWsmsxGFg6zXdLUpici8mppaeu1fQ&s=bj8J0oS15-pq-ZZK9elQoYnXSOpnzmICZu52c2-opYQ&e= 

From g.cofano87 at gmail.com  Thu Jan 15 06:44:28 2015
From: g.cofano87 at gmail.com (Giuseppe Cofano)
Date: Thu, 15 Jan 2015 15:44:28 +0100
Subject: [ovs-discuss] 2.3.0/1 installation issues
Message-ID: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>

Hi all,

I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.

When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I get
a lot of "Failed" in the unit tests and a final Make error ("make: ***
[build-arch-stamp] Error 1").

I have carefully checked that all the dependencies as indicated in the file
debian/control are satisfied, moreover the output of the
dpkg-checkbuilddeps is null.

My system is a VirtualBox VM, running Ubuntu Server 14.04 with kernel
release 3.13.0-43.

Any suggestion on how to proceed now?

Thanks in advance,

Giuseppe Cofano, Ph. D. student
Dipartimento di Ing. Elettrica e dell'Informazione
Politecnico di Bari, Italy
Via Orabona 4, 70125 Bari Italy
 +39 080 596 3851
 giuseppe.cofano at poliba.it <g.cofano at poliba.it>; g.cofano87 at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150115/6d1ef008/attachment.html>

From blp at nicira.com  Thu Jan 15 10:08:47 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 15 Jan 2015 10:08:47 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
Message-ID: <20150115180847.GA21215@nicira.com>

On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
> I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
> 
> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I get
> a lot of "Failed" in the unit tests and a final Make error ("make: ***
> [build-arch-stamp] Error 1").

You should find a testsuite.log file in the build directory.  Can you
post it to the list?

From jesse at nicira.com  Thu Jan 15 12:37:52 2015
From: jesse at nicira.com (Jesse Gross)
Date: Thu, 15 Jan 2015 12:37:52 -0800
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <7712B9DB39307A41B020D8182A22B13C445F4517@AZ-FFEXMB04.global.avaya.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F4517@AZ-FFEXMB04.global.avaya.com>
Message-ID: <CAEP_g=9te6Fq+4rcbnQ-TxtKNEyCPcPZFRmoCGKC=Zr3mATZ4Q@mail.gmail.com>

Thanks for the reminder. However, that patch will basically not work
at all any more due to the fact that we try to avoid sending new TCP
connections up to usespace. Therefore, I stand by my previous comments
that you should look at the more recent thread.

On Wed, Jan 14, 2015 at 10:29 PM, Badiger, Vishwanath (Vishwa)
<vbadiger at avaya.com> wrote:
> I am referring to below patch,
> http://openvswitch.org/pipermail/dev/2012-June/017640.html
>
> MSS clamping even avoids packet getting fragmented by modifying MSS value in TCP SYN packets.
>
>
> Regards,
> Vishwa.
>
>
> -----Original Message-----
> From: Jesse Gross [mailto:jesse at nicira.com]
> Sent: Thursday, January 15, 2015 11:04 AM
> To: Badiger, Vishwanath (Vishwa)
> Cc: Uri Simchoni; discuss at openvswitch.org
> Subject: Re: [ovs-discuss] MSS Clamping
>
> On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
>> Hi,
>> I am in the process of migrating MSS clamping patch into recent OVS
>> code base 2.3.0. But not finding functions like, 1.
>> subfacet_make_actions() 2. iface_parse_tunnel()
>>
>> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
>> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>>
>> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
>> Thanks.
>
> I don't actually know what patch you are referring to. However, I doubt that a patch that is just updated to the latest code base will be accepted if the original wasn't.
>
> Please see this (long) thread on more recent discussion of how to handle this problem:
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spinics.net_lists_netdev_msg306502.html&d=AwIBaQ&c=BFpWQw8bsuKpl1SgiZH64Q&r=QlZE3gUHm8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=7iNT4HO2rZcKPACWsmsxGFg6zXdLUpici8mppaeu1fQ&s=bj8J0oS15-pq-ZZK9elQoYnXSOpnzmICZu52c2-opYQ&e=

From joestringer at nicira.com  Thu Jan 15 14:10:59 2015
From: joestringer at nicira.com (Joe Stringer)
Date: Thu, 15 Jan 2015 14:10:59 -0800
Subject: [ovs-discuss] [openvswitch 2.3.1] testsuite: 350 815 817 failed
In-Reply-To: <25C71E6FD9F4664A857922E53B0DEBA70BFE357588@MBX10.bell.corp.bce.ca>
References: <25C71E6FD9F4664A857922E53B0DEBA70BFE357588@MBX10.bell.corp.bce.ca>
Message-ID: <CANr6G5xWG1v5Jch2TgvDZurQmJDvUuKBwoz0XSrevyqhvwq+8A@mail.gmail.com>

Hi Simon,

Could you provide a little more detail on your environment - specifically,
how many cores are available to the VM and is the host under high load?
There are some race conditions in the testsuite that are more likely to
trigger when there is limited compute resource available.

Test 350 (learn.at:285: testing learning action - self-modifying flow) has
the test script send 10 packets; the first is meant to hit a learning rule
and create a new flow for the remaining 9 packets to be handled. However,
in this case all 10 packets are handled by the original rule. This might
happen if all ten packets are queued up before ovs-vswitchd gets a chance
to install the flow into the datapath.

The other tests fail because the main thread reports that it had a long
time between polling for inputs. This can happen if there is a lot of work
to do and the main thread cannot execute all of its work within one second.
2015-01-09T15:12:17Z|00002|timeval|WARN|Unreasonably long 1444ms poll
interval (277ms user, 31ms system)

Do these tests reliably fail in the same way?

On 9 January 2015 at 07:34, Beaulieu, Simon (6076932) <
simon.beaulieu at bell.ca> wrote:

> Hello,
>
>
>
> I am trying to install OpenVSwitch on a minimal installation of CentOS7,
> with gcc 4.8.2, running on a VMware virtual machine.
>
> My knowledge of OpenFlow / CentOS / C and C++ programming language are
> limited, but I will try to investigate on my own anyways.
>
> I don’t know if the test failures will impact the functionalities of the
> switch so I will continue with my testing.
>
>
>
> Please find attached the test results.
>
>
>
> Best regards,
>
>
>
> [image: cid:353405121 at 30112009-06CA]
>
> Simon Beaulieu
>
> IT Technical Architect
>
> Bell Business Market
>
> Email: simon.beaulieu at bell.ca
>
>
>
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150115/f2b9f500/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 1851 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150115/f2b9f500/attachment.gif>

From g.cofano87 at gmail.com  Thu Jan 15 23:58:14 2015
From: g.cofano87 at gmail.com (Giuseppe Cofano)
Date: Fri, 16 Jan 2015 08:58:14 +0100
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <20150115180847.GA21215@nicira.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
Message-ID: <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>

Here it is

2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:

> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
> > I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
> >
> > When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
> get
> > a lot of "Failed" in the unit tests and a final Make error ("make: ***
> > [build-arch-stamp] Error 1").
>
> You should find a testsuite.log file in the build directory.  Can you
> post it to the list?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/8ffcd4dc/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testsuite.log
Type: text/x-log
Size: 1136074 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/8ffcd4dc/attachment-0001.bin>

From pasik at iki.fi  Fri Jan 16 01:31:05 2015
From: pasik at iki.fi (Pasi =?iso-8859-1?Q?K=E4rkk=E4inen?=)
Date: Fri, 16 Jan 2015 11:31:05 +0200
Subject: [ovs-discuss] [ovs-dev] How to start contribution to
	OpenVSwitch community?
In-Reply-To: <008401d03153$ac85c980$05915c80$@com>
References: <008401d03153$ac85c980$05915c80$@com>
Message-ID: <20150116093105.GK5962@reaktio.net>

Hey,

On Fri, Jan 16, 2015 at 11:44:20AM +0530, Renuka Sachidev wrote:
> Folks,
> 
>  
> 
> I would like to give in some of my efforts to the OpenVSwitch community.
> 
> Sometime back I had a query which I could not see that been listed. Is there
> something I'm missing?
>

Hmm.. what was that query? 


Thanks,

-- Pasi
 
>  
> 
> Thank you,
> 
> Renuka
> 


From poigetadrian at gmail.com  Fri Jan 16 06:43:52 2015
From: poigetadrian at gmail.com (Adrian Poiget)
Date: Fri, 16 Jan 2015 15:43:52 +0100
Subject: [ovs-discuss] OVS with DPDK, packets going to error
Message-ID: <CA+uz+yH0xe+xvhJ4VnrwrHg6VZdKR4xYEdeRzgSHzTGymT2xSQ@mail.gmail.com>

Hi,

I am trying to do some tests with Open vSwitch with DPDK,
I follow the INSTALL.DPDK.md documentation.
It is launching but a lot of packets are going to error.

 ./ovs-ofctl dump-ports br0
OFPST_PORT reply (xid=0x2): 3 ports
  port  1: rx pkts=490360, bytes=32363760, drop=0, errs=588615412, frame=0,
over=0, crc=0
           tx pkts=490360, bytes=32363760, drop=0, errs=0, coll=0
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=22272, bytes=1380864, drop=0, errs=0, coll=0
  port  2: rx pkts=490360, bytes=32363760, drop=0, errs=588615412, frame=0,
over=0, crc=0
           tx pkts=490360, bytes=32363760, drop=0, errs=0, coll=0


 ./ovs-vsctl get Interface dpdk0 statistics
{collisions=0, rx_bytes=32846088, rx_crc_err=0, rx_dropped=0,
rx_errors=588615412, rx_frame_err=0, rx_over_err=0, rx_packets=497668,
tx_bytes=40155390, tx_dropped=0, tx_errors=0, tx_packets=608415}

./ovs-vsctl get Interface dpdk1 statistics
{collisions=0, rx_bytes=40155390, rx_crc_err=0, rx_dropped=0,
rx_errors=588746330, rx_frame_err=0, rx_over_err=0, rx_packets=608415,
tx_bytes=32846088, tx_dropped=0, tx_errors=0, tx_packets=497668}

DEBUG options are activated and I see the following message :
PMD: ixgbe_recv_pkts(): port_id=0 queue_id=0 rx_id=954
ext_err_stat=0x00000043 pkt_len=66

The distribution used is Ubuntu 14.04
It is a phy-phy test with an Ixia 10 Gbps .

Do you have an idea of the problem's origin ?

Thanks and Regards,

Adrian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/fd0a01c9/attachment.html>

From anaperezrda at gmail.com  Fri Jan 16 06:44:41 2015
From: anaperezrda at gmail.com (=?UTF-8?Q?Ana_P=C3=A9rez?=)
Date: Fri, 16 Jan 2015 15:44:41 +0100
Subject: [ovs-discuss] Problem: Connectivity lost through SSH when attaching
	OpenDaylight controller
Message-ID: <CANrAVkEtckFfhRxFBnMr5BdrXA65iPUmyhyQgo1YMxK5o7rzMA@mail.gmail.com>

Hello,

I'm new here and with everything related to Open vSwitch, so I have some
questions that I haven't been able to solve by myself.

I'm setting up a network with Open vSwitch and OpenDaylight. I have three
different virtual machines: two of them have OVS switches and the other has
the OpenDaylight controller. I will attach hosts to each OVS machine to
generate traffic, which should go through the OVS machines and be
controlled with the OpenDaylight controller. I access them by SSH and they
only have one NIC (eth0).

I have made the OVS installation following the install.md instructions and
using the kernel modules (I had problems if I didn't use them, I had
the " Linux
kernel in /lib/modules/3.13.0-27-generic/build is version 3.13.11, but
version newer than 3.12.x is not supported" bug).

The first problem is:  when I restart the VM and I try to do any operation
with "ovs-vsctl" it fails and says:

"dpif_linux|ERR|Generic Netlink family 'ovs_datapath' does not exist. The
Open vSwitch kernel module is probably not loaded
dpif|WARN|failed to enumerate system datapaths: No such file or directory
|dpif|WARN|failed to create datapath ovs-system: No such file or directory
|ofproto_dpif|ERR|failed to open datapath of type system: No such file or
directory"

And the only way I have found to make it work without problems again is
killing the ovsdb-server and ovs-vswitchd daemons, deleting the database,
doing a "make uninstall" and re-install everything (losing all the
configurations). Which would be the correct way to continue working after a
reboot?

And the second, and worse for me is this: I have created one bridge in each
OVS machine, and I have created a script (because I lose the connection to
the machine during the process) to attach the bridge to eth0 like this:

"ovs-vsctl add-port br1 eth0
ifconfig eth0 0.0.0.0
ifconfig br1 10.250.0.3 netmask 255.255.0.0
ifconfig br1 up
route add default gw 10.250.0.1 br1
route del default gw 10.250.0.1 eth0"

The problem is, that I need also to attach the SDN controller, but when I
do "ovs-vsctl set-controller br1 tcp:10.250.0.2:6633" I lose the connection
with the VM and all I can do is to get it rebooted (I don't manage the VM
myself, I only have access to them through SSH).  I have this in the
ovs-vswitchd.log file:

"2015-01-16T14:21:51.839Z|00018|connmgr|INFO|br1: added primary controller
"tcp:10.250.0.2:6633"
2015-01-16T14:21:51.840Z|00019|rconn|INFO|br1<->tcp:10.250.0.2:6633:
connecting...
2015-01-16T14:21:52.555Z|00020|rconn|INFO|br1<->tcp:10.250.0.2:6633:
connection timed out
2015-01-16T14:21:52.555Z|00021|rconn|INFO|br1<->tcp:10.250.0.2:6633:
waiting 1 seconds before reconnect
2015-01-16T14:21:53.554Z|00022|rconn|INFO|br1<->tcp:10.250.0.2:6633:
connecting...
2015-01-16T14:21:53.560Z|00023|rconn|INFO|br1<->tcp:10.250.0.2:6633:
connected
2015-01-16T14:21:53.584Z|00024|pktbuf|WARN|attempt to reuse buffer 00000000
2015-01-16T14:21:53.584Z|00025|connmgr|INFO|br1<->tcp:10.250.0.2:6633:
sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message
2015-01-16T14:21:53.584Z|00026|pktbuf|WARN|attempt to reuse buffer 00000000
2015-01-16T14:21:53.584Z|00027|connmgr|INFO|br1<->tcp:10.250.0.2:6633:
sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message
2015-01-16T14:21:53.585Z|00028|pktbuf|WARN|attempt to reuse buffer 00000000
2015-01-16T14:21:53.585Z|00029|connmgr|INFO|br1<->tcp:10.250.0.2:6633:
sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message
2015-01-16T14:21:53.585Z|00030|pktbuf|WARN|attempt to reuse buffer 00000000
2015-01-16T14:21:53.585Z|00031|connmgr|INFO|br1<->tcp:10.250.0.2:6633:
sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message
2015-01-16T14:21:57.568Z|00032|pktbuf|WARN|attempt to reuse buffer 00000000
2015-01-16T14:21:57.568Z|00033|connmgr|INFO|br1<->tcp:10.250.0.2:6633:
sending OFPBRC_BUFFER_EMPTY error reply to OFPT_FLOW_MOD message
2015-01-16T14:22:03.584Z|00034|connmgr|INFO|br1<->tcp:10.250.0.2:6633: 5
flow_mods in the 3 s starting 10 s ago (5 adds)
"
This machine is working with Ubuntu 14.04.1 LTS (GNU/Linux
3.13.0-39-generic x86_64) and Open vSwitch-2.3.0.
The other one uses Ubuntu 14.04.1 LTS (GNU/Linux 3.13.0-40-generic x86_64)
and Open vSwitch-2.3.0.
And the controller is  Ubuntu 14.04.1 LTS (GNU/Linux 3.13.0-39-generic
x86_64) with OpenDaylight distribution karaf-0.2.1-Helium-SR1.

Can anyone help me,please?

Thank you!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/9322d262/attachment.html>

From gopi2101 at yahoo.com  Fri Jan 16 09:20:34 2015
From: gopi2101 at yahoo.com (Gopikrishnan)
Date: Fri, 16 Jan 2015 17:20:34 +0000 (UTC)
Subject: [ovs-discuss] ovs-vswitchd crashes while creating userspace datapath
Message-ID: <1637076924.1341087.1421428834855.JavaMail.yahoo@jws10072.mail.ne1.yahoo.com>

Hi,
I managed to compile the OVS code for QNX operation system.I am able to run the binaries in my ppc machine.
When I try this below command,   ovs-vsctl add-br br0    ovs-vsctl set bridge br0 datapath_type=netdev ovs-vswitchd crashes with the following log prints.2015-01-16T22:17:30.367Z|00010|ofproto|WARN|unknown datapath type system2015-01-16T22:17:30.368Z|00011|ofproto|WARN|unknown datapath type system2015-01-16T22:17:30.368Z|00012|ofproto|WARN|could not create datapath br1 of unknown type system2015-01-16T22:17:30.368Z|00013|bridge|ERR|failed to create bridge br1: Address family not supported by protocol family2015-01-16T22:17:59.051Z|00014|memory|INFO|0 kB peak resident set size after 62.6 seconds2015-01-16T22:17:59.054Z|00015|netdev_bsd|INFO|tap tap0 is created for bridge ovs-netdev2015-01-16T22:17:59.057Z|00016|ofproto_dpif|INFO|netdev at ovs-netdev: Datapath supports recirculation2015-01-16T22:17:59.058Z|00017|ofproto_dpif|INFO|netdev at ovs-netdev: MPLS label stack length probed as 32015-01-16T22:17:59.058Z|00018|ofproto_dpif|INFO|netdev at ovs-netdev: Datapath supports userspace flow ids2015-01-16T22:17:59.077Z|00019|netdev_bsd|INFO|tap tap1 is created for bridge br1
the backtrace of the core file is
(gdb) bt#0  0xfe33fc28 in SignalKill () from /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3#1  0xfe32f0a0 in raise () from /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3#2  0xfe32d144 in abort () from /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3#3  0x481d72dc in ovs_abort_valist (err_no=22, format=0x482643a0 "%s: pthread_%s_%s failed", args=0x47f19dc8) at lib/util.c:323#4  0x481d72a8 in ovs_abort (err_no=22, format=0x482643a0 "%s: pthread_%s_%s failed") at lib/util.c:315#5  0x4818cee8 in ovs_mutex_lock_at (l_=0x482a20c0, where=0x482689b4 "lib/seq.c:120") at lib/ovs-thread.c:75#6  0x481bcfb4 in seq_read (seq=0x482b5ee0) at lib/seq.c:120#7  0x4818e3a0 in ovs_barrier_block (barrier=0x482bc700) at lib/ovs-thread.c:290#8  0x480949b0 in udpif_revalidator (arg=0x482b10e0) at ofproto/ofproto-dpif-upcall.c:760#9  0x4818e564 in ovsthread_wrapper (aux_=0x482b5280) at lib/ovs-thread.c:339#10 0xfe321574 in timer_settime () from /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3Backtrace stopped: previous frame inner to this frame (corrupt stack?)
it looks like the mutex is not properly initialized.I am not sure about the reason for this problem.If any one have faced similar issue, please help me to fix it.
Thanks and Regards,Gopi

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/4ec8d832/attachment-0001.html>

From a_azouni at esi.dz  Fri Jan 16 09:21:01 2015
From: a_azouni at esi.dz (Azouni Abdelhadi)
Date: Fri, 16 Jan 2015 18:21:01 +0100
Subject: [ovs-discuss] Fingerprinting the controller
Message-ID: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>

Hello all,

I'm trying to find a way to fingerprint the controller of a given
data-path. It will be very nice if you can give me hints about how to find
the ip address of the controller or just to detect the presence of an
openflow controller.

Thank you

Cheers

Abdelhadi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/47b56f1c/attachment.html>

From rsachidev at onecloudinc.com  Thu Jan 15 22:14:20 2015
From: rsachidev at onecloudinc.com (Renuka Sachidev)
Date: Fri, 16 Jan 2015 11:44:20 +0530
Subject: [ovs-discuss] How to start contribution to OpenVSwitch community?
Message-ID: <008401d03153$ac85c980$05915c80$@com>

Folks,

 

I would like to give in some of my efforts to the OpenVSwitch community.

Sometime back I had a query which I could not see that been listed. Is there
something I'm missing?

 

Thank you,

Renuka

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150116/7b053efe/attachment.html>

From stephen.finucane at intel.com  Fri Jan 16 02:38:17 2015
From: stephen.finucane at intel.com (Finucane, Stephen)
Date: Fri, 16 Jan 2015 10:38:17 +0000
Subject: [ovs-discuss] Smoke testing OVS
Message-ID: <6A74A01C3512C646A9ED99AFA28AEB981821B87B@IRSMSX108.ger.corp.intel.com>

Hi,

Is there a recommended approach to smoke/system testing OVS? By smoke testing I mean starting the daemon ('ovs-vswitchd'), adding interfaces/flows ('ovs-vsctl'/'ovs-ofctl'), sending some validation traffic and validating output ('ovs-ofctl'?)? I'm aware of the unit tests (unit testing) and OFTest (Conformance/Acceptance testing?), but I'm unsure how one could, for example, validate that 'ovs-vsctl' actually does what it's supposed to do?

Regards,
Stephen

From rsachidev at onecloudinc.com  Fri Jan 16 03:49:18 2015
From: rsachidev at onecloudinc.com (Renuka Sachidev)
Date: Fri, 16 Jan 2015 17:19:18 +0530
Subject: [ovs-discuss] [ovs-dev] How to start contribution to
	OpenVSwitch community?
In-Reply-To: <20150116093105.GK5962@reaktio.net>
References: <008401d03153$ac85c980$05915c80$@com>
 <20150116093105.GK5962@reaktio.net>
Message-ID: <00c501d03182$785091c0$68f1b540$@com>

Thank you Pasi.

I've done some testing for OVS and made some presentable document for
test-cases to Multicast validating scenarios and also trying to dig in for
answers or probably dive into the code. As I did not have idea where to post
the document or upload on openvswitch.og, thought to ask someone on the list
who has prior experience.

For now I would like to be on the testing side for OVS Community and linking
up with Openstack.
Small change to the query is to have "different network within the same
tenant".


My original question was:
-------------------------
From: Renuka Sachidev [mailto:rsachidev at onecloudinc.com] 
Sent: 13 January 2015 13:00
To: 'dev at openvswitch.org'
Subject: OVS 2.3.90 Multicast to different Subnets

Greeting,

Ive been following up OpenVSwitch threads lately and sounds pretty much
interesting.
Do appreciate all those who are helping out to the community. Hopefully
would join soon the bandwagon of OVS community to contribute.

My interest lies in testing and getting a solution out from OVS to Openstack
community on Multicast areas.
And wanted to know if there is any provision to test the scenarios of
Sending the Multicast packets from One subnet to another subnet having the
Neutron Router. I know for sure that the Multicast works with-in the same
subnet with OVS, but wanted some way to forward those packets on to other
subnet connected to the same router (neutron router). I tried to look up on
PIM (SM/DM) support on Openstack and was not able to get anything from
there. 

I know experts over OVS has greater knowledge and hence posting this
question here.

e.g Multicast Sender VM is on 192.x.x.x network and would like to receive
the packets on 20.x.x.x. 

[This diagram is best viewed with Courier New Font size 10]
+       +--------+      +       +
|-------| Router |<---->|192.   |20. 
|P      +--------+      |168.   |10.
|u           ^          |x.     |x.
|b           |          |x      |x.
|l           +----------------->|
|i                              |
|c                              +
|                               
+

Appreciate any directions to the above mentioned scenario.

===================End Query =============================


-----Original Message-----
From: Pasi Kärkkäinen [mailto:pasik at iki.fi] 
Sent: 16 January 2015 15:01
To: Renuka Sachidev
Cc: dev at openvswitch.org; discuss at openvswitch.org
Subject: Re: [ovs-dev] How to start contribution to OpenVSwitch community?

Hey,

On Fri, Jan 16, 2015 at 11:44:20AM +0530, Renuka Sachidev wrote:
> Folks,
> 
>  
> 
> I would like to give in some of my efforts to the OpenVSwitch community.
> 
> Sometime back I had a query which I could not see that been listed. Is 
> there something I'm missing?
>

Hmm.. what was that query? 


Thanks,

-- Pasi
 
>  
> 
> Thank you,
> 
> Renuka
> 


From jpettit at nicira.com  Fri Jan 16 11:42:23 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Fri, 16 Jan 2015 11:42:23 -0800
Subject: [ovs-discuss] Smoke testing OVS
In-Reply-To: <6A74A01C3512C646A9ED99AFA28AEB981821B87B@IRSMSX108.ger.corp.intel.com>
References: <6A74A01C3512C646A9ED99AFA28AEB981821B87B@IRSMSX108.ger.corp.intel.com>
Message-ID: <71FB1DA9-D8F8-467D-826B-9B5D8E032BD0@nicira.com>


> On Jan 16, 2015, at 2:38 AM, Finucane, Stephen <stephen.finucane at intel.com> wrote:
> 
> Is there a recommended approach to smoke/system testing OVS? By smoke testing I mean starting the daemon ('ovs-vswitchd'), adding interfaces/flows ('ovs-vsctl'/'ovs-ofctl'), sending some validation traffic and validating output ('ovs-ofctl'?)? I'm aware of the unit tests (unit testing) and OFTest (Conformance/Acceptance testing?), but I'm unsure how one could, for example, validate that 'ovs-vsctl' actually does what it's supposed to do?

I think the unit tests handle ovs-vsctl and ovs-ofctl reasonably well.  The area that I think we have holes is related to the datapath.  Currently, we need to set up actual systems and generate traffic, which is fairly high overhead and more difficult to automate.  Work has begun to add support for Vagrant, which we plan to use to start writing tests that will actually pass traffic through the datapath.  All the discussion around this is on the ovs-dev mailing list.  It would be great if you're interested in contributing to that work.

--Justin



From blp at nicira.com  Fri Jan 16 15:28:01 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 16 Jan 2015 15:28:01 -0800
Subject: [ovs-discuss] ovs-vswitchd crashes while creating userspace
	datapath
In-Reply-To: <1637076924.1341087.1421428834855.JavaMail.yahoo@jws10072.mail.ne1.yahoo.com>
References: <1637076924.1341087.1421428834855.JavaMail.yahoo@jws10072.mail.ne1.yahoo.com>
Message-ID: <CACjuMbzGf_WvaVHAmAyF0Y48_LKTnfiOjtu=wEqHxwdpfp0GMw@mail.gmail.com>

On Fri, Jan 16, 2015 at 9:20 AM, Gopikrishnan <gopi2101 at yahoo.com> wrote:
> I managed to compile the OVS code for QNX operation system.

Well, that's a new port.

> the backtrace of the core file is
>
> (gdb) bt
> #0  0xfe33fc28 in SignalKill () from
> /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3
> #1  0xfe32f0a0 in raise () from /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3
> #2  0xfe32d144 in abort () from /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3
> #3  0x481d72dc in ovs_abort_valist (err_no=22, format=0x482643a0 "%s:
> pthread_%s_%s failed", args=0x47f19dc8) at lib/util.c:323
> #4  0x481d72a8 in ovs_abort (err_no=22, format=0x482643a0 "%s: pthread_%s_%s
> failed") at lib/util.c:315
> #5  0x4818cee8 in ovs_mutex_lock_at (l_=0x482a20c0, where=0x482689b4
> "lib/seq.c:120") at lib/ovs-thread.c:75
> #6  0x481bcfb4 in seq_read (seq=0x482b5ee0) at lib/seq.c:120
> #7  0x4818e3a0 in ovs_barrier_block (barrier=0x482bc700) at
> lib/ovs-thread.c:290
> #8  0x480949b0 in udpif_revalidator (arg=0x482b10e0) at
> ofproto/ofproto-dpif-upcall.c:760
> #9  0x4818e564 in ovsthread_wrapper (aux_=0x482b5280) at
> lib/ovs-thread.c:339
> #10 0xfe321574 in timer_settime () from
> /opt/QNX650/target/qnx6/ppcbe/lib/libc.so.3
> Backtrace stopped: previous frame inner to this frame (corrupt stack?)
>
> it looks like the mutex is not properly initialized.

That seems unlikely given that OVS has its own check for mutex initialization
just a couple of lines above the failure.  I think that you need to check that
you've ported the mutex functions correctly.
-- 
"I don't normally do acked-by's.  I think it's my way of avoiding
getting blamed when it all blows up."               Andrew Morton

From blp at nicira.com  Fri Jan 16 16:22:34 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 16 Jan 2015 16:22:34 -0800
Subject: [ovs-discuss] Problem: Connectivity lost through SSH when
 attaching OpenDaylight controller
In-Reply-To: <CANrAVkEtckFfhRxFBnMr5BdrXA65iPUmyhyQgo1YMxK5o7rzMA@mail.gmail.com>
References: <CANrAVkEtckFfhRxFBnMr5BdrXA65iPUmyhyQgo1YMxK5o7rzMA@mail.gmail.com>
Message-ID: <20150117002234.GE4248@nicira.com>

On Fri, Jan 16, 2015 at 03:44:41PM +0100, Ana Pérez wrote:
> The first problem is:  when I restart the VM and I try to do any operation
> with "ovs-vsctl" it fails and says:
> 
> "dpif_linux|ERR|Generic Netlink family 'ovs_datapath' does not exist. The
> Open vSwitch kernel module is probably not loaded
> dpif|WARN|failed to enumerate system datapaths: No such file or directory
> |dpif|WARN|failed to create datapath ovs-system: No such file or directory
> |ofproto_dpif|ERR|failed to open datapath of type system: No such file or
> directory"

It's very likely that the Open vSwitch kernel module is not loaded.  Did
you check?

> And the only way I have found to make it work without problems again is
> killing the ovsdb-server and ovs-vswitchd daemons, deleting the database,
> doing a "make uninstall" and re-install everything (losing all the
> configurations). Which would be the correct way to continue working after a
> reboot?

Rebooting shouldn't require special work.

> And the second, and worse for me is this: I have created one bridge in each
> OVS machine, and I have created a script (because I lose the connection to
> the machine during the process) to attach the bridge to eth0 like this:
> 
> "ovs-vsctl add-port br1 eth0
> ifconfig eth0 0.0.0.0
> ifconfig br1 10.250.0.3 netmask 255.255.0.0
> ifconfig br1 up
> route add default gw 10.250.0.1 br1
> route del default gw 10.250.0.1 eth0"
> 
> The problem is, that I need also to attach the SDN controller, but when I
> do "ovs-vsctl set-controller br1 tcp:10.250.0.2:6633" I lose the connection
> with the VM and all I can do is to get it rebooted (I don't manage the VM
> myself, I only have access to them through SSH).  I have this in the
> ovs-vswitchd.log file:

The controller sounds buggy to me.

From blp at nicira.com  Fri Jan 16 16:15:43 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 16 Jan 2015 16:15:43 -0800
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
Message-ID: <20150117001543.GD4248@nicira.com>

On Fri, Jan 16, 2015 at 06:21:01PM +0100, Azouni Abdelhadi wrote:
> I'm trying to find a way to fingerprint the controller of a given
> data-path. It will be very nice if you can give me hints about how to find
> the ip address of the controller or just to detect the presence of an
> openflow controller.

"ovs-vsctl get-controller" can report the controller.

From a_azouni at esi.dz  Fri Jan 16 16:23:20 2015
From: a_azouni at esi.dz (Azouni Abdelhadi)
Date: Sat, 17 Jan 2015 01:23:20 +0100
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <20150117001543.GD4248@nicira.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
 <20150117001543.GD4248@nicira.com>
Message-ID: <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>

Thank you for you reply Ben. But I think my question was not very clear.
Actually, I wanna find the controller or just detect his presence from a
host on the data-plane that doesn't have access to ovs commands

Thank you

Abdelhadi

On Sat, Jan 17, 2015 at 1:15 AM, Ben Pfaff <blp at nicira.com> wrote:

> On Fri, Jan 16, 2015 at 06:21:01PM +0100, Azouni Abdelhadi wrote:
> > I'm trying to find a way to fingerprint the controller of a given
> > data-path. It will be very nice if you can give me hints about how to
> find
> > the ip address of the controller or just to detect the presence of an
> > openflow controller.
>
> "ovs-vsctl get-controller" can report the controller.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150117/2ee15f0c/attachment.html>

From pdshly at gmail.com  Sat Jan 17 10:04:34 2015
From: pdshly at gmail.com (Tim Huang)
Date: Sat, 17 Jan 2015 13:04:34 -0500
Subject: [ovs-discuss] possible bug when falling back to the normal switch
Message-ID: <41578A2A-CB21-4699-90A9-E9BB3F804E82@gmail.com>

Hi there,

I am doing some test for my controller to handle the situation when some of the switches in the topology lose the connection to the controller.  The part of the topology will be something like this:

S1(DPID:11,port4)——(DPID:23,port3)S13(DPID:23,port2)—— (DPID:22,port3)S12

At first, all the switches are connected to the controller. All the switches controlled by controller send LLDP and special broadcast to all their ports.Then, I set the S13 to be standalone mode, using command to delete the controller for S13. S1, S12 will still send LLDP and  special broadcast for all their ports from controller’s packet_out . After falling back, I found the S13 can receive the special broadcast for both sides, but will only forward one side broadcast to the other. For example, S13 can receive S12’s broadcast and forward it to the S1, and it also can receive the broadcast from S1 but won’t forward it to S12. I used the wireshark to monitor the interfaces to get the conclusion. It doesn’t happen every time.  But the frequency is very high. 

What’s more interesting is if I fall back the switch and delete the controller before I start the controller,  it will not happen at all.

Is there any idea about this?

BTW: I used 1.9.3 and also tried with 2.3.1, the situation is the same.



From pdshly at gmail.com  Sat Jan 17 10:09:52 2015
From: pdshly at gmail.com (tim huang)
Date: Sat, 17 Jan 2015 13:09:52 -0500
Subject: [ovs-discuss] possible bug when falling back to the normal switch
Message-ID: <CAG7sx_K6cSxXZLJcijMhDeCSX4nUe7fSC9f-Mb2=VRE743z_Dg@mail.gmail.com>

Hi there,

I am doing some test for my controller to handle the situation when some of
the switches in the topology lose the connection to the controller.  The
part of the topology will be something like this:

S1(DPID:11,port4)——(DPID:23,port3)S13(DPID:23,port2)—— (DPID:22,port3)S12

At first, all the switches are connected to the controller. All the
switches controlled by controller send LLDP and special broadcast to all
their ports.Then, I set the S13 to be standalone mode, using command to
delete the controller for S13. S1, S12 will still send LLDP and  special
broadcast for all their ports from controller’s packet_out . After falling
back, I found the S13 can receive the special broadcast for both sides, but
will only forward one side broadcast to the other. For example, S13 can
receive S12’s broadcast and forward it to the S1, and it also can receive
the broadcast from S1 but won’t forward it to S12. I used the wireshark to
monitor the interfaces to get the conclusion. It doesn’t happen every
time.  But the frequency is very high.

What’s more interesting is if I fall back the switch and delete the
controller before I start the controller,  it will not happen at all.

Is there any idea about this?

BTW: I used 1.9.3 and also tried with 2.3.1, the situation is the same.


-- 
Thanks
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150117/c253f287/attachment.html>

From prasanna at yabaluri.com  Sat Jan 17 13:55:32 2015
From: prasanna at yabaluri.com (Prasanna Yabaluri)
Date: Sat, 17 Jan 2015 16:55:32 -0500
Subject: [ovs-discuss] OpenvSwitch install 2.3.0 not working...
Message-ID: <CABwL-UNnu+1T-rH4y-xXYbx-FJbm5J41gaT5z2fmzZJZNTjjXg@mail.gmail.com>

Not sure if install went fine....

After the install switch does not connect to controller.

user1 at user1-GT5464: sudo ovs-vsctl add-port br2 eth1
ovs-vsctl: Error detected while setting up 'eth1'.  See ovs-vswitchd log
for details.

user1 at user1-GT5464:/var/log$ sudo ovs-vsctl show
9080842e-e7f6-4ab6-8c99-f73785e9ebfb
    Bridge "br2"
        Controller "tcp:192.168.0.106:6633"
        Port "eth2"
            Interface "eth2"
        Port "eth3"
            Interface "eth3"
        Port "br2"
            Interface "br2"
                type: internal
        Port "eth1"
            Interface "eth1"

user1 at user1-GT5464:~$ sudo ovs-vsctl list controller
_uuid               : e175e570-4295-4fe0-98a4-eb6cd4c56c2a
is_connected        : false

The ovs-vswitchd.log files are empty to see what's going on...

/var/log/openvswitch
-rw-r-----  1 root adm        0 Jan 17 07:55 ovs-vswitchd.log
-rw-r-----  1 root adm        0 Jan 16 03:32 ovs-vswitchd.log.1

user1 at user1-GT5464:/var/log$ sudo ovs-dpctl show br2
2015-01-17T21:50:33Z|00001|dpif_linux|ERR|Generic Netlink family
'ovs_datapath' does not exist. The Open vSwitch kernel module is probably
not loaded.
ovs-dpctl: opening datapath br2 failed (No such file or directory)

user1 at user1-GT5464:/var/log$ sudo ovs-vsctl --version
ovs-vsctl (Open vSwitch) 2.3.0
Compiled Jan 17 2015 10:55:18
DB Schema 7.6.0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150117/7cb48a9a/attachment.html>

From blp at nicira.com  Sun Jan 18 10:43:20 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 18 Jan 2015 10:43:20 -0800
Subject: [ovs-discuss] OpenvSwitch install 2.3.0 not working...
In-Reply-To: <CABwL-UNnu+1T-rH4y-xXYbx-FJbm5J41gaT5z2fmzZJZNTjjXg@mail.gmail.com>
References: <CABwL-UNnu+1T-rH4y-xXYbx-FJbm5J41gaT5z2fmzZJZNTjjXg@mail.gmail.com>
Message-ID: <20150118184320.GA23776@nicira.com>

On Sat, Jan 17, 2015 at 04:55:32PM -0500, Prasanna Yabaluri wrote:
> The ovs-vswitchd.log files are empty to see what's going on...
> 
> /var/log/openvswitch
> -rw-r-----  1 root adm        0 Jan 17 07:55 ovs-vswitchd.log
> -rw-r-----  1 root adm        0 Jan 16 03:32 ovs-vswitchd.log.1

You might want to make sure that you passed the --log-file option to
ovs-vswitchd so that it writes to the log file.

> user1 at user1-GT5464:/var/log$ sudo ovs-dpctl show br2
> 2015-01-17T21:50:33Z|00001|dpif_linux|ERR|Generic Netlink family
> 'ovs_datapath' does not exist. The Open vSwitch kernel module is probably
> not loaded.
> ovs-dpctl: opening datapath br2 failed (No such file or directory)

The Open vSwitch kernel module is probably not loaded.  You should load
it.

From benoitne at gmail.com  Sun Jan 18 12:57:19 2015
From: benoitne at gmail.com (Ben)
Date: Sun, 18 Jan 2015 21:57:19 +0100
Subject: [ovs-discuss] OVN, Bringing Native Virtual Networking to OVS
In-Reply-To: <CAL3VkVygX21J70DnfG2MbkvjMbG+WAUKyiN5fD1WBy5ciBY+6w@mail.gmail.com>
References: <74660AF6-F584-4658-BD75-09D4A60A56BB@nicira.com>
 <CAL3VkVygX21J70DnfG2MbkvjMbG+WAUKyiN5fD1WBy5ciBY+6w@mail.gmail.com>
Message-ID: <54BC1E2F.7000809@gmail.com>

It is a very good news! Congrats!
Is there a documentation for the new commands or a how-to with examples 
somewhere ?

belette

On 13/01/2015 20:41, Kyle Mestery wrote:
> On Tue, Jan 13, 2015 at 1:28 PM, Justin Pettit <jpettit at nicira.com 
> <mailto:jpettit at nicira.com>> wrote:
>
>     The Open vSwitch team is pleased to announce OVN, a new subproject
>     in development within the Open vSwitch.  The full project
>     announcement is at Network Heresy and reproduced below. OVN
>     complements the existing capabilities of OVS to add native support
>     for virtual network abstractions, such as virtual L2 and L3
>     overlays and security groups.  Just like OVS, our design goal is
>     to have a production-quality implementation that can operate at
>     significant scale.
>
>     --The Open vSwitch Team
>
> I'll be the first to say it:
>
> "Awesome!"
>
> Looking forward to seeing this evolve and develop inside the OVS project!
>
> Thanks,
> Kyle
>
>
>     -=-=-=-=-=-=-=-=-=-
>
>     OVN, Bringing Native Virtual Networking to OVS
>
>     By Justin Pettit, Ben Pfaff, Chris Wright, and Madhu Venugopal
>
>
>     Today we are excited to announce Open Virtual Network (OVN), a new
>     project that brings virtual networking to the OVS user community.
>     OVN complements the existing capabilities of OVS to add native
>     support for virtual network abstractions, such as virtual L2 and
>     L3 overlays and security groups. Just like OVS, our design goal is
>     to have a production quality implementation that can operate at
>     significant scale.
>
>     Why are we doing this? The primary goal in developing Open vSwitch
>     has always been to provide a production-ready low-level networking
>     component for hypervisors that could support a diverse range of
>     network environments.  As one example of the success of this
>     approach, Open vSwitch is the most popular choice of virtual
>     switch in OpenStack deployments. To make OVS more effective in
>     these environments, we believe the logical next step is to augment
>     the low-level switching capabilities with a lightweight control
>     plane that provides native support for common virtual networking
>     abstractions.
>
>     To achieve these goals, OVN's design is narrowly focused on
>     providing L2/L3 virtual networking. This distinguishes OVN from
>     general-purpose SDN controllers or platforms.
>
>     OVN is a new project from the Open vSwitch team to support virtual
>     network abstraction. OVN will put users in control over cloud
>     network resources, by allowing users to connect groups of VMs or
>     containers into private L2 and L3 networks, quickly,
>     programmatically, and without the need to provision VLANs or other
>     physical network resources. OVN will include logical switches and
>     routers, security groups, and L2/L3/L4 ACLs, implemented on top of
>     a tunnel-based (VXLAN, NVGRE, Geneve, STT, IPsec) overlay network.
>
>     OVN aims to be sufficiently robust and scalable to support large
>     production deployments. OVN will support the same virtual machine
>     environments as Open vSwitch, including KVM, Xen, and the emerging
>     port to Hyper-V.  Container systems such as Docker are growing in
>     importance but pose new challenges in scale and responsiveness, so
>     we will work with the container community to ensure quality native
>     support.  For physical-logical network integration, OVN will
>     implement software gateways, as well as support hardware gateways
>     from vendors that implement the “vtep” schema that ships with OVS.
>
>     Northbound, we will work with the OpenStack community to integrate
>     OVN via a new plugin.  The OVN architecture will simplify the
>     current Open vSwitch integration within Neutron by providing a
>     virtual networking abstraction. OVN will provide Neutron with
>     improved dataplane performance through shortcut, distributed
>     logical L3 processing and in-kernel based security groups, without
>     running special OpenStack agents on hypervisors. Lastly, it will
>     provide a scale-out and highly available gateway solution
>     responsible for bridging from logical into physical space.
>
>     The Open vSwitch team will build and maintain OVN under the same
>     open source license terms as Open vSwitch, and is open to
>     contributions from all.  The outline of OVN’s design is guided by
>     our experience developing Open vSwitch, OpenStack, and
>     Nicira/VMware’s networking solutions.  We will evolve the design
>     and implementation in the Open vSwitch mailing lists, using the
>     same open process used for Open vSwitch.
>
>     OVN will not require a special build of OVS or OVN-specific
>     changes to ovs-vswitchd or ovsdb-server.  OVN components will be
>     part of the Open vSwitch source and binary distributions.  OVN
>     will integrate with existing Open vSwitch components, using
>     established protocols such as OpenFlow and OVSDB, using an OVN
>     agent that connects to ovs-vswitchd and ovsdb-server.  (The VTEP
>     emulator already in OVS’s “vtep” directory uses a similar
>     architecture.)
>
>     OVN is not a generic platform or SDN controller on which
>     applications are built.  Rather, OVN will be purpose built to
>     provide virtual networking.  Because OVN will use the same
>     interfaces as any other controller, OVS will remain as flexible
>     and unspecialized as it is today.  It will still provide the same
>     primitives that it always has and continue to be the best software
>     switch for any controller.
>
>     The design and implementation will occur on the ovs-dev mailing
>     list.  In fact, a high-level description of the architecture was
>     posted this morning.  If you’d like to join the effort, please
>     check out the mailing list.
>
>     Happy switching!
>
>
>     _______________________________________________
>     discuss mailing list
>     discuss at openvswitch.org <mailto:discuss at openvswitch.org>
>     http://openvswitch.org/mailman/listinfo/discuss
>
>
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150118/92243cbe/attachment.html>

From jpettit at nicira.com  Sun Jan 18 13:59:09 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Sun, 18 Jan 2015 13:59:09 -0800
Subject: [ovs-discuss] OVN, Bringing Native Virtual Networking to OVS
In-Reply-To: <54BC1E2F.7000809@gmail.com>
References: <74660AF6-F584-4658-BD75-09D4A60A56BB@nicira.com>
 <CAL3VkVygX21J70DnfG2MbkvjMbG+WAUKyiN5fD1WBy5ciBY+6w@mail.gmail.com>
 <54BC1E2F.7000809@gmail.com>
Message-ID: <862CD930-D323-4BE0-B536-11014159B2AA@nicira.com>

We've only announced the project; there's no code yet. We'll be hashing out more details of the design over the next couple of weeks, and the code will start after that. 

--Justin


> On Jan 18, 2015, at 12:57 PM, Ben <benoitne at gmail.com> wrote:
> 
> It is a very good news! Congrats!
> Is there a documentation for the new commands or a how-to with examples somewhere ?
> 
> belette
> 
>> On 13/01/2015 20:41, Kyle Mestery wrote:
>> On Tue, Jan 13, 2015 at 1:28 PM, Justin Pettit <jpettit at nicira.com> wrote:
>>> The Open vSwitch team is pleased to announce OVN, a new subproject in development within the Open vSwitch.  The full project announcement is at Network Heresy and reproduced below.  OVN complements the existing capabilities of OVS to add native support for virtual network abstractions, such as virtual L2 and L3 overlays and security groups.  Just like OVS, our design goal is to have a production-quality implementation that can operate at significant scale.
>>> 
>>> --The Open vSwitch Team
>> I'll be the first to say it:
>> 
>> "Awesome!"
>> 
>> Looking forward to seeing this evolve and develop inside the OVS project!
>> 
>> Thanks,
>> Kyle
>> 
>>> 
>>> -=-=-=-=-=-=-=-=-=-
>>> 
>>> OVN, Bringing Native Virtual Networking to OVS
>>> 
>>> By Justin Pettit, Ben Pfaff, Chris Wright, and Madhu Venugopal
>>> 
>>> 
>>> Today we are excited to announce Open Virtual Network (OVN), a new project that brings virtual networking to the OVS user community. OVN complements the existing capabilities of OVS to add native support for virtual network abstractions, such as virtual L2 and L3 overlays and security groups. Just like OVS, our design goal is to have a production quality implementation that can operate at significant scale.
>>> 
>>> Why are we doing this? The primary goal in developing Open vSwitch has always been to provide a production-ready low-level networking component for hypervisors that could support a diverse range of network environments.  As one example of the success of this approach, Open vSwitch is the most popular choice of virtual switch in OpenStack deployments. To make OVS more effective in these environments, we believe the logical next step is to augment the low-level switching capabilities with a lightweight control plane that provides native support for common virtual networking abstractions.
>>> 
>>> To achieve these goals, OVN's design is narrowly focused on providing L2/L3 virtual networking. This distinguishes OVN from general-purpose SDN controllers or platforms.
>>> 
>>> OVN is a new project from the Open vSwitch team to support virtual network abstraction. OVN will put users in control over cloud network resources, by allowing users to connect groups of VMs or containers into private L2 and L3 networks, quickly, programmatically, and without the need to provision VLANs or other physical network resources.  OVN will include logical switches and routers, security groups, and L2/L3/L4 ACLs, implemented on top of a tunnel-based (VXLAN, NVGRE, Geneve, STT, IPsec) overlay network.
>>> 
>>> OVN aims to be sufficiently robust and scalable to support large production deployments. OVN will support the same virtual machine environments as Open vSwitch, including KVM, Xen, and the emerging port to Hyper-V.  Container systems such as Docker are growing in importance but pose new challenges in scale and responsiveness, so we will work with the container community to ensure quality native support.  For physical-logical network integration, OVN will implement software gateways, as well as support hardware gateways from vendors that implement the “vtep” schema that ships with OVS.
>>> 
>>> Northbound, we will work with the OpenStack community to integrate OVN via a new plugin.  The OVN architecture will simplify the current Open vSwitch integration within Neutron by providing a virtual networking abstraction.  OVN will provide Neutron with improved dataplane performance through shortcut, distributed logical L3 processing and in-kernel based security groups, without running special OpenStack agents on hypervisors. Lastly, it will provide a scale-out and highly available gateway solution responsible for bridging from logical into physical space.
>>> 
>>> The Open vSwitch team will build and maintain OVN under the same open source license terms as Open vSwitch, and is open to contributions from all.  The outline of OVN’s design is guided by our experience developing Open vSwitch, OpenStack, and Nicira/VMware’s networking solutions.  We will evolve the design and implementation in the Open vSwitch mailing lists, using the same open process used for Open vSwitch.
>>> 
>>> OVN will not require a special build of OVS or OVN-specific changes to ovs-vswitchd or ovsdb-server.  OVN components will be part of the Open vSwitch source and binary distributions.  OVN will integrate with existing Open vSwitch components, using established protocols such               as OpenFlow and OVSDB, using an OVN agent that connects to ovs-vswitchd and ovsdb-server.  (The VTEP emulator already in OVS’s “vtep” directory uses a similar architecture.)
>>> 
>>> OVN is not a generic platform or SDN controller on which applications are built.  Rather, OVN will be purpose built to provide virtual networking.  Because OVN will use the same interfaces as any other controller, OVS will remain as flexible and unspecialized as it is today.  It will still provide the same primitives that it always has and continue to be the best software switch for any controller.
>>> 
>>> The design and implementation will occur on the ovs-dev mailing list.  In fact, a high-level description of the architecture was posted this morning.  If you’d like to join the effort, please check out the mailing list.
>>> 
>>> Happy switching!
>>> 
>>> 
>>> _______________________________________________
>>> discuss mailing list
>>> discuss at openvswitch.org
>>> http://openvswitch.org/mailman/listinfo/discuss
>> 
>> 
>> 
>> _______________________________________________
>> discuss mailing list
>> discuss at openvswitch.org
>> http://openvswitch.org/mailman/listinfo/discuss
> 
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150118/8c2d04ef/attachment-0001.html>

From 601358880 at qq.com  Sun Jan 18 23:19:30 2015
From: 601358880 at qq.com (=?ISO-8859-1?B?WWFuZyBZYW5uYW4=?=)
Date: Mon, 19 Jan 2015 15:19:30 +0800
Subject: [ovs-discuss] ovs-vswitch log
Message-ID: <tencent_399048CD4443AE89452D4BBF@qq.com>

hi
when creating vport type of lisp, it shows:  ovs-vsctl:  error detected while setting up lisp. see ovs-vswiched log for details.
where is ovs-vswiched log? I searched it and did not find it. version of ovs is 2.3.
thank for your time
regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/3184ad8a/attachment.html>

From fengyuleidian0615 at gmail.com  Sun Jan 18 23:27:58 2015
From: fengyuleidian0615 at gmail.com (Fan Du)
Date: Mon, 19 Jan 2015 15:27:58 +0800
Subject: [ovs-discuss] ovs-vswitch log
In-Reply-To: <tencent_399048CD4443AE89452D4BBF@qq.com>
References: <tencent_399048CD4443AE89452D4BBF@qq.com>
Message-ID: <54BCB1FE.4020503@gmail.com>

#ovs-vswitchd --help
Logging options:
   -vSPEC, --verbose=SPEC   set logging levels
   -v, --verbose            set maximum verbosity level
   --log-file[=FILE]        enable logging to specified FILE
                            (default: /usr/local/var/log/openvswitch/ovs-vswitchd.log)

于 2015年01月19日 15:19, Yang Yannan 写道:
> hi
> when creating vport type of lisp, it shows:  ovs-vsctl:  error detected while setting up lisp. see ovs-vswiched log for details.
> where is ovs-vswiched log? I searched it and did not find it. version of ovs is 2.3.
> thank for your time
> regards.
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>


-- 
No zuo no die but I have to try.

From batmanustc at gmail.com  Mon Jan 19 00:23:43 2015
From: batmanustc at gmail.com (yewgang)
Date: Mon, 19 Jan 2015 16:23:43 +0800
Subject: [ovs-discuss] Is there any possible for program blocking here for
	long time ?
Message-ID: <CAOE=1Z05p9GgJ8HF_kP24QCyqH_HJBZGkwEhffwRJQZWtqt=tw@mail.gmail.com>

Dear ovs-developer,

Now for some reason I have to write codes like this (My program perform
ovsdb-client):

LOOP {
    ........
    important task every 2 second;
    ovsdb_idl_txn_commit_block(txn);
    ........
}

If ovsdb-server is OK, ovsdb_idl_txn_commit_block will not block; but if
ovsdb-server is blocked or network is blocked, Is there any possible for my
program blocking at poll_block() (in ovsdb_idl_txn_commit_block function)
for long time ? Which will cause delay to the " important task every 2
second;"


---------------------------I'm gorgeous dividing
line-------------------------------

ovsdb_idl_txn_commit_block function detail is :

enum ovsdb_idl_txn_status
ovsdb_idl_txn_commit_block(struct ovsdb_idl_txn *txn)
{
    enum ovsdb_idl_txn_status status;

    fatal_signal_run();
    while ((status = ovsdb_idl_txn_commit(txn)) == TXN_INCOMPLETE) {
        ovsdb_idl_run(txn->idl);
        ovsdb_idl_wait(txn->idl);
        ovsdb_idl_txn_wait(txn);
        poll_block();
    }
    return status;
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/54810a57/attachment.html>

From vbadiger at avaya.com  Mon Jan 19 04:16:00 2015
From: vbadiger at avaya.com (Badiger, Vishwanath (Vishwa))
Date: Mon, 19 Jan 2015 12:16:00 +0000
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <CAEP_g=9te6Fq+4rcbnQ-TxtKNEyCPcPZFRmoCGKC=Zr3mATZ4Q@mail.gmail.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F4517@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=9te6Fq+4rcbnQ-TxtKNEyCPcPZFRmoCGKC=Zr3mATZ4Q@mail.gmail.com>
Message-ID: <7712B9DB39307A41B020D8182A22B13C445F4F88@AZ-FFEXMB04.global.avaya.com>

I was going through openvswitch docs (OpenStack-131107.pdf and page number 13). I happen to see that first goes to ovs-vswitchd (user space) and this makes decision of how to process THIS FLOW. Later, subsequent packets hit cached entry in ovs kernel module. Is this design still valid with latest code ?
If yes, why don’t first packet of every new TCP connection does not go up to ovs-vswitchd (user space) ?

Please don’t mind even though I am asking basic questions.


Regards,
Vishwa.

-----Original Message-----
From: Jesse Gross [mailto:jesse at nicira.com] 
Sent: Friday, January 16, 2015 2:08 AM
To: Badiger, Vishwanath (Vishwa)
Cc: Uri Simchoni; discuss at openvswitch.org
Subject: Re: [ovs-discuss] MSS Clamping

Thanks for the reminder. However, that patch will basically not work at all any more due to the fact that we try to avoid sending new TCP connections up to usespace. Therefore, I stand by my previous comments that you should look at the more recent thread.

On Wed, Jan 14, 2015 at 10:29 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
> I am referring to below patch,
> https://urldefense.proofpoint.com/v2/url?u=http-3A__openvswitch.org_pi
> permail_dev_2012-2DJune_017640.html&d=AwIFaQ&c=BFpWQw8bsuKpl1SgiZH64Q&
> r=QlZE3gUHm8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=96CZVpeBBqwkcX1tMaSfP8
> w_SAXSDy4xwyAna_dWMWo&s=J-6TI9tB4hAMuIGSNkKCUioTRyr-fcLk6Nx-uw-GI1g&e=
>
> MSS clamping even avoids packet getting fragmented by modifying MSS value in TCP SYN packets.
>
>
> Regards,
> Vishwa.
>
>
> -----Original Message-----
> From: Jesse Gross [mailto:jesse at nicira.com]
> Sent: Thursday, January 15, 2015 11:04 AM
> To: Badiger, Vishwanath (Vishwa)
> Cc: Uri Simchoni; discuss at openvswitch.org
> Subject: Re: [ovs-discuss] MSS Clamping
>
> On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
>> Hi,
>> I am in the process of migrating MSS clamping patch into recent OVS 
>> code base 2.3.0. But not finding functions like, 1.
>> subfacet_make_actions() 2. iface_parse_tunnel()
>>
>> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
>> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>>
>> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
>> Thanks.
>
> I don't actually know what patch you are referring to. However, I doubt that a patch that is just updated to the latest code base will be accepted if the original wasn't.
>
> Please see this (long) thread on more recent discussion of how to handle this problem:
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spinics.net_li
> sts_netdev_msg306502.html&d=AwIBaQ&c=BFpWQw8bsuKpl1SgiZH64Q&r=QlZE3gUH
> m8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=7iNT4HO2rZcKPACWsmsxGFg6zXdLUpic
> i8mppaeu1fQ&s=bj8J0oS15-pq-ZZK9elQoYnXSOpnzmICZu52c2-opYQ&e=

From vbadiger at avaya.com  Mon Jan 19 04:26:24 2015
From: vbadiger at avaya.com (Badiger, Vishwanath (Vishwa))
Date: Mon, 19 Jan 2015 12:26:24 +0000
Subject: [ovs-discuss] MSS Clamping
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F4517@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=9te6Fq+4rcbnQ-TxtKNEyCPcPZFRmoCGKC=Zr3mATZ4Q@mail.gmail.com> 
Message-ID: <7712B9DB39307A41B020D8182A22B13C445F4F99@AZ-FFEXMB04.global.avaya.com>

I was going through openvswitch docs (OpenStack-131107.pdf and page number 13; Attached snapshot of page with this mail). 
I happen to see that first packet (of flow) goes to ovs-vswitchd (user space) and this makes decision of how to process THIS FLOW. Later, subsequent packets hit cached entry in ovs kernel module. 
Is this design still valid with latest code ?
If yes, why don’t first packet of every new TCP connection does not go up to ovs-vswitchd (user space) ?

Please don’t mind even though I am asking basic questions.


Regards,
Vishwa.


-----Original Message-----
From: Badiger, Vishwanath (Vishwa) 
Sent: Monday, January 19, 2015 5:46 PM
To: 'Jesse Gross'
Cc: Uri Simchoni; discuss at openvswitch.org
Subject: RE: [ovs-discuss] MSS Clamping

I was going through openvswitch docs (OpenStack-131107.pdf and page number 13). I happen to see that first goes to ovs-vswitchd (user space) and this makes decision of how to process THIS FLOW. Later, subsequent packets hit cached entry in ovs kernel module. Is this design still valid with latest code ?
If yes, why don’t first packet of every new TCP connection does not go up to ovs-vswitchd (user space) ?

Please don’t mind even though I am asking basic questions.


Regards,
Vishwa.

-----Original Message-----
From: Jesse Gross [mailto:jesse at nicira.com]
Sent: Friday, January 16, 2015 2:08 AM
To: Badiger, Vishwanath (Vishwa)
Cc: Uri Simchoni; discuss at openvswitch.org
Subject: Re: [ovs-discuss] MSS Clamping

Thanks for the reminder. However, that patch will basically not work at all any more due to the fact that we try to avoid sending new TCP connections up to usespace. Therefore, I stand by my previous comments that you should look at the more recent thread.

On Wed, Jan 14, 2015 at 10:29 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
> I am referring to below patch,
> https://urldefense.proofpoint.com/v2/url?u=http-3A__openvswitch.org_pi
> permail_dev_2012-2DJune_017640.html&d=AwIFaQ&c=BFpWQw8bsuKpl1SgiZH64Q&
> r=QlZE3gUHm8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=96CZVpeBBqwkcX1tMaSfP8
> w_SAXSDy4xwyAna_dWMWo&s=J-6TI9tB4hAMuIGSNkKCUioTRyr-fcLk6Nx-uw-GI1g&e=
>
> MSS clamping even avoids packet getting fragmented by modifying MSS value in TCP SYN packets.
>
>
> Regards,
> Vishwa.
>
>
> -----Original Message-----
> From: Jesse Gross [mailto:jesse at nicira.com]
> Sent: Thursday, January 15, 2015 11:04 AM
> To: Badiger, Vishwanath (Vishwa)
> Cc: Uri Simchoni; discuss at openvswitch.org
> Subject: Re: [ovs-discuss] MSS Clamping
>
> On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
>> Hi,
>> I am in the process of migrating MSS clamping patch into recent OVS 
>> code base 2.3.0. But not finding functions like, 1.
>> subfacet_make_actions() 2. iface_parse_tunnel()
>>
>> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
>> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>>
>> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
>> Thanks.
>
> I don't actually know what patch you are referring to. However, I doubt that a patch that is just updated to the latest code base will be accepted if the original wasn't.
>
> Please see this (long) thread on more recent discussion of how to handle this problem:
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spinics.net_li
> sts_netdev_msg306502.html&d=AwIBaQ&c=BFpWQw8bsuKpl1SgiZH64Q&r=QlZE3gUH
> m8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=7iNT4HO2rZcKPACWsmsxGFg6zXdLUpic
> i8mppaeu1fQ&s=bj8J0oS15-pq-ZZK9elQoYnXSOpnzmICZu52c2-opYQ&e=
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OVS.jpg
Type: image/jpeg
Size: 61225 bytes
Desc: OVS.jpg
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/41320161/attachment-0001.jpg>

From sbiswas7 at in.ibm.com  Mon Jan 19 06:58:25 2015
From: sbiswas7 at in.ibm.com (Sudipta Biswas3)
Date: Mon, 19 Jan 2015 20:28:25 +0530
Subject: [ovs-discuss]  Machine not pingable after OVS upgrade.
Message-ID: <OFA1F02A0C.39B4BCC5-ON65257DD2.00507930-65257DD2.0052405B@in.ibm.com>

Hi all,

I had the following configuration:

ovs-vsctl show
    Bridge br-ex
        Port "eth0"
            Interface "eth0"
        Port br-ex
            Interface br-ex
                type: internal

eth0 being the eth device who's IP was migrated over to br-ex. The OVS 
version used here was 2.0

I downloaded the OVS 2.3.1 tar ball and did an install following the 
INSTALL doc.
I hadn't cleaned up the DB before doing so. Post the upgrade -  I was able 
to successfully start the ovsdb-server but the ovs-vsctl output didn't 
have the older config. (It was a blank output)
eth0 appeared without the IP address and the ifconfig command doesn't list 
br-ex anymore. I modified the ifcfg files to have the IP over on the eth 
device eth0.

Post this too, the system was unreachable.  I switched off the OVS process 
and after a reboot - the machine became reachable however, now everytime i 
start the ovsdb-server/ovs-vswitchd, the host becomes unreachable.

Any clues on why this might be happening? I have tried dumping the 
database, but unfortunately couldn't find the right command without the 
ovs-vsctl utility which always ends up showing empty tables.

>From the ovs-vswitchd.log file - these lines could be seen:

|00067|netdev_linux|WARN|br-ex: obtaining netdev stats via vport failed 
(No such device)
|00068|netdev_linux|INFO|ioctl(SIOCGIFHWADDR) on br-ex device failed: No 
such device
|00069|netdev_linux|WARN|ioctl(SIOCGIFINDEX) on br-ex device failed: No 
such device

So i am wondering if the old DB entries are still somehow left over...Is 
there a way to clean them up?

Regards,

Sudipto Biswas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/d4249181/attachment.html>

From a_azouni at esi.dz  Mon Jan 19 07:20:05 2015
From: a_azouni at esi.dz (Azouni Abdelhadi)
Date: Mon, 19 Jan 2015 16:20:05 +0100
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
 <20150117001543.GD4248@nicira.com>
 <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>
Message-ID: <CA+_RhB1nWTCaFhAgXGTm7u=s143_BUmF_Q2Q8M_uUqxh0aJczw@mail.gmail.com>

Hello,

Please, anyone have an idea how to fingerprint an openflow controller from
the dataplane ?

Thanks

Abdelhadi

On Sat, Jan 17, 2015 at 1:23 AM, Azouni Abdelhadi <a_azouni at esi.dz> wrote:

> Thank you for you reply Ben. But I think my question was not very clear.
> Actually, I wanna find the controller or just detect his presence from a
> host on the data-plane that doesn't have access to ovs commands
>
> Thank you
>
> Abdelhadi
>
> On Sat, Jan 17, 2015 at 1:15 AM, Ben Pfaff <blp at nicira.com> wrote:
>
>> On Fri, Jan 16, 2015 at 06:21:01PM +0100, Azouni Abdelhadi wrote:
>> > I'm trying to find a way to fingerprint the controller of a given
>> > data-path. It will be very nice if you can give me hints about how to
>> find
>> > the ip address of the controller or just to detect the presence of an
>> > openflow controller.
>>
>> "ovs-vsctl get-controller" can report the controller.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/5081a434/attachment.html>

From prasanna at yabaluri.com  Mon Jan 19 07:49:54 2015
From: prasanna at yabaluri.com (Prasanna Yabaluri)
Date: Mon, 19 Jan 2015 10:49:54 -0500
Subject: [ovs-discuss] Vswitch not connecting to controller
Message-ID: <CABwL-UOxF=vzGc86x8TEnHaSTnHeZEXpFU=bH-pc7E=CcScGoQ@mail.gmail.com>

Ping does respond from switch to controller ...

root at user1-GT5464:/home/user1# ping 192.168.0.106
PING 192.168.0.106 (192.168.0.106) 56(84) bytes of data.
64 bytes from 192.168.0.106: icmp_seq=1 ttl=64 time=0.399 ms
64 bytes from 192.168.0.106: icmp_seq=2 ttl=64 time=0.390 ms


root at user1-GT5464:/home/user1# ovs-vsctl list controller
_uuid               : ff378ce0-eeac-43ad-b6f1-c4323ec578f3
connection_mode     : []
controller_burst_limit: []
controller_rate_limit: []
enable_async_messages: []
external_ids        : {}
inactivity_probe    : []
is_connected        : false
local_gateway       : []
local_ip            : []
local_netmask       : []
max_backoff         : []
other_config        : {}
role                : other
status              : {last_error="Connection refused",
sec_since_disconnect="0", state=BACKOFF}
target              : "tcp:192.168.0.106:6633"
root at user1-GT5464:/home/user1# sudo ovs-vsctl set controller
ff378ce0-eeac-43ad-b6f1-c4323ec578f3 connection_mode="out-of-band"
root at user1-GT5464:/home/user1# ovs-vsctl list controller
_uuid               : ff378ce0-eeac-43ad-b6f1-c4323ec578f3
connection_mode     : out-of-band
controller_burst_limit: []
controller_rate_limit: []
enable_async_messages: []
external_ids        : {}
inactivity_probe    : []
is_connected        : false
local_gateway       : []
local_ip            : []
local_netmask       : []
max_backoff         : []
other_config        : {}
role                : other
status              : {last_error="Connection refused",
sec_since_disconnect="4", state=BACKOFF}
target              : "tcp:192.168.0.106:6633"

/var/logs/openvswitch/ovs-vswitchd.log shows...

2015-01-19T14:27:03.656Z|00162|rconn|DBG|br2<->tcp:192.168.0.106:6633:
entering BACKOFF
2015-01-19T14:27:11.656Z|00163|rconn|DBG|br2<->tcp:192.168.0.106:6633:
entering CONNECTING
2015-01-19T14:27:11.656Z|00164|rconn|DBG|br2<->tcp:192.168.0.106:6633:
entering BACKOFF
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/1c038df0/attachment.html>

From blp at nicira.com  Mon Jan 19 09:08:50 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 09:08:50 -0800
Subject: [ovs-discuss] Vswitch not connecting to controller
In-Reply-To: <CABwL-UOxF=vzGc86x8TEnHaSTnHeZEXpFU=bH-pc7E=CcScGoQ@mail.gmail.com>
References: <CABwL-UOxF=vzGc86x8TEnHaSTnHeZEXpFU=bH-pc7E=CcScGoQ@mail.gmail.com>
Message-ID: <20150119170850.GA983@nicira.com>

On Mon, Jan 19, 2015 at 10:49:54AM -0500, Prasanna Yabaluri wrote:
> Ping does respond from switch to controller ...
> 
> root at user1-GT5464:/home/user1# ping 192.168.0.106
> PING 192.168.0.106 (192.168.0.106) 56(84) bytes of data.
> 64 bytes from 192.168.0.106: icmp_seq=1 ttl=64 time=0.399 ms
> 64 bytes from 192.168.0.106: icmp_seq=2 ttl=64 time=0.390 ms
> 
> 
> root at user1-GT5464:/home/user1# ovs-vsctl list controller
> _uuid               : ff378ce0-eeac-43ad-b6f1-c4323ec578f3
> connection_mode     : []
> controller_burst_limit: []
> controller_rate_limit: []
> enable_async_messages: []
> external_ids        : {}
> inactivity_probe    : []
> is_connected        : false
> local_gateway       : []
> local_ip            : []
> local_netmask       : []
> max_backoff         : []
> other_config        : {}
> role                : other
> status              : {last_error="Connection refused",
> sec_since_disconnect="0", state=BACKOFF}

It looks like the switch is seeing "connection refused" errors when it
tries to connect to the controller.

From blp at nicira.com  Mon Jan 19 09:10:07 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 09:10:07 -0800
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <CA+_RhB1nWTCaFhAgXGTm7u=s143_BUmF_Q2Q8M_uUqxh0aJczw@mail.gmail.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
 <20150117001543.GD4248@nicira.com>
 <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>
 <CA+_RhB1nWTCaFhAgXGTm7u=s143_BUmF_Q2Q8M_uUqxh0aJczw@mail.gmail.com>
Message-ID: <20150119171007.GB983@nicira.com>

Have you tried doing a port scan for ports 6633 and 6653?

On Mon, Jan 19, 2015 at 04:20:05PM +0100, Azouni Abdelhadi wrote:
> Hello,
> 
> Please, anyone have an idea how to fingerprint an openflow controller from
> the dataplane ?
> 
> Thanks
> 
> Abdelhadi
> 
> On Sat, Jan 17, 2015 at 1:23 AM, Azouni Abdelhadi <a_azouni at esi.dz> wrote:
> 
> > Thank you for you reply Ben. But I think my question was not very clear.
> > Actually, I wanna find the controller or just detect his presence from a
> > host on the data-plane that doesn't have access to ovs commands
> >
> > Thank you
> >
> > Abdelhadi
> >
> > On Sat, Jan 17, 2015 at 1:15 AM, Ben Pfaff <blp at nicira.com> wrote:
> >
> >> On Fri, Jan 16, 2015 at 06:21:01PM +0100, Azouni Abdelhadi wrote:
> >> > I'm trying to find a way to fingerprint the controller of a given
> >> > data-path. It will be very nice if you can give me hints about how to
> >> find
> >> > the ip address of the controller or just to detect the presence of an
> >> > openflow controller.
> >>
> >> "ovs-vsctl get-controller" can report the controller.
> >>
> >
> >

From g.cofano87 at gmail.com  Mon Jan 19 09:20:10 2015
From: g.cofano87 at gmail.com (Giuseppe Cofano)
Date: Mon, 19 Jan 2015 18:20:10 +0100
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
Message-ID: <CA+Wu3iDVkM5Lm4v5a_Kzf1a1aHv4cmDWTE=eLCjGnMeLfx-f2A@mail.gmail.com>

Any hint?

Giuseppe


2015-01-16 8:58 GMT+01:00 Giuseppe Cofano <g.cofano87 at gmail.com>:

> Here it is
>
>
> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
>
>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
>> > I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
>> >
>> > When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
>> get
>> > a lot of "Failed" in the unit tests and a final Make error ("make: ***
>> > [build-arch-stamp] Error 1").
>>
>> You should find a testsuite.log file in the build directory.  Can you
>> post it to the list?
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/4e36eef2/attachment.html>

From a_azouni at esi.dz  Mon Jan 19 09:26:25 2015
From: a_azouni at esi.dz (Azouni Abdelhadi)
Date: Mon, 19 Jan 2015 18:26:25 +0100
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <20150119171007.GB983@nicira.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
 <20150117001543.GD4248@nicira.com>
 <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>
 <CA+_RhB1nWTCaFhAgXGTm7u=s143_BUmF_Q2Q8M_uUqxh0aJczw@mail.gmail.com>
 <20150119171007.GB983@nicira.com>
Message-ID: <CA+_RhB1ChPRmGRod9yemp7crR+oKzH_fPdzi8gqEEF63z=PVSQ@mail.gmail.com>

Thank you for your reply.

Actually, I'm supposing I'm in the dataplane so I don't have a direct
connection to the controller running on port 6633.

Any idea ?

Abdelhadi

On Mon, Jan 19, 2015 at 6:10 PM, Ben Pfaff <blp at nicira.com> wrote:

> Have you tried doing a port scan for ports 6633 and 6653?
>
> On Mon, Jan 19, 2015 at 04:20:05PM +0100, Azouni Abdelhadi wrote:
> > Hello,
> >
> > Please, anyone have an idea how to fingerprint an openflow controller
> from
> > the dataplane ?
> >
> > Thanks
> >
> > Abdelhadi
> >
> > On Sat, Jan 17, 2015 at 1:23 AM, Azouni Abdelhadi <a_azouni at esi.dz>
> wrote:
> >
> > > Thank you for you reply Ben. But I think my question was not very
> clear.
> > > Actually, I wanna find the controller or just detect his presence from
> a
> > > host on the data-plane that doesn't have access to ovs commands
> > >
> > > Thank you
> > >
> > > Abdelhadi
> > >
> > > On Sat, Jan 17, 2015 at 1:15 AM, Ben Pfaff <blp at nicira.com> wrote:
> > >
> > >> On Fri, Jan 16, 2015 at 06:21:01PM +0100, Azouni Abdelhadi wrote:
> > >> > I'm trying to find a way to fingerprint the controller of a given
> > >> > data-path. It will be very nice if you can give me hints about how
> to
> > >> find
> > >> > the ip address of the controller or just to detect the presence of
> an
> > >> > openflow controller.
> > >>
> > >> "ovs-vsctl get-controller" can report the controller.
> > >>
> > >
> > >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/1a640e3f/attachment.html>

From jesse at nicira.com  Mon Jan 19 09:32:00 2015
From: jesse at nicira.com (Jesse Gross)
Date: Mon, 19 Jan 2015 09:32:00 -0800
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <7712B9DB39307A41B020D8182A22B13C445F4F99@AZ-FFEXMB04.global.avaya.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F4517@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=9te6Fq+4rcbnQ-TxtKNEyCPcPZFRmoCGKC=Zr3mATZ4Q@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F4F99@AZ-FFEXMB04.global.avaya.com>
Message-ID: <CAEP_g=9YUMhuz6ZgyUxnxj0tSda1+LOOS+w5PJr-jZUYUM6DdA@mail.gmail.com>

Flow may not mean TCP connection with the current implementation. OVS
uses wildcards to cover the largest amount of traffic with the
smallest number of flows to improve performance. In theory, if MSS
clamping were enabled, it could force the installed flows to match TCP
connections; in practice this would result in unacceptably bad
performance (we know, since this is how OVS used to work).

On Mon, Jan 19, 2015 at 4:26 AM, Badiger, Vishwanath (Vishwa)
<vbadiger at avaya.com> wrote:
> I was going through openvswitch docs (OpenStack-131107.pdf and page number 13; Attached snapshot of page with this mail).
> I happen to see that first packet (of flow) goes to ovs-vswitchd (user space) and this makes decision of how to process THIS FLOW. Later, subsequent packets hit cached entry in ovs kernel module.
> Is this design still valid with latest code ?
> If yes, why don’t first packet of every new TCP connection does not go up to ovs-vswitchd (user space) ?
>
> Please don’t mind even though I am asking basic questions.
>
>
> Regards,
> Vishwa.
>
>
> -----Original Message-----
> From: Badiger, Vishwanath (Vishwa)
> Sent: Monday, January 19, 2015 5:46 PM
> To: 'Jesse Gross'
> Cc: Uri Simchoni; discuss at openvswitch.org
> Subject: RE: [ovs-discuss] MSS Clamping
>
> I was going through openvswitch docs (OpenStack-131107.pdf and page number 13). I happen to see that first goes to ovs-vswitchd (user space) and this makes decision of how to process THIS FLOW. Later, subsequent packets hit cached entry in ovs kernel module. Is this design still valid with latest code ?
> If yes, why don’t first packet of every new TCP connection does not go up to ovs-vswitchd (user space) ?
>
> Please don’t mind even though I am asking basic questions.
>
>
> Regards,
> Vishwa.
>
> -----Original Message-----
> From: Jesse Gross [mailto:jesse at nicira.com]
> Sent: Friday, January 16, 2015 2:08 AM
> To: Badiger, Vishwanath (Vishwa)
> Cc: Uri Simchoni; discuss at openvswitch.org
> Subject: Re: [ovs-discuss] MSS Clamping
>
> Thanks for the reminder. However, that patch will basically not work at all any more due to the fact that we try to avoid sending new TCP connections up to usespace. Therefore, I stand by my previous comments that you should look at the more recent thread.
>
> On Wed, Jan 14, 2015 at 10:29 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
>> I am referring to below patch,
>> https://urldefense.proofpoint.com/v2/url?u=http-3A__openvswitch.org_pi
>> permail_dev_2012-2DJune_017640.html&d=AwIFaQ&c=BFpWQw8bsuKpl1SgiZH64Q&
>> r=QlZE3gUHm8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=96CZVpeBBqwkcX1tMaSfP8
>> w_SAXSDy4xwyAna_dWMWo&s=J-6TI9tB4hAMuIGSNkKCUioTRyr-fcLk6Nx-uw-GI1g&e=
>>
>> MSS clamping even avoids packet getting fragmented by modifying MSS value in TCP SYN packets.
>>
>>
>> Regards,
>> Vishwa.
>>
>>
>> -----Original Message-----
>> From: Jesse Gross [mailto:jesse at nicira.com]
>> Sent: Thursday, January 15, 2015 11:04 AM
>> To: Badiger, Vishwanath (Vishwa)
>> Cc: Uri Simchoni; discuss at openvswitch.org
>> Subject: Re: [ovs-discuss] MSS Clamping
>>
>> On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa) <vbadiger at avaya.com> wrote:
>>> Hi,
>>> I am in the process of migrating MSS clamping patch into recent OVS
>>> code base 2.3.0. But not finding functions like, 1.
>>> subfacet_make_actions() 2. iface_parse_tunnel()
>>>
>>> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
>>> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>>>
>>> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
>>> Thanks.
>>
>> I don't actually know what patch you are referring to. However, I doubt that a patch that is just updated to the latest code base will be accepted if the original wasn't.
>>
>> Please see this (long) thread on more recent discussion of how to handle this problem:
>> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.spinics.net_li
>> sts_netdev_msg306502.html&d=AwIBaQ&c=BFpWQw8bsuKpl1SgiZH64Q&r=QlZE3gUH
>> m8jGRx97BmCtXqcaB_-3nXYBGm5kpCxsMks&m=7iNT4HO2rZcKPACWsmsxGFg6zXdLUpic
>> i8mppaeu1fQ&s=bj8J0oS15-pq-ZZK9elQoYnXSOpnzmICZu52c2-opYQ&e=

From blp at nicira.com  Mon Jan 19 10:03:19 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 10:03:19 -0800
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <CA+_RhB1ChPRmGRod9yemp7crR+oKzH_fPdzi8gqEEF63z=PVSQ@mail.gmail.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
 <20150117001543.GD4248@nicira.com>
 <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>
 <CA+_RhB1nWTCaFhAgXGTm7u=s143_BUmF_Q2Q8M_uUqxh0aJczw@mail.gmail.com>
 <20150119171007.GB983@nicira.com>
 <CA+_RhB1ChPRmGRod9yemp7crR+oKzH_fPdzi8gqEEF63z=PVSQ@mail.gmail.com>
Message-ID: <20150119180319.GG983@nicira.com>

On Mon, Jan 19, 2015 at 06:26:25PM +0100, Azouni Abdelhadi wrote:
> Thank you for your reply.
> 
> Actually, I'm supposing I'm in the dataplane so I don't have a direct
> connection to the controller running on port 6633.
> 
> Any idea ?

tcpdump for packets on those ports.

From prasanna at yabaluri.com  Mon Jan 19 10:12:23 2015
From: prasanna at yabaluri.com (Prasanna Yabaluri)
Date: Mon, 19 Jan 2015 13:12:23 -0500
Subject: [ovs-discuss] Vswitch not connecting to controller
In-Reply-To: <20150119170850.GA983@nicira.com>
References: <CABwL-UOxF=vzGc86x8TEnHaSTnHeZEXpFU=bH-pc7E=CcScGoQ@mail.gmail.com>
 <20150119170850.GA983@nicira.com>
Message-ID: <CABwL-UNz_gWkY7qDvGwGq0DpniZcvgsx+fOYq6LEmgNZY6LBqA@mail.gmail.com>

Ben, Looks like new floodlight install is using port 6653 instead of 6633.

I just changed the port and it is fine.

user1 at user1-GT5464:~$ sudo ovs-vsctl list controller
_uuid               : 0e9e5fc8-7ae5-4273-a44c-6917955916b9
connection_mode     : []
controller_burst_limit: []
controller_rate_limit: []
enable_async_messages: []
external_ids        : {}
inactivity_probe    : []
is_connected        : true
local_gateway       : []
local_ip            : []
local_netmask       : []
max_backoff         : []
other_config        : {}
role                : master
status              : {sec_since_connect="12", state=ACTIVE}
target              : "tcp:192.168.0.106:6653"


On Mon, Jan 19, 2015 at 12:08 PM, Ben Pfaff <blp at nicira.com> wrote:

> On Mon, Jan 19, 2015 at 10:49:54AM -0500, Prasanna Yabaluri wrote:
> > Ping does respond from switch to controller ...
> >
> > root at user1-GT5464:/home/user1# ping 192.168.0.106
> > PING 192.168.0.106 (192.168.0.106) 56(84) bytes of data.
> > 64 bytes from 192.168.0.106: icmp_seq=1 ttl=64 time=0.399 ms
> > 64 bytes from 192.168.0.106: icmp_seq=2 ttl=64 time=0.390 ms
> >
> >
> > root at user1-GT5464:/home/user1# ovs-vsctl list controller
> > _uuid               : ff378ce0-eeac-43ad-b6f1-c4323ec578f3
> > connection_mode     : []
> > controller_burst_limit: []
> > controller_rate_limit: []
> > enable_async_messages: []
> > external_ids        : {}
> > inactivity_probe    : []
> > is_connected        : false
> > local_gateway       : []
> > local_ip            : []
> > local_netmask       : []
> > max_backoff         : []
> > other_config        : {}
> > role                : other
> > status              : {last_error="Connection refused",
> > sec_since_disconnect="0", state=BACKOFF}
>
> It looks like the switch is seeing "connection refused" errors when it
> tries to connect to the controller.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/4d96eccc/attachment.html>

From batmanustc at gmail.com  Sun Jan 18 23:49:21 2015
From: batmanustc at gmail.com (yewgang)
Date: Mon, 19 Jan 2015 15:49:21 +0800
Subject: [ovs-discuss] Is there any possible for program blocking here for
	long time ?
Message-ID: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>

Dear ovs-developer,

Now for some reason I have to write codes like this (My program perform
ovsdb-client):

LOOP {
    ........
    important task every 2 second;
    ovsdb_idl_txn_commit_block(txn);
    ........
}

If ovsdb-server is OK, ovsdb_idl_txn_commit_block will not block; but if
ovsdb-server is blocked or network is blocked, Is there any possible for my
program blocking at *poll_block()* (in ovsdb_idl_txn_commit_block function)
for long time ?


---------------------------I'm gorgeous dividing
line-------------------------------

ovsdb_idl_txn_commit_block function detail is :

enum ovsdb_idl_txn_status
ovsdb_idl_txn_commit_block(struct ovsdb_idl_txn *txn)
{
    enum ovsdb_idl_txn_status status;

    fatal_signal_run();
    while ((status = ovsdb_idl_txn_commit(txn)) == TXN_INCOMPLETE) {
        ovsdb_idl_run(txn->idl);
        ovsdb_idl_wait(txn->idl);
        ovsdb_idl_txn_wait(txn);
        *poll_block();*
    }
    return status;
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/25ebb089/attachment.html>

From blp at nicira.com  Mon Jan 19 10:16:45 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 10:16:45 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
Message-ID: <20150119181645.GK983@nicira.com>

On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
> > On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
> > > I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
> > >
> > > When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
> > get
> > > a lot of "Failed" in the unit tests and a final Make error ("make: ***
> > > [build-arch-stamp] Error 1").
> >
> > You should find a testsuite.log file in the build directory.  Can you
> > post it to the list?

All of the failed tests have really basic problems.  It's as if files
were getting deleted from the testing directories during the tests
somehow, or something else really funny going on in the file system.  I
can't guess what that is.  Anyway, here's one example in case anyone
else wants to take a look:

> #                             -*- compilation -*-
> 1. bfd.at:45: testing bfd - basic config on different bridges ...
> ../../tests/bfd.at:47: ovsdb-tool create conf.db $abs_top_srcdir/vswitchd/vswitch.ovsschema
> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile --log-file --remote=punix:$OVS_RUNDIR/db.sock
> stderr:
> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock" (No such file or directory)
> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: binding failed: No such file or directory
> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: listen failed: No such file or directory
> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl" (No such file or directory)
> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl: binding failed: No such file or directory
> ovsdb-server: could not initialize control socket punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl (No such file or directory)
> ../../tests/bfd.at:47: exit code was 1, expected 0
> cat: ovsdb-server.pid: No such file or directory
> cat: ovs-vswitchd.pid: No such file or directory
> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
> 1. bfd.at:45: 1. bfd - basic config on different bridges (bfd.at:45): FAILED (bfd.at:47)

From blp at nicira.com  Mon Jan 19 10:19:43 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 10:19:43 -0800
Subject: [ovs-discuss] Is there any possible for program blocking here
 for long time ?
In-Reply-To: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
Message-ID: <20150119181943.GL983@nicira.com>

On Mon, Jan 19, 2015 at 03:49:21PM +0800, yewgang wrote:
> Now for some reason I have to write codes like this (My program perform
> ovsdb-client):
> 
> LOOP {
>     ........
>     important task every 2 second;
>     ovsdb_idl_txn_commit_block(txn);
>     ........
> }
> 
> If ovsdb-server is OK, ovsdb_idl_txn_commit_block will not block; but if
> ovsdb-server is blocked or network is blocked, Is there any possible for my
> program blocking at *poll_block()* (in ovsdb_idl_txn_commit_block function)
> for long time ?

If it takes a long time for a network response, then, yes, poll_block()
could block for 2 seconds or more.

If you need faster response than that then you probably shouldn't use
ovsdb_idl_txn_commit_block().  Use ovsdb_idl_txn_commit() and
poll_block() by hand, plus poll_timer_wait() or poll_timer_wait_until()
to ensure that poll_block() wakes up by your deadline.

From kevin.traynor at intel.com  Mon Jan 19 10:22:30 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Mon, 19 Jan 2015 18:22:30 +0000
Subject: [ovs-discuss] OVS with DPDK, packets going to error
In-Reply-To: <CA+uz+yH0xe+xvhJ4VnrwrHg6VZdKR4xYEdeRzgSHzTGymT2xSQ@mail.gmail.com>
References: <CA+uz+yH0xe+xvhJ4VnrwrHg6VZdKR4xYEdeRzgSHzTGymT2xSQ@mail.gmail.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F73067CA1E@IRSMSX104.ger.corp.intel.com>

These can be caused by a few different things e.g. if you are firing in packets at line rate then you will always see some errors here as the FIFO’s will fill up. However, with the amount of errors you are seeing and the fact that you’ve reported a 66 byte packet, I would start by checking that you are not sending any handcrafted corrupt packets. I’d suggest setting IXIA to send ipv4 tcp 64 byte packets.

Another thing you could try - set up one of the DPDK L2 or L3 forwarding example apps, to test your basic IXIA <---> NIC <---> DPDK path

Thanks,
Kevin.

From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Adrian Poiget
Sent: Friday, January 16, 2015 2:44 PM
To: discuss at openvswitch.org
Subject: [ovs-discuss] OVS with DPDK, packets going to error

Hi,

I am trying to do some tests with Open vSwitch with DPDK,
I follow the INSTALL.DPDK.md<http://INSTALL.DPDK.md> documentation.
It is launching but a lot of packets are going to error.

 ./ovs-ofctl dump-ports br0
OFPST_PORT reply (xid=0x2): 3 ports
  port  1: rx pkts=490360, bytes=32363760, drop=0, errs=588615412, frame=0, over=0, crc=0
           tx pkts=490360, bytes=32363760, drop=0, errs=0, coll=0
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=22272, bytes=1380864, drop=0, errs=0, coll=0
  port  2: rx pkts=490360, bytes=32363760, drop=0, errs=588615412, frame=0, over=0, crc=0
           tx pkts=490360, bytes=32363760, drop=0, errs=0, coll=0


 ./ovs-vsctl get Interface dpdk0 statistics
{collisions=0, rx_bytes=32846088, rx_crc_err=0, rx_dropped=0, rx_errors=588615412, rx_frame_err=0, rx_over_err=0, rx_packets=497668, tx_bytes=40155390, tx_dropped=0, tx_errors=0, tx_packets=608415}

./ovs-vsctl get Interface dpdk1 statistics
{collisions=0, rx_bytes=40155390, rx_crc_err=0, rx_dropped=0, rx_errors=588746330, rx_frame_err=0, rx_over_err=0, rx_packets=608415, tx_bytes=32846088, tx_dropped=0, tx_errors=0, tx_packets=497668}

DEBUG options are activated and I see the following message :
PMD: ixgbe_recv_pkts(): port_id=0 queue_id=0 rx_id=954 ext_err_stat=0x00000043 pkt_len=66

The distribution used is Ubuntu 14.04
It is a phy-phy test with an Ixia 10 Gbps .

Do you have an idea of the problem's origin ?


Thanks and Regards,

Adrian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/465b2de8/attachment.html>

From a_azouni at esi.dz  Mon Jan 19 10:23:46 2015
From: a_azouni at esi.dz (Azouni Abdelhadi)
Date: Mon, 19 Jan 2015 19:23:46 +0100
Subject: [ovs-discuss] Fingerprinting the controller
In-Reply-To: <20150119180319.GG983@nicira.com>
References: <CA+_RhB2x2bYWftNqQZUtV-bZTSgink2jdhEi7kdnO0325k_udA@mail.gmail.com>
 <20150117001543.GD4248@nicira.com>
 <CA+_RhB1m4Pcy1GmABXUdJzsLvdWC9Av3qA_eS5mLd2372c5UcA@mail.gmail.com>
 <CA+_RhB1nWTCaFhAgXGTm7u=s143_BUmF_Q2Q8M_uUqxh0aJczw@mail.gmail.com>
 <20150119171007.GB983@nicira.com>
 <CA+_RhB1ChPRmGRod9yemp7crR+oKzH_fPdzi8gqEEF63z=PVSQ@mail.gmail.com>
 <20150119180319.GG983@nicira.com>
Message-ID: <CA+_RhB1Q13JTRtEF7ey-WK+=wArfYjmLMUqSnE=W7X8M9FZuJw@mail.gmail.com>

I'll try this. Thank you Ben

On Mon, Jan 19, 2015 at 7:03 PM, Ben Pfaff <blp at nicira.com> wrote:

> On Mon, Jan 19, 2015 at 06:26:25PM +0100, Azouni Abdelhadi wrote:
> > Thank you for your reply.
> >
> > Actually, I'm supposing I'm in the dataplane so I don't have a direct
> > connection to the controller running on port 6633.
> >
> > Any idea ?
>
> tcpdump for packets on those ports.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150119/0cf7f87c/attachment.html>

From rlantz at cs.stanford.edu  Mon Jan 19 15:14:53 2015
From: rlantz at cs.stanford.edu (Bob Lantz)
Date: Mon, 19 Jan 2015 15:14:53 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <20150119181645.GK983@nicira.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
 <20150119181645.GK983@nicira.com>
Message-ID: <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>

This could happen if your SharedFolder is on a Mac with case-insensitive HFS+.

On Jan 19, 2015, at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
> 
> 
> On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
>> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
>>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
>>>> I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
>>>> 
>>>> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
>>> get
>>>> a lot of "Failed" in the unit tests and a final Make error ("make: ***
>>>> [build-arch-stamp] Error 1").
>>> 
>>> You should find a testsuite.log file in the build directory.  Can you
>>> post it to the list?
> 
> All of the failed tests have really basic problems.  It's as if files
> were getting deleted from the testing directories during the tests
> somehow, or something else really funny going on in the file system.  I
> can't guess what that is.  Anyway, here's one example in case anyone
> else wants to take a look:
> 
>> #                             -*- compilation -*-
>> 1. bfd.at:45: testing bfd - basic config on different bridges ...
>> ../../tests/bfd.at:47: ovsdb-tool create conf.db $abs_top_srcdir/vswitchd/vswitch.ovsschema
>> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile --log-file --remote=punix:$OVS_RUNDIR/db.sock
>> stderr:
>> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
>> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock" (No such file or directory)
>> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: binding failed: No such file or directory
>> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: listen failed: No such file or directory
>> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl" (No such file or directory)
>> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl: binding failed: No such file or directory
>> ovsdb-server: could not initialize control socket punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl (No such file or directory)
>> ../../tests/bfd.at:47: exit code was 1, expected 0
>> cat: ovsdb-server.pid: No such file or directory
>> cat: ovs-vswitchd.pid: No such file or directory
>> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
>> 1. bfd.at:45: 1. bfd - basic config on different bridges (bfd.at:45): FAILED (bfd.at:47)
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss


From blp at nicira.com  Mon Jan 19 15:17:05 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 15:17:05 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
 <20150119181645.GK983@nicira.com>
 <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>
Message-ID: <20150119231705.GD17864@nicira.com>

I don't have a Mac but that's counterintuitive: how would a
case-insensitive file system cause "file not found" errors?  Maybe you
could explain in more detail.

On Mon, Jan 19, 2015 at 03:14:53PM -0800, Bob Lantz wrote:
> This could happen if your SharedFolder is on a Mac with case-insensitive HFS+.
> 
> On Jan 19, 2015, at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
> > 
> > 
> > On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
> >> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
> >>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
> >>>> I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
> >>>> 
> >>>> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
> >>> get
> >>>> a lot of "Failed" in the unit tests and a final Make error ("make: ***
> >>>> [build-arch-stamp] Error 1").
> >>> 
> >>> You should find a testsuite.log file in the build directory.  Can you
> >>> post it to the list?
> > 
> > All of the failed tests have really basic problems.  It's as if files
> > were getting deleted from the testing directories during the tests
> > somehow, or something else really funny going on in the file system.  I
> > can't guess what that is.  Anyway, here's one example in case anyone
> > else wants to take a look:
> > 
> >> #                             -*- compilation -*-
> >> 1. bfd.at:45: testing bfd - basic config on different bridges ...
> >> ../../tests/bfd.at:47: ovsdb-tool create conf.db $abs_top_srcdir/vswitchd/vswitch.ovsschema
> >> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile --log-file --remote=punix:$OVS_RUNDIR/db.sock
> >> stderr:
> >> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
> >> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock" (No such file or directory)
> >> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: binding failed: No such file or directory
> >> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: listen failed: No such file or directory
> >> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl" (No such file or directory)
> >> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl: binding failed: No such file or directory
> >> ovsdb-server: could not initialize control socket punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl (No such file or directory)
> >> ../../tests/bfd.at:47: exit code was 1, expected 0
> >> cat: ovsdb-server.pid: No such file or directory
> >> cat: ovs-vswitchd.pid: No such file or directory
> >> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
> >> 1. bfd.at:45: 1. bfd - basic config on different bridges (bfd.at:45): FAILED (bfd.at:47)
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> 

From rlantz at cs.stanford.edu  Mon Jan 19 15:26:17 2015
From: rlantz at cs.stanford.edu (Bob Lantz)
Date: Mon, 19 Jan 2015 15:26:17 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <20150119231705.GD17864@nicira.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
 <20150119181645.GK983@nicira.com>
 <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>
 <20150119231705.GD17864@nicira.com>
Message-ID: <DF5EA490-AAEF-470B-9C1E-50B92B1AE4B2@cs.stanford.edu>

1. To answer your question, if two files have the same name, deleting one will delete the other.
2. I meant to amend this "just guessing, possibly" but I hit send too early ;-)
3. Is NTFS also case-insensitive by default? Could be a possible issue there too.
4. The Linux kernel cannot be built on a case-insensitive file system, so that is why SharedFolder worried me.

> On Jan 19, 2015, at 3:17 PM, Ben Pfaff <blp at nicira.com> wrote:
> 
> I don't have a Mac but that's counterintuitive: how would a
> case-insensitive file system cause "file not found" errors?  Maybe you
> could explain in more detail.
> 
> On Mon, Jan 19, 2015 at 03:14:53PM -0800, Bob Lantz wrote:
>> This could happen if your SharedFolder is on a Mac with case-insensitive HFS+.
>> 
>> On Jan 19, 2015, at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
>>> 
>>> 
>>> On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
>>>> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
>>>>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
>>>>>> I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
>>>>>> 
>>>>>> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
>>>>> get
>>>>>> a lot of "Failed" in the unit tests and a final Make error ("make: ***
>>>>>> [build-arch-stamp] Error 1").
>>>>> 
>>>>> You should find a testsuite.log file in the build directory.  Can you
>>>>> post it to the list?
>>> 
>>> All of the failed tests have really basic problems.  It's as if files
>>> were getting deleted from the testing directories during the tests
>>> somehow, or something else really funny going on in the file system.  I
>>> can't guess what that is.  Anyway, here's one example in case anyone
>>> else wants to take a look:
>>> 
>>>> #                             -*- compilation -*-
>>>> 1. bfd.at:45: testing bfd - basic config on different bridges ...
>>>> ../../tests/bfd.at:47: ovsdb-tool create conf.db $abs_top_srcdir/vswitchd/vswitch.ovsschema
>>>> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile --log-file --remote=punix:$OVS_RUNDIR/db.sock
>>>> stderr:
>>>> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
>>>> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock" (No such file or directory)
>>>> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: binding failed: No such file or directory
>>>> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: listen failed: No such file or directory
>>>> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl" (No such file or directory)
>>>> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl: binding failed: No such file or directory
>>>> ovsdb-server: could not initialize control socket punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl (No such file or directory)
>>>> ../../tests/bfd.at:47: exit code was 1, expected 0
>>>> cat: ovsdb-server.pid: No such file or directory
>>>> cat: ovs-vswitchd.pid: No such file or directory
>>>> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
>>>> 1. bfd.at:45: 1. bfd - basic config on different bridges (bfd.at:45): FAILED (bfd.at:47)
>>> _______________________________________________
>>> discuss mailing list
>>> discuss at openvswitch.org
>>> http://openvswitch.org/mailman/listinfo/discuss
>> 


From rlantz at cs.stanford.edu  Mon Jan 19 15:34:59 2015
From: rlantz at cs.stanford.edu (Bob Lantz)
Date: Mon, 19 Jan 2015 15:34:59 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <DF5EA490-AAEF-470B-9C1E-50B92B1AE4B2@cs.stanford.edu>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
 <20150119181645.GK983@nicira.com>
 <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>
 <20150119231705.GD17864@nicira.com>
 <DF5EA490-AAEF-470B-9C1E-50B92B1AE4B2@cs.stanford.edu>
Message-ID: <CB94E7C0-DFA3-4512-AC83-221A2263DE85@cs.stanford.edu>

In any case, just to make absolutely sure, I'd recommend trying to build it in another directory - I seem to remember having trouble building lots of things in SharedFolder on VirtualBox.

> On Jan 19, 2015, at 3:26 PM, Bob Lantz <rlantz at cs.stanford.edu> wrote:
> 
> 1. To answer your question, if two files have the same name, deleting one will delete the other.
> 2. I meant to amend this "just guessing, possibly" but I hit send too early ;-)
> 3. Is NTFS also case-insensitive by default? Could be a possible issue there too.
> 4. The Linux kernel cannot be built on a case-insensitive file system, so that is why SharedFolder worried me.
> 
>> On Jan 19, 2015, at 3:17 PM, Ben Pfaff <blp at nicira.com> wrote:
>> 
>> I don't have a Mac but that's counterintuitive: how would a
>> case-insensitive file system cause "file not found" errors?  Maybe you
>> could explain in more detail.
>> 
>> On Mon, Jan 19, 2015 at 03:14:53PM -0800, Bob Lantz wrote:
>>> This could happen if your SharedFolder is on a Mac with case-insensitive HFS+.
>>> 
>>> On Jan 19, 2015, at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
>>>> 
>>>> 
>>>> On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
>>>>> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
>>>>>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
>>>>>>> I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
>>>>>>> 
>>>>>>> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
>>>>>> get
>>>>>>> a lot of "Failed" in the unit tests and a final Make error ("make: ***
>>>>>>> [build-arch-stamp] Error 1").
>>>>>> 
>>>>>> You should find a testsuite.log file in the build directory.  Can you
>>>>>> post it to the list?
>>>> 
>>>> All of the failed tests have really basic problems.  It's as if files
>>>> were getting deleted from the testing directories during the tests
>>>> somehow, or something else really funny going on in the file system.  I
>>>> can't guess what that is.  Anyway, here's one example in case anyone
>>>> else wants to take a look:
>>>> 
>>>>> #                             -*- compilation -*-
>>>>> 1. bfd.at:45: testing bfd - basic config on different bridges ...
>>>>> ../../tests/bfd.at:47: ovsdb-tool create conf.db $abs_top_srcdir/vswitchd/vswitch.ovsschema
>>>>> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile --log-file --remote=punix:$OVS_RUNDIR/db.sock
>>>>> stderr:
>>>>> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
>>>>> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock" (No such file or directory)
>>>>> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: binding failed: No such file or directory
>>>>> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: listen failed: No such file or directory
>>>>> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl" (No such file or directory)
>>>>> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl: binding failed: No such file or directory
>>>>> ovsdb-server: could not initialize control socket punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl (No such file or directory)
>>>>> ../../tests/bfd.at:47: exit code was 1, expected 0
>>>>> cat: ovsdb-server.pid: No such file or directory
>>>>> cat: ovs-vswitchd.pid: No such file or directory
>>>>> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
>>>>> 1. bfd.at:45: 1. bfd - basic config on different bridges (bfd.at:45): FAILED (bfd.at:47)
>>>> _______________________________________________
>>>> discuss mailing list
>>>> discuss at openvswitch.org
>>>> http://openvswitch.org/mailman/listinfo/discuss
>>> 
> 


From blp at nicira.com  Mon Jan 19 15:40:55 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 19 Jan 2015 15:40:55 -0800
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <CB94E7C0-DFA3-4512-AC83-221A2263DE85@cs.stanford.edu>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
 <20150119181645.GK983@nicira.com>
 <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>
 <20150119231705.GD17864@nicira.com>
 <DF5EA490-AAEF-470B-9C1E-50B92B1AE4B2@cs.stanford.edu>
 <CB94E7C0-DFA3-4512-AC83-221A2263DE85@cs.stanford.edu>
Message-ID: <20150119234055.GF17864@nicira.com>

Oh, maybe I see the problem: this folder is on a non-Unix fiale system
so it's probably not possible to have Unix sockets there.  I'd think
that this would properly produce a different error (not ENOENT) but who
knows what happens in weird corner cases.

On Mon, Jan 19, 2015 at 03:34:59PM -0800, Bob Lantz wrote:
> In any case, just to make absolutely sure, I'd recommend trying to
> build it in another directory - I seem to remember having trouble
> building lots of things in SharedFolder on VirtualBox.
> 
> > On Jan 19, 2015, at 3:26 PM, Bob Lantz <rlantz at cs.stanford.edu> wrote:
> > 
> > 1. To answer your question, if two files have the same name, deleting one will delete the other.
> > 2. I meant to amend this "just guessing, possibly" but I hit send too early ;-)
> > 3. Is NTFS also case-insensitive by default? Could be a possible issue there too.
> > 4. The Linux kernel cannot be built on a case-insensitive file system, so that is why SharedFolder worried me.
> > 
> >> On Jan 19, 2015, at 3:17 PM, Ben Pfaff <blp at nicira.com> wrote:
> >> 
> >> I don't have a Mac but that's counterintuitive: how would a
> >> case-insensitive file system cause "file not found" errors?  Maybe you
> >> could explain in more detail.
> >> 
> >> On Mon, Jan 19, 2015 at 03:14:53PM -0800, Bob Lantz wrote:
> >>> This could happen if your SharedFolder is on a Mac with case-insensitive HFS+.
> >>> 
> >>> On Jan 19, 2015, at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
> >>>> 
> >>>> 
> >>>> On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
> >>>>> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
> >>>>>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
> >>>>>>> I need to use ovs >=2.3.0 to employ the full set of features of OF1.3.
> >>>>>>> 
> >>>>>>> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb file, I
> >>>>>> get
> >>>>>>> a lot of "Failed" in the unit tests and a final Make error ("make: ***
> >>>>>>> [build-arch-stamp] Error 1").
> >>>>>> 
> >>>>>> You should find a testsuite.log file in the build directory.  Can you
> >>>>>> post it to the list?
> >>>> 
> >>>> All of the failed tests have really basic problems.  It's as if files
> >>>> were getting deleted from the testing directories during the tests
> >>>> somehow, or something else really funny going on in the file system.  I
> >>>> can't guess what that is.  Anyway, here's one example in case anyone
> >>>> else wants to take a look:
> >>>> 
> >>>>> #                             -*- compilation -*-
> >>>>> 1. bfd.at:45: testing bfd - basic config on different bridges ...
> >>>>> ../../tests/bfd.at:47: ovsdb-tool create conf.db $abs_top_srcdir/vswitchd/vswitch.ovsschema
> >>>>> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile --log-file --remote=punix:$OVS_RUNDIR/db.sock
> >>>>> stderr:
> >>>>> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
> >>>>> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock" (No such file or directory)
> >>>>> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: binding failed: No such file or directory
> >>>>> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock: listen failed: No such file or directory
> >>>>> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl" (No such file or directory)
> >>>>> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl: binding failed: No such file or directory
> >>>>> ovsdb-server: could not initialize control socket punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl (No such file or directory)
> >>>>> ../../tests/bfd.at:47: exit code was 1, expected 0
> >>>>> cat: ovsdb-server.pid: No such file or directory
> >>>>> cat: ovs-vswitchd.pid: No such file or directory
> >>>>> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
> >>>>> 1. bfd.at:45: 1. bfd - basic config on different bridges (bfd.at:45): FAILED (bfd.at:47)
> >>>> _______________________________________________
> >>>> discuss mailing list
> >>>> discuss at openvswitch.org
> >>>> http://openvswitch.org/mailman/listinfo/discuss
> >>> 
> > 
> 

From fengyuleidian0615 at gmail.com  Mon Jan 19 22:54:13 2015
From: fengyuleidian0615 at gmail.com (Fan Du)
Date: Tue, 20 Jan 2015 14:54:13 +0800
Subject: [ovs-discuss] MSS Clamping
In-Reply-To: <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
References: <CADzZ78UhtKfvzc1x1zSwJvY9cYPLar=Hik9B7A4_DG65oSn-ng@mail.gmail.com>
 <CAEP_g=-9ivLPU1JjEHghULj-JfdU1=qJeGHjd3qgwsNNMHZNYA@mail.gmail.com>
 <7712B9DB39307A41B020D8182A22B13C445F44E9@AZ-FFEXMB04.global.avaya.com>
 <CAEP_g=8AZQhy9kwmWQi2yekwzR=Oummx=LyH_Q9vxnuuvGKFxQ@mail.gmail.com>
Message-ID: <54BDFB95.30805@gmail.com>

于 2015年01月15日 13:33, Jesse Gross 写道:
> On Wed, Jan 14, 2015 at 9:26 PM, Badiger, Vishwanath (Vishwa)
> <vbadiger at avaya.com> wrote:
>> Hi,
>> I am in the process of migrating MSS clamping patch into recent OVS code base 2.3.0. But not finding functions like,
>> 1. subfacet_make_actions()
>> 2. iface_parse_tunnel()
>>
>> Looks like OVS has evolved lot compared to the code base to which MSS clamping patch created.
>> I am planning to continue this effort and appreciate any help in understanding latest OVS implementation or migrating MSS clamping patch.
>>
>> Also, Is there any other way of implementing MSS clamping than how patch implements it ?
>> Thanks.
>
> I don't actually know what patch you are referring to. However, I
> doubt that a patch that is just updated to the latest code base will
> be accepted if the original wasn't.
>
> Please see this (long) thread on more recent discussion of how to
> handle this problem:
> http://www.spinics.net/lists/netdev/msg306502.html

Hi Badiger

I'm not sure what sort of problem are you trying to solve.
Could you please put it in bit of detail?



> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>


-- 
No zuo no die but I have to try.

From g.cofano87 at gmail.com  Tue Jan 20 00:42:13 2015
From: g.cofano87 at gmail.com (Giuseppe Cofano)
Date: Tue, 20 Jan 2015 09:42:13 +0100
Subject: [ovs-discuss] 2.3.0/1 installation issues
In-Reply-To: <20150119234055.GF17864@nicira.com>
References: <CA+Wu3iC_yhEDUXdDDfxyXi39+4nYoOAxxBAtE7C1nqzGBT8KsA@mail.gmail.com>
 <20150115180847.GA21215@nicira.com>
 <CA+Wu3iBCnkMfMWCqdpR9dMGFd+1BPU5D+czpTN3skz2w0iP5Rw@mail.gmail.com>
 <20150119181645.GK983@nicira.com>
 <1CCFA23C-ADE3-4F8C-850E-D0694D75EFD6@cs.stanford.edu>
 <20150119231705.GD17864@nicira.com>
 <DF5EA490-AAEF-470B-9C1E-50B92B1AE4B2@cs.stanford.edu>
 <CB94E7C0-DFA3-4512-AC83-221A2263DE85@cs.stanford.edu>
 <20150119234055.GF17864@nicira.com>
Message-ID: <CA+Wu3iDEAE3_yzOjOzp9yoT1RoN5TD-S7_=sZBW8=erE4oBf=Q@mail.gmail.com>

Thank you, it worked.

Giuseppe



2015-01-20 0:40 GMT+01:00 Ben Pfaff <blp at nicira.com>:

> Oh, maybe I see the problem: this folder is on a non-Unix fiale system
> so it's probably not possible to have Unix sockets there.  I'd think
> that this would properly produce a different error (not ENOENT) but who
> knows what happens in weird corner cases.
>
> On Mon, Jan 19, 2015 at 03:34:59PM -0800, Bob Lantz wrote:
> > In any case, just to make absolutely sure, I'd recommend trying to
> > build it in another directory - I seem to remember having trouble
> > building lots of things in SharedFolder on VirtualBox.
> >
> > > On Jan 19, 2015, at 3:26 PM, Bob Lantz <rlantz at cs.stanford.edu> wrote:
> > >
> > > 1. To answer your question, if two files have the same name, deleting
> one will delete the other.
> > > 2. I meant to amend this "just guessing, possibly" but I hit send too
> early ;-)
> > > 3. Is NTFS also case-insensitive by default? Could be a possible issue
> there too.
> > > 4. The Linux kernel cannot be built on a case-insensitive file system,
> so that is why SharedFolder worried me.
> > >
> > >> On Jan 19, 2015, at 3:17 PM, Ben Pfaff <blp at nicira.com> wrote:
> > >>
> > >> I don't have a Mac but that's counterintuitive: how would a
> > >> case-insensitive file system cause "file not found" errors?  Maybe you
> > >> could explain in more detail.
> > >>
> > >> On Mon, Jan 19, 2015 at 03:14:53PM -0800, Bob Lantz wrote:
> > >>> This could happen if your SharedFolder is on a Mac with
> case-insensitive HFS+.
> > >>>
> > >>> On Jan 19, 2015, at 10:16 AM, Ben Pfaff <blp at nicira.com> wrote:
> > >>>>
> > >>>>
> > >>>> On Fri, Jan 16, 2015 at 08:58:14AM +0100, Giuseppe Cofano wrote:
> > >>>>> 2015-01-15 19:08 GMT+01:00 Ben Pfaff <blp at nicira.com>:
> > >>>>>> On Thu, Jan 15, 2015 at 03:44:28PM +0100, Giuseppe Cofano wrote:
> > >>>>>>> I need to use ovs >=2.3.0 to employ the full set of features of
> OF1.3.
> > >>>>>>>
> > >>>>>>> When I compile both ovs 2.3.0 and ovs 2.3.1 to create the .deb
> file, I
> > >>>>>> get
> > >>>>>>> a lot of "Failed" in the unit tests and a final Make error
> ("make: ***
> > >>>>>>> [build-arch-stamp] Error 1").
> > >>>>>>
> > >>>>>> You should find a testsuite.log file in the build directory.  Can
> you
> > >>>>>> post it to the list?
> > >>>>
> > >>>> All of the failed tests have really basic problems.  It's as if
> files
> > >>>> were getting deleted from the testing directories during the tests
> > >>>> somehow, or something else really funny going on in the file
> system.  I
> > >>>> can't guess what that is.  Anyway, here's one example in case anyone
> > >>>> else wants to take a look:
> > >>>>
> > >>>>> #                             -*- compilation -*-
> > >>>>> 1. bfd.at:45: testing bfd - basic config on different bridges ...
> > >>>>> ../../tests/bfd.at:47: ovsdb-tool create conf.db
> $abs_top_srcdir/vswitchd/vswitch.ovsschema
> > >>>>> ../../tests/bfd.at:47: ovsdb-server --detach --no-chdir --pidfile
> --log-file --remote=punix:$OVS_RUNDIR/db.sock
> > >>>>> stderr:
> > >>>>> 2015-01-15T15:00:04Z|00001|vlog|INFO|opened log file
> /home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.log
> > >>>>> 2015-01-15T15:00:04Z|00002|fatal_signal|WARN|could not unlink
> "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock"
> (No such file or directory)
> > >>>>>
> 2015-01-15T15:00:04Z|00003|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock:
> binding failed: No such file or directory
> > >>>>>
> 2015-01-15T15:00:04Z|00004|ovsdb_jsonrpc_server|ERR|punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/db.sock:
> listen failed: No such file or directory
> > >>>>> 2015-01-15T15:00:04Z|00005|fatal_signal|WARN|could not unlink
> "/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl"
> (No such file or directory)
> > >>>>>
> 2015-01-15T15:00:04Z|00006|stream_unix|ERR|/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl:
> binding failed: No such file or directory
> > >>>>> ovsdb-server: could not initialize control socket
> punix:/home/mininet/SharedFolder/openvswitch-2.3.1/_debian/tests/testsuite.dir/0001/ovsdb-server.13905.ctl
> (No such file or directory)
> > >>>>> ../../tests/bfd.at:47: exit code was 1, expected 0
> > >>>>> cat: ovsdb-server.pid: No such file or directory
> > >>>>> cat: ovs-vswitchd.pid: No such file or directory
> > >>>>> kill: usage: kill [-s sigspec | -n signum | -sigspec] pid |
> jobspec ... or kill -l [sigspec]
> > >>>>> 1. bfd.at:45: 1. bfd - basic config on different bridges (
> bfd.at:45): FAILED (bfd.at:47)
> > >>>> _______________________________________________
> > >>>> discuss mailing list
> > >>>> discuss at openvswitch.org
> > >>>> http://openvswitch.org/mailman/listinfo/discuss
> > >>>
> > >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150120/66bfd74f/attachment-0001.html>

From kevin.neuenfeldt at rwth-aachen.de  Tue Jan 20 06:07:43 2015
From: kevin.neuenfeldt at rwth-aachen.de (Kevin Neuenfeldt)
Date: Tue, 20 Jan 2015 15:07:43 +0100
Subject: [ovs-discuss] Enable OpenFlow 1.3 permanently on OVS 1.11.0
Message-ID: <54BE612F.6020204@rwth-aachen.de>

Hi,

for my bachelor thesis I am trying to implement an application on the 
Ryu controller platform. For this purpose I downloaded the VM image from 
their website which has mininet, OpenVSwitch and Ryu preinstalled and 
preconfigured.

OVS is included in version 1.11.0 and OpenFlow 1.3 is disabled by 
default. I searched the internet for many hours on how to enable 
OpenFlow 1.3. The only thing I found was that I can use the `ovs-vsctl` 
command to do this job. This works fine but as soon as I shutdown the 
mininet I have to enter this command again for all switches. The problem 
is that I have to restart mininet very frequently and that the number of 
switches will rise into hundreds in the near future.

So is there any possibility to enable OpenFlow 1.3 globally and permanently?

Regards,
Kevin

From blp at nicira.com  Tue Jan 20 06:37:27 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 20 Jan 2015 06:37:27 -0800
Subject: [ovs-discuss] Enable OpenFlow 1.3 permanently on OVS 1.11.0
In-Reply-To: <54BE612F.6020204@rwth-aachen.de>
References: <54BE612F.6020204@rwth-aachen.de>
Message-ID: <20150120143727.GE11121@nicira.com>

On Tue, Jan 20, 2015 at 03:07:43PM +0100, Kevin Neuenfeldt wrote:
> for my bachelor thesis I am trying to implement an application on the Ryu
> controller platform. For this purpose I downloaded the VM image from their
> website which has mininet, OpenVSwitch and Ryu preinstalled and
> preconfigured.
> 
> OVS is included in version 1.11.0 and OpenFlow 1.3 is disabled by default. I
> searched the internet for many hours on how to enable OpenFlow 1.3. The only
> thing I found was that I can use the `ovs-vsctl` command to do this job.
> This works fine but as soon as I shutdown the mininet I have to enter this
> command again for all switches. The problem is that I have to restart
> mininet very frequently and that the number of switches will rise into
> hundreds in the near future.

I'm surprised that it took you many hours to find the Open vSwitch FAQ!

> So is there any possibility to enable OpenFlow 1.3 globally and permanently?

I guess that mininet uses ovs-vsctl to create the bridges.  I would just
change mininet to enable OpenFlow 1.3 at the same time it creates the
bridges, by executing another ovs-vsctl command.

From shettyg at nicira.com  Tue Jan 20 07:03:58 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Tue, 20 Jan 2015 07:03:58 -0800
Subject: [ovs-discuss] Machine not pingable after OVS upgrade.
In-Reply-To: <OFA1F02A0C.39B4BCC5-ON65257DD2.00507930-65257DD2.0052405B@in.ibm.com>
References: <OFA1F02A0C.39B4BCC5-ON65257DD2.00507930-65257DD2.0052405B@in.ibm.com>
Message-ID: <CAHbON5rv6pCapPMd2uqNZnA5YCU-Hu8rVFp_31qYeRyCOwua6w@mail.gmail.com>

On Mon, Jan 19, 2015 at 6:58 AM, Sudipta Biswas3 <sbiswas7 at in.ibm.com> wrote:
> Hi all,
>
> I had the following configuration:
>
> ovs-vsctl show
>     Bridge br-ex
>         Port "eth0"
>             Interface "eth0"
>         Port br-ex
>             Interface br-ex
>                 type: internal
>
> eth0 being the eth device who's IP was migrated over to br-ex. The OVS
> version used here was 2.0
>
> I downloaded the OVS 2.3.1 tar ball and did an install following the INSTALL
> doc.
> I hadn't cleaned up the DB before doing so. Post the upgrade -  I was able
> to successfully start the ovsdb-server but the ovs-vsctl output didn't have
> the older config. (It was a blank output)
Does the following show 2 locations?
find / -name ovs-vsctl

From blp at nicira.com  Tue Jan 20 07:25:51 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 20 Jan 2015 07:25:51 -0800
Subject: [ovs-discuss] Enable OpenFlow 1.3 permanently on OVS 1.11.0
In-Reply-To: <54BE728E.3030607@rwth-aachen.de>
References: <54BE612F.6020204@rwth-aachen.de>
 <20150120143727.GE11121@nicira.com>
 <54BE728E.3030607@rwth-aachen.de>
Message-ID: <20150120152551.GG11121@nicira.com>

Please don't drop the mailing list.

On Tue, Jan 20, 2015 at 04:21:50PM +0100, Kevin Neuenfeldt wrote:
> Am 20.01.2015 um 15:37 schrieb Ben Pfaff:
> >On Tue, Jan 20, 2015 at 03:07:43PM +0100, Kevin Neuenfeldt wrote:
> >>So is there any possibility to enable OpenFlow 1.3 globally and
> >>permanently?
> >
> >I guess that mininet uses ovs-vsctl to create the bridges.  I would just
> >change mininet to enable OpenFlow 1.3 at the same time it creates the
> >bridges, by executing another ovs-vsctl command.
> >
> This would be a possibility but because I will have to collaborate with
> students from other universities it's preferable to not change mininet
> itself.

You can change openvswitch or you can change mininet.  I can't think why
either choice would make collaboration more difficult.

The simplest choice is to use OVS 2.3, which enables OF1.3 by default.

From poigetadrian at gmail.com  Tue Jan 20 07:47:19 2015
From: poigetadrian at gmail.com (Adrian Poiget)
Date: Tue, 20 Jan 2015 16:47:19 +0100
Subject: [ovs-discuss] OVS with DPDK, packets going to error
In-Reply-To: <BC0FEEC7D7650749874CEC11314A88F73067CA1E@IRSMSX104.ger.corp.intel.com>
References: <CA+uz+yH0xe+xvhJ4VnrwrHg6VZdKR4xYEdeRzgSHzTGymT2xSQ@mail.gmail.com>
 <BC0FEEC7D7650749874CEC11314A88F73067CA1E@IRSMSX104.ger.corp.intel.com>
Message-ID: <CA+uz+yH52p_nN7yLkDezw7VTZRPD3f6LLbyVnSvnemeXqOOcwg@mail.gmail.com>

I configure 64 Bytes with Ixia, but the size fixed by Ixia is 66B I don"t
know why (maybe  caused by 64b/66b encoding ?)
With the same configuration of Ixia , I try ovdk and I reached 6.3 Mpps
whereas with ovs DPDK it's only few thousands.
I investigate more and I found that the errors are du to the
"stats->imissed" variable

For l2fwd with this command line : ./build/l2fwd -c 0x01000100 -n 4 -- -q 8
-p 0x3, I get
Port statistics ====================================
Statistics for port 0 ------------------------------
Packets sent:                    77112
Packets received:                77176
Packets dropped:                     0
Statistics for port 1 ------------------------------
Packets sent:                    77176
Packets received:                77112
Packets dropped:                     0
Aggregate statistics ===============================
Total packets sent:             154288
Total packets received:         154288
Total packets dropped:               0
====================================================
It's still low performance


Hardcoding route in l3fwd, it's working I reach 20 Mpps

2015-01-19 19:22 GMT+01:00 Traynor, Kevin <kevin.traynor at intel.com>:

>  These can be caused by a few different things e.g. if you are firing in
> packets at line rate then you will always see some errors here as the
> FIFO’s will fill up. However, with the amount of errors you are seeing and
> the fact that you’ve reported a 66 byte packet, I would start by checking
> that you are not sending any handcrafted corrupt packets. I’d suggest
> setting IXIA to send ipv4 tcp 64 byte packets.
>
>
>
> Another thing you could try - set up one of the DPDK L2 or L3 forwarding
> example apps, to test your basic IXIA <---> NIC <---> DPDK path
>
>
>
> Thanks,
>
> Kevin.
>
>
>
> *From:* discuss [mailto:discuss-bounces at openvswitch.org] *On Behalf Of *Adrian
> Poiget
> *Sent:* Friday, January 16, 2015 2:44 PM
> *To:* discuss at openvswitch.org
> *Subject:* [ovs-discuss] OVS with DPDK, packets going to error
>
>
>
> Hi,
>
>
>
> I am trying to do some tests with Open vSwitch with DPDK,
>
> I follow the INSTALL.DPDK.md documentation.
>
> It is launching but a lot of packets are going to error.
>
>
>
>  ./ovs-ofctl dump-ports br0
>
> OFPST_PORT reply (xid=0x2): 3 ports
>
>   port  1: rx pkts=490360, bytes=32363760, drop=0, errs=588615412,
> frame=0, over=0, crc=0
>
>            tx pkts=490360, bytes=32363760, drop=0, errs=0, coll=0
>
>   port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
>
>            tx pkts=22272, bytes=1380864, drop=0, errs=0, coll=0
>
>   port  2: rx pkts=490360, bytes=32363760, drop=0, errs=588615412,
> frame=0, over=0, crc=0
>
>            tx pkts=490360, bytes=32363760, drop=0, errs=0, coll=0
>
>
>
>
>
>  ./ovs-vsctl get Interface dpdk0 statistics
>
> {collisions=0, rx_bytes=32846088, rx_crc_err=0, rx_dropped=0,
> rx_errors=588615412, rx_frame_err=0, rx_over_err=0, rx_packets=497668,
> tx_bytes=40155390, tx_dropped=0, tx_errors=0, tx_packets=608415}
>
>
>
> ./ovs-vsctl get Interface dpdk1 statistics
>
> {collisions=0, rx_bytes=40155390, rx_crc_err=0, rx_dropped=0,
> rx_errors=588746330, rx_frame_err=0, rx_over_err=0, rx_packets=608415,
> tx_bytes=32846088, tx_dropped=0, tx_errors=0, tx_packets=497668}
>
>
>
> DEBUG options are activated and I see the following message :
>
> PMD: ixgbe_recv_pkts(): port_id=0 queue_id=0 rx_id=954
> ext_err_stat=0x00000043 pkt_len=66
>
>
>
> The distribution used is Ubuntu 14.04
>
> It is a phy-phy test with an Ixia 10 Gbps .
>
>
>
> Do you have an idea of the problem's origin ?
>
>
>
> Thanks and Regards,
>
> Adrian
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150120/cf127644/attachment-0001.html>

From khadka.py at gmail.com  Tue Jan 20 12:55:57 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Tue, 20 Jan 2015 15:55:57 -0500
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
Message-ID: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>

Hello,
I have noticed that OVS rejects flow-mod request from a slave-controller
with an OFPBRC_EPERM request code. Isn't the more appropriate code here is:
OFPBRC_IS_SLAVE?

Same thing when a slave controller sends a packet out.


Thanks,
Anup
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150120/7e1184d1/attachment.html>

From blp at nicira.com  Tue Jan 20 13:24:35 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 20 Jan 2015 13:24:35 -0800
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
Message-ID: <20150120212435.GA10311@nicira.com>

On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> I have noticed that OVS rejects flow-mod request from a slave-controller
> with an OFPBRC_EPERM request code. Isn't the more appropriate code here is:
> OFPBRC_IS_SLAVE?
> 
> Same thing when a slave controller sends a packet out.

That does sound better, for OF1.2+.

From khadka.py at gmail.com  Tue Jan 20 14:12:30 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Tue, 20 Jan 2015 17:12:30 -0500
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <20150120212435.GA10311@nicira.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
Message-ID: <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>

Do OpenFlow versions prior to OF 1.2 even support the concept of slave
controllers? I couldn't find anything in the specs.

On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:

> On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> > I have noticed that OVS rejects flow-mod request from a slave-controller
> > with an OFPBRC_EPERM request code. Isn't the more appropriate code here
> is:
> > OFPBRC_IS_SLAVE?
> >
> > Same thing when a slave controller sends a packet out.
>
> That does sound better, for OF1.2+.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150120/a2e0d3d2/attachment.html>

From khadka.py at gmail.com  Tue Jan 20 14:59:33 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Tue, 20 Jan 2015 17:59:33 -0500
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
Message-ID: <CAGVJBz0jAKz96d-VMVZBsURjzHt4cX7gbCTnCFUnr1gZoUykew@mail.gmail.com>

I can create a patch for this if you want me to.

Thank you,
Anup

On Tue, Jan 20, 2015 at 5:12 PM, Anup Khadka <khadka.py at gmail.com> wrote:

> Do OpenFlow versions prior to OF 1.2 even support the concept of slave
> controllers? I couldn't find anything in the specs.
>
> On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
>
>> On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
>> > I have noticed that OVS rejects flow-mod request from a slave-controller
>> > with an OFPBRC_EPERM request code. Isn't the more appropriate code here
>> is:
>> > OFPBRC_IS_SLAVE?
>> >
>> > Same thing when a slave controller sends a packet out.
>>
>> That does sound better, for OF1.2+.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150120/81cc28f2/attachment.html>

From blp at nicira.com  Tue Jan 20 15:01:27 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 20 Jan 2015 15:01:27 -0800
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
Message-ID: <20150120230127.GB10311@nicira.com>

The OF1.2 feature was based on an Open vSwitch extension to OpenFlow
first implemented for OF1.0.  We need to continue supporting that
extension.

On Tue, Jan 20, 2015 at 05:12:30PM -0500, Anup Khadka wrote:
> Do OpenFlow versions prior to OF 1.2 even support the concept of slave
> controllers? I couldn't find anything in the specs.
> 
> On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
> 
> > On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> > > I have noticed that OVS rejects flow-mod request from a slave-controller
> > > with an OFPBRC_EPERM request code. Isn't the more appropriate code here
> > is:
> > > OFPBRC_IS_SLAVE?
> > >
> > > Same thing when a slave controller sends a packet out.
> >
> > That does sound better, for OF1.2+.
> >

From shankari.v.2014 at gmail.com  Tue Jan 20 15:06:18 2015
From: shankari.v.2014 at gmail.com (Shankari Vaidyalingam)
Date: Wed, 21 Jan 2015 04:36:18 +0530
Subject: [ovs-discuss] Need steps for submitting a patch to the OVS code
	repository
Message-ID: <CAGuFQhAjkbRcxob4fCauEbkhbBgwxCVg_DTgLz5zjXYuRQQm_w@mail.gmail.com>

Hi,

Would be great if someone can let me know the stepwise instructions for
submitting a patch into the OVS code repository.

Regards
Shankari.V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/af5c5676/attachment-0001.html>

From shettyg at nicira.com  Tue Jan 20 15:15:26 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Tue, 20 Jan 2015 15:15:26 -0800
Subject: [ovs-discuss] Need steps for submitting a patch to the OVS code
	repository
In-Reply-To: <CAGuFQhAjkbRcxob4fCauEbkhbBgwxCVg_DTgLz5zjXYuRQQm_w@mail.gmail.com>
References: <CAGuFQhAjkbRcxob4fCauEbkhbBgwxCVg_DTgLz5zjXYuRQQm_w@mail.gmail.com>
Message-ID: <CAHbON5p6+oSiMr1kXWYaaf2Qn5AQUR5CB=JYwRL87k94YFPPTw@mail.gmail.com>

On Tue, Jan 20, 2015 at 3:06 PM, Shankari Vaidyalingam
<shankari.v.2014 at gmail.com> wrote:
> Hi,
>
> Would be great if someone can let me know the stepwise instructions for
> submitting a patch into the OVS code repository.

https://github.com/openvswitch/ovs/blob/master/CONTRIBUTING.md

I would suggest that you send an e-mail to yourself using 'git
send-email' after 'git format-patch' in one local repo where you
created your patch and then save your received email and apply it on a
different local repo using 'git am' where that change does not exists.

From fengyuleidian0615 at gmail.com  Tue Jan 20 23:49:54 2015
From: fengyuleidian0615 at gmail.com (Fan Du)
Date: Wed, 21 Jan 2015 15:49:54 +0800
Subject: [ovs-discuss] Port mirroring in OVS
Message-ID: <54BF5A22.8010001@gmail.com>


Here is steps I'm trying to play with port mirror on OVS:

1. INPORT=tap0
2. #OUTPORT=ens806f0
3. OUTPORT=tap1
4. ovs-vsctl -- --id=@m get mirror mymirror -- remove bridge ovs-usw0 mirrors @m
5. ovs-vsctl -- --id=@m create mirror name=mymirror -- add bridge ovs-usw0 mirrors @m
6. ovs-vsctl -- --id=@portid get port $INPORT -- set mirror mymirror select_src_port=@portid select_dst_port=@portid
7. #ovs-vsctl add-port ovs-usw0 $OUTPORT
8. ovs-vsctl -- --id=@portid get port $OUTPORT -- set mirror mymirror output-port=@portid
9. ovs-vsctl list mirror mymirror

Case1:
A kvm guest1 traffic goes down through tap0 by virtio, and enter bridge ovs-usw0.
ens806f0 is a 10G physical port where I want all guest traffic got mirrored into.
After above settings, generate some traffic on guest, and then tcpdump on destination
mirrored port, ens806f0 in this case, nothings pops up...

Any thing I missed here?

Case2:
But when I a set output-port to tap1, which anchor kvm guest2 traffic, run tcpdump inside
guest2 will see all guest1 traffic, however guest2 can reach outside anymore, it can only got
mirrored guest1 traffic.

Is it designed to do so for guest2 only accept mirrored traffic, but not able to generate its own
traffic to outside?

-- 
No zuo no die but I have to try.

From sbiswas7 at in.ibm.com  Wed Jan 21 03:20:49 2015
From: sbiswas7 at in.ibm.com (Sudipta Biswas3)
Date: Wed, 21 Jan 2015 16:50:49 +0530
Subject: [ovs-discuss] Machine not pingable after OVS upgrade.
In-Reply-To: <CAHbON5rv6pCapPMd2uqNZnA5YCU-Hu8rVFp_31qYeRyCOwua6w@mail.gmail.com>
References: <OFA1F02A0C.39B4BCC5-ON65257DD2.00507930-65257DD2.0052405B@in.ibm.com>
 <CAHbON5rv6pCapPMd2uqNZnA5YCU-Hu8rVFp_31qYeRyCOwua6w@mail.gmail.com>
Message-ID: <OF7FECFF65.3EBA1400-ON65257DD4.003E2B15-65257DD4.003E54E8@in.ibm.com>

Thanks Gurucharan. My installation created two different versions of OVS. 
(2.0 and 2.3.1)
I could get the old config back - by pointing the ovs-vsctl script to the 
older location (which is the correct location).

Regards,

Sudipto Biswas





From:   Gurucharan Shetty <shettyg at nicira.com>
To:     Sudipta Biswas3/India/IBM at IBMIN
Cc:     discuss <discuss at openvswitch.org>
Date:   01/20/2015 08:34 PM
Subject:        Re: [ovs-discuss] Machine not pingable after OVS upgrade.



On Mon, Jan 19, 2015 at 6:58 AM, Sudipta Biswas3 <sbiswas7 at in.ibm.com> 
wrote:
> Hi all,
>
> I had the following configuration:
>
> ovs-vsctl show
>     Bridge br-ex
>         Port "eth0"
>             Interface "eth0"
>         Port br-ex
>             Interface br-ex
>                 type: internal
>
> eth0 being the eth device who's IP was migrated over to br-ex. The OVS
> version used here was 2.0
>
> I downloaded the OVS 2.3.1 tar ball and did an install following the 
INSTALL
> doc.
> I hadn't cleaned up the DB before doing so. Post the upgrade -  I was 
able
> to successfully start the ovsdb-server but the ovs-vsctl output didn't 
have
> the older config. (It was a blank output)
Does the following show 2 locations?
find / -name ovs-vsctl


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/7bd7d010/attachment.html>

From k940545 at hotmail.com  Wed Jan 21 07:50:10 2015
From: k940545 at hotmail.com (=?big5?B?SyC12A==?=)
Date: Wed, 21 Jan 2015 23:50:10 +0800
Subject: [ovs-discuss] Configure sampling rate
Message-ID: <BLU181-W5AAB65D58CD0811426EBEAD480@phx.gbl>

hi,
I tried to change sampling rate in sflow table by sending JSON to OVSDB.
I found that sampling rate would be configured after sending JSON to OVSDB, 
but it did not work immediately and did work after no packet passing.

How to make sampling rate work after sending JSON to OVSDB with no delay?Or what is the time period while the change go into effect?

Thanks for your help!

Emilien Tseng2015/1/21 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/85980f9f/attachment.html>

From andrey at xdel.ru  Wed Jan 21 09:02:11 2015
From: andrey at xdel.ru (Andrey Korolyov)
Date: Wed, 21 Jan 2015 21:02:11 +0400
Subject: [ovs-discuss] Packet drops during non-exhaustive flood with OVS and
	1.8.0
Message-ID: <CABYiri-qn_HGYeRSxH+z0+LGi0se9NEOk0q9hzFg4R+wg05ABw@mail.gmail.com>

Hello,

I observed that the latest OVS with dpdk-1.8.0 and igb_uio starts to
drop packets earlier than a regular Linux ixgbe 10G interface, setup
follows:

receiver/forwarder:
- 8 core/2 head system with E5-2603v2, cores 1-3 are given to OVS exclusively
- n-dpdk-rxqs=6, rx scattering is not enabled
- x520 da
- 3.10/3.18 host kernel
- during 'legacy mode' testing, queue interrupts are scattered through all cores

sender:
- 16-core E52630, netmap framework for packet generation
- pkt-gen -f tx -i eth2 -s 10.6.9.0-10.6.9.255 -d
10.6.10.0-10.6.10.255 -S 90:e2:ba:84:19:a0 -D 90:e2:ba:85:06:07 -R
11000000, results in 11Mpps 60-byte packet flood, there are constant
values during test.

OVS contains only single drop rule at the moment:
ovs-ofctl add-flow br0 in_port=1,actions=DROP

Packet generator was launched for tens of seconds for both Linux stack
and OVS+DPDK cases, resulting in zero drop/error count on the
interface in first, along with same counter values on pktgen and host
interface stat (means that the none of generated packets are
unaccounted).

I selected rate for about 11M because OVS starts to do packet drop
around this value, after same short test interface stat shows
following:

statistics          : {collisions=0, rx_bytes=22003928768,
rx_crc_err=0, rx_dropped=0, rx_errors=10694693, rx_frame_err=0,
rx_over_err=0, rx_packets=343811387, tx_bytes=0, tx_dropped=0,
tx_errors=0, tx_packets=0}

pktgen side:
Sent 354506080 packets, 60 bytes each, in 32.23 seconds.
Speed: 11.00 Mpps Bandwidth: 5.28 Gbps (raw 7.39 Gbps)

If rate will be increased up to 13-14Mpps, the relative error/overall
ratio will rise up to a one third. So far OVS on dpdk shows perfect
results and I do not want to reject this solution due to exhaustive
behavior like described one, so I`m open for any suggestions to
improve the situation (except using 1.7 branch :) ).

From a_azouni at esi.dz  Wed Jan 21 09:27:15 2015
From: a_azouni at esi.dz (Azouni Abdelhadi)
Date: Wed, 21 Jan 2015 18:27:15 +0100
Subject: [ovs-discuss] Controller reaction to ARP requests
Message-ID: <CA+_RhB38fZ4YEudTmtT_euc_RskzNUb9kr3HHFWQ7V1LuFYfQQ@mail.gmail.com>

Hello all,

>From an OpenFlow view, how should a controller reply to a message-in
containing an ARP request (that the of-switch didn't know how to handle) ?
in both cases:
1. the controller has the info about the requested IP
2. the controller has not the info

Thank you

Abdelhadi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/3f69b37e/attachment.html>

From blp at nicira.com  Wed Jan 21 09:29:33 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 21 Jan 2015 09:29:33 -0800
Subject: [ovs-discuss] Configure sampling rate
In-Reply-To: <BLU181-W5AAB65D58CD0811426EBEAD480@phx.gbl>
References: <BLU181-W5AAB65D58CD0811426EBEAD480@phx.gbl>
Message-ID: <20150121172933.GA21835@nicira.com>

On Wed, Jan 21, 2015 at 11:50:10PM +0800, K 華 wrote:
> I tried to change sampling rate in sflow table by sending JSON to OVSDB.
> I found that sampling rate would be configured after sending JSON to OVSDB, 
> but it did not work immediately and did work after no packet passing.
> 
> How to make sampling rate work after sending JSON to OVSDB with no
> delay?Or what is the time period while the change go into effect?

It should take effect immediately, but I think I see a bug.

Can you try this patch?

diff --git a/ofproto/ofproto-dpif.c b/ofproto/ofproto-dpif.c
index bf15d04..0776478 100644
--- a/ofproto/ofproto-dpif.c
+++ b/ofproto/ofproto-dpif.c
@@ -1894,6 +1894,7 @@ set_sflow(struct ofproto *ofproto_,
     struct dpif_sflow *ds = ofproto->sflow;
 
     if (sflow_options) {
+        uint32_t old_probability = ds ? dpif_sflow_get_probability(ds) : 0;
         if (!ds) {
             struct ofport_dpif *ofport;
 
@@ -1901,9 +1902,11 @@ set_sflow(struct ofproto *ofproto_,
             HMAP_FOR_EACH (ofport, up.hmap_node, &ofproto->up.ports) {
                 dpif_sflow_add_port(ds, &ofport->up, ofport->odp_port);
             }
-            ofproto->backer->need_revalidate = REV_RECONFIGURE;
         }
         dpif_sflow_set_options(ds, sflow_options);
+        if (dpif_sflow_get_probability(ds) != old_probability) {
+            ofproto->backer->need_revalidate = REV_RECONFIGURE;
+        }
     } else {
         if (ds) {
             dpif_sflow_unref(ds);

From blp at nicira.com  Wed Jan 21 09:46:55 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 21 Jan 2015 09:46:55 -0800
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <20150120230127.GB10311@nicira.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
 <20150120230127.GB10311@nicira.com>
Message-ID: <20150121174655.GB21835@nicira.com>

I sent out a fix:
        http://openvswitch.org/pipermail/dev/2015-January/050612.html

On Tue, Jan 20, 2015 at 03:01:27PM -0800, Ben Pfaff wrote:
> The OF1.2 feature was based on an Open vSwitch extension to OpenFlow
> first implemented for OF1.0.  We need to continue supporting that
> extension.
> 
> On Tue, Jan 20, 2015 at 05:12:30PM -0500, Anup Khadka wrote:
> > Do OpenFlow versions prior to OF 1.2 even support the concept of slave
> > controllers? I couldn't find anything in the specs.
> > 
> > On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
> > 
> > > On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> > > > I have noticed that OVS rejects flow-mod request from a slave-controller
> > > > with an OFPBRC_EPERM request code. Isn't the more appropriate code here
> > > is:
> > > > OFPBRC_IS_SLAVE?
> > > >
> > > > Same thing when a slave controller sends a packet out.
> > >
> > > That does sound better, for OF1.2+.
> > >

From khadka.py at gmail.com  Wed Jan 21 10:08:40 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Wed, 21 Jan 2015 13:08:40 -0500
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <20150121174655.GB21835@nicira.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
 <20150120230127.GB10311@nicira.com>
 <20150121174655.GB21835@nicira.com>
Message-ID: <CAGVJBz3-HPbe7vUxbbG99WgjG4+u-wmguWQ7FwW=hH4sKC0mYA@mail.gmail.com>

I am actually confused by the fix. OFPBRC_IS_SLAVE is an OpenFlow 1.2+
error message, correct? The comment in the header file is changed and it
appears that this is an OpenFlow 1.0+ error message and I am not sure if
that's right. Likewise OFPBRC_IS_SLAVE is returned while rejecting slave
controllers regardless of the version of the switch. If the switch is not
running in 1.2+ mode, the code that sends the error is not going to
understand this error message, right? Which in that case, it will probably
send a Nicira vendor error back to the controller, instead of the
EPERM_ERROR as the switch used to send previously. Is this what you are
aiming to do? Am I missing something?

Thank you,
Anup

On Wed, Jan 21, 2015 at 12:46 PM, Ben Pfaff <blp at nicira.com> wrote:

> I sent out a fix:
>         http://openvswitch.org/pipermail/dev/2015-January/050612.html
>
> On Tue, Jan 20, 2015 at 03:01:27PM -0800, Ben Pfaff wrote:
> > The OF1.2 feature was based on an Open vSwitch extension to OpenFlow
> > first implemented for OF1.0.  We need to continue supporting that
> > extension.
> >
> > On Tue, Jan 20, 2015 at 05:12:30PM -0500, Anup Khadka wrote:
> > > Do OpenFlow versions prior to OF 1.2 even support the concept of slave
> > > controllers? I couldn't find anything in the specs.
> > >
> > > On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
> > >
> > > > On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> > > > > I have noticed that OVS rejects flow-mod request from a
> slave-controller
> > > > > with an OFPBRC_EPERM request code. Isn't the more appropriate code
> here
> > > > is:
> > > > > OFPBRC_IS_SLAVE?
> > > > >
> > > > > Same thing when a slave controller sends a packet out.
> > > >
> > > > That does sound better, for OF1.2+.
> > > >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/166d3d8f/attachment.html>

From khadka.py at gmail.com  Wed Jan 21 10:22:58 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Wed, 21 Jan 2015 13:22:58 -0500
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <CAGVJBz3-HPbe7vUxbbG99WgjG4+u-wmguWQ7FwW=hH4sKC0mYA@mail.gmail.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
 <20150120230127.GB10311@nicira.com>
 <20150121174655.GB21835@nicira.com>
 <CAGVJBz3-HPbe7vUxbbG99WgjG4+u-wmguWQ7FwW=hH4sKC0mYA@mail.gmail.com>
Message-ID: <CAGVJBz1BnkVJ6C7emusYnUJR5c9YCi51ZGiA1dKqBBdWSkJEmw@mail.gmail.com>

This is what I had in mind:

static enum ofperr
reject_slave_controller(struct ofconn *ofconn)
{
    if (ofconn_get_type(ofconn) == OFCONN_PRIMARY
        && ofconn_get_role(ofconn) == OFPCR12_ROLE_SLAVE) {
        if (ofputil_protocol_to_ofp_version(ofconn_get_protocol(ofconn)) >=
OFP12_VERSION) {
            return OFPERR_OFPBRC_IS_SLAVE;
        } else {
            return OFPERR_OFPBRC_EPERM;
        }
    } else {
        return 0;
    }
}


On Wed, Jan 21, 2015 at 1:08 PM, Anup Khadka <khadka.py at gmail.com> wrote:

> I am actually confused by the fix. OFPBRC_IS_SLAVE is an OpenFlow 1.2+
> error message, correct? The comment in the header file is changed and it
> appears that this is an OpenFlow 1.0+ error message and I am not sure if
> that's right. Likewise OFPBRC_IS_SLAVE is returned while rejecting slave
> controllers regardless of the version of the switch. If the switch is not
> running in 1.2+ mode, the code that sends the error is not going to
> understand this error message, right? Which in that case, it will probably
> send a Nicira vendor error back to the controller, instead of the
> EPERM_ERROR as the switch used to send previously. Is this what you are
> aiming to do? Am I missing something?
>
> Thank you,
> Anup
>
> On Wed, Jan 21, 2015 at 12:46 PM, Ben Pfaff <blp at nicira.com> wrote:
>
>> I sent out a fix:
>>         http://openvswitch.org/pipermail/dev/2015-January/050612.html
>>
>> On Tue, Jan 20, 2015 at 03:01:27PM -0800, Ben Pfaff wrote:
>> > The OF1.2 feature was based on an Open vSwitch extension to OpenFlow
>> > first implemented for OF1.0.  We need to continue supporting that
>> > extension.
>> >
>> > On Tue, Jan 20, 2015 at 05:12:30PM -0500, Anup Khadka wrote:
>> > > Do OpenFlow versions prior to OF 1.2 even support the concept of slave
>> > > controllers? I couldn't find anything in the specs.
>> > >
>> > > On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
>> > >
>> > > > On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
>> > > > > I have noticed that OVS rejects flow-mod request from a
>> slave-controller
>> > > > > with an OFPBRC_EPERM request code. Isn't the more appropriate
>> code here
>> > > > is:
>> > > > > OFPBRC_IS_SLAVE?
>> > > > >
>> > > > > Same thing when a slave controller sends a packet out.
>> > > >
>> > > > That does sound better, for OF1.2+.
>> > > >
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/c0a0afa7/attachment-0001.html>

From davidjoshuaevans at gmail.com  Wed Jan 21 13:08:25 2015
From: davidjoshuaevans at gmail.com (David Evans)
Date: Wed, 21 Jan 2015 15:08:25 -0600
Subject: [ovs-discuss] MTU vs Jumbo frames on DPDK OVS
Message-ID: <D0E57169.228D0%davidjoshuaevans@gmail.com>

Hi All,

The INSTALL.DPDK Mentions
 - Work with 1500 MTU, needs few changes in DPDK lib to fix this issue.

I want to push 15K jumbo frames.

What exactly needs to change in DPDK for this? Other than the jumbo frames
flag in the rxmode of the port conf?

Regards,
Dave.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/570b150d/attachment.html>

From blp at nicira.com  Wed Jan 21 13:24:57 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 21 Jan 2015 13:24:57 -0800
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <CAGVJBz3-HPbe7vUxbbG99WgjG4+u-wmguWQ7FwW=hH4sKC0mYA@mail.gmail.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
 <20150120230127.GB10311@nicira.com>
 <20150121174655.GB21835@nicira.com>
 <CAGVJBz3-HPbe7vUxbbG99WgjG4+u-wmguWQ7FwW=hH4sKC0mYA@mail.gmail.com>
Message-ID: <20150121212457.GA17379@nicira.com>

The updated definition of OFPERR_OFPBRC_IS_SLAVE will use the type and
code for OFPBRC_EPERM in OpenFlow 1.0 and 1.1, and the type and code
for OFPBRC_IS_SLAVE in OpenFlow 1.2+ without any special logic
elsewhere in the code.  In other words, it does the same thing as what
you suggested elsewhere, without having to write all that special-case
code.

On Wed, Jan 21, 2015 at 01:08:40PM -0500, Anup Khadka wrote:
> I am actually confused by the fix. OFPBRC_IS_SLAVE is an OpenFlow 1.2+
> error message, correct? The comment in the header file is changed and it
> appears that this is an OpenFlow 1.0+ error message and I am not sure if
> that's right. Likewise OFPBRC_IS_SLAVE is returned while rejecting slave
> controllers regardless of the version of the switch. If the switch is not
> running in 1.2+ mode, the code that sends the error is not going to
> understand this error message, right? Which in that case, it will probably
> send a Nicira vendor error back to the controller, instead of the
> EPERM_ERROR as the switch used to send previously. Is this what you are
> aiming to do? Am I missing something?
> 
> Thank you,
> Anup
> 
> On Wed, Jan 21, 2015 at 12:46 PM, Ben Pfaff <blp at nicira.com> wrote:
> 
> > I sent out a fix:
> >         http://openvswitch.org/pipermail/dev/2015-January/050612.html
> >
> > On Tue, Jan 20, 2015 at 03:01:27PM -0800, Ben Pfaff wrote:
> > > The OF1.2 feature was based on an Open vSwitch extension to OpenFlow
> > > first implemented for OF1.0.  We need to continue supporting that
> > > extension.
> > >
> > > On Tue, Jan 20, 2015 at 05:12:30PM -0500, Anup Khadka wrote:
> > > > Do OpenFlow versions prior to OF 1.2 even support the concept of slave
> > > > controllers? I couldn't find anything in the specs.
> > > >
> > > > On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
> > > >
> > > > > On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> > > > > > I have noticed that OVS rejects flow-mod request from a
> > slave-controller
> > > > > > with an OFPBRC_EPERM request code. Isn't the more appropriate code
> > here
> > > > > is:
> > > > > > OFPBRC_IS_SLAVE?
> > > > > >
> > > > > > Same thing when a slave controller sends a packet out.
> > > > >
> > > > > That does sound better, for OF1.2+.
> > > > >
> >

From khadka.py at gmail.com  Wed Jan 21 13:46:59 2015
From: khadka.py at gmail.com (Anup Khadka)
Date: Wed, 21 Jan 2015 16:46:59 -0500
Subject: [ovs-discuss] Rejecting flow-mod from a slave controller
In-Reply-To: <20150121212457.GA17379@nicira.com>
References: <CAGVJBz16swa=G_htYDOXJJ1xu9evp13i2q5xJdCRFe5oPwdZxg@mail.gmail.com>
 <20150120212435.GA10311@nicira.com>
 <CAGVJBz1RT9=9gaOqxjagRi+Z2irQxRN4EnNpNokhPOz3hYRrBQ@mail.gmail.com>
 <20150120230127.GB10311@nicira.com>
 <20150121174655.GB21835@nicira.com>
 <CAGVJBz3-HPbe7vUxbbG99WgjG4+u-wmguWQ7FwW=hH4sKC0mYA@mail.gmail.com>
 <20150121212457.GA17379@nicira.com>
Message-ID: <CAGVJBz1HB7-qaZQb6Fbmu6psZ37KhC8xKCb5ZEc4hgv+G_O7Pw@mail.gmail.com>

Ok, excellent. Thanks for the clarification.

On Wed, Jan 21, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:

> The updated definition of OFPERR_OFPBRC_IS_SLAVE will use the type and
> code for OFPBRC_EPERM in OpenFlow 1.0 and 1.1, and the type and code
> for OFPBRC_IS_SLAVE in OpenFlow 1.2+ without any special logic
> elsewhere in the code.  In other words, it does the same thing as what
> you suggested elsewhere, without having to write all that special-case
> code.
>
> On Wed, Jan 21, 2015 at 01:08:40PM -0500, Anup Khadka wrote:
> > I am actually confused by the fix. OFPBRC_IS_SLAVE is an OpenFlow 1.2+
> > error message, correct? The comment in the header file is changed and it
> > appears that this is an OpenFlow 1.0+ error message and I am not sure if
> > that's right. Likewise OFPBRC_IS_SLAVE is returned while rejecting slave
> > controllers regardless of the version of the switch. If the switch is not
> > running in 1.2+ mode, the code that sends the error is not going to
> > understand this error message, right? Which in that case, it will
> probably
> > send a Nicira vendor error back to the controller, instead of the
> > EPERM_ERROR as the switch used to send previously. Is this what you are
> > aiming to do? Am I missing something?
> >
> > Thank you,
> > Anup
> >
> > On Wed, Jan 21, 2015 at 12:46 PM, Ben Pfaff <blp at nicira.com> wrote:
> >
> > > I sent out a fix:
> > >         http://openvswitch.org/pipermail/dev/2015-January/050612.html
> > >
> > > On Tue, Jan 20, 2015 at 03:01:27PM -0800, Ben Pfaff wrote:
> > > > The OF1.2 feature was based on an Open vSwitch extension to OpenFlow
> > > > first implemented for OF1.0.  We need to continue supporting that
> > > > extension.
> > > >
> > > > On Tue, Jan 20, 2015 at 05:12:30PM -0500, Anup Khadka wrote:
> > > > > Do OpenFlow versions prior to OF 1.2 even support the concept of
> slave
> > > > > controllers? I couldn't find anything in the specs.
> > > > >
> > > > > On Tue, Jan 20, 2015 at 4:24 PM, Ben Pfaff <blp at nicira.com> wrote:
> > > > >
> > > > > > On Tue, Jan 20, 2015 at 03:55:57PM -0500, Anup Khadka wrote:
> > > > > > > I have noticed that OVS rejects flow-mod request from a
> > > slave-controller
> > > > > > > with an OFPBRC_EPERM request code. Isn't the more appropriate
> code
> > > here
> > > > > > is:
> > > > > > > OFPBRC_IS_SLAVE?
> > > > > > >
> > > > > > > Same thing when a slave controller sends a packet out.
> > > > > >
> > > > > > That does sound better, for OF1.2+.
> > > > > >
> > >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150121/4d5f96e7/attachment.html>

From batmanustc at gmail.com  Wed Jan 21 19:01:54 2015
From: batmanustc at gmail.com (yewgang)
Date: Thu, 22 Jan 2015 11:01:54 +0800
Subject: [ovs-discuss] Fwd: Is there any possible for program blocking here
 for long time ?
In-Reply-To: <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
 <20150119181943.GL983@nicira.com>
 <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
Message-ID: <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>

Dear Developers,

Thank you. I don't know if these codes will give me faster response ? Could
I change codes like this ?

enum ovsdb_idl_txn_status
ovsdb_idl_txn_commit_block(struct ovsdb_idl_txn *txn)
{
    enum ovsdb_idl_txn_status status;

    fatal_signal_run();
    while ((status = ovsdb_idl_txn_commit(txn)) == TXN_INCOMPLETE) {
        *poll_timer_wait(1000);*
        ovsdb_idl_run(txn->idl);
        ovsdb_idl_wait(txn->idl);
        ovsdb_idl_txn_wait(txn);
        poll_block();
    }
    return status;
}


Also there is another problem, I don't know if these codes will work.

As there is a while loop, if ovsdb-server continue block and no answer
return, will the loop be dead-loop ?


2015-01-20 2:19 GMT+08:00 Ben Pfaff <blp at nicira.com>:

> On Mon, Jan 19, 2015 at 03:49:21PM +0800, yewgang wrote:
> > Now for some reason I have to write codes like this (My program perform
> > ovsdb-client):
> >
> > LOOP {
> >     ........
> >     important task every 2 second;
> >     ovsdb_idl_txn_commit_block(txn);
> >     ........
> > }
> >
> > If ovsdb-server is OK, ovsdb_idl_txn_commit_block will not block; but if
> > ovsdb-server is blocked or network is blocked, Is there any possible for
> my
> > program blocking at *poll_block()* (in ovsdb_idl_txn_commit_block
> function)
> > for long time ?
>
> If it takes a long time for a network response, then, yes, poll_block()
> could block for 2 seconds or more.
>
> If you need faster response than that then you probably shouldn't use
> ovsdb_idl_txn_commit_block().  Use ovsdb_idl_txn_commit() and
> poll_block() by hand, plus poll_timer_wait() or poll_timer_wait_until()
> to ensure that poll_block() wakes up by your deadline.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/3c2911d2/attachment-0001.html>

From blp at nicira.com  Wed Jan 21 20:49:46 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 21 Jan 2015 20:49:46 -0800
Subject: [ovs-discuss] Fwd: Is there any possible for program blocking
 here for long time ?
In-Reply-To: <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
 <20150119181943.GL983@nicira.com>
 <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
 <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>
Message-ID: <20150122044946.GB6309@nicira.com>

It's not what I recommended.  If you're not going to take my advice
anyway then I don't see much point in giving more of it.

On Thu, Jan 22, 2015 at 11:01:54AM +0800, yewgang wrote:
> Thank you. I don't know if these codes will give me faster response ? Could
> I change codes like this ?
> 
> enum ovsdb_idl_txn_status
> ovsdb_idl_txn_commit_block(struct ovsdb_idl_txn *txn)
> {
>     enum ovsdb_idl_txn_status status;
> 
>     fatal_signal_run();
>     while ((status = ovsdb_idl_txn_commit(txn)) == TXN_INCOMPLETE) {
>         *poll_timer_wait(1000);*
>         ovsdb_idl_run(txn->idl);
>         ovsdb_idl_wait(txn->idl);
>         ovsdb_idl_txn_wait(txn);
>         poll_block();
>     }
>     return status;
> }
> 
> 
> Also there is another problem, I don't know if these codes will work.
> 
> As there is a while loop, if ovsdb-server continue block and no answer
> return, will the loop be dead-loop ?
> 
> 
> 2015-01-20 2:19 GMT+08:00 Ben Pfaff <blp at nicira.com>:
> 
> > On Mon, Jan 19, 2015 at 03:49:21PM +0800, yewgang wrote:
> > > Now for some reason I have to write codes like this (My program perform
> > > ovsdb-client):
> > >
> > > LOOP {
> > >     ........
> > >     important task every 2 second;
> > >     ovsdb_idl_txn_commit_block(txn);
> > >     ........
> > > }
> > >
> > > If ovsdb-server is OK, ovsdb_idl_txn_commit_block will not block; but if
> > > ovsdb-server is blocked or network is blocked, Is there any possible for
> > my
> > > program blocking at *poll_block()* (in ovsdb_idl_txn_commit_block
> > function)
> > > for long time ?
> >
> > If it takes a long time for a network response, then, yes, poll_block()
> > could block for 2 seconds or more.
> >
> > If you need faster response than that then you probably shouldn't use
> > ovsdb_idl_txn_commit_block().  Use ovsdb_idl_txn_commit() and
> > poll_block() by hand, plus poll_timer_wait() or poll_timer_wait_until()
> > to ensure that poll_block() wakes up by your deadline.
> >

> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss


From batmanustc at gmail.com  Wed Jan 21 21:37:50 2015
From: batmanustc at gmail.com (yewgang)
Date: Thu, 22 Jan 2015 13:37:50 +0800
Subject: [ovs-discuss] Fwd: Is there any possible for program blocking
 here for long time ?
In-Reply-To: <20150122044946.GB6309@nicira.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
 <20150119181943.GL983@nicira.com>
 <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
 <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>
 <20150122044946.GB6309@nicira.com>
Message-ID: <CAOE=1Z0oEbzuKM-itY0CZVViZPnfTA89ymzeC7B5FrbXHO5J-g@mail.gmail.com>

These codes is only an example, I decide to write codes in my project by
hand like below:

for (i = 0; i < LOOP_COUNT_DEFINE_BY_MYSELF; i++) {
    status = ovsdb_idl_txn_commit(txn)
    if (status != TXN_INCOMPLETE)
         break;

    poll_timer_wait(1000);
    ....
    poll_block();
}

I hope the commit-loop will end in LOOP_COUNT_DEFINE_BY_MYSELF loops.
But what I get is TXN_ERROR
That really confused me ...

2015-01-22 12:49 GMT+08:00 Ben Pfaff <blp at nicira.com>:

> It's not what I recommended.  If you're not going to take my advice
> anyway then I don't see much point in giving more of it.
>
> On Thu, Jan 22, 2015 at 11:01:54AM +0800, yewgang wrote:
> > Thank you. I don't know if these codes will give me faster response ?
> Could
> > I change codes like this ?
> >
> > enum ovsdb_idl_txn_status
> > ovsdb_idl_txn_commit_block(struct ovsdb_idl_txn *txn)
> > {
> >     enum ovsdb_idl_txn_status status;
> >
> >     fatal_signal_run();
> >     while ((status = ovsdb_idl_txn_commit(txn)) == TXN_INCOMPLETE) {
> >         *poll_timer_wait(1000);*
> >         ovsdb_idl_run(txn->idl);
> >         ovsdb_idl_wait(txn->idl);
> >         ovsdb_idl_txn_wait(txn);
> >         poll_block();
> >     }
> >     return status;
> > }
> >
> >
> > Also there is another problem, I don't know if these codes will work.
> >
> > As there is a while loop, if ovsdb-server continue block and no answer
> > return, will the loop be dead-loop ?
> >
> >
> > 2015-01-20 2:19 GMT+08:00 Ben Pfaff <blp at nicira.com>:
> >
> > > On Mon, Jan 19, 2015 at 03:49:21PM +0800, yewgang wrote:
> > > > Now for some reason I have to write codes like this (My program
> perform
> > > > ovsdb-client):
> > > >
> > > > LOOP {
> > > >     ........
> > > >     important task every 2 second;
> > > >     ovsdb_idl_txn_commit_block(txn);
> > > >     ........
> > > > }
> > > >
> > > > If ovsdb-server is OK, ovsdb_idl_txn_commit_block will not block;
> but if
> > > > ovsdb-server is blocked or network is blocked, Is there any possible
> for
> > > my
> > > > program blocking at *poll_block()* (in ovsdb_idl_txn_commit_block
> > > function)
> > > > for long time ?
> > >
> > > If it takes a long time for a network response, then, yes, poll_block()
> > > could block for 2 seconds or more.
> > >
> > > If you need faster response than that then you probably shouldn't use
> > > ovsdb_idl_txn_commit_block().  Use ovsdb_idl_txn_commit() and
> > > poll_block() by hand, plus poll_timer_wait() or poll_timer_wait_until()
> > > to ensure that poll_block() wakes up by your deadline.
> > >
>
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/4ef4cde0/attachment.html>

From blp at nicira.com  Wed Jan 21 23:01:22 2015
From: blp at nicira.com (Ben Pfaff)
Date: Wed, 21 Jan 2015 23:01:22 -0800
Subject: [ovs-discuss] Fwd: Is there any possible for program blocking
 here for long time ?
In-Reply-To: <CAOE=1Z0oEbzuKM-itY0CZVViZPnfTA89ymzeC7B5FrbXHO5J-g@mail.gmail.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
 <20150119181943.GL983@nicira.com>
 <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
 <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>
 <20150122044946.GB6309@nicira.com>
 <CAOE=1Z0oEbzuKM-itY0CZVViZPnfTA89ymzeC7B5FrbXHO5J-g@mail.gmail.com>
Message-ID: <20150122070122.GA3619@nicira.com>

On Thu, Jan 22, 2015 at 01:37:50PM +0800, yewgang wrote:
> These codes is only an example, I decide to write codes in my project by
> hand like below:
> 
> for (i = 0; i < LOOP_COUNT_DEFINE_BY_MYSELF; i++) {
>     status = ovsdb_idl_txn_commit(txn)
>     if (status != TXN_INCOMPLETE)
>          break;
> 
>     poll_timer_wait(1000);
>     ....
>     poll_block();
> }
> 
> I hope the commit-loop will end in LOOP_COUNT_DEFINE_BY_MYSELF loops.

OK.

If you need the loop to break when some event occurs, then usually you
should arrange for it to check for and to wake up when that specific
event occurs.  The code as you write it above won't actually help with
that because it doesn't check for your event in the loop, even every
1000 ms.  I also don't think that hard-coding a maximum iteration count
like LOOP_COUNT_DEFINE_BY_MYSELF is a good idea, because there's no way
to predict how many iterations it will take to process the transaction.

I'm not sure that you understand event-driven programming.

> But what I get is TXN_ERROR
> That really confused me ...

You're probably doing something wrong, but I have no way to guess what.

From shashwat.srivastava at tcs.com  Wed Jan 21 23:09:05 2015
From: shashwat.srivastava at tcs.com (Shashwat Srivastava)
Date: Thu, 22 Jan 2015 12:39:05 +0530
Subject: [ovs-discuss] Regarding permission for usage of OpenVSwitch
	reference.
Message-ID: <OF9D6D9DED.EE880B07-ON65257DD5.0026D961-65257DD5.00274821@tcs.com>

Hi Team,

I am writing a whitepaper and wanted your permission to use the reference 
of Open VSwitch in our whitepaper.
Is this the right place to seek permission or please direct me where to 
send the mail for the same ?


Regards
Shashwat Srivastava
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/6e0010cf/attachment-0001.html>

From jpettit at nicira.com  Wed Jan 21 23:16:52 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Wed, 21 Jan 2015 23:16:52 -0800
Subject: [ovs-discuss] [ovs-dev] Regarding permission for usage of
	OpenVSwitch reference.
In-Reply-To: <OF9D6D9DED.EE880B07-ON65257DD5.0026D961-65257DD5.00274821@tcs.com>
References: <OF9D6D9DED.EE880B07-ON65257DD5.0026D961-65257DD5.00274821@tcs.com>
Message-ID: <2FA9AEAC-A162-4F31-B1B1-472029F30493@nicira.com>

You're free to refer to OVS, but I don't think you need our permission for that.  Is there something other than referring to it that you're doing?

--Justin


> On Jan 21, 2015, at 11:09 PM, Shashwat Srivastava <shashwat.srivastava at tcs.com> wrote:
> 
> Hi Team,
> 
> I am writing a whitepaper and wanted your permission to use the reference 
> of Open VSwitch in our whitepaper.
> Is this the right place to seek permission or please direct me where to 
> send the mail for the same ?
> 
> 
> Regards
> Shashwat Srivastava
> =====-----=====-----=====
> Notice: The information contained in this e-mail
> message and/or attachments to it may contain 
> confidential or privileged information. If you are 
> not the intended recipient, any dissemination, use, 
> review, distribution, printing or copying of the 
> information contained in this e-mail message 
> and/or attachments to it are strictly prohibited. If 
> you have received this communication in error, 
> please notify us by reply e-mail or telephone and 
> immediately and permanently delete the message 
> and any attachments. Thank you
> 
> 
> _______________________________________________
> dev mailing list
> dev at openvswitch.org
> http://openvswitch.org/mailman/listinfo/dev


From batmanustc at gmail.com  Wed Jan 21 23:28:24 2015
From: batmanustc at gmail.com (yewgang)
Date: Thu, 22 Jan 2015 15:28:24 +0800
Subject: [ovs-discuss] Fwd: Is there any possible for program blocking
 here for long time ?
In-Reply-To: <20150122070122.GA3619@nicira.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
 <20150119181943.GL983@nicira.com>
 <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
 <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>
 <20150122044946.GB6309@nicira.com>
 <CAOE=1Z0oEbzuKM-itY0CZVViZPnfTA89ymzeC7B5FrbXHO5J-g@mail.gmail.com>
 <20150122070122.GA3619@nicira.com>
Message-ID: <CAOE=1Z28d4oiF=dzA7DJp0fUvy2UVy_6fmatPCM-tUxaC8OwQA@mail.gmail.com>

Thank you for your answers very much.

#############
Actually I have add events I care about between poll_timer_wait and
poll_block.

What I want is:
if the event I care about happens, then wake up immediately;
if the event I care about does not happens, then wake up after 1000ms;

I test my codes, it seems works ...

#############
I don't know is there any better way to do this, which is commit in 1s.

I searched in OVS, I found that there is only one place does not use
commit_block, it's vswitchd. Vswitchd remember the txn, if commit is
TXN_INCOMPLETE, vswitchd will commit the txn next time.

But I want is commit txn less in 1s or a specific time, and I don't care
job fails, so I have to write codes like that ...


2015-01-22 15:01 GMT+08:00 Ben Pfaff <blp at nicira.com>:

> On Thu, Jan 22, 2015 at 01:37:50PM +0800, yewgang wrote:
> > These codes is only an example, I decide to write codes in my project by
> > hand like below:
> >
> > for (i = 0; i < LOOP_COUNT_DEFINE_BY_MYSELF; i++) {
> >     status = ovsdb_idl_txn_commit(txn)
> >     if (status != TXN_INCOMPLETE)
> >          break;
> >
> >     poll_timer_wait(1000);
> >     ....
> >     poll_block();
> > }
> >
> > I hope the commit-loop will end in LOOP_COUNT_DEFINE_BY_MYSELF loops.
>
> OK.
>
> If you need the loop to break when some event occurs, then usually you
> should arrange for it to check for and to wake up when that specific
> event occurs.  The code as you write it above won't actually help with
> that because it doesn't check for your event in the loop, even every
> 1000 ms.  I also don't think that hard-coding a maximum iteration count
> like LOOP_COUNT_DEFINE_BY_MYSELF is a good idea, because there's no way
> to predict how many iterations it will take to process the transaction.
>
> I'm not sure that you understand event-driven programming.
>
> > But what I get is TXN_ERROR
> > That really confused me ...
>
> You're probably doing something wrong, but I have no way to guess what.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/f496c00f/attachment.html>

From shashwat.srivastava at tcs.com  Wed Jan 21 23:43:44 2015
From: shashwat.srivastava at tcs.com (Shashwat Srivastava)
Date: Thu, 22 Jan 2015 13:13:44 +0530
Subject: [ovs-discuss] [ovs-dev] Regarding permission for usage of
	OpenVSwitch reference.
In-Reply-To: <2FA9AEAC-A162-4F31-B1B1-472029F30493@nicira.com>
References: <OF9D6D9DED.EE880B07-ON65257DD5.0026D961-65257DD5.00274821@tcs.com>
 <2FA9AEAC-A162-4F31-B1B1-472029F30493@nicira.com>
Message-ID: <OFD4334341.9AF049E2-ON65257DD5.002A4531-65257DD5.002A7417@tcs.com>

Hi Justin,

We are proposing a solution to the problem in our whitepaper when flows of 
same importance are encountered in the case when flow eviction is enabled 
on basis of Importance field.


Regards
Shashwat Srivastava



From:   Justin Pettit <jpettit at nicira.com>
To:     Shashwat Srivastava <shashwat.srivastava at tcs.com>
Cc:     discuss <discuss at openvswitch.org>
Date:   01/22/2015 12:47 PM
Subject:        Re: [ovs-dev] Regarding permission for usage of 
OpenVSwitch reference.



You're free to refer to OVS, but I don't think you need our permission for 
that.  Is there something other than referring to it that you're doing?

--Justin


> On Jan 21, 2015, at 11:09 PM, Shashwat Srivastava 
<shashwat.srivastava at tcs.com> wrote:
> 
> Hi Team,
> 
> I am writing a whitepaper and wanted your permission to use the 
reference 
> of Open VSwitch in our whitepaper.
> Is this the right place to seek permission or please direct me where to 
> send the mail for the same ?
> 
> 
> Regards
> Shashwat Srivastava
> =====-----=====-----=====
> Notice: The information contained in this e-mail
> message and/or attachments to it may contain 
> confidential or privileged information. If you are 
> not the intended recipient, any dissemination, use, 
> review, distribution, printing or copying of the 
> information contained in this e-mail message 
> and/or attachments to it are strictly prohibited. If 
> you have received this communication in error, 
> please notify us by reply e-mail or telephone and 
> immediately and permanently delete the message 
> and any attachments. Thank you
> 
> 
> _______________________________________________
> dev mailing list
> dev at openvswitch.org
> http://openvswitch.org/mailman/listinfo/dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/330d018a/attachment.html>

From yaroni at radcom.com  Thu Jan 22 02:41:58 2015
From: yaroni at radcom.com (Yaron Illouz)
Date: Thu, 22 Jan 2015 12:41:58 +0200
Subject: [ovs-discuss] libvirt and openvswitch
Message-ID: <1A791056FCD70F458405B58B79F5C2F706BBF12E@rad-w2ksrv11>

Hi

 

I am trying to create an openvswitch using libvirt and to use a virtual
network - I mean not the physical one my computer is connected to.

I want the vm to receive  an ip in the range .168.100.2,192.168.100.220

Is it possible to do that?

 

I think it doesn't work because of the dhcp not working

 

I defined a network 

 

    <network>

      <name>private</name>

      <bridge name='virbr0'/>

              <forward mode='bridge'/>

      <virtualport type='openvswitch'/>

    </network>

 

I defined an ip address to virbr0 

ip addr add 192.168.100.2 dev virbr0

ip link set virbr0 up

 

I tried to launch a process to enable a dhcp

/usr/sbin/dnsmasq --strict-order --bind-interfaces --interface=eth2
--listen-address 192.168.100.1 --dhcp-range
192.168.100.2,192.168.100.220 --dhcp-lease-max=101 --dhcp-no-override

But it didn't help

 

But get no ip for the ovs port when I launch the instance. 

 

    ci-info: +++++++++++++++++++++++++Net device
info++++++++++++++++++++++++++

    ci-info:
+--------+------+--------------+-------------+-------------------+

    ci-info: | Device |  Up  |   Address    |     Mask    |
Hw-Address    |

    ci-info:
+--------+------+--------------+-------------+-------------------+

    ci-info: |   lo   | True |  127.0.0.1   |  255.0.0.0  |         .
|

    ci-info: |  eth1  | True |      .       |      .      |
52:54:00:24:16:29 |

    ci-info: |  eth0  | True | 172.16.5.136 | 255.255.0.0 |
52:54:00:44:01:28 |

 

 

In the bridge port vnet1 get assigned to virbr0

 

    Bridge "virbr0"

        Port "virbr0"

            Interface "virbr0"

                type: internal

        Port "vnet1"

            Interface "vnet1"

 

I also tried to add-port a real interface to virbr0, but it made no
change. No cable is connected to this  interface.

 

And i launch the instance the following way

 

     virt-install --name probe9 --ram 4096 --vcpus=4 --check-cpu
--os-type=linux --import --disk
/data/KVM/Probe2-cloud3.qcow2,format=qcow2 --network network=ext
--network network=private --graphics vnc,listen=0.0.0.0 --noautoconsole
--disk vol=default/configuration2.iso,bus=virtio


 

 

I did a tcpdump of vnet1 and it look like

 

05:14:27.843753 IP (tos 0x10, ttl 128, id 0, offset 0, flags [none],
proto UDP (17), length 332)

    0.0.0.0.bootpc > 255.255.255.255.bootps: [udp sum ok] BOOTP/DHCP,
Request from 52:54:00:3f:08:13 (oui Unknown), length 304, xid
0x4726ff0c, secs 7, Flags [none] (0x0000)

          Client-Ethernet-Address 52:54:00:3f:08:13 (oui Unknown)

          Vendor-rfc1048 Extensions

            Magic Cookie 0x63825363

            DHCP-Message Option 53, length 1: Discover

            Parameter-Request Option 55, length 13:

              Subnet-Mask, BR, Time-Zone, Classless-Static-Route

              Domain-Name, Domain-Name-Server, Hostname, YD

              YS, NTP, MTU, Option 119

              Default-Gateway

            Vendor-Class Option 60, length 43: "anaconda-Linux
2.6.32-431.el6.x86_64 x86_64"

05:14:27.931015 IP6 (hlim 1, next-header Options (0) payload length: 36)
fe80::5054:ff:fe3f:813 > ff02::16: HBH (rtalert: 0x0000) (padn)[icmp6
sum ok] ICMP6, multicast listener report v2, length 28, 1 group
record(s) [gaddr ff02::1:ff3f:813 to_ex { }]

05:14:30.963975 IP6 (hlim 255, next-header ICMPv6 (58) payload length:
16) fe80::5054:ff:fe3f:813 > ff02::2: [icmp6 sum ok] ICMP6, router
solicitation, length 16

          source link-address option (1), length 8 (1):
52:54:00:3f:08:13

            0x0000:  5254 003f 0813

05:14:40.850652 IP (tos 0x10, ttl 128, id 0, offset 0, flags [none],
proto UDP (17), length 332)

    0.0.0.0.bootpc > 255.255.255.255.bootps: [udp sum ok] BOOTP/DHCP,
Request from 52:54:00:3f:08:13 (oui Unknown), length 304, xid
0x4726ff0c, secs 20, Flags [none] (0x0000)

          Client-Ethernet-Address 52:54:00:3f:08:13 (oui Unknown)

          Vendor-rfc1048 Extensions

            Magic Cookie 0x63825363

            DHCP-Message Option 53, length 1: Discover

            Parameter-Request Option 55, length 13:

              Subnet-Mask, BR, Time-Zone, Classless-Static-Route

              Domain-Name, Domain-Name-Server, Hostname, YD

              YS, NTP, MTU, Option 119

              Default-Gateway

            Vendor-Class Option 60, length 43: "anaconda-Linux
2.6.32-431.el6.x86_64 x86_64"

05:14:54.851632 IP (tos 0x10, ttl 128, id 0, offset 0, flags [none],
proto UDP (17), length 332)

    0.0.0.0.bootpc > 255.255.255.255.bootps: [udp sum ok] BOOTP/DHCP,
Request from 52:54:00:3f:08:13 (oui Unknown), length 304, xid
0x4726ff0c, secs 34, Flags [none] (0x0000)

          Client-Ethernet-Address 52:54:00:3f:08:13 (oui Unknown)

          Vendor-rfc1048 Extensions

            Magic Cookie 0x63825363

            DHCP-Message Option 53, length 1: Discover

            Parameter-Request Option 55, length 13:

              Subnet-Mask, BR, Time-Zone, Classless-Static-Route

              Domain-Name, Domain-Name-Server, Hostname, YD

              YS, NTP, MTU, Option 119

              Default-Gateway

            Vendor-Class Option 60

 

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/0b93893a/attachment-0001.html>

From nagesh.nitish at gmail.com  Thu Jan 22 04:04:15 2015
From: nagesh.nitish at gmail.com (nitish nagesh)
Date: Thu, 22 Jan 2015 17:34:15 +0530
Subject: [ovs-discuss] Flow Matching with port ranges..
Message-ID: <CAK6_9mOffNeBuQWnB4vRNrBhzA9nbDPzBSoeSpp7GSSTV_a0+A@mail.gmail.com>

Hi All,

   I am trying to add L4 port range matching capability to our switch
(internally uses OVS code). I have used experimenter match fields in the
Flow Mod to get these. Once i receive them, after parsing the experimenter
OXM's, i store them in the "flow" structure. I have added new fields to
store them, something like this:

struct flow {
.
.
.
 struct port_range pr;
.
.
};

struct port_range
{
   ovs_be16 begin;
   ovs_be16 end;
};

  Note that when i receive a port range in the flow-mod, i would NOT
populate the tp_src or tp_dst fields.

 However i am facing issues when it comes to matching packets to this rule.
As my understanding goes, OVS creates a hash of all the field values in the
"flow" structure as received in the flow-mod and stores them in the
classifier. A network packet would never match this rule, as it doesnt have
a port-range and hence the hash would always fail.

   I was thinking if there's an easy way to achieve this with minimal
changes to the code. My knowledge about OVS code is limited, hence
requesting for help. Please comment.

  Also the OVS code base which our switch uses is a little old. Pardon me
if such a capability is already been implemented in the latest ovs.

Thanks,
Nitish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/153f7380/attachment.html>

From arkajit.ghosh at tcs.com  Thu Jan 22 02:18:44 2015
From: arkajit.ghosh at tcs.com (Arkajit Ghosh)
Date: Thu, 22 Jan 2015 15:48:44 +0530
Subject: [ovs-discuss] OVS-Database Connection Refused while creating a
	bridge with databath_type="netdev"
Message-ID: <OF3F8C71F7.A9C055EE-ON65257DD5.0038A58E-65257DD5.0038A591@tcs.com>


Hi,
   
    I am trying to execute the ovs-vswitchd with DPDK (dpdk-1.7.1). But getting OVS-database connection refused while creating  a bridge with datapath_type="netdev" .  

OVS version:   Latest Clone from Git (2-3 days back)

Here are the steps which I followed : 

####################################################

#  sysctl -w vm.nr_hugepages=2000

#  mkdir -p /mnt/huge

#  mount -t hugetlbfs hugetlbfs /mnt/huge

#  modprobe uio

#  insmod $DPDK_BUILD/kmod/igb_uio.ko

#  $DPDK_DIR/tools/dpdk_nic_bind.py --force --bind=igb_uio eth0

#  mkdir -p /usr/local/etc/openvswitch

#  mkdir -p /usr/local/var/run/openvswitch

#  rm /usr/local/etc/openvswitch/conf.db

#   cd $OVS_DIR

#   ./ovsdb/ovsdb-tool create /usr/local/etc/openvswitch/conf.db \
             ./vswitchd/vswitch.ovsschema
   
#   ./ovsdb/ovsdb-server --remote=punix:/usr/local/var/run/openvswitch/db.sock \
          --remote=db:Open_vSwitch,Open_vSwitch,manager_options \
          --private-key=db:Open_vSwitch,SSL,private_key \
          --certificate=Open_vSwitch,SSL,certificate \
          --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --pidfile --detach
        ```

#   ./utilities/ovs-vsctl --no-wait init
    ```
#   export DB_SOCK=/usr/local/var/run/openvswitch/db.sock

#   ./vswitchd/ovs-vswitchd --dpdk -c 0x1 -n 4 -- unix:$DB_SOCK --pidfile --detach

#   `ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev`
      
     ovs-vsctl: unix:/var/run/openvswitch/db.sock: database connection failed (connection refused)

####################################################################

Please feel free to correct me if I missed any steps to execute or did something wrong. 

Please suggest how to proceed further.  

Thanks & Regards
Arkajit Ghosh
Mailto: arkajit.ghosh at tcs.com
Website: http://www.tcs.com
____________________________________________
Experience certainty.	IT Services
Business Solutions
Consulting
____________________________________________
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/ea277932/attachment.html>

From hr.mohit.malik at gmail.com  Thu Jan 22 05:12:31 2015
From: hr.mohit.malik at gmail.com (Mohit Malik)
Date: Thu, 22 Jan 2015 18:42:31 +0530
Subject: [ovs-discuss] query regarding outer ethernet header formation for
	gre encapsulated packet
Message-ID: <CAC-W8+pX8fjwYF3GR9SkU_m_802f+dhx4A7=5G974=5j8Zq6NQ@mail.gmail.com>

Hi,

I am trying to understand the GRE encapsulation functionality of OVS. I
have seen the flow of the packet in case of gre encapsulation, the flow is
like :-

do_output -> ovs_vport_send -> gre_send -> __send -> __build_header(to
build gre header) + iptunnel_xmit(to build and send ip packet)

So, in this flow I am not able to see the place in code, where outer
ethernet frame is getting attached and also the place where packet is
actually sent out.

Please help me finding the appropriate code part.


Thanks
Mohit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/3d321cff/attachment.html>

From luiz.ozaki at gmail.com  Thu Jan 22 05:47:57 2015
From: luiz.ozaki at gmail.com (Luiz Henrique Ozaki)
Date: Thu, 22 Jan 2015 11:47:57 -0200
Subject: [ovs-discuss] ovs-vswitchd crashing lib/rconn.c:568
Message-ID: <CAGSPRswFdBmwsBayTV5wj-ngp2_m6e0yXqWFNQutc4KKjAGaqw@mail.gmail.com>

Hi all,

I have some instances running on OVS with the XenServer and the
ovs-vswitchd process have been crashing for me:
ovs-vswitchd: monitoring pid 19196 (10 crashes: pid 11819 died, killed
(Aborted))

I've got this on the log:
23159|util|EMER|lib/rconn.c:568: assertion version >= 0 && version <= 0xff
failed in run_ACTIVE()

I did a backtrace from the coredump, but I couldn't figure it out why I'm
getting this assertion failed.

Here is a backtrace from the 2.3.0 version:
(gdb) thread apply all bt

Thread 11 (Thread 0xb7725b90 (LWP 20243)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb73d9ff2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from
/lib/libpthread.so.0
#2  0xb74cbbb4 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/libc.so.6
#3  0xb7571199 in handle_fildes_io () from /lib/librt.so.1
#4  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#5  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 10 (Thread 0xb48feb90 (LWP 12169)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb6704538, n_pollfds=3, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb48e6eb8) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x08075aa1 in udpif_upcall_handler (arg=0x95f6490) at
ofproto/ofproto-dpif-upcall.c:529
#5  0x080e7058 in ovsthread_wrapper (aux_=0x95a65e0) at lib/ovs-thread.c:322
#6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#7  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 9 (Thread 0xb725eb90 (LWP 12168)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb673b0a8, n_pollfds=3, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb7246eb8) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x08075aa1 in udpif_upcall_handler (arg=0x95f6484) at
ofproto/ofproto-dpif-upcall.c:529
#5  0x080e7058 in ovsthread_wrapper (aux_=0x9600d20) at lib/ovs-thread.c:322
#6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#7  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 8 (Thread 0xb5a5bb90 (LWP 12167)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0x9612c60, n_pollfds=3, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb5a43eb8) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x08075aa1 in udpif_upcall_handler (arg=0x95f6478) at
ofproto/ofproto-dpif-upcall.c:529
#5  0x080e7058 in ovsthread_wrapper (aux_=0x9611220) at lib/ovs-thread.c:322
#6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#7  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 7 (Thread 0xb38fcb90 (LWP 12174)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb65281c0, n_pollfds=2, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb38fad88) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x080e70cb in ovs_barrier_block (barrier=0x95a7bac) at
lib/ovs-thread.c:290
#5  0x08076d6e in udpif_revalidator (arg=0x95f3a18) at
ofproto/ofproto-dpif-upcall.c:588
---Type <return> to continue, or q <return> to quit---
#6  0x080e7058 in ovsthread_wrapper (aux_=0x96110e0) at lib/ovs-thread.c:322
#7  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#8  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 6 (Thread 0xb30fbb90 (LWP 12178)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb6526308, n_pollfds=2, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb30f9d88) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x080e70cb in ovs_barrier_block (barrier=0x95a7bac) at
lib/ovs-thread.c:290
#5  0x08076d6e in udpif_revalidator (arg=0x95f3a28) at
ofproto/ofproto-dpif-upcall.c:588
#6  0x080e7058 in ovsthread_wrapper (aux_=0x9620820) at lib/ovs-thread.c:322
#7  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#8  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 5 (Thread 0xb40fdb90 (LWP 12173)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb67119b0, n_pollfds=3, handles=0x0,
timeout_when=10068193, elapsed=0xb40fbdb8) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x080773d8 in udpif_revalidator (arg=0x95f3a08) at
ofproto/ofproto-dpif-upcall.c:629
#5  0x080e7058 in ovsthread_wrapper (aux_=0x9620038) at lib/ovs-thread.c:322
#6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#7  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 4 (Thread 0xb50ffb90 (LWP 12166)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb6713a20, n_pollfds=3, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb50e7eb8) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x08075aa1 in udpif_upcall_handler (arg=0x95f646c) at
ofproto/ofproto-dpif-upcall.c:529
#5  0x080e7058 in ovsthread_wrapper (aux_=0x96110e0) at lib/ovs-thread.c:322
#6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#7  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 3 (Thread 0xb28fab90 (LWP 12165)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb73dc839 in __lll_lock_wait () from /lib/libpthread.so.0
#2  0xb73d7e9f in _L_lock_885 () from /lib/libpthread.so.0
#3  0xb73d7d66 in pthread_mutex_lock () from /lib/libpthread.so.0
#4  0xb74cbcd6 in pthread_mutex_lock () from /lib/libc.so.6
#5  0x080e7731 in ovs_mutex_lock_at (l_=0x962d7b0, where=0x815b306
"lib/rconn.c:960") at lib/ovs-thread.c:70
#6  0x080f4a6f in rconn_get_version (rconn=0x962d7b0) at lib/rconn.c:960
#7  0x0807ffba in ofconn_get_protocol (ofconn=0x962f490) at
ofproto/connmgr.c:992
#8  0x08080018 in connmgr_wants_packet_in_on_miss (mgr=0x9600e88) at
ofproto/connmgr.c:1577
#9  0x0806753a in rule_dpif_lookup (ofproto=0x9601598, flow=0xb28f9ebc,
wc=0xb28e31dc, rule=0xb28e2eb4, take_ref=false) at
ofproto/ofproto-dpif.c:3238
---Type <return> to continue, or q <return> to quit---
#10 0x0807c568 in xlate_actions__ (xin=0xb28f9eb8, xout=0xb28e31dc) at
ofproto/ofproto-dpif-xlate.c:3278
#11 xlate_actions (xin=0xb28f9eb8, xout=0xb28e31dc) at
ofproto/ofproto-dpif-xlate.c:3182
#12 0x08076265 in handle_upcalls (arg=0x95f6460) at
ofproto/ofproto-dpif-upcall.c:931
#13 udpif_upcall_handler (arg=0x95f6460) at
ofproto/ofproto-dpif-upcall.c:531
#14 0x080e7058 in ovsthread_wrapper (aux_=0x95dc718) at lib/ovs-thread.c:322
#15 0xb73d5912 in start_thread () from /lib/libpthread.so.0
#16 0xb74bf4ae in clone () from /lib/libc.so.6

Thread 2 (Thread 0xb625cb90 (LWP 6925)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb74b56c3 in poll () from /lib/libc.so.6
#2  0x08102166 in time_poll (pollfds=0xb6998de0, n_pollfds=2, handles=0x0,
timeout_when=9223372036854775807, elapsed=0xb625c128) at lib/timeval.c:301
#3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
#4  0x080e6c79 in ovsrcu_postpone_thread (arg=0x0) at lib/ovs-rcu.c:267
#5  0x080e7058 in ovsthread_wrapper (aux_=0x95c2870) at lib/ovs-thread.c:322
#6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
#7  0xb74bf4ae in clone () from /lib/libc.so.6

Thread 1 (Thread 0xb725f8f0 (LWP 6615)):
#0  0xb7728424 in __kernel_vsyscall ()
#1  0xb7412b10 in raise () from /lib/libc.so.6
#2  0xb7414421 in abort () from /lib/libc.so.6
#3  0x081044c4 in ovs_abort_valist (err_no=0, format=0x815d864 "%s:
assertion %s failed in %s()", args=0xbfef7658
"\005\265\025\b\210\271\025\b\366\267\025\b\260\327b\txv\357\277JJ\017\b\b")
at lib/util.c:322
#4  0x08109858 in vlog_abort_valist (module_=0x81847e0, message=0x815d864
"%s: assertion %s failed in %s()", args=0xbfef7658
"\005\265\025\b\210\271\025\b\366\267\025\b\260\327b\txv\357\277JJ\017\b\b")
    at lib/vlog.c:992
#5  0x08109882 in vlog_abort (module=0x81847e0, message=0x815d864 "%s:
assertion %s failed in %s()") at lib/vlog.c:1006
#6  0x08104711 in ovs_assert_failure (where=0x815b505 "lib/rconn.c:568",
function=0x19d7 <Address 0x19d7 out of bounds>, condition=0x815b988
"version >= 0 && version <= 0xff") at lib/util.c:71
#7  0x080f6003 in run_ACTIVE (rc=0x962d7b0) at lib/rconn.c:568
#8  rconn_run (rc=0x962d7b0) at lib/rconn.c:659
#9  0x08081e45 in ofconn_run (mgr=0x9600e88, handle_openflow=0x80658a0
<handle_openflow>) at ofproto/connmgr.c:1390
#10 connmgr_run (mgr=0x9600e88, handle_openflow=0x80658a0
<handle_openflow>) at ofproto/connmgr.c:339
#11 0x08062597 in ofproto_run (p=0x96015a0) at ofproto/ofproto.c:1543
#12 0x0804bef3 in bridge_run__ () at vswitchd/bridge.c:2255
#13 0x080537ca in bridge_run () at vswitchd/bridge.c:2307
#14 0x08054e56 in main (argc=-1257216160, argv=0x0) at
vswitchd/ovs-vswitchd.c:116

Running OVS 1.9.3 and 2.3.0, both crashes at the same assertion.
XenServer 6.2

It seems that this only happens when ovs-vswitchd is on heavy load and I
run ovs-ofctl add-flow.

Anyone knows what could be triggering this ?

Regards,


-- 
[]'s
Luiz Henrique Ozaki
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/4d55d85c/attachment-0001.html>

From jesse at nicira.com  Thu Jan 22 08:01:01 2015
From: jesse at nicira.com (Jesse Gross)
Date: Thu, 22 Jan 2015 08:01:01 -0800
Subject: [ovs-discuss] query regarding outer ethernet header formation
 for gre encapsulated packet
In-Reply-To: <CAC-W8+pX8fjwYF3GR9SkU_m_802f+dhx4A7=5G974=5j8Zq6NQ@mail.gmail.com>
References: <CAC-W8+pX8fjwYF3GR9SkU_m_802f+dhx4A7=5G974=5j8Zq6NQ@mail.gmail.com>
Message-ID: <CAEP_g=-Qk=oJeD0BOs1rg+n1FV4diKyE4Y22xy_TYtnEQpZs9Q@mail.gmail.com>

On Thu, Jan 22, 2015 at 5:12 AM, Mohit Malik <hr.mohit.malik at gmail.com> wrote:
> Hi,
>
> I am trying to understand the GRE encapsulation functionality of OVS. I have
> seen the flow of the packet in case of gre encapsulation, the flow is like
> :-
>
> do_output -> ovs_vport_send -> gre_send -> __send -> __build_header(to build
> gre header) + iptunnel_xmit(to build and send ip packet)
>
> So, in this flow I am not able to see the place in code, where outer
> ethernet frame is getting attached and also the place where packet is
> actually sent out.

The packet is handed off to the Linux IP stack to be sent like any
other packet. Adding the Ethernet header is not part of OVS, it is
based on the routing table, ARP resolution, etc.

From shettyg at nicira.com  Thu Jan 22 08:24:30 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Thu, 22 Jan 2015 08:24:30 -0800
Subject: [ovs-discuss] OVS-Database Connection Refused while creating a
 bridge with databath_type="netdev"
In-Reply-To: <OF3F8C71F7.A9C055EE-ON65257DD5.0038A58E-65257DD5.0038A591@tcs.com>
References: <OF3F8C71F7.A9C055EE-ON65257DD5.0038A58E-65257DD5.0038A591@tcs.com>
Message-ID: <CAHbON5oUVpqjFu9TqhWDCP7BeBHvyKHzEkAhwJOc027+nWv+fA@mail.gmail.com>

On Thu, Jan 22, 2015 at 2:18 AM, Arkajit Ghosh <arkajit.ghosh at tcs.com> wrote:
>
> Hi,
>
>     I am trying to execute the ovs-vswitchd with DPDK (dpdk-1.7.1). But
> getting OVS-database connection refused while creating  a bridge with
> datapath_type="netdev" .
>
> OVS version:   Latest Clone from Git (2-3 days back)
>
> Here are the steps which I followed :
>
> ####################################################
>
> #  sysctl -w vm.nr_hugepages=2000
>
> #  mkdir -p /mnt/huge
>
> #  mount -t hugetlbfs hugetlbfs /mnt/huge
>
> #  modprobe uio
>
> #  insmod $DPDK_BUILD/kmod/igb_uio.ko
>
> #  $DPDK_DIR/tools/dpdk_nic_bind.py --force --bind=igb_uio eth0
>
> #  mkdir -p /usr/local/etc/openvswitch
>
> #  mkdir -p /usr/local/var/run/openvswitch
>
> #  rm /usr/local/etc/openvswitch/conf.db
>
> #   cd $OVS_DIR
>
> #   ./ovsdb/ovsdb-tool create /usr/local/etc/openvswitch/conf.db \
>              ./vswitchd/vswitch.ovsschema
>
> #   ./ovsdb/ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock \
>           --remote=db:Open_vSwitch,Open_vSwitch,manager_options \
>           --private-key=db:Open_vSwitch,SSL,private_key \
>           --certificate=Open_vSwitch,SSL,certificate \
>           --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --pidfile --detach
>         ```
>
> #   ./utilities/ovs-vsctl --no-wait init
>     ```
> #   export DB_SOCK=/usr/local/var/run/openvswitch/db.sock
>
> #   ./vswitchd/ovs-vswitchd --dpdk -c 0x1 -n 4 -- unix:$DB_SOCK --pidfile
> --detach
>
> #   `ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev`
>
>      ovs-vsctl: unix:/var/run/openvswitch/db.sock: database connection
> failed (connection refused)
You have started ovsdb-server with
/usr/local/var/run/openvswitch/db.sock. ovs-vsctl thinks that file is
present in /var/run/openvswitch/db.sock because that is how it has
been compiled with.
It looks to me that you are changing default directories at some
places and then letting default directories to be used at other
places.

From blp at nicira.com  Thu Jan 22 08:54:38 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 22 Jan 2015 08:54:38 -0800
Subject: [ovs-discuss] Flow Matching with port ranges..
In-Reply-To: <CAK6_9mOffNeBuQWnB4vRNrBhzA9nbDPzBSoeSpp7GSSTV_a0+A@mail.gmail.com>
References: <CAK6_9mOffNeBuQWnB4vRNrBhzA9nbDPzBSoeSpp7GSSTV_a0+A@mail.gmail.com>
Message-ID: <20150122165438.GB4070@nicira.com>

On Thu, Jan 22, 2015 at 05:34:15PM +0530, nitish nagesh wrote:
>    I am trying to add L4 port range matching capability to our switch
> (internally uses OVS code). I have used experimenter match fields in the
> Flow Mod to get these. Once i receive them, after parsing the experimenter
> OXM's, i store them in the "flow" structure. I have added new fields to
> store them, something like this:
> 
> struct flow {
> .
> .
> .
>  struct port_range pr;
> .
> .
> };
> 
> struct port_range
> {
>    ovs_be16 begin;
>    ovs_be16 end;
> };
> 
>   Note that when i receive a port range in the flow-mod, i would NOT
> populate the tp_src or tp_dst fields.
> 
>  However i am facing issues when it comes to matching packets to this rule.
> As my understanding goes, OVS creates a hash of all the field values in the
> "flow" structure as received in the flow-mod and stores them in the
> classifier. A network packet would never match this rule, as it doesnt have
> a port-range and hence the hash would always fail.
> 
>    I was thinking if there's an easy way to achieve this with minimal
> changes to the code. My knowledge about OVS code is limited, hence
> requesting for help. Please comment.

Implementing port ranges this way is kind of an uphill battle.  I'd
suggest using multiple flows that bitwise match on the tp_src or tp_dst
fields, as described in ovs-ofctl(8):

       tcp_src=port/mask
       tcp_dst=port/mask
       udp_src=port/mask
       udp_dst=port/mask
       sctp_src=port/mask
       sctp_dst=port/mask
              Bitwise  match  on  TCP  (or  UDP or SCTP) source or destination
              port.  The port and mask are 16-bit numbers written  in  decimal
              or  in  hexadecimal prefixed by 0x.  Each 1-bit in mask requires
              that the corresponding bit in port must match.   Each  0-bit  in
              mask causes the corresponding bit to be ignored.

              Bitwise  matches  on transport ports are rarely useful in isola‐
              tion, but a group of them can be used to reduce  the  number  of
              flows  required  to  match  on  a range of transport ports.  For
              example, suppose that the goal is to match TCP source ports 1000
              to  1999,  inclusive.   One way is to insert 1000 flows, each of
              which matches on a single source port.  Another way is  to  look
              at the binary representations of 1000 and 1999, as follows:
              01111101000
              11111001111
              and  then  to  transform  those into a series of bitwise matches
              that accomplish the same results:
              01111101xxx
              0111111xxxx
              10xxxxxxxxx
              110xxxxxxxx
              1110xxxxxxx
              11110xxxxxx
              1111100xxxx
              which become the following when written in the  syntax  required
              by ovs-ofctl:
              tcp,tcp_src=0x03e8/0xfff8
              tcp,tcp_src=0x03f0/0xfff0
              tcp,tcp_src=0x0400/0xfe00
              tcp,tcp_src=0x0600/0xff00
              tcp,tcp_src=0x0700/0xff80
              tcp,tcp_src=0x0780/0xffc0
              tcp,tcp_src=0x07c0/0xfff0

              Only  Open  vSwitch  1.6  and later supports bitwise matching on
              transport ports.

              Like the exact-match forms described above,  the  bitwise  match
              forms apply only when dl_type and nw_proto specify TCP or UDP or
              SCTP.

From blp at nicira.com  Thu Jan 22 09:01:57 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 22 Jan 2015 09:01:57 -0800
Subject: [ovs-discuss] Fwd: Is there any possible for program blocking
 here for long time ?
In-Reply-To: <CAOE=1Z28d4oiF=dzA7DJp0fUvy2UVy_6fmatPCM-tUxaC8OwQA@mail.gmail.com>
References: <CAOE=1Z1JiFFBhYLOAuJhWM3UdRXYLj0M+r27PvmsP9KNkDx5GA@mail.gmail.com>
 <20150119181943.GL983@nicira.com>
 <CAOE=1Z2hy8_P82mzvoATqzc33wn1rBvNU7_MY6553ti1g4XMdg@mail.gmail.com>
 <CAOE=1Z0FibZ1nK9Sp36c-f7uKdi+mV3r4o6xAqPerR9R76UD7A@mail.gmail.com>
 <20150122044946.GB6309@nicira.com>
 <CAOE=1Z0oEbzuKM-itY0CZVViZPnfTA89ymzeC7B5FrbXHO5J-g@mail.gmail.com>
 <20150122070122.GA3619@nicira.com>
 <CAOE=1Z28d4oiF=dzA7DJp0fUvy2UVy_6fmatPCM-tUxaC8OwQA@mail.gmail.com>
Message-ID: <20150122170157.GD4070@nicira.com>

On Thu, Jan 22, 2015 at 03:28:24PM +0800, yewgang wrote:
> Thank you for your answers very much.
> 
> #############
> Actually I have add events I care about between poll_timer_wait and
> poll_block.
> 
> What I want is:
> if the event I care about happens, then wake up immediately;
> if the event I care about does not happens, then wake up after 1000ms;

That's easy, just add a poll_timer_wait(1000) and another call that
causes the code to wake up if your event happens.

From blp at nicira.com  Thu Jan 22 09:05:57 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 22 Jan 2015 09:05:57 -0800
Subject: [ovs-discuss] Regarding permission for usage of OpenVSwitch
	reference.
In-Reply-To: <OF9D6D9DED.EE880B07-ON65257DD5.0026D961-65257DD5.00274821@tcs.com>
References: <OF9D6D9DED.EE880B07-ON65257DD5.0026D961-65257DD5.00274821@tcs.com>
Message-ID: <20150122170557.GE4070@nicira.com>

On Thu, Jan 22, 2015 at 12:39:05PM +0530, Shashwat Srivastava wrote:
> I am writing a whitepaper and wanted your permission to use the reference 
> of Open VSwitch in our whitepaper.

I have never heard of a right to avoid being cited.  I don't think such
a right exists.

From hr_malik at rediffmail.com  Thu Jan 22 02:40:36 2015
From: hr_malik at rediffmail.com (Mohit Malik)
Date: 22 Jan 2015 10:40:36 -0000
Subject: [ovs-discuss] =?utf-8?q?query_regarding_outer_ethernet_header_for?=
	=?utf-8?q?mation_for_gre_encapsulated_packet?=
Message-ID: <20150122104036.22114.qmail@f5mail-224-153.rediffmail.com>

Hi,

I am trying to understand the GRE encapsulation functionality of OVS. I have seen the flow of the packet in case of gre encapsulation, the flow is like :-

do_output -&gt; ovs_vport_send -&gt; gre_send -&gt; __send -&gt; __build_header(to build gre header) + iptunnel_xmit(to build and send ip packet)

So, in this flow I am not able to see the place in code, where outer ethernet frame is getting attached and also the place where packet is actually sent out.

Please help me finding the appropriate code part.


Thanks
Mohit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/bcad7900/attachment.html>

From noiala.nl at gmail.com  Thu Jan 22 04:22:54 2015
From: noiala.nl at gmail.com (Noiala l)
Date: Thu, 22 Jan 2015 13:22:54 +0100
Subject: [ovs-discuss] ovs installation - debian
Message-ID: <CACzbCbz4bew_L8pbUXxfnf-rJpCxF14go-_TFpmiFLSCzMza9Q@mail.gmail.com>

Hi,

I'm trying to install ovs in a fresh debian vm, but I keep getting a kernel
module error.
I've tried several tutorial and proposed patches without success.  Even the
from apt-get I'm getting module errors.
..
Setting up openvswitch-common (1.4.2+git20120612-9.1~deb7u1) ...
Setting up openvswitch-switch (1.4.2+git20120612-9.1~deb7u1) ...
[FAIL] Inserting openvswitch module ... failed!
Module has probably not been built for this kernel.
Install the openvswitch-datapath-source package, then read
/usr/share/doc/openvswitch-datapath-source/README.Debian


My kernel release: 3.2.0-4-686-pae

I did follow an installation attempt with the latest source:

Dependencies:
sudo apt-get install build-essential libssl-dev linux-headers-$(uname -r)

Installation:
wget http://openvswitch.org/releases/openvswitch-2.3.1.tar.gz
tar xvfvz openvswitch-2.3.1.tar.gz
cd openvswitch-2.3.1
./configure --with-linux=/lib/modules/`uname -r`/build
make
make install

No errors so far. But then I test it:
# insmod ./datapath/linux/openvswitch.ko
Error: could not insert module ./datapath/linux/openvswitch.ko: Unknown
symbol in module

I see a lot o people reporting this issue online, but none of the proposed
solutions were sufficient.

Any remark about this problem ?

Best,
N.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/b10aa4b2/attachment.html>

From padmajs80 at gmail.com  Thu Jan 22 08:17:58 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Thu, 22 Jan 2015 21:47:58 +0530
Subject: [ovs-discuss] Fast fail over group type entries
Message-ID: <CACveyyK1NnpJXj1md1WaVHLJNdmPFSSX+HEhx6mVyuyJ6t9pGg@mail.gmail.com>

Hi,
 I tried to install Fast fail over group entry from the controller. I am
able to see the following entry in the switch

sudo ovs-ofctl -O OpenFlow13 dump-flows s12
OFPST_FLOW reply (OF1.3) (xid=0x2):
 cookie=0x0, duration=16.213s, table=0, n_packets=3856, n_bytes=161952,
priority=65535,in_port=3,dl_dst=12:70:1d:ab:fe:4c actions=goto_table:1

sudo ovs-ofctl -O OpenFlow13 dump-groups s12
OFPST_GROUP_DESC reply (OF1.3) (xid=0x2):
 group_id=4,type=ff,bucket=weight:0,watch_port:1,watch_group:1,actions=output:1,bucket=weight:0,watch_port:2,watch_group:2,actions=output:2

But the packets are not flowing. Is there anything wrong in this. Do we
have to set anything else in openvswitch to enable liveness check. Please
clarify.

Thanks and Regards,
Padma V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150122/c228c68f/attachment.html>

From andrey at xdel.ru  Thu Jan 22 09:11:56 2015
From: andrey at xdel.ru (Andrey Korolyov)
Date: Thu, 22 Jan 2015 21:11:56 +0400
Subject: [ovs-discuss] Packet drops during non-exhaustive flood with OVS
	and 1.8.0
In-Reply-To: <CABYiri-qn_HGYeRSxH+z0+LGi0se9NEOk0q9hzFg4R+wg05ABw@mail.gmail.com>
References: <CABYiri-qn_HGYeRSxH+z0+LGi0se9NEOk0q9hzFg4R+wg05ABw@mail.gmail.com>
Message-ID: <CABYiri9WwQMn1u7TbJNEGCs804f_hvP2cKxet2sGMbrx1rJUyw@mail.gmail.com>

On Wed, Jan 21, 2015 at 8:02 PM, Andrey Korolyov <andrey at xdel.ru> wrote:
> Hello,
>
> I observed that the latest OVS with dpdk-1.8.0 and igb_uio starts to
> drop packets earlier than a regular Linux ixgbe 10G interface, setup
> follows:
>
> receiver/forwarder:
> - 8 core/2 head system with E5-2603v2, cores 1-3 are given to OVS exclusively
> - n-dpdk-rxqs=6, rx scattering is not enabled
> - x520 da
> - 3.10/3.18 host kernel
> - during 'legacy mode' testing, queue interrupts are scattered through all cores
>
> sender:
> - 16-core E52630, netmap framework for packet generation
> - pkt-gen -f tx -i eth2 -s 10.6.9.0-10.6.9.255 -d
> 10.6.10.0-10.6.10.255 -S 90:e2:ba:84:19:a0 -D 90:e2:ba:85:06:07 -R
> 11000000, results in 11Mpps 60-byte packet flood, there are constant
> values during test.
>
> OVS contains only single drop rule at the moment:
> ovs-ofctl add-flow br0 in_port=1,actions=DROP
>
> Packet generator was launched for tens of seconds for both Linux stack
> and OVS+DPDK cases, resulting in zero drop/error count on the
> interface in first, along with same counter values on pktgen and host
> interface stat (means that the none of generated packets are
> unaccounted).
>
> I selected rate for about 11M because OVS starts to do packet drop
> around this value, after same short test interface stat shows
> following:
>
> statistics          : {collisions=0, rx_bytes=22003928768,
> rx_crc_err=0, rx_dropped=0, rx_errors=10694693, rx_frame_err=0,
> rx_over_err=0, rx_packets=343811387, tx_bytes=0, tx_dropped=0,
> tx_errors=0, tx_packets=0}
>
> pktgen side:
> Sent 354506080 packets, 60 bytes each, in 32.23 seconds.
> Speed: 11.00 Mpps Bandwidth: 5.28 Gbps (raw 7.39 Gbps)
>
> If rate will be increased up to 13-14Mpps, the relative error/overall
> ratio will rise up to a one third. So far OVS on dpdk shows perfect
> results and I do not want to reject this solution due to exhaustive
> behavior like described one, so I`m open for any suggestions to
> improve the situation (except using 1.7 branch :) ).

At a glance it looks like there is a problem with pmd threads, as they
starting to consume about five thousandth of sys% on a dedicated cores
during flood but in theory they should not. Any ideas for
debugging/improving this situation are very welcomed!

From blp at nicira.com  Thu Jan 22 09:12:27 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 22 Jan 2015 09:12:27 -0800
Subject: [ovs-discuss] Fast fail over group type entries
In-Reply-To: <CACveyyK1NnpJXj1md1WaVHLJNdmPFSSX+HEhx6mVyuyJ6t9pGg@mail.gmail.com>
References: <CACveyyK1NnpJXj1md1WaVHLJNdmPFSSX+HEhx6mVyuyJ6t9pGg@mail.gmail.com>
Message-ID: <20150122171227.GG4070@nicira.com>

On Thu, Jan 22, 2015 at 09:47:58PM +0530, Padma Jayasankar wrote:
>  I tried to install Fast fail over group entry from the controller. I am
> able to see the following entry in the switch
> 
> sudo ovs-ofctl -O OpenFlow13 dump-flows s12
> OFPST_FLOW reply (OF1.3) (xid=0x2):
>  cookie=0x0, duration=16.213s, table=0, n_packets=3856, n_bytes=161952,
> priority=65535,in_port=3,dl_dst=12:70:1d:ab:fe:4c actions=goto_table:1
> 
> sudo ovs-ofctl -O OpenFlow13 dump-groups s12
> OFPST_GROUP_DESC reply (OF1.3) (xid=0x2):
>  group_id=4,type=ff,bucket=weight:0,watch_port:1,watch_group:1,actions=output:1,bucket=weight:0,watch_port:2,watch_group:2,actions=output:2
> 
> But the packets are not flowing. Is there anything wrong in this. Do we
> have to set anything else in openvswitch to enable liveness check. Please
> clarify.

You need a "group" action somewhere.

From blp at nicira.com  Thu Jan 22 09:14:49 2015
From: blp at nicira.com (Ben Pfaff)
Date: Thu, 22 Jan 2015 09:14:49 -0800
Subject: [ovs-discuss] ovs installation - debian
In-Reply-To: <CACzbCbz4bew_L8pbUXxfnf-rJpCxF14go-_TFpmiFLSCzMza9Q@mail.gmail.com>
References: <CACzbCbz4bew_L8pbUXxfnf-rJpCxF14go-_TFpmiFLSCzMza9Q@mail.gmail.com>
Message-ID: <20150122171449.GH4070@nicira.com>

On Thu, Jan 22, 2015 at 01:22:54PM +0100, Noiala l wrote:
> I'm trying to install ovs in a fresh debian vm, but I keep getting a kernel
> module error.
> I've tried several tutorial and proposed patches without success.  Even the
> from apt-get I'm getting module errors.
> ..
> Setting up openvswitch-common (1.4.2+git20120612-9.1~deb7u1) ...
> Setting up openvswitch-switch (1.4.2+git20120612-9.1~deb7u1) ...
> [FAIL] Inserting openvswitch module ... failed!
> Module has probably not been built for this kernel.
> Install the openvswitch-datapath-source package, then read
> /usr/share/doc/openvswitch-datapath-source/README.Debian

There's an updated OVS in Debian proposed-updates, see the end of
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=768095

From aatteka at nicira.com  Thu Jan 22 10:24:40 2015
From: aatteka at nicira.com (Ansis Atteka)
Date: Thu, 22 Jan 2015 10:24:40 -0800
Subject: [ovs-discuss] libvirt and openvswitch
In-Reply-To: <1A791056FCD70F458405B58B79F5C2F706BBF12E@rad-w2ksrv11>
References: <1A791056FCD70F458405B58B79F5C2F706BBF12E@rad-w2ksrv11>
Message-ID: <CAA=3OqmTZBjFRAwd8ZHvwoyQiGUFnY=QezQ3b9ynDMQ-xCjSHA@mail.gmail.com>

On Thu, Jan 22, 2015 at 2:41 AM, Yaron Illouz <yaroni at radcom.com> wrote:
> Hi
>
>
>
> I am trying to create an openvswitch using libvirt and to use a virtual
> network – I mean not the physical one my computer is connected to.
>
> I want the vm to receive  an ip in the range .168.100.2,192.168.100.220
>
> Is it possible to do that?
Yes, you just need a DHCP server running on Hypervisor. I would
suggest to use libvirt DHCP feature so that you don't have to manually
start dnsmasq daemon - https://libvirt.org/formatnetwork.html. Anyway
if you still want to manually run DHCP server then keep reading my
answers below.

>
>
>
> I think it doesn't work because of the dhcp not working
Since DHCP server introduces extra layer of complexity, then have you
tried to statically assign IP address to the VM and see if regular
ping goes through? This would rule out any OVS related issues.

>
>
>
> I defined a network
>
>
>
>     <network>
>
>       <name>private</name>
>
>       <bridge name='virbr0'/>
>
>               <forward mode='bridge'/>
>
>       <virtualport type='openvswitch'/>
>
>     </network>
>
>
>
> I defined an ip address to virbr0
>
> ip addr add 192.168.100.2 dev virbr0
What subnet mask you want to assign to the virbr0? If you don't
specify one, then ip-addr uses /32. That is not what you want. See
"man ip-addr" for more details.


>
> ip link set virbr0 up
>
>
>
> I tried to launch a process to enable a dhcp
>
> /usr/sbin/dnsmasq --strict-order --bind-interfaces --interface=eth2
> --listen-address 192.168.100.1 --dhcp-range 192.168.100.2,192.168.100.220
> --dhcp-lease-max=101 --dhcp-no-override

You assigned 192.168.100.2 to virbr0, but here you are telling dnsmasq
to listen on 192.168.100.1 and eth2. Which one of those two IP
addresses you want your DHCP server to use then? Did you intend to
assign 192.168.100.1/24 to virbr0 instead?

Also, "--interface eth2' would make you to run DHCP server on physical
network. This most likely is not what you want.

See "man dsnamsq" for more details on how to configure dnsmasq.


>
> But it didn't help
>
>
>
> But get no ip for the ovs port when I launch the instance.
Assuming that below you ran tcpdump on Hypervisor it seems that
Virtual machine sent DHCP request, but DHCP server did not respond
because most likely your DHCP server is not configured properly.

>
>
>
>     ci-info: +++++++++++++++++++++++++Net device
> info++++++++++++++++++++++++++
>
>     ci-info:
> +--------+------+--------------+-------------+-------------------+
>
>     ci-info: | Device |  Up  |   Address    |     Mask    |     Hw-Address
> |
>
>     ci-info:
> +--------+------+--------------+-------------+-------------------+
>
>     ci-info: |   lo   | True |  127.0.0.1   |  255.0.0.0  |         .
> |
>
>     ci-info: |  eth1  | True |      .       |      .      |
> 52:54:00:24:16:29 |
>
>     ci-info: |  eth0  | True | 172.16.5.136 | 255.255.0.0 |
> 52:54:00:44:01:28 |
>
>
>
>
>
> In the bridge port vnet1 get assigned to virbr0
>
>
>
>     Bridge "virbr0"
>
>         Port "virbr0"
>
>             Interface "virbr0"
>
>                 type: internal
>
>         Port "vnet1"
>
>             Interface "vnet1"
>
>
>
> I also tried to add-port a real interface to virbr0, but it made no change.
> No cable is connected to this  interface.
>
>
>
> And i launch the instance the following way
>
>
>
>      virt-install --name probe9 --ram 4096 --vcpus=4 --check-cpu
> --os-type=linux --import --disk /data/KVM/Probe2-cloud3.qcow2,format=qcow2
> --network network=ext  --network network=private --graphics
> vnc,listen=0.0.0.0 --noautoconsole --disk
> vol=default/configuration2.iso,bus=virtio
>
>
>
>
>
> I did a tcpdump of vnet1 and it look like
>
>
>
> 05:14:27.843753 IP (tos 0x10, ttl 128, id 0, offset 0, flags [none], proto
> UDP (17), length 332)
>
>     0.0.0.0.bootpc > 255.255.255.255.bootps: [udp sum ok] BOOTP/DHCP,
> Request from 52:54:00:3f:08:13 (oui Unknown), length 304, xid 0x4726ff0c,
> secs 7, Flags [none] (0x0000)
>
>           Client-Ethernet-Address 52:54:00:3f:08:13 (oui Unknown)
>
>           Vendor-rfc1048 Extensions
>
>             Magic Cookie 0x63825363
>
>             DHCP-Message Option 53, length 1: Discover
>
>             Parameter-Request Option 55, length 13:
>
>               Subnet-Mask, BR, Time-Zone, Classless-Static-Route
>
>               Domain-Name, Domain-Name-Server, Hostname, YD
>
>               YS, NTP, MTU, Option 119
>
>               Default-Gateway
>
>             Vendor-Class Option 60, length 43: "anaconda-Linux
> 2.6.32-431.el6.x86_64 x86_64"
>
> 05:14:27.931015 IP6 (hlim 1, next-header Options (0) payload length: 36)
> fe80::5054:ff:fe3f:813 > ff02::16: HBH (rtalert: 0x0000) (padn)[icmp6 sum
> ok] ICMP6, multicast listener report v2, length 28, 1 group record(s) [gaddr
> ff02::1:ff3f:813 to_ex { }]
>
> 05:14:30.963975 IP6 (hlim 255, next-header ICMPv6 (58) payload length: 16)
> fe80::5054:ff:fe3f:813 > ff02::2: [icmp6 sum ok] ICMP6, router solicitation,
> length 16
>
>           source link-address option (1), length 8 (1): 52:54:00:3f:08:13
>
>             0x0000:  5254 003f 0813
>
> 05:14:40.850652 IP (tos 0x10, ttl 128, id 0, offset 0, flags [none], proto
> UDP (17), length 332)
>
>     0.0.0.0.bootpc > 255.255.255.255.bootps: [udp sum ok] BOOTP/DHCP,
> Request from 52:54:00:3f:08:13 (oui Unknown), length 304, xid 0x4726ff0c,
> secs 20, Flags [none] (0x0000)
>
>           Client-Ethernet-Address 52:54:00:3f:08:13 (oui Unknown)
>
>           Vendor-rfc1048 Extensions
>
>             Magic Cookie 0x63825363
>
>             DHCP-Message Option 53, length 1: Discover
>
>             Parameter-Request Option 55, length 13:
>
>               Subnet-Mask, BR, Time-Zone, Classless-Static-Route
>
>               Domain-Name, Domain-Name-Server, Hostname, YD
>
>               YS, NTP, MTU, Option 119
>
>               Default-Gateway
>
>             Vendor-Class Option 60, length 43: "anaconda-Linux
> 2.6.32-431.el6.x86_64 x86_64"
>
> 05:14:54.851632 IP (tos 0x10, ttl 128, id 0, offset 0, flags [none], proto
> UDP (17), length 332)
>
>     0.0.0.0.bootpc > 255.255.255.255.bootps: [udp sum ok] BOOTP/DHCP,
> Request from 52:54:00:3f:08:13 (oui Unknown), length 304, xid 0x4726ff0c,
> secs 34, Flags [none] (0x0000)
>
>           Client-Ethernet-Address 52:54:00:3f:08:13 (oui Unknown)
>
>           Vendor-rfc1048 Extensions
>
>             Magic Cookie 0x63825363
>
>             DHCP-Message Option 53, length 1: Discover
>
>             Parameter-Request Option 55, length 13:
>
>               Subnet-Mask, BR, Time-Zone, Classless-Static-Route
>
>               Domain-Name, Domain-Name-Server, Hostname, YD
>
>               YS, NTP, MTU, Option 119
>
>               Default-Gateway
>
>             Vendor-Class Option 60
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From ian.stokes at intel.com  Thu Jan 22 13:03:40 2015
From: ian.stokes at intel.com (Stokes, Ian)
Date: Thu, 22 Jan 2015 21:03:40 +0000
Subject: [ovs-discuss] what is multiq - and why is it required by ovs
 for dpdk vmnet3 interfaces?
In-Reply-To: <D0D93DE6.221AB%davidjoshuaevans@gmail.com>
References: <D0D93DE6.221AB%davidjoshuaevans@gmail.com>
Message-ID: <CD7C01071941AC429549C17338DB8A526981C618@IRSMSX101.ger.corp.intel.com>

> -----Original Message-----
> From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of David
> Evans
> Sent: Monday, January 12, 2015 3:01 PM
> To: discuss at openvswitch.org
> Subject: [ovs-discuss] what is multiq - and why is it required by ovs for dpdk
> vmnet3 interfaces?
> 
> Hi,
> 
> If I add vmnet3 dpdk compatible driver to ovs, I cannot use it in ovs because
> it requires multiq?
OVS has not been tested with with the vmnet3 driver (I assume you are using the vmxnet3-usermap.ko driver) so there is no guarantee that it will work without further modification to netdev-dpdk. 
> What does this mean?
Multiq is used to set the number of tx_queues and rx_queues for the dpdk interface in OVS. Usually these correspond to the number of cores the DPDK application has been launched with. netdev_set_multiq is called as standard as part of 'do_add_port' and ' dpif_netdev_pmd_set' in dpif-netdev.c. 

>From reading the documentation regarding  vmxnet3-usermap.ko you will have to make sure that the parameters used when loading the vmxnet3 driver will have to match those parameters used to launch the DPDK application (in this case ovs-vswitchd).
> Could I change it?
As pointed out above, it may be an issue relating to how the driver and application is setup but could also require a change to the netdev-dpdk code, as multiq is part and parcel of the DPDK application this may be difficult.
> Regards,
> 
> Dave.

From arkajit.ghosh at tcs.com  Thu Jan 22 22:15:56 2015
From: arkajit.ghosh at tcs.com (Arkajit Ghosh)
Date: Fri, 23 Jan 2015 11:45:56 +0530
Subject: [ovs-discuss] OVS-Database Connection Refused while creating a
 bridge with databath_type="netdev"
In-Reply-To: <CAHbON5oUVpqjFu9TqhWDCP7BeBHvyKHzEkAhwJOc027+nWv+fA@mail.gmail.com>
References: <CAHbON5oUVpqjFu9TqhWDCP7BeBHvyKHzEkAhwJOc027+nWv+fA@mail.gmail.com>, 
 <OF3F8C71F7.A9C055EE-ON65257DD5.0038A58E-65257DD5.0038A591@tcs.com>
Message-ID: <OF1FCB7E9F.20DFABA4-ON65257DD6.00226B12-65257DD6.00226B13@tcs.com>

Hi Gurucharan,

Now it's working fine. I need to just change the below ovs-vsctl path only. 

>>`ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev`  

to

`./utilities/ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev`

I think INSTALL.DPDK.md should be update accordingly.

Thanks for your suggestion.

Thanks & Regards
Arkajit Ghosh
Tata Consultancy Services
Mailto: arkajit.ghosh at tcs.com
Website: http://www.tcs.com
____________________________________________
Experience certainty.	IT Services
Business Solutions
Consulting
____________________________________________


-----Gurucharan Shetty <shettyg at nicira.com> wrote: -----
To: Arkajit Ghosh <arkajit.ghosh at tcs.com>
From: Gurucharan Shetty <shettyg at nicira.com>
Date: 01/22/2015 09:54PM
Cc: discuss <discuss at openvswitch.org>
Subject: Re: [ovs-discuss] OVS-Database Connection Refused while creating a bridge with databath_type="netdev"

On Thu, Jan 22, 2015 at 2:18 AM, Arkajit Ghosh <arkajit.ghosh at tcs.com> wrote:
>
> Hi,
>
>     I am trying to execute the ovs-vswitchd with DPDK (dpdk-1.7.1). But
> getting OVS-database connection refused while creating  a bridge with
> datapath_type="netdev" .
>
> OVS version:   Latest Clone from Git (2-3 days back)
>
> Here are the steps which I followed :
>
> ####################################################
>
> #  sysctl -w vm.nr_hugepages=2000
>
> #  mkdir -p /mnt/huge
>
> #  mount -t hugetlbfs hugetlbfs /mnt/huge
>
> #  modprobe uio
>
> #  insmod $DPDK_BUILD/kmod/igb_uio.ko
>
> #  $DPDK_DIR/tools/dpdk_nic_bind.py --force --bind=igb_uio eth0
>
> #  mkdir -p /usr/local/etc/openvswitch
>
> #  mkdir -p /usr/local/var/run/openvswitch
>
> #  rm /usr/local/etc/openvswitch/conf.db
>
> #   cd $OVS_DIR
>
> #   ./ovsdb/ovsdb-tool create /usr/local/etc/openvswitch/conf.db \
>              ./vswitchd/vswitch.ovsschema
>
> #   ./ovsdb/ovsdb-server
> --remote=punix:/usr/local/var/run/openvswitch/db.sock \
>           --remote=db:Open_vSwitch,Open_vSwitch,manager_options \
>           --private-key=db:Open_vSwitch,SSL,private_key \
>           --certificate=Open_vSwitch,SSL,certificate \
>           --bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --pidfile --detach
>         ```
>
> #   ./utilities/ovs-vsctl --no-wait init
>     ```
> #   export DB_SOCK=/usr/local/var/run/openvswitch/db.sock
>
> #   ./vswitchd/ovs-vswitchd --dpdk -c 0x1 -n 4 -- unix:$DB_SOCK --pidfile
> --detach
>
> #   `ovs-vsctl add-br br0 -- set bridge br0 datapath_type=netdev`
>
>      ovs-vsctl: unix:/var/run/openvswitch/db.sock: database connection
> failed (connection refused)
You have started ovsdb-server with
/usr/local/var/run/openvswitch/db.sock. ovs-vsctl thinks that file is
present in /var/run/openvswitch/db.sock because that is how it has
been compiled with.
It looks to me that you are changing default directories at some
places and then letting default directories to be used at other
places.
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150123/148a98d2/attachment.html>

From gautier.p-ssii at mipih.fr  Fri Jan 23 05:20:08 2015
From: gautier.p-ssii at mipih.fr (GAUTIER Philippe)
Date: Fri, 23 Jan 2015 13:20:08 +0000
Subject: [ovs-discuss] looking for a tip to recalculate TCP checksum with
 openvswitch
Message-ID: <491056227D08804AB0BBEF45575E388E1D8064B1@SV-T-VNW-EX10.mipih.net>

Hello,

Is it possible to recalculate tcp checksum with openvswitch (Maybe via tcp field modification with OpenFlow rules ?).

We want to use Openvswitch to de-enapsulate VMWARE Vspan mirroring flows (GRE) and send it back to a Network probe. We are facing the following issue "TCP checksum from outbound VM traffic are incorrect".
Of course this problem is due to TCP offloading on VMware hypervisor. But at the moment it is impossible to deactivate this parameter globally on the hypervisor.
That is why why are looking for a temporary workaround.

Use case:

VMWARE                                                                          ---->        Openvswitch switch                                    ----->    Network probe
VSPAN mirroring session using GRE tunnels                        Desencapsulation
                                                                                                                And filtering on a dedicated host

Openvswitch configuration:

ovs-vsctl add-br br-outTrafic -- set Bridge br-outTrafic fail-mode=secure

ovs-vsctl add-port br-outTrafic eth4 \
                -- set Interface eth4 ofport_request=1
ovs-ofctl mod-port br-outTrafic eth4 up


ovs-vsctl add-port br-outTrafic gre0 \
-- set interface gre0 type=gre options:remote_ip=flow options:in_key=flow options:local_ip=<ip> \
-- set Interface gre0 ofport_request=2
ovs-ofctl mod-port br-outTrafic gre0 up


# send trafic to network probe
ovs-ofctl add-flow br-outTrafic \
                "cookie=4, table=0, priority=0,in_port=2, actions=output:1"


Regards,

Philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150123/5afdb81b/attachment-0001.html>

From jesse at nicira.com  Fri Jan 23 08:13:17 2015
From: jesse at nicira.com (Jesse Gross)
Date: Fri, 23 Jan 2015 08:13:17 -0800
Subject: [ovs-discuss] query regarding outer ethernet header formation
 for gre encapsulated packet
In-Reply-To: <CAC-W8+pUo9i3E-VZiYQcLOD37nByA3ampbsW5dHU62yQis0i0Q@mail.gmail.com>
References: <CAC-W8+pX8fjwYF3GR9SkU_m_802f+dhx4A7=5G974=5j8Zq6NQ@mail.gmail.com>
 <CAEP_g=-Qk=oJeD0BOs1rg+n1FV4diKyE4Y22xy_TYtnEQpZs9Q@mail.gmail.com>
 <CAC-W8+pUo9i3E-VZiYQcLOD37nByA3ampbsW5dHU62yQis0i0Q@mail.gmail.com>
Message-ID: <CAEP_g=_pnK0yv78qWmPj1YsnZZcvF=jueBfq4LMkea7APC18VQ@mail.gmail.com>

It's configured by the user in port options using ovs-vsctl.

On Fri, Jan 23, 2015 at 3:45 AM, Mohit Malik <hr.mohit.malik at gmail.com> wrote:
> Thanks a lot, I really appreciate your response.
> Just 1 more query if you may help me with, how does OVS get the Dest-IP for
> tunneling endpoint in the tun_key attributes.
>
> Thnx
> Mohit
>
> On Thu, Jan 22, 2015 at 9:31 PM, Jesse Gross <jesse at nicira.com> wrote:
>>
>> On Thu, Jan 22, 2015 at 5:12 AM, Mohit Malik <hr.mohit.malik at gmail.com>
>> wrote:
>> > Hi,
>> >
>> > I am trying to understand the GRE encapsulation functionality of OVS. I
>> > have
>> > seen the flow of the packet in case of gre encapsulation, the flow is
>> > like
>> > :-
>> >
>> > do_output -> ovs_vport_send -> gre_send -> __send -> __build_header(to
>> > build
>> > gre header) + iptunnel_xmit(to build and send ip packet)
>> >
>> > So, in this flow I am not able to see the place in code, where outer
>> > ethernet frame is getting attached and also the place where packet is
>> > actually sent out.
>>
>> The packet is handed off to the Linux IP stack to be sent like any
>> other packet. Adding the Ethernet header is not part of OVS, it is
>> based on the routing table, ARP resolution, etc.
>
>

From jesse at nicira.com  Fri Jan 23 08:39:20 2015
From: jesse at nicira.com (Jesse Gross)
Date: Fri, 23 Jan 2015 08:39:20 -0800
Subject: [ovs-discuss] looking for a tip to recalculate TCP checksum
	with openvswitch
In-Reply-To: <491056227D08804AB0BBEF45575E388E1D8064B1@SV-T-VNW-EX10.mipih.net>
References: <491056227D08804AB0BBEF45575E388E1D8064B1@SV-T-VNW-EX10.mipih.net>
Message-ID: <CAEP_g=-a8i+L8i2iWX9=85dd9+J_+MqBWge+XSu4pJeHznDjmQ@mail.gmail.com>

On Fri, Jan 23, 2015 at 5:20 AM, GAUTIER Philippe
<gautier.p-ssii at mipih.fr> wrote:
> Hello,
>
>
>
> Is it possible to recalculate tcp checksum with openvswitch (Maybe via tcp
> field modification with OpenFlow rules ?).

No, it isn't possible to force the checksum to be corrected. Modifying
TCP fields will do a checksum update but only an incremental one -
this is intentional so that incoming packets that have been corrupted
won't be marked as good.

From zhangchen9211 at 126.com  Thu Jan 22 23:48:23 2015
From: zhangchen9211 at 126.com (=?GBK?B?1cWzvw==?=)
Date: Fri, 23 Jan 2015 15:48:23 +0800 (CST)
Subject: [ovs-discuss] port features in ovs
Message-ID: <4553a50.e0cd.14b15c36b97.Coremail.zhangchen9211@126.com>

i wanna to set different ofpport with different speed, try several ovs commands but fail. my controller tells me all the ports are featured with 'curr=2112', which means 10G copper, could anyone help me with the problem?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150123/f45f299a/attachment-0001.html>

From ruverma at gmail.com  Fri Jan 23 00:13:39 2015
From: ruverma at gmail.com (Ruchika Verma)
Date: Fri, 23 Jan 2015 13:43:39 +0530
Subject: [ovs-discuss] SSL connection between OVS and OVS-controller not
	possible
Message-ID: <CACHK9BGmEg4yroyEhu=x7WhL3MG+wpE7Tj+oQcnd+z4xapUquA@mail.gmail.com>

hi,

I am trying to establish SSL connection between OVS and OVS-Controller(
which as per the information on web, is possible). I am using *mininet* for
this.

I am able to generate keys and certificate for both controller and switch.

I am also able to do - ovs-vsctl set-ssl...command..

After this I started the OVS-controller using

       sudo ovs-controller -v pssl:6633 -p /etc/openvswitch/ctl-privkey.pem -c
/etc/openvswitch/ctl-cert.pem -C
/var/lib/openvswitch/pki/switchca/cacert.pem

After the controller was started successfully, i tried to create a linear
topology in a python file -

def emptyNet():
    net = Mininet( controller=OVSController )
    net.addController( 'c0' )
    h1 = net.addHost( 'h1' )
    h2 = net.addHost( 'h2' )
    s1 = net.addSwitch( 's1' )
    net.addLink( h1, s1 )
    net.addLink( h2, s1 )

    net.start()
    s1.cmd('ovs-vsctl set-controller s1 ssl:127.0.0.1:6633')

    CLI( net )
    net.stop()

if __name__ == '__main__':
setLogLevel( 'info' )
emptyNet()

But i get error while creating this.

*It prompts : close the controller already running on port 6633.*

I even tried changing port but no success. Also i tried changing the
controller=remoteController, but this also has not helped.

*I checked in openflow/config.h, and enabled HAVE_SSL flag. But no change
in o/p.*

Can you please help.

Thanks
Ruchika
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150123/324d90b1/attachment-0001.html>

From dsingh at merunetworks.com  Fri Jan 23 05:56:21 2015
From: dsingh at merunetworks.com (Deepak Singh)
Date: Fri, 23 Jan 2015 13:56:21 +0000
Subject: [ovs-discuss] Setting the cookie value in packet-in from CLI
References: <D68445AEE938844D8378F38C93C02D170F166B99@STAR.merunetworks.com>
 <20150113211819.GC14864@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EA9@STAR.merunetworks.com>
 <20150114045249.GC17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166EFE@STAR.merunetworks.com>
 <20150114051638.GE17092@nicira.com>
 <D68445AEE938844D8378F38C93C02D170F166F23@STAR.merunetworks.com>
 <20150114054656.GF17092@nicira.com> 
Message-ID: <D68445AEE938844D8378F38C93C02D170F169386@STAR.merunetworks.com>

Hi,
I am trying to configure the cookie value(0x0 - 0xffffffffffffffff) for packet-in msg .
If the value isn't given explicitly, 0xffffffffffffffff needs to be set.
Controller add flowing category flows as table-miss, send to controller, mirror to controller .
As default behaviour of OVS also OF1.3 spec, when packet-hit flows above, packet-in will be send 
to controller with cookie value is copied from cookie of the flow that packet hit. 
OVS already support cookie value in packet-in. 
But i want "Cookie value for each case has to be configurable" 
For example following cookie value for each kind of flow is configured as below via CLI(will read the data which are set by user and save in ovsdb(may be other place)), then
Table-miss: 0x3, mirror to controller 0x4, send to controller 0x5 like this .


I have some question . In function 

Struct ofbuf *
ofputil_encode_packet_in()
{

.
.
.
.
if (protocol == OFPUTIL_P_OF13_OXM) {
    opi->cookie = pin->cokkie;
}
.
.
.
.
}

I was thinking to change the cookie value from here if reason hits. Two of the reason table miss and send to controller are coming here and setting the cookie .
But for third case it is still reason comes send to controller .As i saw the Reason enum data structure, in there, no mirror(output action : controller + outport)reason.

Could you please suggest about whole test case, how can i implement this feature ? How can i locate the packet-in as mirror to controller ?

Thanks 




From liyi.huang at ryerson.ca  Fri Jan 23 10:27:02 2015
From: liyi.huang at ryerson.ca (Liyi Huang)
Date: Fri, 23 Jan 2015 13:27:02 -0500
Subject: [ovs-discuss] port features in ovs
In-Reply-To: <4553a50.e0cd.14b15c36b97.Coremail.zhangchen9211@126.com>
References: <4553a50.e0cd.14b15c36b97.Coremail.zhangchen9211@126.com>
Message-ID: <-2374806573599464264@unknownmsgid>

The speed is from Linux. The OVS only get information from the system. You
can try Ethtool to change the speed.  However, whether you can change it,
it depends on the nic's driver.

Sent from my iPhone

On Jan 23, 2015, at 1:24 PM, 张晨 <zhangchen9211 at 126.com> wrote:

i wanna to set different ofpport with different speed, try several ovs
commands but fail. my controller tells me all the ports are featured
with 'curr=2112', which means 10G copper, could anyone help me with
the problem?



_______________________________________________
discuss mailing list
discuss at openvswitch.org
http://openvswitch.org/mailman/listinfo/discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150123/7250091c/attachment.html>

From blp at nicira.com  Fri Jan 23 14:02:06 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 23 Jan 2015 14:02:06 -0800
Subject: [ovs-discuss] SSL connection between OVS and OVS-controller not
 possible
In-Reply-To: <CACHK9BGmEg4yroyEhu=x7WhL3MG+wpE7Tj+oQcnd+z4xapUquA@mail.gmail.com>
References: <CACHK9BGmEg4yroyEhu=x7WhL3MG+wpE7Tj+oQcnd+z4xapUquA@mail.gmail.com>
Message-ID: <20150123220206.GB4766@nicira.com>

On Fri, Jan 23, 2015 at 01:43:39PM +0530, Ruchika Verma wrote:
> hi,
> 
> I am trying to establish SSL connection between OVS and OVS-Controller(
> which as per the information on web, is possible). I am using *mininet* for
> this.
> 
> I am able to generate keys and certificate for both controller and switch.
> 
> I am also able to do - ovs-vsctl set-ssl...command..
> 
> After this I started the OVS-controller using
> 
>        sudo ovs-controller -v pssl:6633 -p /etc/openvswitch/ctl-privkey.pem -c
> /etc/openvswitch/ctl-cert.pem -C
> /var/lib/openvswitch/pki/switchca/cacert.pem
> 
> After the controller was started successfully, i tried to create a linear
> topology in a python file -
> 
> def emptyNet():
>     net = Mininet( controller=OVSController )
>     net.addController( 'c0' )
>     h1 = net.addHost( 'h1' )
>     h2 = net.addHost( 'h2' )
>     s1 = net.addSwitch( 's1' )
>     net.addLink( h1, s1 )
>     net.addLink( h2, s1 )
> 
>     net.start()
>     s1.cmd('ovs-vsctl set-controller s1 ssl:127.0.0.1:6633')
> 
>     CLI( net )
>     net.stop()
> 
> if __name__ == '__main__':
> setLogLevel( 'info' )
> emptyNet()
> 
> But i get error while creating this.
> 
> *It prompts : close the controller already running on port 6633.*

OVS doesn't print any message like that.  I think you should probably
ask about this on a mininet list.

From rlantz at cs.stanford.edu  Fri Jan 23 19:34:13 2015
From: rlantz at cs.stanford.edu (Bob Lantz)
Date: Fri, 23 Jan 2015 19:34:13 -0800
Subject: [ovs-discuss] Enable OpenFlow 1.3 permanently on OVS 1.11.0
In-Reply-To: <20150120152551.GG11121@nicira.com>
References: <54BE612F.6020204@rwth-aachen.de>
 <20150120143727.GE11121@nicira.com> <54BE728E.3030607@rwth-aachen.de>
 <20150120152551.GG11121@nicira.com>
Message-ID: <A69FC6BA-80EF-4589-B8D6-1094169D7AD5@cs.stanford.edu>

As Ben notes, the simplest option for anyone who wants OpenFlow 1.3 on OVS is to upgrade to OVS 2.3.

(If you are using Mininet, it even provides a shortcut: mininet/util/install.sh -V 2.3)

As he also implies, another option is to have Mininet enable it explicitly, e.g.
	mn --switch ovs,protocols=OpenFlow13

(follow-up to mininet-discuss)

> On Jan 20, 2015, at 7:25 AM, Ben Pfaff <blp at nicira.com> wrote:
> 
> Please don't drop the mailing list.
> 
> On Tue, Jan 20, 2015 at 04:21:50PM +0100, Kevin Neuenfeldt wrote:
>> Am 20.01.2015 um 15:37 schrieb Ben Pfaff:
>>> On Tue, Jan 20, 2015 at 03:07:43PM +0100, Kevin Neuenfeldt wrote:
>>>> So is there any possibility to enable OpenFlow 1.3 globally and
>>>> permanently?
>>> 
>>> I guess that mininet uses ovs-vsctl to create the bridges.  I would just
>>> change mininet to enable OpenFlow 1.3 at the same time it creates the
>>> bridges, by executing another ovs-vsctl command.
>>> 
>> This would be a possibility but because I will have to collaborate with
>> students from other universities it's preferable to not change mininet
>> itself.
> 
> You can change openvswitch or you can change mininet.  I can't think why
> either choice would make collaboration more difficult.
> 
> The simplest choice is to use OVS 2.3, which enables OF1.3 by default.
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss


From 601358880 at qq.com  Sat Jan 24 01:23:07 2015
From: 601358880 at qq.com (=?gb18030?B?WWFuZyBZYW5uYW4=?=)
Date: Sat, 24 Jan 2015 17:23:07 +0800
Subject: [ovs-discuss] how to add flow using ovs-dpctl?
Message-ID: <tencent_1AEAAE94671242216B671AF8@qq.com>

hi
I try this line and it is wrong. could anyone give a right one？
ovs-dpctl add-flow in_port(3), actions:2.
regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/98f5b540/attachment.html>

From blp at nicira.com  Sat Jan 24 09:03:27 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sat, 24 Jan 2015 09:03:27 -0800
Subject: [ovs-discuss] how to add flow using ovs-dpctl?
In-Reply-To: <tencent_1AEAAE94671242216B671AF8@qq.com>
References: <tencent_1AEAAE94671242216B671AF8@qq.com>
Message-ID: <20150124170327.GA19353@nicira.com>

On Sat, Jan 24, 2015 at 05:23:07PM +0800, Yang Yannan wrote:
> I try this line and it is wrong. could anyone give a right one？
> ovs-dpctl add-flow in_port(3), actions:2.

It's usually a bad idea to use ovs-dpctl to add-flows.  Use ovs-ofctl
instead.

From pdshly at gmail.com  Sat Jan 24 20:43:30 2015
From: pdshly at gmail.com (Tim Huang)
Date: Sat, 24 Jan 2015 23:43:30 -0500
Subject: [ovs-discuss] bug when OpenFlow switch fall back to normal switch
Message-ID: <4E5C236E-3ED1-49E9-9F28-C9CFE43F1B5D@gmail.com>

Hi there,

I am doing some lab for OpenFlow switch, which connected to the controller, falling back to None OpenFlow switch and found that after falling back, the switch flow may not be correct in the kernel space.

Here is the screenshot for ports on the switch



Broadcast flow for the port 45

that’s correct, when port 45 receives the broadcast, it should forward it to all other ports.

However, for port 46

It will only forward the broadcast to the port 47,48, where the port 45 should also be included.


The only problem for bug tracking is I can not find a way to reproduce the bug every time. But what I can be sure is the  frequency will be higher if the topology is more complicated.

Here is my topology for you as the reference. It almost happens for every time when I fall back S8 and S9 to from OpenFlow to Normal Switch.



Thanks
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/48dde126/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-1.tiff
Type: image/tiff
Size: 6134 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/48dde126/attachment-0003.tiff>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-2.tiff
Type: image/tiff
Size: 133902 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/48dde126/attachment-0004.tiff>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: @T39M0$(5WHRR at 6~C31R1}V.png
Type: image/png
Size: 19234 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/48dde126/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-3.tiff
Type: image/tiff
Size: 1045326 bytes
Desc: not available
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/48dde126/attachment-0005.tiff>

From blp at nicira.com  Sat Jan 24 21:22:37 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sat, 24 Jan 2015 21:22:37 -0800
Subject: [ovs-discuss] bug when OpenFlow switch fall back to normal
	switch
In-Reply-To: <4E5C236E-3ED1-49E9-9F28-C9CFE43F1B5D@gmail.com>
References: <4E5C236E-3ED1-49E9-9F28-C9CFE43F1B5D@gmail.com>
Message-ID: <20150125052237.GA12874@nicira.com>

On Sat, Jan 24, 2015 at 11:43:30PM -0500, Tim Huang wrote:
> I am doing some lab for OpenFlow switch, which connected to the
> controller, falling back to None OpenFlow switch and found that after
> falling back, the switch flow may not be correct in the kernel space.

What version of OVS is this?  Did it work OK with an older version?

From pdshly at gmail.com  Sat Jan 24 21:37:32 2015
From: pdshly at gmail.com (tim huang)
Date: Sun, 25 Jan 2015 00:37:32 -0500
Subject: [ovs-discuss] bug when OpenFlow switch fall back to normal
	switch
In-Reply-To: <20150125052237.GA12874@nicira.com>
References: <4E5C236E-3ED1-49E9-9F28-C9CFE43F1B5D@gmail.com>
 <20150125052237.GA12874@nicira.com>
Message-ID: <CAG7sx_Lz7ykCy+g1Y-gDP0Lm41Zn9vPHXY2M06d99TTa1qJR8g@mail.gmail.com>

Sorry, I forgot to attach the version information. I tried 1.9.3 LTS, 2.02
 and 2.3.1 LTS downloaded from official website. All of them have the same
issue.

On Sun, Jan 25, 2015 at 12:22 AM, Ben Pfaff <blp at nicira.com> wrote:

> On Sat, Jan 24, 2015 at 11:43:30PM -0500, Tim Huang wrote:
> > I am doing some lab for OpenFlow switch, which connected to the
> > controller, falling back to None OpenFlow switch and found that after
> > falling back, the switch flow may not be correct in the kernel space.
>
> What version of OVS is this?  Did it work OK with an older version?
>



-- 
Thanks
Tim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150125/087cf63e/attachment.html>

From blp at nicira.com  Sun Jan 25 08:30:31 2015
From: blp at nicira.com (Ben Pfaff)
Date: Sun, 25 Jan 2015 08:30:31 -0800
Subject: [ovs-discuss] bug when OpenFlow switch fall back to normal
	switch
In-Reply-To: <CAG7sx_Lz7ykCy+g1Y-gDP0Lm41Zn9vPHXY2M06d99TTa1qJR8g@mail.gmail.com>
References: <4E5C236E-3ED1-49E9-9F28-C9CFE43F1B5D@gmail.com>
 <20150125052237.GA12874@nicira.com>
 <CAG7sx_Lz7ykCy+g1Y-gDP0Lm41Zn9vPHXY2M06d99TTa1qJR8g@mail.gmail.com>
Message-ID: <20150125163031.GA13302@nicira.com>

Looking at your screenshots, it seems that the kernel flows don't
reflect a switched that has "failed open" at all; for example, one would
never see a "controller" action in such a case.  Can you show us the
OpenFlow tables just after such a failure and the ovs-vswitchd log from
the whole process?  (As text, please, not screenshots or photographs.)

On Sun, Jan 25, 2015 at 12:37:32AM -0500, tim huang wrote:
> Sorry, I forgot to attach the version information. I tried 1.9.3 LTS, 2.02
>  and 2.3.1 LTS downloaded from official website. All of them have the same
> issue.
> 
> On Sun, Jan 25, 2015 at 12:22 AM, Ben Pfaff <blp at nicira.com> wrote:
> 
> > On Sat, Jan 24, 2015 at 11:43:30PM -0500, Tim Huang wrote:
> > > I am doing some lab for OpenFlow switch, which connected to the
> > > controller, falling back to None OpenFlow switch and found that after
> > > falling back, the switch flow may not be correct in the kernel space.
> >
> > What version of OVS is this?  Did it work OK with an older version?

From padmajs80 at gmail.com  Fri Jan 23 23:12:07 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Sat, 24 Jan 2015 12:42:07 +0530
Subject: [ovs-discuss] Fast fail over group type entries
In-Reply-To: <20150122171227.GG4070@nicira.com>
References: <CACveyyK1NnpJXj1md1WaVHLJNdmPFSSX+HEhx6mVyuyJ6t9pGg@mail.gmail.com>
 <20150122171227.GG4070@nicira.com>
Message-ID: <CACveyyLhA6Zyiyq9fOYSVLY7jtqbLugidKMXs2FCRP5kpbxiPA@mail.gmail.com>

Hi,
  Thanks for the information. After setting the group action , it working
fine.

Thanks and Regards,
Padma V

On Thu, Jan 22, 2015 at 10:42 PM, Ben Pfaff <blp at nicira.com> wrote:

> On Thu, Jan 22, 2015 at 09:47:58PM +0530, Padma Jayasankar wrote:
> >  I tried to install Fast fail over group entry from the controller. I am
> > able to see the following entry in the switch
> >
> > sudo ovs-ofctl -O OpenFlow13 dump-flows s12
> > OFPST_FLOW reply (OF1.3) (xid=0x2):
> >  cookie=0x0, duration=16.213s, table=0, n_packets=3856, n_bytes=161952,
> > priority=65535,in_port=3,dl_dst=12:70:1d:ab:fe:4c actions=goto_table:1
> >
> > sudo ovs-ofctl -O OpenFlow13 dump-groups s12
> > OFPST_GROUP_DESC reply (OF1.3) (xid=0x2):
> >
> group_id=4,type=ff,bucket=weight:0,watch_port:1,watch_group:1,actions=output:1,bucket=weight:0,watch_port:2,watch_group:2,actions=output:2
> >
> > But the packets are not flowing. Is there anything wrong in this. Do we
> > have to set anything else in openvswitch to enable liveness check. Please
> > clarify.
>
> You need a "group" action somewhere.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150124/96cccd20/attachment.html>

From blp at nicira.com  Mon Jan 26 12:51:27 2015
From: blp at nicira.com (Ben Pfaff)
Date: Mon, 26 Jan 2015 12:51:27 -0800
Subject: [ovs-discuss] Configure sampling rate
In-Reply-To: <20150121172933.GA21835@nicira.com>
References: <BLU181-W5AAB65D58CD0811426EBEAD480@phx.gbl>
 <20150121172933.GA21835@nicira.com>
Message-ID: <20150126205127.GI12951@nicira.com>

On Wed, Jan 21, 2015 at 09:29:33AM -0800, Ben Pfaff wrote:
> On Wed, Jan 21, 2015 at 11:50:10PM +0800, K ??? wrote:
> > I tried to change sampling rate in sflow table by sending JSON to OVSDB.
> > I found that sampling rate would be configured after sending JSON to OVSDB, 
> > but it did not work immediately and did work after no packet passing.
> > 
> > How to make sampling rate work after sending JSON to OVSDB with no
> > delay?Or what is the time period while the change go into effect?
> 
> It should take effect immediately, but I think I see a bug.
> 
> Can you try this patch?

Did the patch fix the problem?

From 601358880 at qq.com  Tue Jan 27 04:20:22 2015
From: 601358880 at qq.com (=?gb18030?B?WWFuZyBZYW5uYW4=?=)
Date: Tue, 27 Jan 2015 20:20:22 +0800
Subject: [ovs-discuss] =?gb18030?b?u9i4tKO6ICBob3cgdG8gYWRkIGZsb3cgdXNp?=
 =?gb18030?q?ng_ovs-dpctl=3F?=
References: <tencent_1AEAAE94671242216B671AF8@qq.com>
 <20150124170327.GA19353@nicira.com>
Message-ID: <tencent_5EF3EE9B3E80279E59D95711@qq.com>

uh......I just wanna know how ovs-dpctl add-flow work right. cause it always shows invalid arguement
---原始邮件---
发件人: "Ben Pfaff"<blp at nicira.com>
发送时间: 2015年01月25日 01:03:27
收件人: "Yang Yannan"<601358880 at qq.com>;
抄送: "discuss"<discuss at openvswitch.org>;
主题: Re: [ovs-discuss] how to add flow using ovs-dpctl?


On Sat, Jan 24, 2015 at 05:23:07PM +0800, Yang Yannan wrote:
> I try this line and it is wrong. could anyone give a right one？
> ovs-dpctl add-flow in_port(3), actions:2.

It's usually a bad idea to use ovs-dpctl to add-flows.  Use ovs-ofctl
instead.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150127/863b89cf/attachment.html>

From luiz.ozaki at gmail.com  Tue Jan 27 07:19:22 2015
From: luiz.ozaki at gmail.com (Luiz Henrique Ozaki)
Date: Tue, 27 Jan 2015 13:19:22 -0200
Subject: [ovs-discuss] ovs-vswitchd crashing lib/rconn.c:568
In-Reply-To: <CAGSPRswFdBmwsBayTV5wj-ngp2_m6e0yXqWFNQutc4KKjAGaqw@mail.gmail.com>
References: <CAGSPRswFdBmwsBayTV5wj-ngp2_m6e0yXqWFNQutc4KKjAGaqw@mail.gmail.com>
Message-ID: <CAGSPRszKJkM8GZDQQgebjyKiU5YY9ApNNc5vZXxLh8UbCrB3UQ@mail.gmail.com>

Hi,

I did a few more debugging:

2015-01-27T03:45:04.769Z|223223|rconn|DBG|xapi6<->tcp:x.x.x.x:43173:
entering ACTIVE
2015-01-27T03:45:09.084Z|223233|rconn|DBG|xapi6<->tcp:x.x.x.x:43173: idle 5
seconds, sending inactivity probe
2015-01-27T03:45:09.084Z|223234|util|EMER|lib/rconn.c:568: assertion
version >= 0 && version <= 0xff failed in run_ACTIVE()

#7  0x080f6003 in run_ACTIVE (rc=0xb1898b48) at lib/rconn.c:568
568        ovs_assert(version >= 0 && version <= 0xff);
#8  rconn_run (rc=0xb1898b48) at lib/rconn.c:659
659            STATES
(gdb) p *rc->vconn
$2 = {
  class = 0x81709c0,
  state = 2,
  error = 0,
  allowed_versions = 30,
  peer_versions = 0,
  version = 0,
  recv_any_version = false,
  name = 0xb1895908 "tcp:x.x.x.x:43173"
}


Not sure if the version = 0 here is acceptable but seems to be returning -1
by :
intvconn_get_version(const struct vconn *vconn){ return vconn->version ?
vconn->version : -1;}
Should version = 0 really pass on the assertion ? (version >= 0 && version
<= 0xff)

Is this some sort of bug ?

On the ovs-ofctl I get this:
Jan 27 01:43:56 ovs-ofctl: ovs|00001|hmap|DBG|../lib/shash.c:112: 7 nodes
in bucket (16 nodes, 8 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00002|hmap|DBG|../lib/shash.c:112: 7 nodes
in bucket (64 nodes, 32 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00003|ofctl|DBG|connecting to
tcp:y.y.y.y:zzzz
Jan 27 01:43:56 ovs-ofctl: ovs|00004|poll_loop|DBG|wakeup due to 0-ms
timeout
Jan 27 01:43:56 ovs-ofctl: ovs|00005|poll_loop|DBG|wakeup due to [POLLOUT]
on fd 8 (x.x.x.x:43173<->y.y.y.y:zzzz) at ../lib/stream-fd-unix.c:120
Jan 27 01:43:56 ovs-ofctl: ovs|00006|hmap|DBG|../lib/ofp-msgs.c:1082: 6
nodes in bucket (128 nodes, 64 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00007|hmap|DBG|../lib/ofp-msgs.c:1082: 6
nodes in bucket (256 nodes, 128 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00008|hmap|DBG|../lib/ofp-msgs.c:1082: 7
nodes in bucket (512 nodes, 256 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00009|hmap|DBG|../lib/ofp-msgs.c:1082: 8
nodes in bucket (512 nodes, 256 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00010|hmap|DBG|../lib/ofp-msgs.c:1082: 6
nodes in bucket (512 nodes, 256 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00011|hmap|DBG|../lib/ofp-msgs.c:1082: 7
nodes in bucket (512 nodes, 256 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00012|hmap|DBG|../lib/ofp-msgs.c:1082: 7
nodes in bucket (1024 nodes, 512 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00013|hmap|DBG|../lib/ofp-msgs.c:1082: 6
nodes in bucket (1024 nodes, 512 buckets)
Jan 27 01:43:56 ovs-ofctl: ovs|00014|vconn|DBG|tcp:y.y.y.y:zzzz: sent
(Success): OFPT_HELLO (xid=0x1):
Jan 27 01:43:56 ovs-ofctl:  version bitmap: 0x01
Jan 27 01:43:56 ovs-ofctl: ovs|00015|poll_loop|DBG|wakeup due to [POLLIN]
on fd 8 (x.x.x.x:43173<->y.y.y.y:zzzz) at ../lib/stream-fd-unix.c:124
Jan 27 01:43:56 ovs-ofctl: ovs|00016|vconn|DBG|tcp:y.y.y.y:zzzz: received:
OFPT_HELLO (OF1.3) (xid=0x17daa):
Jan 27 01:43:56 ovs-ofctl:  version bitmap: 0x01, 0x02, 0x03, 0x04
Jan 27 01:43:56 ovs-ofctl: ovs|00017|vconn|DBG|tcp:y.y.y.y:zzzz: negotiated
OpenFlow version 0x01 (we support version 0x01, peer supports version 0x04
and earlier)
Jan 27 01:43:56 ovs-ofctl: ovs|00018|vconn|DBG|tcp:y.y.y.y:zzzz: sent
(Success): OFPT_FLOW_MOD (xid=0x2): ADD
priority=25000,dl_src=02:e0:52:2a:ef:24,dl_dst=f2:18:14:f8:fb:7a
actions=strip_vlan,output:63
Jan 27 01:43:56 ovs-ofctl: ovs|00019|vconn|DBG|tcp:y.y.y.y:zzzz: sent
(Success): OFPT_BARRIER_REQUEST (xid=0x3):
Jan 27 01:44:01 ovs-ofctl: ovs|00020|poll_loop|DBG|wakeup due to [POLLIN]
on fd 8 (x.x.x.x:43173<->y.y.y.y:zzzz) at ../lib/stream-fd-unix.c:124 (0%
CPU usage)
ovs-ofctl: talking to tcp:y.y.y.y:zzzz (End of file)

Thanks,


On Thu, Jan 22, 2015 at 11:47 AM, Luiz Henrique Ozaki <luiz.ozaki at gmail.com>
wrote:

> Hi all,
>
> I have some instances running on OVS with the XenServer and the
> ovs-vswitchd process have been crashing for me:
> ovs-vswitchd: monitoring pid 19196 (10 crashes: pid 11819 died, killed
> (Aborted))
>
> I've got this on the log:
> 23159|util|EMER|lib/rconn.c:568: assertion version >= 0 && version <= 0xff
> failed in run_ACTIVE()
>
> I did a backtrace from the coredump, but I couldn't figure it out why I'm
> getting this assertion failed.
>
> Here is a backtrace from the 2.3.0 version:
> (gdb) thread apply all bt
>
> Thread 11 (Thread 0xb7725b90 (LWP 20243)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb73d9ff2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from
> /lib/libpthread.so.0
> #2  0xb74cbbb4 in pthread_cond_timedwait@@GLIBC_2.3.2 () from
> /lib/libc.so.6
> #3  0xb7571199 in handle_fildes_io () from /lib/librt.so.1
> #4  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #5  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 10 (Thread 0xb48feb90 (LWP 12169)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb6704538, n_pollfds=3, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb48e6eb8) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x08075aa1 in udpif_upcall_handler (arg=0x95f6490) at
> ofproto/ofproto-dpif-upcall.c:529
> #5  0x080e7058 in ovsthread_wrapper (aux_=0x95a65e0) at
> lib/ovs-thread.c:322
> #6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #7  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 9 (Thread 0xb725eb90 (LWP 12168)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb673b0a8, n_pollfds=3, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb7246eb8) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x08075aa1 in udpif_upcall_handler (arg=0x95f6484) at
> ofproto/ofproto-dpif-upcall.c:529
> #5  0x080e7058 in ovsthread_wrapper (aux_=0x9600d20) at
> lib/ovs-thread.c:322
> #6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #7  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 8 (Thread 0xb5a5bb90 (LWP 12167)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0x9612c60, n_pollfds=3, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb5a43eb8) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x08075aa1 in udpif_upcall_handler (arg=0x95f6478) at
> ofproto/ofproto-dpif-upcall.c:529
> #5  0x080e7058 in ovsthread_wrapper (aux_=0x9611220) at
> lib/ovs-thread.c:322
> #6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #7  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 7 (Thread 0xb38fcb90 (LWP 12174)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb65281c0, n_pollfds=2, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb38fad88) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x080e70cb in ovs_barrier_block (barrier=0x95a7bac) at
> lib/ovs-thread.c:290
> #5  0x08076d6e in udpif_revalidator (arg=0x95f3a18) at
> ofproto/ofproto-dpif-upcall.c:588
> ---Type <return> to continue, or q <return> to quit---
> #6  0x080e7058 in ovsthread_wrapper (aux_=0x96110e0) at
> lib/ovs-thread.c:322
> #7  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #8  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 6 (Thread 0xb30fbb90 (LWP 12178)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb6526308, n_pollfds=2, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb30f9d88) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x080e70cb in ovs_barrier_block (barrier=0x95a7bac) at
> lib/ovs-thread.c:290
> #5  0x08076d6e in udpif_revalidator (arg=0x95f3a28) at
> ofproto/ofproto-dpif-upcall.c:588
> #6  0x080e7058 in ovsthread_wrapper (aux_=0x9620820) at
> lib/ovs-thread.c:322
> #7  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #8  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 5 (Thread 0xb40fdb90 (LWP 12173)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb67119b0, n_pollfds=3, handles=0x0,
> timeout_when=10068193, elapsed=0xb40fbdb8) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x080773d8 in udpif_revalidator (arg=0x95f3a08) at
> ofproto/ofproto-dpif-upcall.c:629
> #5  0x080e7058 in ovsthread_wrapper (aux_=0x9620038) at
> lib/ovs-thread.c:322
> #6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #7  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 4 (Thread 0xb50ffb90 (LWP 12166)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb6713a20, n_pollfds=3, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb50e7eb8) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x08075aa1 in udpif_upcall_handler (arg=0x95f646c) at
> ofproto/ofproto-dpif-upcall.c:529
> #5  0x080e7058 in ovsthread_wrapper (aux_=0x96110e0) at
> lib/ovs-thread.c:322
> #6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #7  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 3 (Thread 0xb28fab90 (LWP 12165)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb73dc839 in __lll_lock_wait () from /lib/libpthread.so.0
> #2  0xb73d7e9f in _L_lock_885 () from /lib/libpthread.so.0
> #3  0xb73d7d66 in pthread_mutex_lock () from /lib/libpthread.so.0
> #4  0xb74cbcd6 in pthread_mutex_lock () from /lib/libc.so.6
> #5  0x080e7731 in ovs_mutex_lock_at (l_=0x962d7b0, where=0x815b306
> "lib/rconn.c:960") at lib/ovs-thread.c:70
> #6  0x080f4a6f in rconn_get_version (rconn=0x962d7b0) at lib/rconn.c:960
> #7  0x0807ffba in ofconn_get_protocol (ofconn=0x962f490) at
> ofproto/connmgr.c:992
> #8  0x08080018 in connmgr_wants_packet_in_on_miss (mgr=0x9600e88) at
> ofproto/connmgr.c:1577
> #9  0x0806753a in rule_dpif_lookup (ofproto=0x9601598, flow=0xb28f9ebc,
> wc=0xb28e31dc, rule=0xb28e2eb4, take_ref=false) at
> ofproto/ofproto-dpif.c:3238
> ---Type <return> to continue, or q <return> to quit---
> #10 0x0807c568 in xlate_actions__ (xin=0xb28f9eb8, xout=0xb28e31dc) at
> ofproto/ofproto-dpif-xlate.c:3278
> #11 xlate_actions (xin=0xb28f9eb8, xout=0xb28e31dc) at
> ofproto/ofproto-dpif-xlate.c:3182
> #12 0x08076265 in handle_upcalls (arg=0x95f6460) at
> ofproto/ofproto-dpif-upcall.c:931
> #13 udpif_upcall_handler (arg=0x95f6460) at
> ofproto/ofproto-dpif-upcall.c:531
> #14 0x080e7058 in ovsthread_wrapper (aux_=0x95dc718) at
> lib/ovs-thread.c:322
> #15 0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #16 0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 2 (Thread 0xb625cb90 (LWP 6925)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb74b56c3 in poll () from /lib/libc.so.6
> #2  0x08102166 in time_poll (pollfds=0xb6998de0, n_pollfds=2, handles=0x0,
> timeout_when=9223372036854775807, elapsed=0xb625c128) at lib/timeval.c:301
> #3  0x080f3f5a in poll_block () at lib/poll-loop.c:314
> #4  0x080e6c79 in ovsrcu_postpone_thread (arg=0x0) at lib/ovs-rcu.c:267
> #5  0x080e7058 in ovsthread_wrapper (aux_=0x95c2870) at
> lib/ovs-thread.c:322
> #6  0xb73d5912 in start_thread () from /lib/libpthread.so.0
> #7  0xb74bf4ae in clone () from /lib/libc.so.6
>
> Thread 1 (Thread 0xb725f8f0 (LWP 6615)):
> #0  0xb7728424 in __kernel_vsyscall ()
> #1  0xb7412b10 in raise () from /lib/libc.so.6
> #2  0xb7414421 in abort () from /lib/libc.so.6
> #3  0x081044c4 in ovs_abort_valist (err_no=0, format=0x815d864 "%s:
> assertion %s failed in %s()", args=0xbfef7658
> "\005\265\025\b\210\271\025\b\366\267\025\b\260\327b\txv\357\277JJ\017\b\b")
> at lib/util.c:322
> #4  0x08109858 in vlog_abort_valist (module_=0x81847e0, message=0x815d864
> "%s: assertion %s failed in %s()", args=0xbfef7658
> "\005\265\025\b\210\271\025\b\366\267\025\b\260\327b\txv\357\277JJ\017\b\b")
>     at lib/vlog.c:992
> #5  0x08109882 in vlog_abort (module=0x81847e0, message=0x815d864 "%s:
> assertion %s failed in %s()") at lib/vlog.c:1006
> #6  0x08104711 in ovs_assert_failure (where=0x815b505 "lib/rconn.c:568",
> function=0x19d7 <Address 0x19d7 out of bounds>, condition=0x815b988
> "version >= 0 && version <= 0xff") at lib/util.c:71
> #7  0x080f6003 in run_ACTIVE (rc=0x962d7b0) at lib/rconn.c:568
> #8  rconn_run (rc=0x962d7b0) at lib/rconn.c:659
> #9  0x08081e45 in ofconn_run (mgr=0x9600e88, handle_openflow=0x80658a0
> <handle_openflow>) at ofproto/connmgr.c:1390
> #10 connmgr_run (mgr=0x9600e88, handle_openflow=0x80658a0
> <handle_openflow>) at ofproto/connmgr.c:339
> #11 0x08062597 in ofproto_run (p=0x96015a0) at ofproto/ofproto.c:1543
> #12 0x0804bef3 in bridge_run__ () at vswitchd/bridge.c:2255
> #13 0x080537ca in bridge_run () at vswitchd/bridge.c:2307
> #14 0x08054e56 in main (argc=-1257216160, argv=0x0) at
> vswitchd/ovs-vswitchd.c:116
>
> Running OVS 1.9.3 and 2.3.0, both crashes at the same assertion.
> XenServer 6.2
>
> It seems that this only happens when ovs-vswitchd is on heavy load and I
> run ovs-ofctl add-flow.
>
> Anyone knows what could be triggering this ?
>
> Regards,
>
>
> --
> []'s
> Luiz Henrique Ozaki
>



-- 
[]'s
Luiz Henrique Ozaki
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150127/b5d54c2a/attachment-0001.html>

From gautier.p-ssii at mipih.fr  Tue Jan 27 09:39:07 2015
From: gautier.p-ssii at mipih.fr (GAUTIER Philippe)
Date: Tue, 27 Jan 2015 17:39:07 +0000
Subject: [ovs-discuss] What is the best hardware solution to perform simple
 networking operations with openvswitch
Message-ID: <491056227D08804AB0BBEF45575E388E1D806A42@SV-T-VNW-EX10.mipih.net>

Hy,

We are looking for the best hardware solution to run the following configuration (below openvswitch commands).

Use case:
                                                                                                              dedicated host

VMWARE                                                                          ---->        Openvswitch switch                                                                                                                  ----->    two Network probe
VSPAN mirroring session using GRE tunnels                       GRE Desencapsulation
Filtering (with different traffic filters ex: without broadcast and all traffic)
and send traffic to network probe
span mirroring session                                                ----->

We already  had the following results with our test platform (the use case is not totally covered by our test scenario, only GRE traffic and one network probe):

An intel core 2 duo E5500 2,8 Ghz processor with a HP NC360T Dual Gigabit Port Ethernet card (with 82571EB Ethernet controller)
Ovs-version: 2.3.0
Linux kernel: 3.16.0-4-amd64

400 kpkts/s at around 720 Mbits/s (simulated with real traffic capture)
~60 % cpu used on both Core


We are looking for a solution to support 10 Gbit interface rate to the network probe( So 10 Gbits/s in and 20 Gbits/s out) .  We find this intel card reference: X710DA4
http://www.intel.com/content/www/us/en/network-adapters/converged-network-adapters/ethernet-x710.html

This card support NVGRE offloading. Will our configuration be entirely  offloaded to the network card (if we do not use more than 4 Ethernet ports)?

Which intel processor is most appropriate for our configuration and DPDK support ?

Or maybe the best scalable solution for our needs is to buy a real network switch with openvswitch support ?
http://www.pica8.com/open-switching/1gbe-10gbe-40gbe-open-switches.php


Openvswitch test configuration:

ovs-vsctl add-br br-outTrafic -- set Bridge br-outTrafic fail-mode=secure

ovs-vsctl add-port br-outTrafic eth4 \
                -- set Interface eth4 ofport_request=1
ovs-ofctl mod-port br-outTrafic eth4 up


ovs-vsctl add-port br-outTrafic gre0 \
-- set interface gre0 type=gre options:remote_ip=flow options:in_key=flow options:local_ip=<ip> \
-- set Interface gre0 ofport_request=2
ovs-ofctl mod-port br-outTrafic gre0 up


Openflow commands:

# drop multicast/ broadcast
ovs-ofctl add-flow br-out \
    "cookie=1, table=0, priority=65535, out_port=1, dl_dst=01:00:00:00:00:00/01:00:00:00:00:00, actions=drop"
# drop arp
ovs-ofctl add-flow br-out \
    "cookie=2, table=0, priority=65534, out_port=1, dl_type=0x0806, actions=drop"
# delete STP
ovs-ofctl add-flow br-out \
     "cookie=3, table=0, priority=65533, out_port=1, dl_dst=01:80:c2:00:00:00/ff:ff:ff:ff:ff:f0, actions=drop"

# send trafic to network probe
ovs-ofctl add-flow br-outTrafic \
                "cookie=4, table=0, priority=0,in_port=2, actions=output:1"

Regards,

Philippe


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150127/4a667832/attachment.html>

From Vikas.Aggarwal at caviumnetworks.com  Tue Jan 27 02:22:42 2015
From: Vikas.Aggarwal at caviumnetworks.com (Aggarwal, Vikas)
Date: Tue, 27 Jan 2015 10:22:42 +0000
Subject: [ovs-discuss]   IPv6 as vxlan tunnel  in OVS 2.3
Message-ID: <BLUPR07MB609081FF0A5BC01DB49889AFD320@BLUPR07MB609.namprd07.prod.outlook.com>

Hello,
I am unable to setup IPv6 based Vxlan tunnel. Tried port based and flow based but remote ip configuration is failing always. Can someone please guide me, what is wrong in my usage or otherwise how is IPv6 supported in OVS 2.3.

1) Port based IPv6 Vxlan tunnel cmnd and error msg
     # ovs-vsctl --no-wait add-port br2 vxlan0 -- set interface vxlan0 type=vxlan options:remote_ip=2001:1938:2a9::10
    Error message in vswitch log:
        |00164|socket_util|ERR|"2001:1938:2a9::10" is not a valid IP address
        |00165|netdev_vport|WARN|vxlan0: bad vxlan 'remote_ip'
        |00166|netdev_vport|ERR|vxlan0: vxlan type requires valid 'remote_ip' argument
        |00167|netdev|WARN|vxlan0: could not set configuration (Invalid argument)
2) Flow based IPv6 Vxlan tunnel cmnd and error msg
     # ovs-ofctl add-flow br-int "in_port=1 actions=set_tunnel:101,set_field:2001:1938:2a9::10->tun_dst,6"
       Error msg :
           ovs-ofctl: 2001:1938:2a9::10: invalid IP address

Questions: 1) Is there anything wrong with above two command syntax?
           2) How can I create IPv6 Vxlan tunnel, if its supported ?

Thanks In Advance
Regards
Vikas Aggarwal


From ashish.jain14 at wipro.com  Tue Jan 27 10:07:06 2015
From: ashish.jain14 at wipro.com (ashish.jain14 at wipro.com)
Date: Tue, 27 Jan 2015 18:07:06 +0000
Subject: [ovs-discuss] Ping/SSH from guest to host works but host to guest
	does not work
Message-ID: <1422382024514.32010@wipro.com>

Hi,


I am a newbie in SDN arena. I am using openvswitch in open stack and somehow I am facing problem in pinging/sshing VM from my host machine. However opposite works fine, that is I am able to ping/ssh my host machine from VM. Currently I am logging into my VM using a web console called horizon(open stack component).


Can someone provide some pointers to debug this issue.


Regards

Ashish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150127/401d52e2/attachment-0001.html>

From blp at nicira.com  Tue Jan 27 10:08:10 2015
From: blp at nicira.com (Ben Pfaff)
Date: Tue, 27 Jan 2015 10:08:10 -0800
Subject: [ovs-discuss] IPv6 as vxlan tunnel in OVS 2.3
In-Reply-To: <BLUPR07MB609081FF0A5BC01DB49889AFD320@BLUPR07MB609.namprd07.prod.outlook.com>
References: <BLUPR07MB609081FF0A5BC01DB49889AFD320@BLUPR07MB609.namprd07.prod.outlook.com>
Message-ID: <CACjuMbyYdZpEMTC8=CcyxzTTDs+RxkvHnqg9_abkwLSDE2zBLA@mail.gmail.com>

On Tue, Jan 27, 2015 at 2:22 AM, Aggarwal, Vikas
<Vikas.Aggarwal at caviumnetworks.com> wrote:
> I am unable to setup IPv6 based Vxlan tunnel.

OVS doesn't support IPv6 based VXLAN tunnels.

From jesse at nicira.com  Tue Jan 27 10:08:59 2015
From: jesse at nicira.com (Jesse Gross)
Date: Tue, 27 Jan 2015 10:08:59 -0800
Subject: [ovs-discuss] IPv6 as vxlan tunnel in OVS 2.3
In-Reply-To: <BLUPR07MB609081FF0A5BC01DB49889AFD320@BLUPR07MB609.namprd07.prod.outlook.com>
References: <BLUPR07MB609081FF0A5BC01DB49889AFD320@BLUPR07MB609.namprd07.prod.outlook.com>
Message-ID: <CAEP_g=_QWTAiyhHoaVR3mG56zgmNM-Vk5ZZjVSLz_jWp=sQJeQ@mail.gmail.com>

On Tue, Jan 27, 2015 at 2:22 AM, Aggarwal, Vikas
<Vikas.Aggarwal at caviumnetworks.com> wrote:
> Hello,
> I am unable to setup IPv6 based Vxlan tunnel. Tried port based and flow based but remote ip configuration is failing always. Can someone please guide me, what is wrong in my usage or otherwise how is IPv6 supported in OVS 2.3.

Support for IPv6 tunnels is not currently implemented. Some people
have talked about doing it on and off but there hasn't been any code
sent out.

From ashjain2 at gmail.com  Tue Jan 27 10:24:36 2015
From: ashjain2 at gmail.com (Ashish Jain)
Date: Tue, 27 Jan 2015 23:54:36 +0530
Subject: [ovs-discuss] Ping/SSH from guest to host works but host to guest
	does not work
Message-ID: <CABGiY4DmfSkA4ep2CL3yDDR5gU4ws=5D8EcqYaqwxYd1rWg5aQ@mail.gmail.com>

Hi,

 I am a newbie in SDN arena. I am using openvswitch in open stack and
somehow I am facing problem in pinging/sshing VM from my host machine.
However opposite works fine, that is I am able to ping/ssh my host machine
from VM. Currently I am logging into my VM using a web console called
horizon(open stack component).

 Can someone provide some pointers to debug this issue.

 Regards
Ashish
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150127/63678a7c/attachment.html>

From joestringer at nicira.com  Tue Jan 27 10:59:05 2015
From: joestringer at nicira.com (Joe Stringer)
Date: Tue, 27 Jan 2015 10:59:05 -0800
Subject: [ovs-discuss]
	=?utf-8?b?5Zue5aSN77yaIGhvdyB0byBhZGQgZmxvdyB1c2lu?=
	=?utf-8?q?g_ovs-dpctl=3F?=
In-Reply-To: <tencent_5EF3EE9B3E80279E59D95711@qq.com>
References: <tencent_1AEAAE94671242216B671AF8@qq.com>
 <20150124170327.GA19353@nicira.com>
 <tencent_5EF3EE9B3E80279E59D95711@qq.com>
Message-ID: <CANr6G5yK4bVdPxnjpR_R8FR_F1J7OKP8fvosnOVw2fkHfNL8rw@mail.gmail.com>

You don't need to write "actions:". I believe there is also some
requirement to include an ethernet or ethertype match.

Note that if you're running ovs-vswitchd, you'll probably end up
arguing with it about kernel flow management--ie, it will delete your
flows. This is the sort of detail that should be handled by
ovs-vswitchd, which is configured through ovs-ofctl.

On 27 January 2015 at 04:20, Yang Yannan <601358880 at qq.com> wrote:
>
> uh......I just wanna know how ovs-dpctl add-flow work right. cause it always
> shows invalid arguement
> ---原始邮件---
> 发件人: "Ben Pfaff"<blp at nicira.com>
> 发送时间: 2015年01月25日 01:03:27
> 收件人: "Yang Yannan"<601358880 at qq.com>;
> 抄送: "discuss"<discuss at openvswitch.org>;
> 主题: Re: [ovs-discuss] how to add flow using ovs-dpctl?
>
> On Sat, Jan 24, 2015 at 05:23:07PM +0800, Yang Yannan wrote:
>> I try this line and it is wrong. could anyone give a right one？
>> ovs-dpctl add-flow in_port(3), actions:2.
>
> It's usually a bad idea to use ovs-dpctl to add-flows.  Use ovs-ofctl
> instead.
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From castro.flaviojr at gmail.com  Tue Jan 27 11:15:45 2015
From: castro.flaviojr at gmail.com (Flavio Castro)
Date: Tue, 27 Jan 2015 14:15:45 -0500
Subject: [ovs-discuss] Develop Meters in OVS
Message-ID: <CAPTKU2DRQxRhnFMoV-MLfvQO5-bSRTRB64dE748=iMUP8eie-Q@mail.gmail.com>

Hi,

Is the code for OVS available for modification and testing?

How hard do you guys think it would be ( for me ) to implement OF meters in
OVS? Any idea on what has to be done?

Anyone tried this before?

Flávio Castro Jr.
MSCS student at Georgia Tech
B.S.E in Networks Engineering from the University of Brasilia.
CCNA Certified
(404) 660-9373
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150127/005de891/attachment.html>

From amy.fong at windriver.com  Tue Jan 27 14:54:48 2015
From: amy.fong at windriver.com (Amy Fong)
Date: Tue, 27 Jan 2015 17:54:48 -0500
Subject: [ovs-discuss] Status of OVS + dpdk + documentation
Message-ID: <20150127225448.GA2971@windriver.com>

Hi,

I'm trying to setup a qemu/libvirt guest using dpdk and ovs. I've been
following the INSTALL.DPDK.md

I was wondering if there's any documentation available that indicates
the options that I can use in qemu to use the use the dpdk sockets. Some
examples including some basic network setup would be greatly appreciated!

Thanks!

From 601358880 at qq.com  Wed Jan 28 05:05:51 2015
From: 601358880 at qq.com (=?gb18030?B?WWFuZyBZYW5uYW4=?=)
Date: Wed, 28 Jan 2015 21:05:51 +0800
Subject: [ovs-discuss] what need to to add action in datapath(kernel)
Message-ID: <tencent_78E60F4D42DDD6B102410EE5@qq.com>

hi
if adding a action in datapath,like push_mpls, what else need to do?
sth I think need to do is:
in datapath(kernel)
1. openvswitch.h
 add OVS_ACTION_ATTR_，ovs_action_
2. flow-netlink.c
add the length and validate the action
3.actions.c
execute actions according to nla_type.
xlate
1. ofproto-dpif-xlate.c
do_xlate_actions_，change flow according to the type of ofpact.
2. odp-util.c
commit the action and write it into odp-actions of xout.
3. in userspace ,execute action when needing help.
and adding  it as ofpact is omitted. this part seems not that tough.

regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150128/68a00e29/attachment.html>

From shettyg at nicira.com  Wed Jan 28 08:23:10 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Wed, 28 Jan 2015 08:23:10 -0800
Subject: [ovs-discuss] Ping/SSH from guest to host works but host to
 guest does not work
In-Reply-To: <CABGiY4DmfSkA4ep2CL3yDDR5gU4ws=5D8EcqYaqwxYd1rWg5aQ@mail.gmail.com>
References: <CABGiY4DmfSkA4ep2CL3yDDR5gU4ws=5D8EcqYaqwxYd1rWg5aQ@mail.gmail.com>
Message-ID: <CAHbON5okWkEGVH_9kc+Qfy-7Qkqf=9xSENy=WUFE4=0D8SDghw@mail.gmail.com>

On Tue, Jan 27, 2015 at 10:24 AM, Ashish Jain <ashjain2 at gmail.com> wrote:
> Hi,
>
> I am a newbie in SDN arena. I am using openvswitch in open stack and somehow
> I am facing problem in pinging/sshing VM from my host machine. However
> opposite works fine, that is I am able to ping/ssh my host machine from VM.
> Currently I am logging into my VM using a web console called horizon(open
> stack component).
>
> Can someone provide some pointers to debug this issue.
You will have to follow the packet using tcpdump on different
interfaces (mostly the virtual interface of the VM that is attached to
OVS bridge). My first intuition would be to look at the routing table
of your host to see which interface it sends the packet when the
destination is your VM.

>
> Regards
> Ashish
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From shettyg at nicira.com  Wed Jan 28 08:30:08 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Wed, 28 Jan 2015 08:30:08 -0800
Subject: [ovs-discuss] Status of OVS + dpdk + documentation
In-Reply-To: <20150127225448.GA2971@windriver.com>
References: <20150127225448.GA2971@windriver.com>
Message-ID: <CAHbON5qrsRV7rxY7dJ8RD6dawAqxENciaW8JRZd1-p5zFdzRLw@mail.gmail.com>

On Tue, Jan 27, 2015 at 2:54 PM, Amy Fong <amy.fong at windriver.com> wrote:
> Hi,
>
> I'm trying to setup a qemu/libvirt guest using dpdk and ovs. I've been
> following the INSTALL.DPDK.md
>From my understanding, OVS DPDK currently does not support connecting
to a guest.

>
> I was wondering if there's any documentation available that indicates
> the options that I can use in qemu to use the use the dpdk sockets. Some
> examples including some basic network setup would be greatly appreciated!
>
> Thanks!
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss

From ashjain2 at gmail.com  Wed Jan 28 09:01:41 2015
From: ashjain2 at gmail.com (Ashish Jain)
Date: Wed, 28 Jan 2015 22:31:41 +0530
Subject: [ovs-discuss] Ping/SSH from guest to host works but host to
 guest does not work
In-Reply-To: <CAHbON5okWkEGVH_9kc+Qfy-7Qkqf=9xSENy=WUFE4=0D8SDghw@mail.gmail.com>
References: <CABGiY4DmfSkA4ep2CL3yDDR5gU4ws=5D8EcqYaqwxYd1rWg5aQ@mail.gmail.com>
 <CAHbON5okWkEGVH_9kc+Qfy-7Qkqf=9xSENy=WUFE4=0D8SDghw@mail.gmail.com>
Message-ID: <CABGiY4CjxL5WO5dcnJXkRuo0hHsiU3WLu4=e0OWGefiGbVUH7w@mail.gmail.com>

Thanks Gurucharan. Let me get back to you and the forum with more details.

Regards
Ashish

On Wed, Jan 28, 2015 at 9:53 PM, Gurucharan Shetty <shettyg at nicira.com>
wrote:

> On Tue, Jan 27, 2015 at 10:24 AM, Ashish Jain <ashjain2 at gmail.com> wrote:
> > Hi,
> >
> > I am a newbie in SDN arena. I am using openvswitch in open stack and
> somehow
> > I am facing problem in pinging/sshing VM from my host machine. However
> > opposite works fine, that is I am able to ping/ssh my host machine from
> VM.
> > Currently I am logging into my VM using a web console called horizon(open
> > stack component).
> >
> > Can someone provide some pointers to debug this issue.
> You will have to follow the packet using tcpdump on different
> interfaces (mostly the virtual interface of the VM that is attached to
> OVS bridge). My first intuition would be to look at the routing table
> of your host to see which interface it sends the packet when the
> destination is your VM.
>
> >
> > Regards
> > Ashish
> >
> > _______________________________________________
> > discuss mailing list
> > discuss at openvswitch.org
> > http://openvswitch.org/mailman/listinfo/discuss
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150128/7d8220e0/attachment.html>

From amy.fong at windriver.com  Wed Jan 28 09:03:25 2015
From: amy.fong at windriver.com (Amy Fong)
Date: Wed, 28 Jan 2015 12:03:25 -0500
Subject: [ovs-discuss] Status of OVS + dpdk + documentation
In-Reply-To: <CAHbON5qrsRV7rxY7dJ8RD6dawAqxENciaW8JRZd1-p5zFdzRLw@mail.gmail.com>
References: <20150127225448.GA2971@windriver.com>
 <CAHbON5qrsRV7rxY7dJ8RD6dawAqxENciaW8JRZd1-p5zFdzRLw@mail.gmail.com>
Message-ID: <20150128170325.GA6946@windriver.com>

On Wed, Jan 28, 2015 at 08:30:08AM -0800, Gurucharan Shetty wrote:
> On Tue, Jan 27, 2015 at 2:54 PM, Amy Fong <amy.fong at windriver.com> wrote:
> > Hi,
> >
> > I'm trying to setup a qemu/libvirt guest using dpdk and ovs. I've been
> > following the INSTALL.DPDK.md
> >From my understanding, OVS DPDK currently does not support connecting
> to a guest.

Thanks for your reply.

In that case, what can I do to explore the functionality at the moment? 

Thanks!
Amy

From yaroni at radcom.com  Wed Jan 28 15:35:05 2015
From: yaroni at radcom.com (Yaron Illouz)
Date: Thu, 29 Jan 2015 01:35:05 +0200
Subject: [ovs-discuss] sriov and port mirroring
Message-ID: <1A791056FCD70F458405B58B79F5C2F706CA3314@rad-w2ksrv11>

 

Is it possible to do port mirroring while using sriov in the same host
and in different host

I am using libvirt and openvswitch

What must i do? Perhaps bridge two controller virtual function 

If yes, should I do it with ovs-vsctl add-br, or in another way

 

libvirt version: 0.10.2, package: 29.el6_5.12

 

Open vSwitch) 1.9.0

 

My ethernet  card is...

Intel Corporation 82599ES 10-Gigabit SFI/SFP+

ethtool -i eth6

driver: ixgbe

version: 3.19.1-k

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/8c4fa4ab/attachment.html>

From a.n.chippa at gmail.com  Wed Jan 28 16:26:51 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Wed, 28 Jan 2015 16:26:51 -0800
Subject: [ovs-discuss] conntrack with openvswitch
Message-ID: <CABFtFwnbMa4J2Y9cJJ66D9tEyOr_zr1kRskYe10kCO6MgHSjOg@mail.gmail.com>

Where can I find a working version of conntrack+openvswitch code?
And can someone please point me to a document explaining how to install
conntrack with openvswitch? I have many questions on conntrack with
openvswitch...

Q1: What is the role of conntrackd in (conntrack+openvswitch)?
Q2: Is the packet punted to ovs-vswitchd (along with ct_id?) and how does
DPI fit into this?
Q3: Where are app_id, conntrack_mark stored? In the conntrack flow?
Q4: Where does the netfilter conntrack kernel module store the connection
state? In the flow itself?
Q5: When is openvswitch 2.4 coming out? Will it include conntrack and DPI?
Q6: Will openvswitch 2.4 include documentation describing in details the
various components and their interactions? This will be very helpful.

Appreciate any responses.

Thanks,
Ashok
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150128/8f7cbc66/attachment.html>

From jesse at nicira.com  Wed Jan 28 16:40:41 2015
From: jesse at nicira.com (Jesse Gross)
Date: Wed, 28 Jan 2015 16:40:41 -0800
Subject: [ovs-discuss] sriov and port mirroring
In-Reply-To: <1A791056FCD70F458405B58B79F5C2F706CA3314@rad-w2ksrv11>
References: <1A791056FCD70F458405B58B79F5C2F706CA3314@rad-w2ksrv11>
Message-ID: <CAEP_g=8WwFEx9aA=yejE=VKkYfTEu4rHy9Cxn19n7ve-aOaaBg@mail.gmail.com>

On Wed, Jan 28, 2015 at 3:35 PM, Yaron Illouz <yaroni at radcom.com> wrote:
>
>
> Is it possible to do port mirroring while using sriov in the same host and
> in different host
>
> I am using libvirt and openvswitch

There is no support for SR-IOV with Open vSwitch as it provides
insufficient levels of control to implement OVS's features.

From fededido91 at hotmail.it  Wed Jan 28 15:38:04 2015
From: fededido91 at hotmail.it (Federico Di Domenicantonio)
Date: Thu, 29 Jan 2015 00:38:04 +0100
Subject: [ovs-discuss] dpif-netdev usage
Message-ID: <DUB127-W41D860737BB9D26BFACDAFBF330@phx.gbl>

Hello,

I'm trying to use the userspace-only implementation of Open vSwitch (with dpif-netdev datapath). I followed the installation instructions provided, but when I start the daemon I get the following error:

|00001|dpif_linux|ERR|Generic Netlink family 'ovs_datapath' does not exist. The Open vSwitch kernel module is probably not loaded.

The daemon then starts, I can add bridges with ovs-vsctl, but I fail to operate on them with ovs-dpctl, getting the same error (even with a simple command like "ovs-dpctl show"). I know that ovs-dpctl is supposed to work with kernel datapath, but looking inside it I've noticed that it operates with dpif functions, that can be implemented by either dpif-linux and dpif-netdev.

In case ovs-dpctl is intended to operate only with kernel datapath, is there a tool to do the same with the userspace-only implementation?

Any help would be greatly appreciated.

Thank you in advance.

Federico Di Domenicantonio
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/3001ebca/attachment-0001.html>

From padmajs80 at gmail.com  Wed Jan 28 22:04:23 2015
From: padmajs80 at gmail.com (Padma Jayasankar)
Date: Thu, 29 Jan 2015 11:34:23 +0530
Subject: [ovs-discuss] How to use BFD along with OVS
Message-ID: <CACveyyLajPJ6AbtScH_3WNTWUZreE9UJz6sqXpHLrdMs+gHK9w@mail.gmail.com>

Hi,
  For my project i have to send BFD packets between the source and
destination to identify any link failure and set the liveness of action
buckets of fast fail over group type accordingly.
  I am using Mininet, OVS and Ryu for my project. I have installed the flow
entries with fast failover group type. But i am not clear about sending BFD
packets. How to integrate BFD with Openvswitch. Please clarify.

Thanks and Regards,
Padma V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/295a6496/attachment-0001.html>

From alexw at nicira.com  Thu Jan 29 09:33:45 2015
From: alexw at nicira.com (Alex Wang)
Date: Thu, 29 Jan 2015 09:33:45 -0800
Subject: [ovs-discuss] How to use BFD along with OVS
In-Reply-To: <CACveyyLajPJ6AbtScH_3WNTWUZreE9UJz6sqXpHLrdMs+gHK9w@mail.gmail.com>
References: <CACveyyLajPJ6AbtScH_3WNTWUZreE9UJz6sqXpHLrdMs+gHK9w@mail.gmail.com>
Message-ID: <CAArS4XW320A99uz7cUTrgS4ZnJpz5YECnsZtNdCq7r3ckBgnOQ@mail.gmail.com>

Hey Padma,

OVS supports BFD, please refer to 'man ovs-vswitchd.conf.db', Interface
Table section for detailed configuration.

Thanks,
Alex Wang,

On Wed, Jan 28, 2015 at 10:04 PM, Padma Jayasankar <padmajs80 at gmail.com>
wrote:

> Hi,
>   For my project i have to send BFD packets between the source and
> destination to identify any link failure and set the liveness of action
> buckets of fast fail over group type accordingly.
>   I am using Mininet, OVS and Ryu for my project. I have installed the
> flow entries with fast failover group type. But i am not clear about
> sending BFD packets. How to integrate BFD with Openvswitch. Please clarify.
>
> Thanks and Regards,
> Padma V
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/2c2b6c13/attachment.html>

From joestringer at nicira.com  Thu Jan 29 10:31:33 2015
From: joestringer at nicira.com (Joe Stringer)
Date: Thu, 29 Jan 2015 10:31:33 -0800
Subject: [ovs-discuss] dpif-netdev usage
In-Reply-To: <DUB127-W41D860737BB9D26BFACDAFBF330@phx.gbl>
References: <DUB127-W41D860737BB9D26BFACDAFBF330@phx.gbl>
Message-ID: <CANr6G5y8P_ew=M-_1nQNWeMAC3b=SBj4Mw3Tdu1LVC5hum-g=g@mail.gmail.com>

On 28 January 2015 at 15:38, Federico Di Domenicantonio
<fededido91 at hotmail.it> wrote:
> Hello,
>
> I'm trying to use the userspace-only implementation of Open vSwitch (with
> dpif-netdev datapath). I followed the installation instructions provided,
> but when I start the daemon I get the following error:
>
> |00001|dpif_linux|ERR|Generic Netlink family 'ovs_datapath' does not exist.
> The Open vSwitch kernel module is probably not loaded.

This is showing that your bridge is trying to use the kernel datapath.
Make sure you have set the datapath_type of the bridge to netdev.


> The daemon then starts, I can add bridges with ovs-vsctl, but I fail to
> operate on them with ovs-dpctl, getting the same error (even with a simple
> command like "ovs-dpctl show"). I know that ovs-dpctl is supposed to work
> with kernel datapath, but looking inside it I've noticed that it operates
> with dpif functions, that can be implemented by either dpif-linux and
> dpif-netdev.
>
> In case ovs-dpctl is intended to operate only with kernel datapath, is there
> a tool to do the same with the userspace-only implementation?

ovs-appctl dpctl/*. I believe they are fairly similar to the ovs-dpctl
commands, but they talk to ovs-vswitchd rather than directly to the
Linux kernel.

From a.n.chippa at gmail.com  Thu Jan 29 12:30:05 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Thu, 29 Jan 2015 12:30:05 -0800
Subject: [ovs-discuss] conntrack with openvswitch
In-Reply-To: <CABFtFwnbMa4J2Y9cJJ66D9tEyOr_zr1kRskYe10kCO6MgHSjOg@mail.gmail.com>
References: <CABFtFwnbMa4J2Y9cJJ66D9tEyOr_zr1kRskYe10kCO6MgHSjOg@mail.gmail.com>
Message-ID: <CABFtFwnxQCqYc9zkRYLrDpQzRDLsR6XY7v9-nFw5z0pqVnoEcA@mail.gmail.com>

Hi James Puttitt,

Can you provide some instructions on how to install the openvswitch (with
conntrack)? Appreciate it.

Thanks,
Ashok


On Wed, Jan 28, 2015 at 4:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Where can I find a working version of conntrack+openvswitch code?
> And can someone please point me to a document explaining how to install
> conntrack with openvswitch? I have many questions on conntrack with
> openvswitch...
>
> Q1: What is the role of conntrackd in (conntrack+openvswitch)?
> Q2: Is the packet punted to ovs-vswitchd (along with ct_id?) and how does
> DPI fit into this?
> Q3: Where are app_id, conntrack_mark stored? In the conntrack flow?
> Q4: Where does the netfilter conntrack kernel module store the connection
> state? In the flow itself?
> Q5: When is openvswitch 2.4 coming out? Will it include conntrack and DPI?
> Q6: Will openvswitch 2.4 include documentation describing in details the
> various components and their interactions? This will be very helpful.
>
> Appreciate any responses.
>
> Thanks,
> Ashok
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/5c571984/attachment.html>

From shettyg at nicira.com  Thu Jan 29 12:33:30 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Thu, 29 Jan 2015 12:33:30 -0800
Subject: [ovs-discuss] conntrack with openvswitch
In-Reply-To: <CABFtFwnxQCqYc9zkRYLrDpQzRDLsR6XY7v9-nFw5z0pqVnoEcA@mail.gmail.com>
References: <CABFtFwnbMa4J2Y9cJJ66D9tEyOr_zr1kRskYe10kCO6MgHSjOg@mail.gmail.com>
 <CABFtFwnxQCqYc9zkRYLrDpQzRDLsR6XY7v9-nFw5z0pqVnoEcA@mail.gmail.com>
Message-ID: <CAHbON5oONTCrei9yCKdr6eKfgfOESt2zBRqSnNv-Xx=OU1KvSg@mail.gmail.com>

On Thu, Jan 29, 2015 at 12:30 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> Hi James Puttitt,
You got the name wrong :)

>
> Can you provide some instructions on how to install the openvswitch (with
> conntrack)? Appreciate it.
I don't think you will find any such instructions because no code has
been committed yet. It will likely happen in the next month or so.

>
> Thanks,
> Ashok
>
>
> On Wed, Jan 28, 2015 at 4:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>
>> Where can I find a working version of conntrack+openvswitch code?
>> And can someone please point me to a document explaining how to install
>> conntrack with openvswitch? I have many questions on conntrack with
>> openvswitch...
>>
>> Q1: What is the role of conntrackd in (conntrack+openvswitch)?
>> Q2: Is the packet punted to ovs-vswitchd (along with ct_id?) and how does
>> DPI fit into this?
>> Q3: Where are app_id, conntrack_mark stored? In the conntrack flow?
>> Q4: Where does the netfilter conntrack kernel module store the connection
>> state? In the flow itself?
>> Q5: When is openvswitch 2.4 coming out? Will it include conntrack and DPI?
>> Q6: Will openvswitch 2.4 include documentation describing in details the
>> various components and their interactions? This will be very helpful.
>>
>> Appreciate any responses.
>>
>> Thanks,
>> Ashok
>>
>>
>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From jpettit at nicira.com  Thu Jan 29 12:48:34 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Thu, 29 Jan 2015 12:48:34 -0800
Subject: [ovs-discuss] conntrack with openvswitch
In-Reply-To: <CABFtFwnbMa4J2Y9cJJ66D9tEyOr_zr1kRskYe10kCO6MgHSjOg@mail.gmail.com>
References: <CABFtFwnbMa4J2Y9cJJ66D9tEyOr_zr1kRskYe10kCO6MgHSjOg@mail.gmail.com>
Message-ID: <A3BB1190-47FC-40D3-AD16-E8E7ED17DD39@nicira.com>


> On Jan 28, 2015, at 4:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> 
> Where can I find a working version of conntrack+openvswitch code?

Here's the latest version that's checked in:

	https://github.com/justinpettit/ovs/tree/conntrack

> And can someone please point me to a document explaining how to install conntrack with openvswitch? I have many questions on conntrack with openvswitch... 
> 
> Q1: What is the role of conntrackd in (conntrack+openvswitch)?

conntrackd is a userspace utility that deals with the conntrack kernel module.  It should work fine.

> Q2: Is the packet punted to ovs-vswitchd (along with ct_id?) and how does DPI fit into this?

Yes, the packet will be sent to ovs-vswitchd.  There are some slides from a presentation I gave at the OVS 2014 Fall Conference that describe the architecture:

	http://openvswitch.org/support/ovscon2014/17/1030-conntrack_nat.pdf

> Q3: Where are app_id, conntrack_mark stored? In the conntrack flow?

The connmark is stored in the conntrack entry.

> Q4: Where does the netfilter conntrack kernel module store the connection state? In the flow itself?

The conntrack kernel module maintains the connection state itself.

> Q5: When is openvswitch 2.4 coming out? Will it include conntrack and DPI?

We're planning to send the conntrack code to the kernel maintainers next week or the week after.  We'll most likely branch for 2.4 once it's (hopefully) accepted upstream, and it will probably take three or four weeks to test it.  I doubt DPI will arrive in 2.4.

> Q6: Will openvswitch 2.4 include documentation describing in details the various components and their interactions?

The documentation will describe the API for interfacing with conntrack, but I don't think there will be an architectural description beyond something like the slides I mentioned earlier.

--Justin



From joestringer at nicira.com  Thu Jan 29 14:55:08 2015
From: joestringer at nicira.com (Joe Stringer)
Date: Thu, 29 Jan 2015 14:55:08 -0800
Subject: [ovs-discuss] dpif-netdev usage
In-Reply-To: <DUB127-W54A9008CC3FB1D1ACDE26BBF300@phx.gbl>
References: <DUB127-W41D860737BB9D26BFACDAFBF330@phx.gbl>
 <CANr6G5y8P_ew=M-_1nQNWeMAC3b=SBj4Mw3Tdu1LVC5hum-g=g@mail.gmail.com>
 <DUB127-W54A9008CC3FB1D1ACDE26BBF300@phx.gbl>
Message-ID: <CANr6G5yS3_z9kvo-L2optKzXzDgB_iGDqrrkc+v4u2pLFftP=A@mail.gmail.com>

On 29 January 2015 at 14:07, Federico Di Domenicantonio
<fededido91 at hotmail.it> wrote:
> <snip>
> So, can ovs-dpctl work with dpif-netdev?

No.

From bill.r.mich at gmail.com  Thu Jan 29 11:47:24 2015
From: bill.r.mich at gmail.com (Bill Michalowski)
Date: Thu, 29 Jan 2015 14:47:24 -0500
Subject: [ovs-discuss] Multicast Listener Discovery Snooping
Message-ID: <CAPeMZQwmM9pXqzbxQjtLxWtCs_oULqY3aGckf8GPit=RLrvRzA@mail.gmail.com>

Hello:

Is there a current time frame with regards to adding Multicast Listener
Discovery (MLD) snooping to Open vSwitch?

Thank you,
Bill
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/69a2a856/attachment-0001.html>

From fededido91 at hotmail.it  Thu Jan 29 14:07:11 2015
From: fededido91 at hotmail.it (Federico Di Domenicantonio)
Date: Thu, 29 Jan 2015 23:07:11 +0100
Subject: [ovs-discuss] dpif-netdev usage
In-Reply-To: <CANr6G5y8P_ew=M-_1nQNWeMAC3b=SBj4Mw3Tdu1LVC5hum-g=g@mail.gmail.com>
References: <DUB127-W41D860737BB9D26BFACDAFBF330@phx.gbl>,
 <CANr6G5y8P_ew=M-_1nQNWeMAC3b=SBj4Mw3Tdu1LVC5hum-g=g@mail.gmail.com>
Message-ID: <DUB127-W54A9008CC3FB1D1ACDE26BBF300@phx.gbl>

The datapath type of the bridge was already set to netdev, I was wondering whether ovs-dpctl is intended to be used with dpif-linux implementation only or not. 

For example, for testing purposes I need to put flows in the userspace datapath flow table, and, being unable to put them with "ovs-dpctl add-flow", I am forced to write a dedicated client which calls the functions defined in dpif.h, considering that the only commands provided by "ovs-appctl dpctl/*" are "dump-dps", "dump-flows", and "show". 

I know that the work could be done by ovs-ofctl, but I need to work at a lower level.

So, can ovs-dpctl work with dpif-netdev?

Thank you again for your kindness.

Federico Di Domenicantonio

> From: joestringer at nicira.com
> Date: Thu, 29 Jan 2015 10:31:33 -0800
> Subject: Re: [ovs-discuss] dpif-netdev usage
> To: fededido91 at hotmail.it
> CC: discuss at openvswitch.org
> 
> On 28 January 2015 at 15:38, Federico Di Domenicantonio
> <fededido91 at hotmail.it> wrote:
> > Hello,
> >
> > I'm trying to use the userspace-only implementation of Open vSwitch (with
> > dpif-netdev datapath). I followed the installation instructions provided,
> > but when I start the daemon I get the following error:
> >
> > |00001|dpif_linux|ERR|Generic Netlink family 'ovs_datapath' does not exist.
> > The Open vSwitch kernel module is probably not loaded.
> 
> This is showing that your bridge is trying to use the kernel datapath.
> Make sure you have set the datapath_type of the bridge to netdev.
> 
> 
> > The daemon then starts, I can add bridges with ovs-vsctl, but I fail to
> > operate on them with ovs-dpctl, getting the same error (even with a simple
> > command like "ovs-dpctl show"). I know that ovs-dpctl is supposed to work
> > with kernel datapath, but looking inside it I've noticed that it operates
> > with dpif functions, that can be implemented by either dpif-linux and
> > dpif-netdev.
> >
> > In case ovs-dpctl is intended to operate only with kernel datapath, is there
> > a tool to do the same with the userspace-only implementation?
> 
> ovs-appctl dpctl/*. I believe they are fairly similar to the ovs-dpctl
> commands, but they talk to ovs-vswitchd rather than directly to the
> Linux kernel.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150129/a8d5230c/attachment-0001.html>

From arkajit.ghosh at tcs.com  Thu Jan 29 22:50:00 2015
From: arkajit.ghosh at tcs.com (Arkajit Ghosh)
Date: Fri, 30 Jan 2015 12:20:00 +0530
Subject: [ovs-discuss] [ dpdk-pktgen execution issue ] Error: Didn't find
	any ports to use
Message-ID: <OFB3C9C421.470DBAFB-ON65257DDD.00247E08-65257DDD.00258980@tcs.com>

Hi,

Facing issue during the execution of dpdk-pktgen. Please find the below details:

Setup details:

> Executing in Guest machine (VM).
> Having 2 logical core.
>Configured 2048 km hugepages
>Number of processor: 2

Scenario to verify: Generate some packets by dpdk-pktgen and then one dpdk-ports will work as a RX end and other one will be as TX end to handle the incoming packets and do the required action.

dpdk-Ports creation: Here is the snapshot

root at tcs-VirtualBox:/usr/src/pktgen-DPDK/dpdk/examples/pktgen# /usr/src/ovs/utilities/ovs-vsctl show
c2245b31-3ca1-49c6-b4c5-1041be5b9dc4
    Bridge "ovsbr0"
        Port "dpdkr2"
            Interface "dpdkr2"
                type: dpdk
                options: {port="2"}
        Port "ovsbr0"
            Interface "ovsbr0"
                type: internal
        Port "dpdkr1"
            Interface "dpdkr1"
                type: dpdk
                options: {port="1"}
root at tcs-VirtualBox:/usr/src/pktgen-DPDK/dpdk/examples/pktgen# 

Added the Flow Entrys:

   # Add flows between port 1 (dpdk0) to port 2 (dpdk1)

   ./ovs-ofctl add-flow ovsbr0 in_port=1,action=output:2
   ./ovs-ofctl add-flow ovsbr0 in_port=2,action=output:1


dpdk-pktgen execution error:

 Pktgen created by: Keith Wiles -- >>> Powered by Intel® DPDK <<<
-----------------------
EAL: Detected lcore 0 as core 0 on socket 0
EAL: Detected lcore 1 as core 1 on socket 0
EAL: Support maximum 64 logical core(s) by configuration.
EAL: Detected 2 lcore(s)
EAL: Auto-detected process type: PRIMARY
EAL:   cannot open VFIO container, error 2 (No such file or directory)
EAL: VFIO support could not be initialized
EAL: Setting up memory...
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f282c400000 (size = 0x200000)
EAL: Ask a virtual area of 0x400000 bytes
EAL: Virtual area found at 0x7f282be00000 (size = 0x400000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f282ba00000 (size = 0x200000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f282b600000 (size = 0x200000)
EAL: Ask a virtual area of 0x400000 bytes
EAL: Virtual area found at 0x7f282b000000 (size = 0x400000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f282ac00000 (size = 0x200000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f282a800000 (size = 0x200000)
EAL: Ask a virtual area of 0x400000 bytes
EAL: Virtual area found at 0x7f282a200000 (size = 0x400000)
EAL: Ask a virtual area of 0x800000 bytes
EAL: Virtual area found at 0x7f2829800000 (size = 0x800000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f2829400000 (size = 0x200000)
EAL: Ask a virtual area of 0x1e00000 bytes
EAL: Virtual area found at 0x7f2827400000 (size = 0x1e00000)
EAL: Ask a virtual area of 0xc00000 bytes
EAL: Virtual area found at 0x7f2826600000 (size = 0xc00000)
EAL: Ask a virtual area of 0x1000000 bytes
EAL: Virtual area found at 0x7f2825400000 (size = 0x1000000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f2825000000 (size = 0x200000)
EAL: Ask a virtual area of 0xc00000 bytes
EAL: Virtual area found at 0x7f2824200000 (size = 0xc00000)
EAL: Ask a virtual area of 0xe00000 bytes
EAL: Virtual area found at 0x7f2823200000 (size = 0xe00000)
EAL: Ask a virtual area of 0x200000 bytes
EAL: Virtual area found at 0x7f2822e00000 (size = 0x200000)
EAL: Requesting 60 pages of size 2MB from socket 0
EAL: TSC frequency is ~2979222 KHz
EAL: WARNING: cpu flags constant_tsc=yes nonstop_tsc=no -> using unreliable clock cycles !
EAL: Master core 1 is ready (tid=2d914840)
0.1              = lcores(rx 0000000000000001, tx 0000000000000001) ports(rx 0000000000000002, tx 0000000000000002)
1.2              = lcores(rx 0000000000000002, tx 0000000000000002) ports(rx 0000000000000004, tx 0000000000000004)

Lua 5.2.3  Copyright (C) 1994-2013 Lua.org, PUC-Rio
>>> Packet Burst 32, RX Desc 512, TX Desc 512, mbufs/port 4096, mbuf cache 512
!PANIC!: *** Did not find any ports to use ***
PANIC in pktgen_config_ports():
*** Did not find any ports to use ***6: [./app/build/pktgen() [0x414c73]]
5: [/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf5) [0x7f282c7faec5]]
4: [./app/build/pktgen(main+0x470) [0x414750]]
3: [./app/build/pktgen(pktgen_config_ports+0x1007) [0x42b8c7]]
2: [./app/build/pktgen(__rte_panic+0xc1) [0x414251]]
1: [./app/build/pktgen(rte_dump_stack+0x18) [0x4a7cd8]]
./doit.sh: line 24:  3613 Aborted                 (core dumped) ./app/build/pktgen -c 0x2 -n 2 --proc-type auto -- -m "0.1,1.2"

###############################################

Please suggest how to proceed and also feel free to do mention if I missed anything. 

Thanks & Regards
Arkajit Ghosh
Mailto: arkajit.ghosh at tcs.com
Website: http://www.tcs.com
____________________________________________
Experience certainty.	IT Services
Business Solutions
Consulting
____________________________________________
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/86675d0f/attachment.html>

From aragusa at grnoc.iu.edu  Fri Jan 30 07:00:25 2015
From: aragusa at grnoc.iu.edu (Andrew Ragusa)
Date: Fri, 30 Jan 2015 10:00:25 -0500
Subject: [ovs-discuss] Using OVS to replicate a physical network
Message-ID: <54CB9C89.4020308@grnoc.iu.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Everyone

I'm trying to use MiniNet + OVS to replicate a physical openflow
network.  I've run into a few stumbling blocks, specifically with the
re-use of interface names.

Has anyone tried this before?  I've made a few modifications and I'm
close to having it working, but if anyone has some guidance I would
appreciate it.

Thanks
A.J. Ragusa
Software Engineer - Global Research Network Operations Center @
Indiana University
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.19 (Darwin)
Comment: GPGTools - http://gpgtools.org

iEYEARECAAYFAlTLnIgACgkQb9t+xjErh3QowQCfXzOsOOft+yrW0ahbJwGcupcY
9NgAoORKi9rF8olBPQyb3o0DLXkoGuwm
=g9Vg
-----END PGP SIGNATURE-----

From gm2391 at att.com  Fri Jan 30 07:53:11 2015
From: gm2391 at att.com (MCGRATH, GIL)
Date: Fri, 30 Jan 2015 15:53:11 +0000
Subject: [ovs-discuss] Tunneling and vhost support for dpdk
In-Reply-To: <6FF294DC-8EEB-4542-99D2-E1184463ED92@nicira.com>
References: <75F26445-256F-4335-B0FE-4E87F2A079D3@att.com>
 <20141122184218.GA12309@nicira.com>
 <6FF294DC-8EEB-4542-99D2-E1184463ED92@nicira.com>
Message-ID: <1263C341-A91F-45F1-8AE2-CCAA0334DD36@att.com>

Checking again on whether support for VhostNet is integrated in OVS DPDK 
yet - if so I assume I can just use the version from trunk in github.



On 11/22/14, 6:55 PM, "Justin Pettit" <jpettit at nicira.com> wrote:

>
>> On Nov 22, 2014, at 10:42 AM, Ben Pfaff <blp at nicira.com> wrote:
>> 
>> On Sat, Nov 22, 2014 at 03:00:48PM +0000, MCGRATH, GIL wrote:
>>> Has tunneling support and vhost support for dpdk been integrated yet?
>>> I assume the tunneling includes vxlan?
>> 
>> Yes, see README-native-tunneling.md.
>
>Just to be clear, though, I don't believe vhost support is integrated 
>yet.  We spoke with Intel at the OVS Conference this week, and they're in 
>the process of re-spinning the patches based on feedback they received.
>
>--Justin
>
>

From mittal.flora at gmail.com  Fri Jan 30 02:34:46 2015
From: mittal.flora at gmail.com (Flora Mittal)
Date: Fri, 30 Jan 2015 16:04:46 +0530
Subject: [ovs-discuss] How to create multiple interfaces in a port
Message-ID: <CAP5z0CA1fm-EeFEZ5WPcMfjigYFjWcgRm4=VTDwej+tkJ66m3g@mail.gmail.com>

Hi All,

      Can anyone please tell us the ovs-vsctl command to have multiple
interfaces in a port.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/f9734e9b/attachment.html>

From shettyg at nicira.com  Fri Jan 30 09:54:54 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Fri, 30 Jan 2015 09:54:54 -0800
Subject: [ovs-discuss] How to create multiple interfaces in a port
In-Reply-To: <CAP5z0CA1fm-EeFEZ5WPcMfjigYFjWcgRm4=VTDwej+tkJ66m3g@mail.gmail.com>
References: <CAP5z0CA1fm-EeFEZ5WPcMfjigYFjWcgRm4=VTDwej+tkJ66m3g@mail.gmail.com>
Message-ID: <CAHbON5p2yLZ2gwPVmxtBy22q3RrdHSZKp2xgC-Vuncb=Uw6hFw@mail.gmail.com>

On Fri, Jan 30, 2015 at 2:34 AM, Flora Mittal <mittal.flora at gmail.com> wrote:
> Hi All,
>
>       Can anyone please tell us the ovs-vsctl command to have multiple
> interfaces in a port.

You usually add multiple interfaces to a port for bonding. If that is
what you wanted to do, then something like this:
ovs-vsctl -v add-bond br1 bond0 p0 p1 bond_mode=active-backup

More information at the manpages of ovs-vsctl and ovs-vswitchd.conf.db

>
> Thanks.
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>

From blp at nicira.com  Fri Jan 30 12:19:50 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 30 Jan 2015 12:19:50 -0800
Subject: [ovs-discuss] [ dpdk-pktgen execution issue ] Error: Didn't
 find any ports to use
In-Reply-To: <OFB3C9C421.470DBAFB-ON65257DDD.00247E08-65257DDD.00258980@tcs.com>
References: <OFB3C9C421.470DBAFB-ON65257DDD.00247E08-65257DDD.00258980@tcs.com>
Message-ID: <20150130201950.GB18725@nicira.com>

On Fri, Jan 30, 2015 at 12:20:00PM +0530, Arkajit Ghosh wrote:
> Facing issue during the execution of dpdk-pktgen. Please find the below details:

Are you sure that this is an Open vSwitch issue?  The OVS source tree
doesn't contain the term "pktgen" anywhere, so I don't think that
dpdk-pktgen is part of OVS.

From blp at nicira.com  Fri Jan 30 12:36:19 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 30 Jan 2015 12:36:19 -0800
Subject: [ovs-discuss] Multicast Listener Discovery Snooping
In-Reply-To: <CAPeMZQwmM9pXqzbxQjtLxWtCs_oULqY3aGckf8GPit=RLrvRzA@mail.gmail.com>
References: <CAPeMZQwmM9pXqzbxQjtLxWtCs_oULqY3aGckf8GPit=RLrvRzA@mail.gmail.com>
Message-ID: <20150130203619.GF18725@nicira.com>

On Thu, Jan 29, 2015 at 02:47:24PM -0500, Bill Michalowski wrote:
> Is there a current time frame with regards to adding Multicast Listener
> Discovery (MLD) snooping to Open vSwitch?

I am not aware of anyone working on this.

From blp at nicira.com  Fri Jan 30 13:37:39 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 30 Jan 2015 13:37:39 -0800
Subject: [ovs-discuss] Configure sampling rate
In-Reply-To: <20150121172933.GA21835@nicira.com>
References: <BLU181-W5AAB65D58CD0811426EBEAD480@phx.gbl>
 <20150121172933.GA21835@nicira.com>
Message-ID: <20150130213739.GN18725@nicira.com>

On Wed, Jan 21, 2015 at 09:29:33AM -0800, Ben Pfaff wrote:
> On Wed, Jan 21, 2015 at 11:50:10PM +0800, K 華 wrote:
> > I tried to change sampling rate in sflow table by sending JSON to OVSDB.
> > I found that sampling rate would be configured after sending JSON to OVSDB, 
> > but it did not work immediately and did work after no packet passing.
> > 
> > How to make sampling rate work after sending JSON to OVSDB with no
> > delay?Or what is the time period while the change go into effect?
> 
> It should take effect immediately, but I think I see a bug.
> 
> Can you try this patch?

I formally submitted this patch for review:
        http://openvswitch.org/pipermail/dev/2015-January/050856.html

From a.n.chippa at gmail.com  Fri Jan 30 14:22:55 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 14:22:55 -0800
Subject: [ovs-discuss] patch
Message-ID: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>

Hi Ben,

Would it be possible to get a patch for the bug I reported, where only one
flow is being shown (with ovs-ofctl dump-flows...) when there are actually
more than 1 flows?

Please let me know how I can get the fix? Should I pull a master copy of
openvswitch or is there a simpler way of getting the patch?

Appreciate your help.

RELATED QUESTION:

Is there a cli command to clear flows in a table? ovs-ofctl del-flow
<switch>   does not work!!

Thanks,
Ashok
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/5f03eb66/attachment.html>

From blp at nicira.com  Fri Jan 30 14:29:17 2015
From: blp at nicira.com (Ben Pfaff)
Date: Fri, 30 Jan 2015 14:29:17 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
Message-ID: <20150130222917.GA8476@nicira.com>

On Fri, Jan 30, 2015 at 02:22:55PM -0800, Ashok Chippa wrote:
> Would it be possible to get a patch for the bug I reported, where only one
> flow is being shown (with ovs-ofctl dump-flows...) when there are actually
> more than 1 flows?

The patch is on master.  I'll append it to this email also.

> Is there a cli command to clear flows in a table? ovs-ofctl del-flow
> <switch>   does not work!!

That should work so what do you mean?

--8<--------------------------cut here-------------------------->8--

From: Ben Pfaff <blp at nicira.com>
Date: Tue, 6 Jan 2015 09:27:32 -0800
Subject: [PATCH] ofproto: Don't count hidden rules in table stats.

The hidden rules created by in-band control and fail-open should not be
included in the table stats reported via OpenFlow.  I seem to recall that
this was done correctly in some previous version but it has broken since
then.  This commit fixes the problem and adds a test that should make it
harder to break again in the future.

Reported-by: Ashok Chippa <a.n.chippa at gmail.com>
Signed-off-by: Ben Pfaff <blp at nicira.com>
Acked-by: Jarno Rajahalme <jrajahalme at nicira.com>
---
 ofproto/connmgr.c   | 19 ++++++++++++++++++-
 ofproto/connmgr.h   |  4 +++-
 ofproto/fail-open.c | 13 ++++++++++++-
 ofproto/fail-open.h |  4 +++-
 ofproto/in-band.c   | 10 +++++++++-
 ofproto/in-band.h   |  4 +++-
 ofproto/ofproto.c   |  6 +++++-
 tests/ofproto.at    | 52 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 8 files changed, 105 insertions(+), 7 deletions(-)

diff --git a/ofproto/connmgr.c b/ofproto/connmgr.c
index 08abe1e..3d69122 100644
--- a/ofproto/connmgr.c
+++ b/ofproto/connmgr.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2009, 2010, 2011, 2012, 2013, 2014 Nicira, Inc.
+ * Copyright (c) 2009, 2010, 2011, 2012, 2013, 2014, 2015 Nicira, Inc.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -1980,6 +1980,23 @@ connmgr_flushed(struct connmgr *mgr)
         ofpbuf_uninit(&ofpacts);
     }
 }
+
+/* Returns the number of hidden rules created by the in-band and fail-open
+ * implementations in table 0.  (Subtracting this count from the number of
+ * rules in the table 0 classifier, as returned by classifier_count(), yields
+ * the number of flows that OVS should report via OpenFlow for table 0.) */
+int
+connmgr_count_hidden_rules(const struct connmgr *mgr)
+{
+    int n_hidden = 0;
+    if (mgr->in_band) {
+        n_hidden += in_band_count_rules(mgr->in_band);
+    }
+    if (mgr->fail_open) {
+        n_hidden += fail_open_count_rules(mgr->fail_open);
+    }
+    return n_hidden;
+}
 

 /* Creates a new ofservice for 'target' in 'mgr'.  Returns 0 if successful,
  * otherwise a positive errno value.
diff --git a/ofproto/connmgr.h b/ofproto/connmgr.h
index c0f7c35..dd1a027 100644
--- a/ofproto/connmgr.h
+++ b/ofproto/connmgr.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2009, 2010, 2011, 2012, 2013, 2014 Nicira, Inc.
+ * Copyright (c) 2009, 2010, 2011, 2012, 2013, 2014, 2015 Nicira, Inc.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -193,6 +193,8 @@ bool connmgr_has_in_band(struct connmgr *);
 /* Fail-open and in-band implementation. */
 void connmgr_flushed(struct connmgr *);
 
+int connmgr_count_hidden_rules(const struct connmgr *);
+
 /* A flow monitor managed by NXST_FLOW_MONITOR and related requests. */
 struct ofmonitor {
     struct ofconn *ofconn;      /* Owning 'ofconn'. */
diff --git a/ofproto/fail-open.c b/ofproto/fail-open.c
index ecdba44..75c7d1c 100644
--- a/ofproto/fail-open.c
+++ b/ofproto/fail-open.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008, 2009, 2010, 2011, 2012, 2013 Nicira, Inc.
+ * Copyright (c) 2008, 2009, 2010, 2011, 2012, 2013, 2015 Nicira, Inc.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -76,6 +76,7 @@ struct fail_open {
     int last_disconn_secs;
     long long int next_bogus_packet_in;
     struct rconn_packet_counter *bogus_packet_counter;
+    bool fail_open_active;
 };
 
 static void fail_open_recover(struct fail_open *);
@@ -234,6 +235,15 @@ fail_open_flushed(struct fail_open *fo)
 
         ofpbuf_uninit(&ofpacts);
     }
+    fo->fail_open_active = open;
+}
+
+/* Returns the number of fail-open rules currently installed in the flow
+ * table. */
+int
+fail_open_count_rules(const struct fail_open *fo)
+{
+    return fo->fail_open_active != 0;
 }
 
 /* Creates and returns a new struct fail_open for 'ofproto' and 'mgr'. */
@@ -246,6 +256,7 @@ fail_open_create(struct ofproto *ofproto, struct connmgr *mgr)
     fo->last_disconn_secs = 0;
     fo->next_bogus_packet_in = LLONG_MAX;
     fo->bogus_packet_counter = rconn_packet_counter_create();
+    fo->fail_open_active = false;
     return fo;
 }
 
diff --git a/ofproto/fail-open.h b/ofproto/fail-open.h
index 725b82d..4056b3e 100644
--- a/ofproto/fail-open.h
+++ b/ofproto/fail-open.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008, 2009, 2010, 2011, 2013 Nicira, Inc.
+ * Copyright (c) 2008, 2009, 2010, 2011, 2013, 2015 Nicira, Inc.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -47,4 +47,6 @@ void fail_open_run(struct fail_open *);
 void fail_open_maybe_recover(struct fail_open *) OVS_EXCLUDED(ofproto_mutex);
 void fail_open_flushed(struct fail_open *) OVS_EXCLUDED(ofproto_mutex);
 
+int fail_open_count_rules(const struct fail_open *);
+
 #endif /* fail-open.h */
diff --git a/ofproto/in-band.c b/ofproto/in-band.c
index bde893a..01950fa 100644
--- a/ofproto/in-band.c
+++ b/ofproto/in-band.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008, 2009, 2010, 2011, 2012, 2013, 2014 Nicira, Inc.
+ * Copyright (c) 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015 Nicira, Inc.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -235,6 +235,14 @@ in_band_must_output_to_local_port(const struct flow *flow)
             && flow->tp_dst == htons(DHCP_CLIENT_PORT));
 }
 
+/* Returns the number of in-band rules currently installed in the flow
+ * table. */
+int
+in_band_count_rules(const struct in_band *ib)
+{
+    return hmap_count(&ib->rules);
+}
+
 static void
 add_rule(struct in_band *ib, const struct match *match, int priority)
 {
diff --git a/ofproto/in-band.h b/ofproto/in-band.h
index ad16dc2..6e0585a 100644
--- a/ofproto/in-band.h
+++ b/ofproto/in-band.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008, 2009, 2010, 2011, 2013 Nicira, Inc.
+ * Copyright (c) 2008, 2009, 2010, 2011, 2013, 2015 Nicira, Inc.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -42,4 +42,6 @@ void in_band_wait(struct in_band *);
 
 bool in_band_must_output_to_local_port(const struct flow *);
 
+int in_band_count_rules(const struct in_band *);
+
 #endif /* in-band.h */
diff --git a/ofproto/ofproto.c b/ofproto/ofproto.c
index 6d78fe4..34defce 100644
--- a/ofproto/ofproto.c
+++ b/ofproto/ofproto.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2009, 2010, 2011, 2012, 2013, 2014, 2015 Nicira, Inc.
+ * Copyright (c) 2009-2015 Nicira, Inc.
  * Copyright (c) 2010 Jean Tourrilhes - HP-Labs.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
@@ -2963,6 +2963,10 @@ query_tables(struct ofproto *ofproto,
 
             s->table_id = i;
             s->active_count = classifier_count(cls);
+            if (i == 0) {
+                s->active_count -= connmgr_count_hidden_rules(
+                    ofproto->connmgr);
+            }
         }
     } else {
         stats = NULL;
diff --git a/tests/ofproto.at b/tests/ofproto.at
index 8f4e25e..2f5a9dd 100644
--- a/tests/ofproto.at
+++ b/tests/ofproto.at
@@ -1306,6 +1306,58 @@ AT_CHECK([ovs-ofctl dump-tables br0], [0], [expout])
 OVS_VSWITCHD_STOP
 AT_CLEANUP
 
+dnl In-band and fail-open add "hidden rules" to table 0.  These rules shouldn't
+dnl be visible to OpenFlow.  This test checks that "dump-flows" and
+dnl "dump-tables" don't make them visible.
+AT_SETUP([ofproto - hidden rules not in table stats])
+# Use an IP address for a controller that won't actually exist: we
+# want to create in-band rules but we do not want to actually connect
+# to a controller (because that could mess about with our test).  The
+# Class E range 240.0.0.0 - 255.255.255.255 seems like a good choice.
+OVS_VSWITCHD_START([set-controller br0 tcp:240.0.0.1:6653])
+for i in 1 2 3 4 5; do ovs-appctl time/warp 1000; done
+
+# Check that no hidden flows are visible in OpenFlow.
+AT_CHECK([ovs-ofctl dump-flows br0], [0], [NXST_FLOW reply (xid=0x4):
+])
+
+# Check that some hidden flows related to 240.0.0.1 are actually in table 0.
+#
+# We discard flows that mention table_id because we only want table 0 flows,
+# which in OVS is implied by the absence of a table_id.
+AT_CHECK([ovs-appctl bridge/dump-flows br0], [0], [stdout])
+AT_CHECK([test `grep '240\.0\.0\.1' stdout | grep -v table_id= | wc -l` -gt 0])
+
+# Check that dump-tables doesn't count the hidden flows.
+(printf "OFPST_TABLE reply (xid=0x2):"
+ x=0
+ name=classifier
+ while test $x -lt 254; do
+   printf "
+  table %d (\"%s\"):
+    active=0, lookup=0, matched=0
+    max_entries=1000000
+    matching:
+      in_port: exact match or wildcard
+      eth_src: exact match or wildcard
+      eth_dst: exact match or wildcard
+      eth_type: exact match or wildcard
+      vlan_vid: exact match or wildcard
+      vlan_pcp: exact match or wildcard
+      ip_src: exact match or wildcard
+      ip_dst: exact match or wildcard
+      nw_proto: exact match or wildcard
+      nw_tos: exact match or wildcard
+      tcp_src: exact match or wildcard
+      tcp_dst: exact match or wildcard
+" $x $name
+   x=`expr $x + 1`
+   name=table$x
+ done) > expout
+AT_CHECK([ovs-ofctl dump-tables br0], [0], [expout])
+OVS_VSWITCHD_STOP(["/cannot find route for controller/d"])
+AT_CLEANUP
+
 AT_SETUP([ofproto - flow table configuration (OpenFlow 1.2)])
 OVS_VSWITCHD_START
 # Check the default configuration.
-- 
2.1.3


From jpettit at nicira.com  Fri Jan 30 14:51:24 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Fri, 30 Jan 2015 14:51:24 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
Message-ID: <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>


> On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> 
> Is there a cli command to clear flows in a table? ovs-ofctl del-flow <switch>   does not work!! 

As Ben mentioned, this should work.  However, the command is "del-flows", not "del-flow".

--Justin



From kevin.traynor at intel.com  Fri Jan 30 15:38:02 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Fri, 30 Jan 2015 23:38:02 +0000
Subject: [ovs-discuss] [ dpdk-pktgen execution issue ] Error: Didn't
 find any ports to use
In-Reply-To: <20150130201950.GB18725@nicira.com>
References: <OFB3C9C421.470DBAFB-ON65257DDD.00247E08-65257DDD.00258980@tcs.com>
 <20150130201950.GB18725@nicira.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F7306855D4@IRSMSX104.ger.corp.intel.com>

> -----Original Message-----
> From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Ben Pfaff
> Sent: Friday, January 30, 2015 8:20 PM
> To: Arkajit Ghosh
> Cc: discuss
> Subject: Re: [ovs-discuss] [ dpdk-pktgen execution issue ] Error: Didn't find any ports to use
> 
> On Fri, Jan 30, 2015 at 12:20:00PM +0530, Arkajit Ghosh wrote:
> > Facing issue during the execution of dpdk-pktgen. Please find the below details:
> 
> Are you sure that this is an Open vSwitch issue?  The OVS source tree
> doesn't contain the term "pktgen" anywhere, so I don't think that
> dpdk-pktgen is part of OVS.

Arkajit, dpdk-pktgen is traffic generator based on DPDK. It's completely independent of OVS. 
You should post questions about it on the DPDK mailing list http://dpdk.org/ml

> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss

From kevin.traynor at intel.com  Fri Jan 30 15:49:49 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Fri, 30 Jan 2015 23:49:49 +0000
Subject: [ovs-discuss] Status of OVS + dpdk + documentation
In-Reply-To: <20150128170325.GA6946@windriver.com>
References: <20150127225448.GA2971@windriver.com>
 <CAHbON5qrsRV7rxY7dJ8RD6dawAqxENciaW8JRZd1-p5zFdzRLw@mail.gmail.com>
 <20150128170325.GA6946@windriver.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F7306855FF@IRSMSX104.ger.corp.intel.com>


> -----Original Message-----
> From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of Amy Fong
> Sent: Wednesday, January 28, 2015 5:03 PM
> To: Gurucharan Shetty
> Cc: discuss
> Subject: Re: [ovs-discuss] Status of OVS + dpdk + documentation
> 
> On Wed, Jan 28, 2015 at 08:30:08AM -0800, Gurucharan Shetty wrote:
> > On Tue, Jan 27, 2015 at 2:54 PM, Amy Fong <amy.fong at windriver.com> wrote:
> > > Hi,
> > >
> > > I'm trying to setup a qemu/libvirt guest using dpdk and ovs. I've been
> > > following the INSTALL.DPDK.md
> > >From my understanding, OVS DPDK currently does not support connecting
> > to a guest.
> 
> Thanks for your reply.
> 
> In that case, what can I do to explore the functionality at the moment?

If you have a look at this post, it should give you something you can try out
http://www.openvswitch.org/pipermail/dev/2015-January/050278.html

> 
> Thanks!
> Amy
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss

From kevin.traynor at intel.com  Fri Jan 30 15:57:19 2015
From: kevin.traynor at intel.com (Traynor, Kevin)
Date: Fri, 30 Jan 2015 23:57:19 +0000
Subject: [ovs-discuss] Tunneling and vhost support for dpdk
In-Reply-To: <1263C341-A91F-45F1-8AE2-CCAA0334DD36@att.com>
References: <75F26445-256F-4335-B0FE-4E87F2A079D3@att.com>
 <20141122184218.GA12309@nicira.com>
 <6FF294DC-8EEB-4542-99D2-E1184463ED92@nicira.com>
 <1263C341-A91F-45F1-8AE2-CCAA0334DD36@att.com>
Message-ID: <BC0FEEC7D7650749874CEC11314A88F730685622@IRSMSX104.ger.corp.intel.com>


> -----Original Message-----
> From: discuss [mailto:discuss-bounces at openvswitch.org] On Behalf Of MCGRATH, GIL
> Sent: Friday, January 30, 2015 3:53 PM
> To: Justin Pettit; Ben Pfaff
> Cc: discuss at openvswitch.org
> Subject: Re: [ovs-discuss] Tunneling and vhost support for dpdk
> 
> Checking again on whether support for VhostNet is integrated in OVS DPDK
> yet - if so I assume I can just use the version from trunk in github.

It's not upstreamed into OVS yet. The model now will be slightly different as a 
vhost library now exists in DPDK 1.8. If you want to try it out have a look at 
this post
http://www.openvswitch.org/pipermail/dev/2015-January/050278.html

> 
> 
> 
> On 11/22/14, 6:55 PM, "Justin Pettit" <jpettit at nicira.com> wrote:
> 
> >
> >> On Nov 22, 2014, at 10:42 AM, Ben Pfaff <blp at nicira.com> wrote:
> >>
> >> On Sat, Nov 22, 2014 at 03:00:48PM +0000, MCGRATH, GIL wrote:
> >>> Has tunneling support and vhost support for dpdk been integrated yet?
> >>> I assume the tunneling includes vxlan?
> >>
> >> Yes, see README-native-tunneling.md.
> >
> >Just to be clear, though, I don't believe vhost support is integrated
> >yet.  We spoke with Intel at the OVS Conference this week, and they're in
> >the process of re-spinning the patches based on feedback they received.
> >
> >--Justin
> >
> >
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss

From a.n.chippa at gmail.com  Fri Jan 30 17:01:10 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 17:01:10 -0800
Subject: [ovs-discuss] ovs-docker question
Message-ID: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>

Hi Gurucharan,

Any idea how to work around this issue:

root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a
1.1.1.1
RTNETLINK answers: File exists
RTNETLINK answers: File exists

I reinstalled the openvswitch and recreated the containers and tried
ovs-docker again and ran into this... Any idea to clear the old stuff and
start over?

Appreciate your help.

Thanks,
Ashok
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/fa5527bd/attachment.html>

From a.n.chippa at gmail.com  Fri Jan 30 17:05:57 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 17:05:57 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
 <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
Message-ID: <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>

Sorry, I meant del-flows... I mistyped it... del-flows does not work!!!

Out of 11 flows, it deleted 1 flow, and repeated commands to del-flows did
not have any effect!!!


On Fri, Jan 30, 2015 at 2:51 PM, Justin Pettit <jpettit at nicira.com> wrote:

>
> > On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> >
> > Is there a cli command to clear flows in a table? ovs-ofctl del-flow
> <switch>   does not work!!
>
> As Ben mentioned, this should work.  However, the command is "del-flows",
> not "del-flow".
>
> --Justin
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/1a5bc12a/attachment-0001.html>

From a.n.chippa at gmail.com  Fri Jan 30 17:13:42 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 17:13:42 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
 <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
 <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
Message-ID: <CABFtFwm0eDWF84+B0j6iBMO=g_m9HJ04p05dwXK9tJk=fCVTeA@mail.gmail.com>

root at ashok-vb:/usr/local/bin# ovs-ofctl del-flows br-int
root at ashok-vb:/usr/local/bin# ovs-ofctl dump-tables br-int
OFPST_TABLE reply (xid=0x2): 254 tables
  0: classifier: wild=0x3fffff, max=1000000, active=10
               lookup=0, matched=0
  1: table1  : wild=0x3fffff, max=1000000, active=0

Although it seems the flows have been deleted:

root at ashok-vb:/usr/local/bin# ovs-ofctl dump-flows br-int
NXST_FLOW reply (xid=0x4):


So again an issue with dump-tables command...?

It would be useful to have: ovs-ofctl dump-tables br-int tableX

Also, dumping all the tables (with 0 active flows) is not very useful... It
would be nice and short if you dumped only tables with >0 flows.

Thanks,
Ashok

On Fri, Jan 30, 2015 at 5:05 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Sorry, I meant del-flows... I mistyped it... del-flows does not work!!!
>
> Out of 11 flows, it deleted 1 flow, and repeated commands to del-flows did
> not have any effect!!!
>
>
> On Fri, Jan 30, 2015 at 2:51 PM, Justin Pettit <jpettit at nicira.com> wrote:
>
>>
>> > On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>> >
>> > Is there a cli command to clear flows in a table? ovs-ofctl del-flow
>> <switch>   does not work!!
>>
>> As Ben mentioned, this should work.  However, the command is "del-flows",
>> not "del-flow".
>>
>> --Justin
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/56d6b415/attachment.html>

From jpettit at nicira.com  Fri Jan 30 17:25:02 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Fri, 30 Jan 2015 17:25:02 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
 <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
 <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
Message-ID: <C7F997E6-4AC1-4136-A0E9-AC0F8991B639@nicira.com>

Can you provide an example from the shell output?  I've never seen that. 

--Justin


> On Jan 30, 2015, at 5:05 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> 
> Sorry, I meant del-flows... I mistyped it... del-flows does not work!!!
> 
> Out of 11 flows, it deleted 1 flow, and repeated commands to del-flows did not have any effect!!! 
> 
> 
>> On Fri, Jan 30, 2015 at 2:51 PM, Justin Pettit <jpettit at nicira.com> wrote:
>> 
>> > On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>> >
>> > Is there a cli command to clear flows in a table? ovs-ofctl del-flow <switch>   does not work!!
>> 
>> As Ben mentioned, this should work.  However, the command is "del-flows", not "del-flow".
>> 
>> --Justin
>> 
>> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/785da4b2/attachment.html>

From a.n.chippa at gmail.com  Fri Jan 30 17:26:04 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 17:26:04 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
Message-ID: <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>

ovs-docker seems to be a bit buggy... after creating/deleting/creating
containers, I got into a situation where a stray port on the openvswitch
remains...

root at ashok-vb:~# ifconfig

c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr ca:40:32:35:a6:8c
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
...

How do I delete c7ef9934c0e44? This was previously created by ovs-docker
command...

On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Hi Gurucharan,
>
> Any idea how to work around this issue:
>
> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> 46524ba3123a 1.1.1.1
> RTNETLINK answers: File exists
> RTNETLINK answers: File exists
>
> I reinstalled the openvswitch and recreated the containers and tried
> ovs-docker again and ran into this... Any idea to clear the old stuff and
> start over?
>
> Appreciate your help.
>
> Thanks,
> Ashok
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/5d8fa55b/attachment.html>

From jpettit at nicira.com  Fri Jan 30 17:27:35 2015
From: jpettit at nicira.com (Justin Pettit)
Date: Fri, 30 Jan 2015 17:27:35 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <CABFtFwm0eDWF84+B0j6iBMO=g_m9HJ04p05dwXK9tJk=fCVTeA@mail.gmail.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
 <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
 <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
 <CABFtFwm0eDWF84+B0j6iBMO=g_m9HJ04p05dwXK9tJk=fCVTeA@mail.gmail.com>
Message-ID: <A3C6A61F-F2CA-4BE0-84F8-ABEC38C94073@nicira.com>

Look in the FAQ about "hidden" flows. 

--Justin


> On Jan 30, 2015, at 5:13 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> 
> root at ashok-vb:/usr/local/bin# ovs-ofctl del-flows br-int
> root at ashok-vb:/usr/local/bin# ovs-ofctl dump-tables br-int
> OFPST_TABLE reply (xid=0x2): 254 tables
>   0: classifier: wild=0x3fffff, max=1000000, active=10
>                lookup=0, matched=0
>   1: table1  : wild=0x3fffff, max=1000000, active=0
> 
> Although it seems the flows have been deleted:
> 
> root at ashok-vb:/usr/local/bin# ovs-ofctl dump-flows br-int
> NXST_FLOW reply (xid=0x4):
> 
> 
> So again an issue with dump-tables command...?
> 
> It would be useful to have: ovs-ofctl dump-tables br-int tableX
> 
> Also, dumping all the tables (with 0 active flows) is not very useful... It would be nice and short if you dumped only tables with >0 flows.
> 
> Thanks,
> Ashok
> 
>> On Fri, Jan 30, 2015 at 5:05 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>> Sorry, I meant del-flows... I mistyped it... del-flows does not work!!!
>> 
>> Out of 11 flows, it deleted 1 flow, and repeated commands to del-flows did not have any effect!!! 
>> 
>> 
>>> On Fri, Jan 30, 2015 at 2:51 PM, Justin Pettit <jpettit at nicira.com> wrote:
>>> 
>>> > On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>> >
>>> > Is there a cli command to clear flows in a table? ovs-ofctl del-flow <switch>   does not work!!
>>> 
>>> As Ben mentioned, this should work.  However, the command is "del-flows", not "del-flow".
>>> 
>>> --Justin
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/90bea824/attachment-0001.html>

From a.n.chippa at gmail.com  Fri Jan 30 17:27:43 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 17:27:43 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
Message-ID: <CABFtFwnhUNRA6vCnyhdeu-9KfnmXfRaB_X=hhnN=ZOnesuvQxA@mail.gmail.com>

I figured out the answer for my first question: ovs-docker del-port... The
second question is still pending...

On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Hi Gurucharan,
>
> Any idea how to work around this issue:
>
> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> 46524ba3123a 1.1.1.1
> RTNETLINK answers: File exists
> RTNETLINK answers: File exists
>
> I reinstalled the openvswitch and recreated the containers and tried
> ovs-docker again and ran into this... Any idea to clear the old stuff and
> start over?
>
> Appreciate your help.
>
> Thanks,
> Ashok
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/ed4f67b0/attachment.html>

From a.n.chippa at gmail.com  Fri Jan 30 17:31:58 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 17:31:58 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <C7F997E6-4AC1-4136-A0E9-AC0F8991B639@nicira.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
 <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
 <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
 <C7F997E6-4AC1-4136-A0E9-AC0F8991B639@nicira.com>
Message-ID: <CABFtFwkMCYYc1tiAy=t_2UmMsA0GmdHubTLHCrqCagKX4Nu=sw@mail.gmail.com>

I have mentioned several issues (sorry), which exactly are you asking for?
Showing tables with 0 active flows?

On Fri, Jan 30, 2015 at 5:25 PM, Justin Pettit <jpettit at nicira.com> wrote:

> Can you provide an example from the shell output?  I've never seen that.
>
> --Justin
>
>
> On Jan 30, 2015, at 5:05 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>
> Sorry, I meant del-flows... I mistyped it... del-flows does not work!!!
>
> Out of 11 flows, it deleted 1 flow, and repeated commands to del-flows did
> not have any effect!!!
>
>
> On Fri, Jan 30, 2015 at 2:51 PM, Justin Pettit <jpettit at nicira.com> wrote:
>
>>
>> > On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>> >
>> > Is there a cli command to clear flows in a table? ovs-ofctl del-flow
>> <switch>   does not work!!
>>
>> As Ben mentioned, this should work.  However, the command is "del-flows",
>> not "del-flow".
>>
>> --Justin
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/06ceac41/attachment.html>

From shettyg at nicira.com  Fri Jan 30 19:29:28 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Fri, 30 Jan 2015 19:29:28 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
Message-ID: <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>



> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> 
> ovs-docker seems to be a bit buggy... after creating/deleting/creating containers, I got into a situation where a stray port on the openvswitch remains...
Before you delete the containers, do you delete the ports using del-port command? Stray ports can remain if you dont do that.

It is a very simple script that you should be able to debug easily.
> 
> root at ashok-vb:~# ifconfig
> 
> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr ca:40:32:35:a6:8c  
>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>           collisions:0 txqueuelen:1000 
>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
> 
> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99  
> ...
> 
> How do I delete c7ef9934c0e44? This was previously created by ovs-docker command... 
It is a veth interface. You can delete it using 'ip'.
> 
>> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>> Hi Gurucharan,
>> 
>> Any idea how to work around this issue:
>> 
>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a 1.1.1.1
>> RTNETLINK answers: File exists
>> RTNETLINK answers: File exists
>> 
>> I reinstalled the openvswitch and recreated the containers and tried ovs-docker again and ran into this... Any idea to clear the old stuff and start over?
>> 
>> Appreciate your help.
>> 
>> Thanks,
>> Ashok
> 
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/2f6b5408/attachment.html>

From a.n.chippa at gmail.com  Fri Jan 30 19:52:29 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 19:52:29 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
Message-ID: <CABFtFwkAe-9OZ=zRe6fb6hdBKeR_dAfLAToR-aC=f5wiUyHCLg@mail.gmail.com>

Hoping someone can answer this...

root at ashok-vb:~# ovs-docker add-port br-int eth0 051d80c13ef6 1.1.1.1
RTNETLINK answers: File exists
RTNETLINK answers: File exists
root at ashok-vb:~# ovs-docker del-port br-int eth0 051d80c13ef6
root at ashok-vb:~# ovs-docker add-port br-int eth0 051d80c13ef6 1.1.1.1
RTNETLINK answers: File exists
RTNETLINK answers: File exists

I know it's not directly related to ovs-docker script... but thought I'd
ask anyway...

On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
wrote:

>
>
> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>
> ovs-docker seems to be a bit buggy... after creating/deleting/creating
> containers, I got into a situation where a stray port on the openvswitch
> remains...
>
> Before you delete the containers, do you delete the ports using del-port
> command? Stray ports can remain if you dont do that.
>
> It is a very simple script that you should be able to debug easily.
>
>
> root at ashok-vb:~# ifconfig
>
> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
> ca:40:32:35:a6:8c
>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>           collisions:0 txqueuelen:1000
>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
>
> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
> ...
>
> How do I delete c7ef9934c0e44? This was previously created by ovs-docker
> command...
>
> It is a veth interface. You can delete it using 'ip'.
>
>
> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
> wrote:
>
>> Hi Gurucharan,
>>
>> Any idea how to work around this issue:
>>
>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>> 46524ba3123a 1.1.1.1
>> RTNETLINK answers: File exists
>> RTNETLINK answers: File exists
>>
>> I reinstalled the openvswitch and recreated the containers and tried
>> ovs-docker again and ran into this... Any idea to clear the old stuff and
>> start over?
>>
>> Appreciate your help.
>>
>> Thanks,
>> Ashok
>>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/254402d2/attachment-0001.html>

From a.n.chippa at gmail.com  Fri Jan 30 20:12:57 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 20:12:57 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
Message-ID: <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>

Thanks, I figured the stray i/f issue. I looked at your script as well...
quite straightforward...

Any idea why this is happening:

root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a
1.1.1.1
RTNETLINK answers: File exists
RTNETLINK answers: File exists

I googled and tried different workarounds, no luck so far...

On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
wrote:

>
>
> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>
> ovs-docker seems to be a bit buggy... after creating/deleting/creating
> containers, I got into a situation where a stray port on the openvswitch
> remains...
>
> Before you delete the containers, do you delete the ports using del-port
> command? Stray ports can remain if you dont do that.
>
> It is a very simple script that you should be able to debug easily.
>
>
> root at ashok-vb:~# ifconfig
>
> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
> ca:40:32:35:a6:8c
>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>           collisions:0 txqueuelen:1000
>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
>
> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
> ...
>
> How do I delete c7ef9934c0e44? This was previously created by ovs-docker
> command...
>
> It is a veth interface. You can delete it using 'ip'.
>
>
> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
> wrote:
>
>> Hi Gurucharan,
>>
>> Any idea how to work around this issue:
>>
>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>> 46524ba3123a 1.1.1.1
>> RTNETLINK answers: File exists
>> RTNETLINK answers: File exists
>>
>> I reinstalled the openvswitch and recreated the containers and tried
>> ovs-docker again and ran into this... Any idea to clear the old stuff and
>> start over?
>>
>> Appreciate your help.
>>
>> Thanks,
>> Ashok
>>
>
> _______________________________________________
> discuss mailing list
> discuss at openvswitch.org
> http://openvswitch.org/mailman/listinfo/discuss
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/ef04df8c/attachment.html>

From shettyg at nicira.com  Fri Jan 30 20:26:34 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Fri, 30 Jan 2015 20:26:34 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
Message-ID: <CAHbON5pgOEL48uQzs7w4DEKrhPqjuhs-MAQ72s1NN9TP2OWCvA@mail.gmail.com>

On Fri, Jan 30, 2015 at 8:12 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> Thanks, I figured the stray i/f issue. I looked at your script as well...
> quite straightforward...
>
> Any idea why this is happening:
>
> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a
> 1.1.1.1
> RTNETLINK answers: File exists
> RTNETLINK answers: File exists

If you haven't already, download the docker-enter script from the
nsenter project and enter the container to see what is inside it
(newer version of docker has it inbuilt). I can imagine getting the
above error if you did not start your container with --net=none

>
> I googled and tried different workarounds, no luck so far...
>
> On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
> wrote:
>>
>>
>>
>> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>
>> ovs-docker seems to be a bit buggy... after creating/deleting/creating
>> containers, I got into a situation where a stray port on the openvswitch
>> remains...
>>
>> Before you delete the containers, do you delete the ports using del-port
>> command? Stray ports can remain if you dont do that.
>>
>> It is a very simple script that you should be able to debug easily.
>>
>>
>> root at ashok-vb:~# ifconfig
>>
>> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr ca:40:32:35:a6:8c
>>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>>           collisions:0 txqueuelen:1000
>>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
>>
>> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
>> ...
>>
>> How do I delete c7ef9934c0e44? This was previously created by ovs-docker
>> command...
>>
>> It is a veth interface. You can delete it using 'ip'.
>>
>>
>> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
>> wrote:
>>>
>>> Hi Gurucharan,
>>>
>>> Any idea how to work around this issue:
>>>
>>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>>> 46524ba3123a 1.1.1.1
>>> RTNETLINK answers: File exists
>>> RTNETLINK answers: File exists
>>>
>>> I reinstalled the openvswitch and recreated the containers and tried
>>> ovs-docker again and ran into this... Any idea to clear the old stuff and
>>> start over?
>>>
>>> Appreciate your help.
>>>
>>> Thanks,
>>> Ashok
>>
>>
>> _______________________________________________
>> discuss mailing list
>> discuss at openvswitch.org
>> http://openvswitch.org/mailman/listinfo/discuss
>
>

From a.n.chippa at gmail.com  Fri Jan 30 20:26:53 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 20:26:53 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
Message-ID: <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>

Disclaimer: I am not a linux network expert... that's why I am struggling
with this a bit...

root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a
1.1.1.1
RTNETLINK answers: File exists
RTNETLINK answers: File exists

I can just remove the file if I knew which file it is complaining about...
Would you know?



On Fri, Jan 30, 2015 at 8:12 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Thanks, I figured the stray i/f issue. I looked at your script as well...
> quite straightforward...
>
> Any idea why this is happening:
>
> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> 46524ba3123a 1.1.1.1
> RTNETLINK answers: File exists
> RTNETLINK answers: File exists
>
> I googled and tried different workarounds, no luck so far...
>
> On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
> wrote:
>
>>
>>
>> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>
>> ovs-docker seems to be a bit buggy... after creating/deleting/creating
>> containers, I got into a situation where a stray port on the openvswitch
>> remains...
>>
>> Before you delete the containers, do you delete the ports using del-port
>> command? Stray ports can remain if you dont do that.
>>
>> It is a very simple script that you should be able to debug easily.
>>
>>
>> root at ashok-vb:~# ifconfig
>>
>> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
>> ca:40:32:35:a6:8c
>>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>>           collisions:0 txqueuelen:1000
>>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
>>
>> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
>> ...
>>
>> How do I delete c7ef9934c0e44? This was previously created by ovs-docker
>> command...
>>
>> It is a veth interface. You can delete it using 'ip'.
>>
>>
>> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
>> wrote:
>>
>>> Hi Gurucharan,
>>>
>>> Any idea how to work around this issue:
>>>
>>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>>> 46524ba3123a 1.1.1.1
>>> RTNETLINK answers: File exists
>>> RTNETLINK answers: File exists
>>>
>>> I reinstalled the openvswitch and recreated the containers and tried
>>> ovs-docker again and ran into this... Any idea to clear the old stuff and
>>> start over?
>>>
>>> Appreciate your help.
>>>
>>> Thanks,
>>> Ashok
>>>
>>
>> _______________________________________________
>> discuss mailing list
>> discuss at openvswitch.org
>> http://openvswitch.org/mailman/listinfo/discuss
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/5aa2330f/attachment-0001.html>

From shettyg at nicira.com  Fri Jan 30 20:28:25 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Fri, 30 Jan 2015 20:28:25 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
 <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>
Message-ID: <CAHbON5qrcxZ-mJRGUOi=5OyXWeWsv13bbxVXNX0pcYu4AhExYw@mail.gmail.com>

On Fri, Jan 30, 2015 at 8:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> Disclaimer: I am not a linux network expert... that's why I am struggling
> with this a bit...
>
> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a
> 1.1.1.1
> RTNETLINK answers: File exists
> RTNETLINK answers: File exists
>
> I can just remove the file if I knew which file it is complaining about...
> Would you know?
Such errors occur if there is a network entity that already exists and
you are trying to overwrite it. For e.g., trying to create a eth0
interface when one already exists. Or trying to se a routing entry
when one already exists.

>
>
>
> On Fri, Jan 30, 2015 at 8:12 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>
>> Thanks, I figured the stray i/f issue. I looked at your script as well...
>> quite straightforward...
>>
>> Any idea why this is happening:
>>
>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0 46524ba3123a
>> 1.1.1.1
>> RTNETLINK answers: File exists
>> RTNETLINK answers: File exists
>>
>> I googled and tried different workarounds, no luck so far...
>>
>> On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
>> wrote:
>>>
>>>
>>>
>>> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>>
>>> ovs-docker seems to be a bit buggy... after creating/deleting/creating
>>> containers, I got into a situation where a stray port on the openvswitch
>>> remains...
>>>
>>> Before you delete the containers, do you delete the ports using del-port
>>> command? Stray ports can remain if you dont do that.
>>>
>>> It is a very simple script that you should be able to debug easily.
>>>
>>>
>>> root at ashok-vb:~# ifconfig
>>>
>>> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
>>> ca:40:32:35:a6:8c
>>>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>>>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>>>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>>>           collisions:0 txqueuelen:1000
>>>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
>>>
>>> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
>>> ...
>>>
>>> How do I delete c7ef9934c0e44? This was previously created by ovs-docker
>>> command...
>>>
>>> It is a veth interface. You can delete it using 'ip'.
>>>
>>>
>>> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
>>> wrote:
>>>>
>>>> Hi Gurucharan,
>>>>
>>>> Any idea how to work around this issue:
>>>>
>>>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>>>> 46524ba3123a 1.1.1.1
>>>> RTNETLINK answers: File exists
>>>> RTNETLINK answers: File exists
>>>>
>>>> I reinstalled the openvswitch and recreated the containers and tried
>>>> ovs-docker again and ran into this... Any idea to clear the old stuff and
>>>> start over?
>>>>
>>>> Appreciate your help.
>>>>
>>>> Thanks,
>>>> Ashok
>>>
>>>
>>> _______________________________________________
>>> discuss mailing list
>>> discuss at openvswitch.org
>>> http://openvswitch.org/mailman/listinfo/discuss
>>
>>
>

From a.n.chippa at gmail.com  Fri Jan 30 20:29:20 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 20:29:20 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CAHbON5pgOEL48uQzs7w4DEKrhPqjuhs-MAQ72s1NN9TP2OWCvA@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
 <CAHbON5pgOEL48uQzs7w4DEKrhPqjuhs-MAQ72s1NN9TP2OWCvA@mail.gmail.com>
Message-ID: <CABFtFwnG+4CK6_x6sjieGM6Zqbsg5LpC0-ALKYKU=Tv2n+QeDw@mail.gmail.com>

Ah yes, thank you, I remember now. I had this working before (after of
course reading the relevant documentation) and now I remember starting the
container with --net=none. I am revisiting this after a few weeks and had
forgotten about this, and started the containers without --net=none.

Thanks a lot.. That should fix it.

On Fri, Jan 30, 2015 at 8:26 PM, Gurucharan Shetty <shettyg at nicira.com>
wrote:

> On Fri, Jan 30, 2015 at 8:12 PM, Ashok Chippa <a.n.chippa at gmail.com>
> wrote:
> > Thanks, I figured the stray i/f issue. I looked at your script as well...
> > quite straightforward...
> >
> > Any idea why this is happening:
> >
> > root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> 46524ba3123a
> > 1.1.1.1
> > RTNETLINK answers: File exists
> > RTNETLINK answers: File exists
>
> If you haven't already, download the docker-enter script from the
> nsenter project and enter the container to see what is inside it
> (newer version of docker has it inbuilt). I can imagine getting the
> above error if you did not start your container with --net=none
>
> >
> > I googled and tried different workarounds, no luck so far...
> >
> > On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
> > wrote:
> >>
> >>
> >>
> >> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
> >>
> >> ovs-docker seems to be a bit buggy... after creating/deleting/creating
> >> containers, I got into a situation where a stray port on the openvswitch
> >> remains...
> >>
> >> Before you delete the containers, do you delete the ports using del-port
> >> command? Stray ports can remain if you dont do that.
> >>
> >> It is a very simple script that you should be able to debug easily.
> >>
> >>
> >> root at ashok-vb:~# ifconfig
> >>
> >> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
> ca:40:32:35:a6:8c
> >>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
> >>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
> >>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
> >>           collisions:0 txqueuelen:1000
> >>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
> >>
> >> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
> >> ...
> >>
> >> How do I delete c7ef9934c0e44? This was previously created by ovs-docker
> >> command...
> >>
> >> It is a veth interface. You can delete it using 'ip'.
> >>
> >>
> >> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
> >> wrote:
> >>>
> >>> Hi Gurucharan,
> >>>
> >>> Any idea how to work around this issue:
> >>>
> >>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> >>> 46524ba3123a 1.1.1.1
> >>> RTNETLINK answers: File exists
> >>> RTNETLINK answers: File exists
> >>>
> >>> I reinstalled the openvswitch and recreated the containers and tried
> >>> ovs-docker again and ran into this... Any idea to clear the old stuff
> and
> >>> start over?
> >>>
> >>> Appreciate your help.
> >>>
> >>> Thanks,
> >>> Ashok
> >>
> >>
> >> _______________________________________________
> >> discuss mailing list
> >> discuss at openvswitch.org
> >> http://openvswitch.org/mailman/listinfo/discuss
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/a252a8d4/attachment.html>

From a.n.chippa at gmail.com  Fri Jan 30 20:30:53 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 20:30:53 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CAHbON5qrcxZ-mJRGUOi=5OyXWeWsv13bbxVXNX0pcYu4AhExYw@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
 <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>
 <CAHbON5qrcxZ-mJRGUOi=5OyXWeWsv13bbxVXNX0pcYu4AhExYw@mail.gmail.com>
Message-ID: <CABFtFwmQb3=XViEbLG2CFaXttV1G35FTcJThRdvPhGdpT0rk0A@mail.gmail.com>

Yes, I just read this issue with routing entry on google... :) for example
with dhcp lease renewal...

Thanks for your time... appreciate it.


On Fri, Jan 30, 2015 at 8:28 PM, Gurucharan Shetty <shettyg at nicira.com>
wrote:

> On Fri, Jan 30, 2015 at 8:26 PM, Ashok Chippa <a.n.chippa at gmail.com>
> wrote:
> > Disclaimer: I am not a linux network expert... that's why I am struggling
> > with this a bit...
> >
> > root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> 46524ba3123a
> > 1.1.1.1
> > RTNETLINK answers: File exists
> > RTNETLINK answers: File exists
> >
> > I can just remove the file if I knew which file it is complaining
> about...
> > Would you know?
> Such errors occur if there is a network entity that already exists and
> you are trying to overwrite it. For e.g., trying to create a eth0
> interface when one already exists. Or trying to se a routing entry
> when one already exists.
>
> >
> >
> >
> > On Fri, Jan 30, 2015 at 8:12 PM, Ashok Chippa <a.n.chippa at gmail.com>
> wrote:
> >>
> >> Thanks, I figured the stray i/f issue. I looked at your script as
> well...
> >> quite straightforward...
> >>
> >> Any idea why this is happening:
> >>
> >> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> 46524ba3123a
> >> 1.1.1.1
> >> RTNETLINK answers: File exists
> >> RTNETLINK answers: File exists
> >>
> >> I googled and tried different workarounds, no luck so far...
> >>
> >> On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com>
> >> wrote:
> >>>
> >>>
> >>>
> >>> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com>
> wrote:
> >>>
> >>> ovs-docker seems to be a bit buggy... after creating/deleting/creating
> >>> containers, I got into a situation where a stray port on the
> openvswitch
> >>> remains...
> >>>
> >>> Before you delete the containers, do you delete the ports using
> del-port
> >>> command? Stray ports can remain if you dont do that.
> >>>
> >>> It is a very simple script that you should be able to debug easily.
> >>>
> >>>
> >>> root at ashok-vb:~# ifconfig
> >>>
> >>> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
> >>> ca:40:32:35:a6:8c
> >>>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
> >>>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
> >>>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
> >>>           collisions:0 txqueuelen:1000
> >>>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
> >>>
> >>> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
> >>> ...
> >>>
> >>> How do I delete c7ef9934c0e44? This was previously created by
> ovs-docker
> >>> command...
> >>>
> >>> It is a veth interface. You can delete it using 'ip'.
> >>>
> >>>
> >>> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
> >>> wrote:
> >>>>
> >>>> Hi Gurucharan,
> >>>>
> >>>> Any idea how to work around this issue:
> >>>>
> >>>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
> >>>> 46524ba3123a 1.1.1.1
> >>>> RTNETLINK answers: File exists
> >>>> RTNETLINK answers: File exists
> >>>>
> >>>> I reinstalled the openvswitch and recreated the containers and tried
> >>>> ovs-docker again and ran into this... Any idea to clear the old stuff
> and
> >>>> start over?
> >>>>
> >>>> Appreciate your help.
> >>>>
> >>>> Thanks,
> >>>> Ashok
> >>>
> >>>
> >>> _______________________________________________
> >>> discuss mailing list
> >>> discuss at openvswitch.org
> >>> http://openvswitch.org/mailman/listinfo/discuss
> >>
> >>
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/67be0990/attachment-0001.html>

From a.n.chippa at gmail.com  Fri Jan 30 20:55:55 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Fri, 30 Jan 2015 20:55:55 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFwmQb3=XViEbLG2CFaXttV1G35FTcJThRdvPhGdpT0rk0A@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
 <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>
 <CAHbON5qrcxZ-mJRGUOi=5OyXWeWsv13bbxVXNX0pcYu4AhExYw@mail.gmail.com>
 <CABFtFwmQb3=XViEbLG2CFaXttV1G35FTcJThRdvPhGdpT0rk0A@mail.gmail.com>
Message-ID: <CABFtFw=Wsbd12OnyGwTnMYVeLv32kvuPQ+6cFGOZa1Why4YafA@mail.gmail.com>

May be another issue with ovs-docker?:

Things work fine with --net=none. But I ran into this issue:

1. I create a container with --net=none.
2. I connect the vswitch to container: ovs-docker add-port

root at ashok-vb:~# ovs-docker add-port br-int eth0 25021347059d 2.2.2.2

root at 25021347059d:/# ifconfig
eth0      Link encap:Ethernet  HWaddr ce:96:03:03:3f:d0
          inet addr:2.2.2.2  Bcast:0.0.0.0  Mask:255.255.255.255
          inet6 addr: fe80::cc96:3ff:fe03:3fd0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:127 errors:0 dropped:0 overruns:0 frame:0
          TX packets:10 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:23855 (2root at ashok-vb:~# ovs-docker del-port br-int eth0
25021347059d3.8 KB)  TX bytes:828 (828.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

SO FAR SO GOOD... BUT NOW I DECIDE THAT 2.2.2.2 is the wrong address. I
want to change it to 1.1.1.2. So I do:

root at ashok-vb:~# ovs-docker del-port br-int eth0 25021347059d

root at 25021347059d:/# ifconfig
eth0      Link encap:Ethernet  HWaddr ce:96:03:03:3f:d0
          inet addr:2.2.2.2  Bcast:0.0.0.0  Mask:255.255.255.255
          inet6 addr: fe80::cc96:3ff:fe03:3fd0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:205 errors:0 dropped:0 overruns:0 frame:0
          TX packets:10 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:37892 (37.8 KB)  TX bytes:828 (828.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

ISN'T eth0 supposed to be deleted???

NOW WHEN I TRY TO ADD PORT with the address I want, it naturally complains
that "file exists" which makes sense as eth0 is still there:

root at ashok-vb:~# ovs-docker add-port br-int eth0 25021347059d 1.1.1.2
RTNETLINK answers: File exists
RTNETLINK answers: File exists

So "ovs-docker del-port..." bug? I can look at it and fix it... thought
I'll pass this by you...


On Fri, Jan 30, 2015 at 8:30 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:

> Yes, I just read this issue with routing entry on google... :) for example
> with dhcp lease renewal...
>
> Thanks for your time... appreciate it.
>
>
> On Fri, Jan 30, 2015 at 8:28 PM, Gurucharan Shetty <shettyg at nicira.com>
> wrote:
>
>> On Fri, Jan 30, 2015 at 8:26 PM, Ashok Chippa <a.n.chippa at gmail.com>
>> wrote:
>> > Disclaimer: I am not a linux network expert... that's why I am
>> struggling
>> > with this a bit...
>> >
>> > root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>> 46524ba3123a
>> > 1.1.1.1
>> > RTNETLINK answers: File exists
>> > RTNETLINK answers: File exists
>> >
>> > I can just remove the file if I knew which file it is complaining
>> about...
>> > Would you know?
>> Such errors occur if there is a network entity that already exists and
>> you are trying to overwrite it. For e.g., trying to create a eth0
>> interface when one already exists. Or trying to se a routing entry
>> when one already exists.
>>
>> >
>> >
>> >
>> > On Fri, Jan 30, 2015 at 8:12 PM, Ashok Chippa <a.n.chippa at gmail.com>
>> wrote:
>> >>
>> >> Thanks, I figured the stray i/f issue. I looked at your script as
>> well...
>> >> quite straightforward...
>> >>
>> >> Any idea why this is happening:
>> >>
>> >> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>> 46524ba3123a
>> >> 1.1.1.1
>> >> RTNETLINK answers: File exists
>> >> RTNETLINK answers: File exists
>> >>
>> >> I googled and tried different workarounds, no luck so far...
>> >>
>> >> On Fri, Jan 30, 2015 at 7:29 PM, Gurucharan Shetty <shettyg at nicira.com
>> >
>> >> wrote:
>> >>>
>> >>>
>> >>>
>> >>> On Jan 30, 2015, at 5:26 PM, Ashok Chippa <a.n.chippa at gmail.com>
>> wrote:
>> >>>
>> >>> ovs-docker seems to be a bit buggy... after creating/deleting/creating
>> >>> containers, I got into a situation where a stray port on the
>> openvswitch
>> >>> remains...
>> >>>
>> >>> Before you delete the containers, do you delete the ports using
>> del-port
>> >>> command? Stray ports can remain if you dont do that.
>> >>>
>> >>> It is a very simple script that you should be able to debug easily.
>> >>>
>> >>>
>> >>> root at ashok-vb:~# ifconfig
>> >>>
>> >>> c7ef9934c0e44_l Link c7ef9934c0e44encap:Ethernet  HWaddr
>> >>> ca:40:32:35:a6:8c
>> >>>           UP BROADCAST MULTICAST  MTU:1500  Metric:1
>> >>>           RX packets:0 errors:0 dropped:0 overruns:0 frame:0
>> >>>           TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
>> >>>           collisions:0 txqueuelen:1000
>> >>>           RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
>> >>>
>> >>> docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99
>> >>> ...
>> >>>
>> >>> How do I delete c7ef9934c0e44? This was previously created by
>> ovs-docker
>> >>> command...
>> >>>
>> >>> It is a veth interface. You can delete it using 'ip'.
>> >>>
>> >>>
>> >>> On Fri, Jan 30, 2015 at 5:01 PM, Ashok Chippa <a.n.chippa at gmail.com>
>> >>> wrote:
>> >>>>
>> >>>> Hi Gurucharan,
>> >>>>
>> >>>> Any idea how to work around this issue:
>> >>>>
>> >>>> root at ashok-vb:/usr/local/bin# ovs-docker add-port br-int eth0
>> >>>> 46524ba3123a 1.1.1.1
>> >>>> RTNETLINK answers: File exists
>> >>>> RTNETLINK answers: File exists
>> >>>>
>> >>>> I reinstalled the openvswitch and recreated the containers and tried
>> >>>> ovs-docker again and ran into this... Any idea to clear the old
>> stuff and
>> >>>> start over?
>> >>>>
>> >>>> Appreciate your help.
>> >>>>
>> >>>> Thanks,
>> >>>> Ashok
>> >>>
>> >>>
>> >>> _______________________________________________
>> >>> discuss mailing list
>> >>> discuss at openvswitch.org
>> >>> http://openvswitch.org/mailman/listinfo/discuss
>> >>
>> >>
>> >
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/1c6a2329/attachment.html>

From yuanfeng1 at huawei.com  Fri Jan 30 23:13:44 2015
From: yuanfeng1 at huawei.com (yuanfeng (A))
Date: Sat, 31 Jan 2015 07:13:44 +0000
Subject: [ovs-discuss]  How to support the ovs-group command?
Message-ID: <2C54893E2A0C484DA1249B509D857C394DFF112A@SZXEML506-MBS.china.huawei.com>

Hi All,
         Can anyone please tell me about the ovs-version and the OpenFlow13 group operation, I tried the group command to test the multipath function and found problem as below

[root at controller ~]# ovs-ofctl -O OpenFlow13 add-group $BRIDGE_NAME group_id=5566,type=select,bucket=output:1,bucket=output:2,bucket=output:3
ovs-ofctl: unknown command 'add-group'; use --help for help

         My OVS version is 1.11.0

[root at controller ~]# ovs-vsctl --version
ovs-vsctl (Open vSwitch) 1.11.0
Compiled Jul 30 2013 18:14:53

[root at controller ~]# ovs-vsctl list bridge $BRIDGE_NAME | grep protocols
protocols           : ["OpenFlow13"]


Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150131/bbf6f24e/attachment-0001.html>

From a.n.chippa at gmail.com  Sat Jan 31 01:03:45 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Sat, 31 Jan 2015 01:03:45 -0800
Subject: [ovs-discuss] patch
In-Reply-To: <DD3447C3-D1F2-443E-B207-8CEC3D084042@nicira.com>
References: <CABFtFwkOMG0kFdR8-Uj2QeUAb4wSf7pnj=SagX2TjgyeVxnR-Q@mail.gmail.com>
 <B13165A8-668F-462B-8E16-513208C5257A@nicira.com>
 <CABFtFwk9MzweqvEGccv0mb_HV6+AF63DkgPYCC3aML6TvsiwoA@mail.gmail.com>
 <C7F997E6-4AC1-4136-A0E9-AC0F8991B639@nicira.com>
 <CABFtFwkMCYYc1tiAy=t_2UmMsA0GmdHubTLHCrqCagKX4Nu=sw@mail.gmail.com>
 <F64C32BA-F48D-40F2-877F-CCBEEA6A79BA@nicira.com>
 <CABFtFwk5R8G_d5OsQuPJ_iN-Am2V_1rD6rZty_4mmDCrdWcCwQ@mail.gmail.com>
 <DD3447C3-D1F2-443E-B207-8CEC3D084042@nicira.com>
Message-ID: <CABFtFwkA+YStPJWuHVddTxCTpSjC5NREiKFK6UZMEwQB4s0cHQ@mail.gmail.com>

Thank you for the patch. I just tried patching and ran into some hunks
failing :( I am running openvswitch 2.3.0... Here's the output:

root at ashok-vb:/home/achippa/openvswitch-2.3.0# patch -p1 < patch_ben_pfaff
patching file ofproto/connmgr.c
Hunk #2 succeeded at 1942 with fuzz 2 (offset -38 lines).
patching file ofproto/connmgr.h
Hunk #2 succeeded at 196 (offset 3 lines).
patching file ofproto/fail-open.c
patching file ofproto/fail-open.h
patching file ofproto/in-band.c
Hunk #1 FAILED at 1.
Hunk #2 succeeded at 235 with fuzz 2.
1 out of 2 hunks FAILED -- saving rejects to file ofproto/in-band.c.rej
patching file ofproto/in-band.h
patching file ofproto/ofproto.c
Hunk #1 FAILED at 1.
Hunk #2 FAILED at 2963.
2 out of 2 hunks FAILED -- saving rejects to file ofproto/ofproto.c.rej
patching file tests/ofproto.at
Hunk #1 succeeded at 1060 (offset -246 lines).

They seem simple enough to resolve. Will do.

Thanks



On Fri, Jan 30, 2015 at 5:52 PM, Justin Pettit <jpettit at nicira.com> wrote:

> Please keep the discussion on the list. I'm sure Guru or someone will
> respond.
>
> --Justin
>
>
> On Jan 30, 2015, at 5:41 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>
> On another issue (that I asked Gurucharan) I do need some help on the
> following issue:
>
> root at ashok-vb:~# ovs-docker add-port br-int eth0 46524ba3123a 1.1.1.1
> RTNETLINK answers: File exists
> RTNETLINK answers: File exists
>
> ovs-docker complains that the file exists, but it creates the port (..._l)
> on the openvswitch in any case, however fails to modify the eth0 address
> (to 1.1.1.1) in the container...
>
> Any way to get around this? I am trying to get the packets to pass through
> the openvswitch and not the default docker0 bridge...
>
> Thanks,
> Ashok
>
> On Fri, Jan 30, 2015 at 5:35 PM, Justin Pettit <jpettit at nicira.com> wrote:
>
>> Yes. You already sent what I asked for, and then I responded to that
>> about hidden flows.
>>
>> --Justin
>>
>>
>> On Jan 30, 2015, at 5:31 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>
>> I have mentioned several issues (sorry), which exactly are you asking
>> for? Showing tables with 0 active flows?
>>
>> On Fri, Jan 30, 2015 at 5:25 PM, Justin Pettit <jpettit at nicira.com>
>> wrote:
>>
>>> Can you provide an example from the shell output?  I've never seen that.
>>>
>>> --Justin
>>>
>>>
>>> On Jan 30, 2015, at 5:05 PM, Ashok Chippa <a.n.chippa at gmail.com> wrote:
>>>
>>> Sorry, I meant del-flows... I mistyped it... del-flows does not work!!!
>>>
>>> Out of 11 flows, it deleted 1 flow, and repeated commands to del-flows
>>> did not have any effect!!!
>>>
>>>
>>> On Fri, Jan 30, 2015 at 2:51 PM, Justin Pettit <jpettit at nicira.com>
>>> wrote:
>>>
>>>>
>>>> > On Jan 30, 2015, at 2:22 PM, Ashok Chippa <a.n.chippa at gmail.com>
>>>> wrote:
>>>> >
>>>> > Is there a cli command to clear flows in a table? ovs-ofctl del-flow
>>>> <switch>   does not work!!
>>>>
>>>> As Ben mentioned, this should work.  However, the command is
>>>> "del-flows", not "del-flow".
>>>>
>>>> --Justin
>>>>
>>>>
>>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150131/147d668f/attachment.html>

From djhon9813 at gmail.com  Sat Jan 31 04:28:23 2015
From: djhon9813 at gmail.com (david jhon)
Date: Sat, 31 Jan 2015 17:28:23 +0500
Subject: [ovs-discuss] debugging openvswitch command-line clients
Message-ID: <CANPUzQ0hmMBdRLt5rg7GOV7mQf_WM3jxTR5_k_SZ-V4TYcYFxg@mail.gmail.com>

Hello everyone,

I did git clone openvswitch-2.3.0 on ubuntu 14.04 server and build it fom
source following instruction given in INSTALL file.

Now I want to debug openvswitch command-line clients such as vsctl, ofctl,
appctl etc. I have started with debugging command "ovs-vsctl show" after I
set a breakpoint in openvswitch-2.3.0/utilities/ovs-vsctl.c using gdb but
it is not working for me. Please let me know how do I precede further in
this regard. Any help is highly appreciated.

Regards,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150131/29b8f7c7/attachment.html>

From p.gautier.philippe at gmail.com  Sat Jan 31 06:41:13 2015
From: p.gautier.philippe at gmail.com (Philippe Gautier)
Date: Sat, 31 Jan 2015 15:41:13 +0100
Subject: [ovs-discuss]  packet loss in RSPAN trafic
Message-ID: <CAONKcZKTWAcDUXAbzneCJuYt8wmgiD6RAS4K8sOWMQrdsw4E8w@mail.gmail.com>

Hy,

I detect packet loss when I analyse GRE traffic sended by RSPAN. Is there a
default sampling parameter when configuring port mirroring ?

Test platform and scenario:

Two KVM virtual hosts (port internet2, internet3) hosted on a physical host
(port br0 and eth0). Trafic is sended through the gre interface to a remote
host. The gre trafic is sended through eth0 physical interface.

When I generate a trafic between a vm and an internet host (In my case
google server) I capture real and RSPAN trafic on eth0 interface.

Below the difference I observed when I use the "Follow tcp stream" option
in Wireshark:

GRE traffic:

GET / HTTP/1.1
User-Agent: Wget/1.13.4 (linux-gnu)
Accept: */*
Host: www.google.fr
Connection: Keep-Alive

[18434 bytes missing in capture
file]function(b,a){google.xjsu=b;c(a)};google.dlj=c;})();(function(){window.google.xjsrm=[];})();if(google.y)google.y.first=[];if(!google.xjs){window._=window._||{};window._._DumpException=function(e){throw
e};if(google.timers&&google.timers.load.t){google.timers.load.t.xjsls=new
Date().getTime();}google.dljp('/xjs/_/js/k\x3dxjs.hp.en_US.snZCiI2p_3w.O/m\x3dsb_he,d/rt\x3dj/d\x3d1/t\x3dzcms/rs\x3dACT90oF4uKp_rZWz9S0tayKTr-mes6_yHg','/xjs/_/js/k\x3dxjs.hp.en_US.snZCiI2p_3w.O/m\x3dsb_he,d/rt\x3dj/d\x3d1/t\x3dzcms/rs\x3dACT90oF4uKp_rZWz9S0tayKTr-mes6_yHg');google.xjs=1;}google.pmc={"sb_he":{"agen":true,"cgen":true,"client":"heirloom-hp","dh":true,"ds":"","exp":"msedr","fl":true,"host":"
google.fr","jam":0,"jsonp":true,"lm":true,"msgs":{"cibl":"Effacer la
recherche","dym":"Essayez avec cette orthographe :","lcky":"J\u0026#39;ai
de la chance","lml":"En savoir plus","oskt":"Outils de
saisie","psrc":"Cette suggestion a bien .t. supprim.e de votre \u003Ca
href=\"/history\"\u003Ehistorique
Web\u003C/a\u003E.","psrl":"Supprimer","sbit":"Recherche par
image","srch":"Recherche
Google"},"ovr":{},"pq":"","refoq":true,"scd":10,"sce":5,"stok":"vWi5ZMd1C9pQEBycfKKELJzIU-Y"},"d":{}};google.y.first.push(function(){if(google.med){google.med('init');google.initHistory();google.med('history');}});if(google.j&&google.j.en&&google.j.xi){window.setTimeout(google.j.xi,0);}
</script></div></body></html>

Real traffic :

GET / HTTP/1.1
User-Agent: Wget/1.13.4 (linux-gnu)
Accept: */*
Host: www.google.fr
Connection: Keep-Alive

HTTP/1.1 200 OK
Date: Sat, 31 Jan 2015 13:21:10 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
Set-Cookie:
PREF=ID=d56ee019dd6049f0:FF=0:TM=1422710470:LM=1422710470:S=W0c7OtXcDzNNKmwJ;
expires=Mon, 30-Jan-2017 13:21:10 GMT; path=/; domain=.google.fr
Set-Cookie:
NID=67=hSg1Ymyok0tmap2A66SXm0-m5VTuArjG3QKTtbRrnOpCAH-QnTHcGcn8ZrqLGngLvbwQ--ZqotRlYbkFNr_q7aKDuvZ0geFV0TJ0-CdBLP8bR_I3PnsWeggrQdcuuRwu;
expires=Sun, 02-Aug-2015 13:21:10 GMT; path=/; domain=.google.fr; HttpOnly
P3P: CP="This is not a P3P policy! See
http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657
for more info."
Server: gws
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Alternate-Protocol: 80:quic,p=0.02
Accept-Ranges: none
Vary: Accept-Encoding
Transfer-Encoding: chunked

4a21
<!doctype html><html itemscope="" itemtype="http://schema.org/WebPage"
lang="fr"><head><meta content="/images/google_favicon_128.png"
itemprop="image"><title>Google</title><script>(function(){window.google={kEI:'xtbMVNfGBdfvaI27gIAP',kEXPI:'4011559,4020347,4020560,4021587,4021598,4022545,4023677,4024600,4025280,4026109,4027921,4028063,4028128,4028335,4028508,4028588,4028706,8300111,8500393,8501019,8501081,10200083,10200793,10200904',authuser:0,kSID:'xtbMVNfGBdfvaI27gIAP'};google.kHL='fr';}

[etc ...]

 Google"},"ovr":{},"pq":"","refoq":true,"scd":10,"sce":5,"stok":"vWi5ZMd1C9pQEBycfKKELJzIU-Y"},"d":{}};google.y.first.push(function(){if(google.med){google.med('init');google.initHistory();google.med('history');}});if(google.j&&google.j.en&&google.j.xi){window.setTimeout(google.j.xi,0);}
</script></div></body></html>
0


Ovs configuration:

ovs-vsctl show
08e628ea-ca98-4c9c-8149-00b7319dc101
    Bridge "br0"
        Port "internet2"
            Interface "internet2"
        Port "internet3"
            Interface "internet3"
        Port "gre0"
            Interface "gre0"
                type: gre
                options: {remote_ip="192.168.42.2"}
        Port "eth0"
            Interface "eth0"
        Port "br0"
            Interface "br0"
                type: internal
    ovs_version: "2.3.1"

RSPAN configuration:

ovs-vsctl add-port br0 gre0 \
    -- set interface gre0 type=gre options:remote_ip=192.168.42.2 \
    -- --id=@p get port gre0 \
    -- --id=@m create mirror name=m0 output-port=@p \
    -- set bridge br0 mirrors=@m


ovs-vsctl \
-- --id=@internet0 get port internet2 \
-- --id=@internet1 get port internet3 \
-- set mirror m0 select-dst-port=@internet0, at internet1 \
-- set mirror m0 select-src-port=@internet0, at internet1

ovs-vswitchd --version
ovs-vswitchd (Open vSwitch) 2.3.1
Compiled Jan 31 2015 12:49:22
OpenFlow versions 0x1:0x1


cat /proc/version
Linux version 3.16.0-4-amd64 (debian-kernel at lists.debian.org) (gcc version
4.8.3 (Debian 4.8.3-16) ) #1 SMP Debian 3.16.7-ckt2-1 (2014-12-08)

Regards,

Philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150131/7aaa7f39/attachment-0001.html>

From shettyg at nicira.com  Sat Jan 31 09:04:53 2015
From: shettyg at nicira.com (Gurucharan Shetty)
Date: Sat, 31 Jan 2015 09:04:53 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CABFtFw=Wsbd12OnyGwTnMYVeLv32kvuPQ+6cFGOZa1Why4YafA@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
 <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>
 <CAHbON5qrcxZ-mJRGUOi=5OyXWeWsv13bbxVXNX0pcYu4AhExYw@mail.gmail.com>
 <CABFtFwmQb3=XViEbLG2CFaXttV1G35FTcJThRdvPhGdpT0rk0A@mail.gmail.com>
 <CABFtFw=Wsbd12OnyGwTnMYVeLv32kvuPQ+6cFGOZa1Why4YafA@mail.gmail.com>
Message-ID: <CAHbON5p7X5dOiGsi3EFia3ktXtNO_ZamiiBX9WQOka7nV91xKQ@mail.gmail.com>

>
> So "ovs-docker del-port..." bug? I can look at it and fix it... thought I'll
> pass this by you...
del-port has always worked for me. With the information that you have
provided, it is not really possible for me to understand what is going
on. If you have a good reproduction case, I would appreciate it if you
spend a little time and provide a fix.

From a.n.chippa at gmail.com  Sat Jan 31 18:21:22 2015
From: a.n.chippa at gmail.com (Ashok Chippa)
Date: Sat, 31 Jan 2015 18:21:22 -0800
Subject: [ovs-discuss] ovs-docker question
In-Reply-To: <CAHbON5p7X5dOiGsi3EFia3ktXtNO_ZamiiBX9WQOka7nV91xKQ@mail.gmail.com>
References: <CABFtFwkYqykUYo2KJ4gdk5DSDQkraT_VnX1+qMwTTjgQKBT0hA@mail.gmail.com>
 <CABFtFwm=Og7fDu_ruU+xHdN9wfHr8G+h0o9E8GZOwtgj+QpBjg@mail.gmail.com>
 <894A2983-A05B-4D94-A979-B0624C3CB6C4@nicira.com>
 <CABFtFwkA52AwtUkwU-HqyeW3BZcznUrsSP-9=X4Am2d54rhFSg@mail.gmail.com>
 <CABFtFwk_+r-KMS5JSmfvYL-UFTj=M+mjLyqWdgu40y6EFBy=nw@mail.gmail.com>
 <CAHbON5qrcxZ-mJRGUOi=5OyXWeWsv13bbxVXNX0pcYu4AhExYw@mail.gmail.com>
 <CABFtFwmQb3=XViEbLG2CFaXttV1G35FTcJThRdvPhGdpT0rk0A@mail.gmail.com>
 <CABFtFw=Wsbd12OnyGwTnMYVeLv32kvuPQ+6cFGOZa1Why4YafA@mail.gmail.com>
 <CAHbON5p7X5dOiGsi3EFia3ktXtNO_ZamiiBX9WQOka7nV91xKQ@mail.gmail.com>
Message-ID: <CABFtFwm3HWEJijWMjHynaQSOy1SsgbHAJ33797NUhUMDFHohTg@mail.gmail.com>

Okay, will do, thanks.

On Sat, Jan 31, 2015 at 9:04 AM, Gurucharan Shetty <shettyg at nicira.com>
wrote:

> >
> > So "ovs-docker del-port..." bug? I can look at it and fix it... thought
> I'll
> > pass this by you...
> del-port has always worked for me. With the information that you have
> provided, it is not really possible for me to understand what is going
> on. If you have a good reproduction case, I would appreciate it if you
> spend a little time and provide a fix.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150131/0f78182f/attachment.html>

From steven at gemelos.com  Fri Jan 30 11:58:37 2015
From: steven at gemelos.com (Steven Gemelos)
Date: Fri, 30 Jan 2015 11:58:37 -0800
Subject: [ovs-discuss] Problems with MPLS POP, GotoTable -> IP Match
Message-ID: <CAEE2P5DCazcjp7knA_VLpKgM7N=ug8_2SRQSUmfNoDQS4KFawQ@mail.gmail.com>

I have a 3 table switch...

Table 0:
dl_type=0x8847,actions=resubmit(1,)
dl_type=0x0800,actions=resubmit(2,)


Table 1:
dl_type=0x8847,mpls_bos=1,actions=POPMPLS,resubmit(2,)
dl_type-0x8847,mpls_bos=0,actions=output(2)

Table 2:
dl_type=0x800,nw_src=192.168.2.10,nw_dst=192.168.1.10,actions=PUSHMPLS,output(1)
dl_type=0x800,nw_src=192.168.1.10,nw_dst=192.168.2.10,actions=dl_dst=<DST_MAC_ADDR>,output(3)


Table 0 works as expected.

Table 1 works as expected.

Table 2 works as expected when the pipeline goes from Table0 to Table2.


Table 2 has an issue when the pipeline goes from Table0 to Table1 to
Table2.   I see the switch packet _in when the packet hits Table1 and the
POPMPLS rule is added to Table1.  I see the switch packet_in when the
packet hits Table2 and the IP packet rule is added.

The problem is, on subsequent packets matching the rule (dl_type=0x0800,
nw_dst =192.168.2.10) don't hit the rule - and keep sending packet_in to
the controller.

I can't figure out why the packets transitioning from Table1 to Table2
don't hit the rule.   I am using APPLY_ACTION so the MPLS POP should be
immediate in Table1.


Anyone have any ideas?

Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://openvswitch.org/pipermail/discuss/attachments/20150130/ca1c63bc/attachment-0001.html>

